(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{1028:function(e,a,t){e.exports=t(1364)},1355:function(e,a,t){},1363:function(e,a,t){},1364:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),r=t(55),o=t.n(r),i=t(1536),c=(t(689),t(650)),s=t(942),d=t(946),m=t(1566),u=t(1382);var p=l.a.createContext({toggleColorMode:()=>{}}),g=t(945),E=t(565);class b{constructor(e){this.socketManager=e,this.rawSocket=e.currentSocket,this.callbacks=[],this.joins=[],this.rawSocket.on("connect",()=>{var e;if((null===(e=this.rawSocket.io.opts.query)||void 0===e?void 0:e.r)&&!this.rawSocket.recovered){const e=()=>{for(const e of this.joins)console.debug("refreshing join",e),this.rawSocket.emit("join".concat(e.event),...e.params);this.rawSocket.off("ready",e)};for(const a of this.callbacks)this.rawSocket.off(a.event,a.callback),this.rawSocket.on(a.event,a.callback);this.rawSocket.on("ready",e)}})}on(e,a){return"ready"===e||"connect"===e?this.socketManager.onReady(a):(this.callbacks.push({event:e,callback:a}),this.rawSocket.on(e,a))}off(e,a){const t=this.callbacks.findIndex(t=>t.event===e&&t.callback===a);return this.callbacks.splice(t,1),this.rawSocket.off(e,a)}emit(e){for(var a=arguments.length,t=new Array(a>1?a-1:0),n=1;n<a;n++)t[n-1]=arguments[n];return e.startsWith("join")&&(this.joins.push({event:e.substring(4),params:t}),console.log("Joining",{event:e.substring(4),params:t})),this.rawSocket.emit(e,...t)}disconnect(){for(const e of this.joins)this.rawSocket.emit("leave".concat(e.event),...e.params);this.joins=[];for(const e of this.callbacks)this.rawSocket.off(e.event,e.callback);this.callbacks=[]}}class f{on(){}off(){}emit(){}disconnect(){}}const h={currentCompanyId:-1,currentUserId:-1,currentSocket:null,socketReady:!1,getSocket:function(e){var a=this;let t=null;if(localStorage.getItem("userId")&&(t=localStorage.getItem("userId")),!e&&!this.currentSocket)return new f;if(e&&"string"!==typeof e&&(e="".concat(e)),e!==this.currentCompanyId||t!==this.currentUserId){this.currentSocket&&(console.warn("closing old socket - company or user changed"),this.currentSocket.removeAllListeners(),this.currentSocket.disconnect(),this.currentSocket=null,this.currentCompanyId=null,this.currentUserId=null);let n=JSON.parse(localStorage.getItem("token"));if(!n)return new f;if(Object(E.a)(n))return console.warn("Expired token, reload after refresh"),setTimeout(()=>{window.location.reload()},1e3),new f;this.currentCompanyId=e,this.currentUserId=t,this.currentSocket=Object(g.a)("https://boostybackend-production.up.railway.app",{transports:["websocket"],pingTimeout:18e3,pingInterval:18e3,query:{token:n}}),this.currentSocket.io.on("reconnect_attempt",()=>{this.currentSocket.io.opts.query.r=1,n=JSON.parse(localStorage.getItem("token")),Object(E.a)(n)?(console.warn("Refreshing"),window.location.reload()):(console.warn("Using new token"),this.currentSocket.io.opts.query.token=n)}),this.currentSocket.on("disconnect",e=>{if(console.warn("socket disconnected because: ".concat(e)),e.startsWith("io server disconnect")){if(console.warn("tryng to reconnect",this.currentSocket),n=JSON.parse(localStorage.getItem("token")),Object(E.a)(n))return console.warn("Expired token - refreshing"),void window.location.reload();console.warn("Reconnecting using refreshed token"),this.currentSocket.io.opts.query.token=n,this.currentSocket.io.opts.query.r=1,this.currentSocket.connect()}}),this.currentSocket.on("connect",(function(){for(var e=arguments.length,a=new Array(e),t=0;t<e;t++)a[t]=arguments[t];console.warn("socket connected",a)})),this.currentSocket.onAny((function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),l=1;l<t;l++)n[l-1]=arguments[l];console.debug("Event: ",{socket:a.currentSocket,event:e,args:n})})),this.onReady(()=>{this.socketReady=!0})}return new b(this)},onReady:function(e){this.socketReady?e():this.currentSocket.once("ready",()=>{e()})},onConnect:function(e){this.onReady(e)}},y=Object(n.createContext)();var v=t(48),x=t(95),C=t(9),O=t(5),S=t(34),w=t.n(S),A=t(286),j=t(88),k=t(1632),T=t(1373),I=t(1377),N=t(1507),M=t(1538),P=t(1539),R=t(168),D=t(951),L=t(1523),F=t(868),q=t.n(F),W=t(867),B=t.n(W),z=t(870),U=t.n(z),H=t(869),_=t.n(H),V=t(1372),G=t(1510),K=t(1508),Y=t(1514),Q=t(1513),X=t(1378),J=t(837),Z=t.n(J),$=t(257),ee=t.n($),ae=t(851),te=t.n(ae),ne=t(652),le=t.n(ne),re=t(853),oe=t.n(re),ie=t(844),ce=t.n(ie),se=t(852),de=t.n(se),me=t(842),ue=t.n(me),pe=t(847),ge=t.n(pe),Ee=t(854),be=t.n(Ee),fe=t(845),he=t.n(fe),ye=t(846),ve=t.n(ye),xe=t(468),Ce=t.n(xe),Oe=t(848),Se=t.n(Oe),we=t(849),Ae=t.n(we),je=t(470),ke=t.n(je),Te=t(469),Ie=t.n(Te),Ne=t(850),Me=t.n(Ne),Pe=t(396),Re=t.n(Pe),De=t(649),Le=t(836);const Fe={pt:{translations:{signup:{title:"Registrarse",toasts:{success:"\xa1Usuario creado exitosamente! \xa1Inicie sesi\xf3n!",fail:"Error al crear usuario. Verifique los datos ingresados."},form:{name:"Nombre",email:"Correo electr\xf3nico",password:"Contrase\xf1a"},buttons:{submit:"Registrarse",login:"\xbfYa tienes una cuenta? \xa1Inicia sesi\xf3n!"}},login:{title:"Iniciar sesi\xf3n",form:{email:"Correo electr\xf3nico",password:"Contrase\xf1a"},buttons:{submit:"Iniciar sesi\xf3n",register:" \xa1Crea tu cuenta en solo unos clics!"}},plans:{form:{name:"Nombre",users:"Usuarios",connections:"Conexiones",campaigns:"Campa\xf1as",schedules:"Programaciones",enabled:"Habilitadas",disabled:"Deshabilitadas",clear:"Cancelar",delete:"Eliminar",save:"Guardar",yes:"S\xed",no:"No",money:"US$"}},companies:{title:"Registrar Empresa",form:{name:"Nombre de la Empresa",plan:"Plan",token:"Token",submit:"Registrar",success:"\xa1Empresa creada exitosamente!"}},auth:{toasts:{success:"\xa1Inicio de sesi\xf3n exitoso!"},token:"Token"},dashboard:{charts:{perDay:{title:"Atenciones de hoy: "}}},connections:{title:"Conexiones",toasts:{deleted:"\xa1Conexi\xf3n con WhatsApp eliminada exitosamente!"},confirmationModal:{deleteTitle:"Eliminar",deleteMessage:"\xbfEst\xe1s seguro? Esta acci\xf3n no se puede deshacer.",disconnectTitle:"Desconectar",disconnectMessage:"\xbfEst\xe1s seguro? Deber\xe1s volver a leer el c\xf3digo QR."},buttons:{add:"Agregar WhatsApp",disconnect:"desconectar",tryAgain:"Intentar de nuevo",qrcode:"C\xd3DIGO QR",newQr:"Nuevo C\xd3DIGO QR",connecting:"Conectando"},toolTips:{disconnected:{title:"Error al iniciar sesi\xf3n en WhatsApp",content:"Aseg\xfarate de que tu tel\xe9fono est\xe9 conectado a internet e int\xe9ntalo nuevamente, o solicita un nuevo c\xf3digo QR"},qrcode:{title:"Esperando lectura del c\xf3digo QR",content:"Haz clic en el bot\xf3n 'C\xd3DIGO QR' y lee el c\xf3digo QR con tu tel\xe9fono para iniciar sesi\xf3n"},connected:{title:"\xa1Conexi\xf3n establecida!"},timeout:{title:"Se perdi\xf3 la conexi\xf3n con el tel\xe9fono",content:"Aseg\xfarate de que tu tel\xe9fono est\xe9 conectado a internet y WhatsApp est\xe9 abierto, o haz clic en el bot\xf3n 'Desconectar' para obtener un nuevo c\xf3digo QR"}},table:{name:"Nombre",number:"N\xfamero",status:"Estado",lastUpdate:"\xdaltima actualizaci\xf3n",default:"Predeterminado",actions:"Acciones",session:"Sesi\xf3n"}},whatsappModal:{title:{add:"Agregar WhatsApp",edit:"Editar WhatsApp"},tabs:{general:"General",messages:"Mensajes",assessments:"Evaluaciones",integrations:"Integraciones",schedules:"Horario de expediente"},form:{name:"Nombre",default:"Predeterminado",sendIdQueue:"Fila",timeSendQueue:"Redireccionar a cola en X minutos",queueRedirection:"Redirecci\xf3n de cola",outOfHoursMessage:"Mensaje de fuera de expediente",queueRedirectionDesc:"Seleccione una fila para redirigir los contactos que no tienen cola",prompt:"Prompt",expiresTicket:"Cerrar chats abiertos despu\xe9s de X minutos",expiresInactiveMessage:"Mensaje de cierre por inactividad",greetingMessage:"Mensaje de saludo",complationMessage:"Mensaje de conclusi\xf3n",sendIdQueue:"Fila"},buttons:{okAdd:"Agregar",okEdit:"Guardar",cancel:"Cancelar"},success:"WhatsApp guardado con \xe9xito."},qrCode:{message:"Lea el c\xf3digo QR para iniciar sesi\xf3n"},contacts:{title:"Contactos",toasts:{deleted:"Contacto eliminado con \xe9xito!",deletedAll:"Todos los contactos eliminados con \xe9xito!"},searchPlaceholder:"Buscar...",confirmationModal:{deleteTitle:"Eliminar ",deleteAllTitle:"Eliminar Todos",importTitle:"Importar contactos",deleteMessage:"\xbfSeguro que desea eliminar este contacto? Se perder\xe1n todos los tickets relacionados.",deleteAllMessage:"\xbfSeguro que desea eliminar todos los contactos? Se perder\xe1n todos los tickets relacionados.",importMessage:"\xbfDesea importar todos los contactos del tel\xe9fono?"},confirmationModal:{importTitlte:"Importar contactos",importMessage:"Esta acci\xf3n importar\xe1 los contactos guardados en la agenda de WhatsApp. \xa1Algunos modelos pueden no permitir esta funcionalidad o puede estar restringida por la configuraci\xf3n de privacidad! Verifica el resultado en hasta 1 hora.",deleteTitle:"Eliminar",deleteMessage:"\xbfEst\xe1s seguro de que deseas eliminar este contacto? Todas las interacciones relacionadas se perder\xe1n."},buttons:{import:"Importar Contactos",importSheet:"Import. Excel",add:"Agregar Contacto",export:"Exportar Contactos",delete:"Eliminar Todos Contactos"},table:{name:"Nombre",whatsapp:"WhatsApp",email:"Correo electr\xf3nico",actions:"Acciones"}},queueIntegrationModal:{title:{add:"Agregar proyecto",edit:"Editar proyecto"},form:{id:"ID",type:"Tipo",name:"Nombre",projectName:"Nombre del Proyecto",language:"Lenguaje",jsonContent:"JsonContent",urlN8N:"URL",typebotSlug:"Typebot - Slug",typebotExpires:"Tiempo en minutos para expirar una conversaci\xf3n",typebotKeywordFinish:"Palabra para finalizar el ticket",typebotKeywordRestart:"Palabra para reiniciar el flujo",typebotRestartMessage:"Mensaje al reiniciar la conversaci\xf3n",typebotUnknownMessage:"Mensaje de opci\xf3n inv\xe1lida",typebotDelayMessage:"Intervalo (ms) entre mensajes"},buttons:{okAdd:"Agregar",okEdit:"Guardar",cancel:"Cancelar",test:"Probar Bot"},messages:{testSuccess:"Integraci\xf3n probada con \xe9xito!",addSuccess:"Integraci\xf3n agregada con \xe9xito.",editSuccess:"Integraci\xf3n editada con \xe9xito."}},sideMenu:{name:"Men\xfa Lateral Inicial",note:"Si est\xe1 habilitado, el men\xfa lateral se iniciar\xe1 cerrado",options:{enabled:"Abierto",disabled:"Cerrado"}},promptModal:{form:{name:"Nombre",prompt:"Prompt",voice:"Voz",max_tokens:"M\xe1ximo de Tokens en la respuesta",temperature:"Temperatura",apikey:"API Key",max_messages:"M\xe1ximo de mensajes en el Historial",voiceKey:"Clave de la API de Voz",voiceRegion:"Regi\xf3n de Voz"},success:"Prompt guardado con \xe9xito!",title:{add:"Agregar Prompt",edit:"Editar Prompt"},buttons:{okAdd:"Agregar",okEdit:"Guardar",cancel:"Cancelar"}},prompts:{title:"Prompts",table:{name:"Nombre",queue:"Sector/Cola",max_tokens:"M\xe1ximo Tokens Respuesta",actions:"Acciones"},confirmationModal:{deleteTitle:"Eliminar",deleteMessage:"\xbfEst\xe1 seguro? \xa1Esta acci\xf3n no se puede deshacer!"},buttons:{add:"Agregar Prompt"}},contactModal:{title:{add:"Agregar contacto",edit:"Editar contacto"},form:{mainInfo:"Datos del contacto",extraInfo:"Informaci\xf3n adicional",name:"Nombre",number:"N\xfamero de Whatsapp",email:"Email",extraName:"Nombre del campo",extraValue:"Valor",whatsapp:"Conexi\xf3n Origen: "},buttons:{addExtraInfo:"Agregar informaci\xf3n",okAdd:"Agregar",okEdit:"Guardar",cancel:"Cancelar"},success:"Contacto guardado con \xe9xito."},queueModal:{title:{add:"Agregar cola",edit:"Editar cola"},confirmationModal:{deleteTitle:"Excluir"},form:{name:"Nombre",color:"Color",greetingMessage:"Mensaje de saludo",complationMessage:"Mensaje de conclusi\xf3n",outOfHoursMessage:"Mensaje de fuera de horario",ratingMessage:"Mensaje de evaluaci\xf3n",token:"Token",orderQueue:"Orden de la cola (Bot)",integrationId:"Integraci\xf3n"},buttons:{okAdd:"Agregar",okEdit:"Guardar",cancel:"Cancelar",attach:"Adjuntar Archivo"}},userModal:{title:{add:"Agregar usuario",edit:"Editar usuario"},form:{name:"Nombre",email:"Email",password:"Contrase\xf1a",profile:"Perfil",whatsapp:"Conexi\xf3n Predeterminada",allTicket:"Ticket Sin Cola [Invisible]",allTicketEnabled:"Habilitado",allTicketDesabled:"Deshabilitado"},buttons:{okAdd:"Agregar",okEdit:"Guardar",cancel:"Cancelar"},success:"Usuario guardado con \xe9xito."},scheduleModal:{title:{add:"Nuevo Agendamiento",edit:"Editar Agendamiento"},form:{body:"Mensaje",contact:"Contacto",sendAt:"Fecha de Agendamiento",sentAt:"Fecha de Env\xedo"},buttons:{okAdd:"Agregar",okEdit:"Guardar",cancel:"Cancelar"},success:"Agendamiento guardado con \xe9xito."},tagModal:{title:{add:"Nueva Etiqueta",edit:"Editar Etiqueta"},form:{name:"Nombre",color:"Color"},buttons:{okAdd:"Agregar",okEdit:"Guardar",cancel:"Cancelar"},success:"Etiqueta guardada con \xe9xito."},chat:{noTicketMessage:"Seleccione un ticket para comenzar a conversar."},uploads:{titles:{titleUploadMsgDragDrop:"ARRASTRE Y SUELTE ARCHIVOS EN EL CAMPO ABAJO",titleFileList:"Lista de archivo(s)"}},ticketsManager:{buttons:{newTicket:"Nuevo"}},ticketsQueueSelect:{placeholder:"Colas"},tickets:{toasts:{deleted:"La atenci\xf3n en la que estaba ha sido eliminada."},notification:{message:"Mensaje de"},tabs:{open:{title:"Abiertas"},closed:{title:"Resueltos"},search:{title:"B\xfasqueda"}},search:{placeholder:"Buscar atenci\xf3n y mensajes"},buttons:{showAll:"Todos"}},transferTicketModal:{title:"Transferir Ticket",fieldLabel:"Escribe para buscar usuarios",fieldQueueLabel:"Transferir a cola",fieldQueuePlaceholder:"Seleccione una cola",noOptions:"No se encontraron usuarios con ese nombre",buttons:{ok:"Transferir",cancel:"Cancelar"}},ticketsList:{pendingHeader:"Pendiente",assignedHeader:"Atendiendo",noTicketsTitle:"\xa1Nada aqu\xed!",noTicketsMessage:"No se encontraron tickets con este estado o t\xe9rmino de b\xfasqueda",buttons:{accept:"Aceptar",closed:"Finalizar",reopen:"Reabrir"}},newTicketModal:{title:"Crear Ticket",fieldLabel:"Escribe para buscar el contacto",add:"Agregar",buttons:{ok:"Guardar",cancel:"Cancelar"}},mainDrawer:{listItems:{dashboard:"Tablero",connections:"Conexiones",tickets:"Chat",quickMessages:"Respuestas R\xe1pidas",contacts:"Contactos",queues:"Colas y Chatbot",tags:"Etiquetas",administration:"Administraci\xf3n",users:"Usuarios",settings:"Configuraciones",helps:"Ayuda",messagesAPI:"API",schedules:"Agendamientos",campaigns:"Campa\xf1as",annoucements:"Anuncios",chats:"Chat Interno",financeiro:"Financiero",files:"Lista de archivos",prompts:"Open.Ai",queueIntegration:"Integraciones"},appBar:{notRegister:"Sin notificaciones",user:{profile:"Perfil",logout:"Salir"}}},queueIntegration:{title:"Integraciones",table:{id:"ID",type:"Tipo",name:"Nombre",projectName:"Nombre del Proyecto",language:"Idioma",lastUpdate:"\xdaltima actualizaci\xf3n",actions:"Acciones"},buttons:{add:"Agregar Proyecto"},searchPlaceholder:"Buscar...",confirmationModal:{deleteTitle:"Eliminar",deleteMessage:"\xbfEst\xe1s seguro? \xa1Esta acci\xf3n no se puede deshacer! y se eliminar\xe1 de las colas y conexiones vinculadas"}},files:{title:"Lista de archivos",table:{name:"Nombre",contacts:"Contactos",actions:"Acci\xf3n"},toasts:{deleted:"\xa1Lista eliminada correctamente!",deletedAll:"\xa1Todas las listas se han eliminado correctamente!"},buttons:{add:"Agregar",deleteAll:"Eliminar Todos"},confirmationModal:{deleteTitle:"Eliminar",deleteAllTitle:"Eliminar Todos",deleteMessage:"\xbfEst\xe1s seguro de que deseas eliminar esta lista?",deleteAllMessage:"\xbfEst\xe1s seguro de que deseas eliminar todas las listas?"}},messagesAPI:{title:"API",textMessage:{number:"N\xfamero",body:"Mensaje",token:"Token registrado"},mediaMessage:{number:"N\xfamero",body:"Nombre del archivo",media:"Archivo",token:"Token registrado"}},notifications:{noTickets:"No hay notificaciones."},quickMessages:{title:"Respuestas R\xe1pidas",searchPlaceholder:"Buscar...",noAttachment:"Sin adjunto",confirmationModal:{deleteTitle:"Eliminaci\xf3n",deleteMessage:"\xa1Esta acci\xf3n es irreversible! \xbfQuieres continuar?"},buttons:{add:"Agregar",attach:"Adjuntar Archivo",cancel:"Cancelar",edit:"Editar"},toasts:{success:"\xa1Atajo agregado correctamente!",deleted:"\xa1Atajo eliminado correctamente!"},dialog:{title:"Mensaje R\xe1pido",shortcode:"Atajo",message:"Respuesta",save:"Guardar",cancel:"Cancelar",geral:"Permitir editar",add:"Agregar",edit:"Editar",visao:"Permitir vista",geral:"Global"},table:{shortcode:"Atajo",message:"Mensaje",actions:"Acciones",mediaName:"Nombre del Archivo",status:"Estado"}},messageVariablesPicker:{label:"Variables disponibles",vars:{contactFirstName:"Primer Nombre",contactName:"Nombre",greeting:"Saludo",protocolNumber:"Protocolo",date:"Fecha",hour:"Hora"}},contactLists:{title:"Listas de Contactos",table:{name:"Nombre",contacts:"Contactos",actions:"Acciones"},buttons:{add:"Nueva Lista"},dialog:{name:"Nombre",company:"Empresa",okEdit:"Editar",okAdd:"Agregar",add:"Agregar",edit:"Editar",cancel:"Cancelar"},confirmationModal:{deleteTitle:"Eliminar",deleteMessage:"Esta acci\xf3n no se puede deshacer."},toasts:{deleted:"Registro eliminado"}},contactListItems:{title:"Contactos",searchPlaceholder:"B\xfasqueda",buttons:{add:"Nuevo",lists:"Listas",import:"Importar"},dialog:{name:"Nombre",number:"N\xfamero",whatsapp:"Whatsapp",email:"Correo electr\xf3nico",okEdit:"Editar",okAdd:"Agregar",add:"Agregar",edit:"Editar",cancel:"Cancelar"},table:{name:"Nombre",number:"N\xfamero",whatsapp:"Whatsapp",email:"Correo electr\xf3nico",actions:"Acciones"},confirmationModal:{deleteTitle:"Eliminar",deleteMessage:"Esta acci\xf3n no se puede deshacer.",importMessage:"\xbfDesea importar los contactos de esta hoja de c\xe1lculo?",importTitlte:"Importar"},toasts:{deleted:"Registro eliminado"}},campaigns:{title:"Campa\xf1as",searchPlaceholder:"B\xfasqueda",buttons:{add:"Nueva Campa\xf1a",contactLists:"Listas de Contactos"},table:{name:"Nombre",whatsapp:"Conexi\xf3n",contactList:"Lista de Contactos",status:"Estado",scheduledAt:"Programada",completedAt:"Completada",confirmation:"Confirmaci\xf3n",actions:"Acciones"},dialog:{new:"Nueva Campa\xf1a",update:"Editar Campa\xf1a",readonly:"Solo Lectura",form:{name:"Nombre",message1:"Mensaje 1",message2:"Mensaje 2",message3:"Mensaje 3",message4:"Mensaje 4",message5:"Mensaje 5",confirmationMessage1:"Mensaje de Confirmaci\xf3n 1",confirmationMessage2:"Mensaje de Confirmaci\xf3n 2",confirmationMessage3:"Mensaje de Confirmaci\xf3n 3",confirmationMessage4:"Mensaje de Confirmaci\xf3n 4",confirmationMessage5:"Mensaje de Confirmaci\xf3n 5",messagePlaceholder:"Contenido del mensaje",whatsapp:"Conexi\xf3n",status:"Estado",scheduledAt:"Programada",confirmation:"Confirmaci\xf3n",contactList:"Lista de Contacto",tagList:"Lista de Etiquetas",fileList:"Lista de Archivos"},buttons:{add:"Agregar",edit:"Actualizar",okadd:"Ok",cancel:"Cancelar",restart:"Reiniciar Campa\xf1as",close:"Cerrar",attach:"Adjuntar Archivo"}},confirmationModal:{deleteTitle:"Eliminar",deleteMessage:"Esta acci\xf3n no se puede deshacer."},toasts:{success:"Operaci\xf3n realizada correctamente",cancel:"Campa\xf1a cancelada",restart:"Campa\xf1as reiniciadas",deleted:"Registro eliminado"}},announcements:{active:"Activo",inactive:"Inactivo",title:"Informativos",searchPlaceholder:"B\xfasqueda",buttons:{add:"Nuevo Informativo",contactLists:"Listas de Informativos"},table:{priority:"Prioridad",title:"T\xedtulo",text:"Texto",mediaName:"Archivo",status:"Estado",actions:"Acciones"},dialog:{edit:"Editar Informativo",add:"Nuevo Informativo",update:"Editar Informativo",readonly:"Solo Lectura",form:{priority:"Prioridad",title:"T\xedtulo",text:"Texto",mediaPath:"Archivo",status:"Estado"},buttons:{add:"Agregar",edit:"Actualizar",okadd:"Ok",cancel:"Cancelar",close:"Cerrar",attach:"Adjuntar Archivo"}},confirmationModal:{deleteTitle:"Eliminar",deleteMessage:"Esta acci\xf3n no se puede deshacer."},toasts:{success:"Operaci\xf3n realizada correctamente",deleted:"Registro eliminado"}},campaignsConfig:{title:"Configuraciones de Campa\xf1as"},queues:{title:"Colas y Chatbot",table:{id:"ID",name:"Nombre",color:"Color",greeting:"Mensaje de bienvenida",actions:"Acciones",orderQueue:"Orden de la cola (bot)"},buttons:{add:"Agregar cola"},confirmationModal:{deleteTitle:"Eliminar",deleteMessage:"\xbfEst\xe1s seguro? \xa1Esta acci\xf3n no se puede deshacer! Los tickets de esta cola seguir\xe1n existiendo pero ya no tendr\xe1n ninguna cola asignada."}},queueSelect:{inputLabel:"Colas"},users:{title:"Usuarios",table:{id:"ID",name:"Nombre",email:"Email",profile:"Perfil",actions:"Acciones"},buttons:{add:"Agregar usuario"},toasts:{deleted:"Usuario eliminado correctamente."},confirmationModal:{deleteTitle:"Eliminar",deleteMessage:"Todos los datos del usuario se perder\xe1n. Los tickets abiertos de este usuario se mover\xe1n a la cola."}},helps:{title:"Centro de Ayuda"},schedules:{title:"Agendamientos",confirmationModal:{deleteTitle:"\xbfEst\xe1s seguro que quieres eliminar este Agendamiento?",deleteMessage:"Esta acci\xf3n no se puede deshacer."},table:{contact:"Contacto",body:"Mensaje",sendAt:"Fecha de Agendamiento",sentAt:"Fecha de Env\xedo",status:"Estado",actions:"Acciones"},buttons:{add:"Nuevo Agendamiento"},toasts:{deleted:"Agendamiento eliminado correctamente."}},tags:{title:"Etiquetas",confirmationModal:{deleteTitle:"\xbfEst\xe1s seguro que quieres eliminar esta Etiqueta?",deleteMessage:"Esta acci\xf3n no se puede deshacer.",deleteAllMessage:"\xbfEst\xe1s seguro que quieres eliminar todas las Etiquetas?",deleteAllTitle:"Eliminar Todas"},table:{name:"Nombre",color:"Color",tickets:"Tickets Etiquetados",actions:"Acciones"},buttons:{add:"Nueva Etiqueta",deleteAll:"Eliminar Todas"},toasts:{deletedAll:"\xa1Todas las Etiquetas se han eliminado correctamente!",deleted:"Etiqueta eliminada correctamente."}},settings:{success:"Configuraciones guardadas correctamente.",title:"Configuraciones",settings:{userCreation:{name:"Creaci\xf3n de usuario",options:{enabled:"Habilitado",disabled:"Deshabilitado"}}}},messagesList:{header:{assignedTo:"Asignado a:",buttons:{return:"Volver",resolve:"Resolver",reopen:"Reabrir",accept:"Aceptar"}}},messagesInput:{placeholderOpen:"Escribe un mensaje",placeholderClosed:"Reabra o acepte este ticket para enviar un mensaje.",signMessage:"Firmar"},contactDrawer:{header:"Datos del contacto",buttons:{edit:"Editar contacto"},extraInfo:"Informaci\xf3n adicional"},fileModal:{title:{add:"Agregar lista de archivos",edit:"Editar lista de archivos"},buttons:{okAdd:"Guardar",okEdit:"Editar",cancel:"Cancelar",fileOptions:"Agregar archivo"},form:{name:"Nombre de la lista de archivos",message:"Detalles de la lista",fileOptions:"Lista de archivos",extraName:"Mensaje para enviar con archivo",extraValue:"Valor de la opci\xf3n"},success:"Lista de archivos guardada correctamente!"},ticketOptionsMenu:{schedule:"Programaci\xf3n",delete:"Eliminar",transfer:"Transferir",registerAppointment:"Observaciones del Contacto",appointmentsModal:{title:"Observaciones del Contacto",textarea:"Observaci\xf3n",placeholder:"Inserta aqu\xed la informaci\xf3n que deseas registrar"},confirmationModal:{title:"Eliminar el ticket",titleFrom:"del contacto ",message:"\xa1Atenci\xf3n! Todos los mensajes relacionados con el ticket se perder\xe1n."},buttons:{delete:"Eliminar",cancel:"Cancelar"}},confirmationModal:{buttons:{confirm:"Ok",cancel:"Cancelar"}},messageOptionsMenu:{delete:"Eliminar",reply:"Responder",edit:"Editar Mensaje",confirmationModal:{title:"\xbfEliminar mensaje?",message:"Esta acci\xf3n no se puede deshacer."}},backendErrors:{ERR_NO_OTHER_WHATSAPP:"Debe haber al menos un WhatsApp predeterminado.",ERR_NO_DEF_WAPP_FOUND:"No se encontr\xf3 ning\xfan WhatsApp predeterminado. Comprueba la p\xe1gina de conexiones.",ERR_WAPP_NOT_INITIALIZED:"Esta sesi\xf3n de WhatsApp no se ha inicializado. Comprueba la p\xe1gina de conexiones.",ERR_WAPP_CHECK_CONTACT:"No se pudo verificar el contacto de WhatsApp. Comprueba la p\xe1gina de conexiones",ERR_WAPP_INVALID_CONTACT:"Este no es un n\xfamero de WhatsApp v\xe1lido.",ERR_WAPP_DOWNLOAD_MEDIA:"No se pudo descargar medios de WhatsApp. Comprueba la p\xe1gina de conexiones.",ERR_INVALID_CREDENTIALS:"Error de autenticaci\xf3n. Por favor, int\xe9ntalo de nuevo.",ERR_SENDING_WAPP_MSG:"Error al enviar mensaje de WhatsApp. Comprueba la p\xe1gina de conexiones.",ERR_DELETE_WAPP_MSG:"No se pudo eliminar el mensaje de WhatsApp.",ERR_OTHER_OPEN_TICKET:"Ya hay un ticket abierto para este contacto.",ERR_SESSION_EXPIRED:"Sesi\xf3n expirada. Por favor, inicia sesi\xf3n.",ERR_USER_CREATION_DISABLED:"La creaci\xf3n de usuarios ha sido deshabilitada por el administrador.",ERR_NO_PERMISSION:"No tienes permiso para acceder a este recurso.",ERR_DUPLICATED_CONTACT:"Ya existe un contacto con este n\xfamero.",ERR_NO_SETTING_FOUND:"No se encontr\xf3 ninguna configuraci\xf3n con esta ID.",ERR_NO_CONTACT_FOUND:"No se encontr\xf3 ning\xfan contacto con esta ID.",ERR_NO_TICKET_FOUND:"No se encontr\xf3 ning\xfan ticket con esta ID.",ERR_NO_USER_FOUND:"No se encontr\xf3 ning\xfan usuario con esta ID.",ERR_NO_WAPP_FOUND:"No se encontr\xf3 ning\xfan WhatsApp con esta ID.",ERR_CREATING_MESSAGE:"Error al crear mensaje en la base de datos.",ERR_CREATING_TICKET:"Error al crear ticket en la base de datos.",ERR_FETCH_WAPP_MSG:"Error al obtener mensaje de WhatsApp, puede que sea muy antiguo.",ERR_QUEUE_COLOR_ALREADY_EXISTS:"Este color ya est\xe1 en uso, elige otro.",ERR_WAPP_GREETING_REQUIRED:"El saludo es obligatorio cuando hay m\xe1s de una cola."}}},en:{translations:{signup:{title:"Sign up",toasts:{success:"User created successfully! Please login!",fail:"Error creating user. Check the reported data."},form:{name:"Name",email:"Email",password:"Password"},buttons:{submit:"Register",login:"Already have an account? Log in!"}},login:{title:"Login",form:{email:"Email",password:"Password"},buttons:{submit:"Enter",register:"Don't have an account? Register!"}},auth:{toasts:{success:"Login successfully!"}},dashboard:{charts:{perDay:{title:"Tickets today: "}}},connections:{title:"Connections",toasts:{deleted:"WhatsApp connection deleted sucessfully!"},confirmationModal:{deleteTitle:"Delete",deleteMessage:"Are you sure? It cannot be reverted.",disconnectTitle:"Disconnect",disconnectMessage:"Are you sure? You'll need to read QR Code again."},buttons:{add:"Add WhatsApp",disconnect:"Disconnect",tryAgain:"Try Again",qrcode:"QR CODE",newQr:"New QR CODE",connecting:"Connectiing"},toolTips:{disconnected:{title:"Failed to start WhatsApp session",content:"Make sure your cell phone is connected to the internet and try again, or request a new QR Code"},qrcode:{title:"Waiting for QR Code read",content:"Click on 'QR CODE' button and read the QR Code with your cell phone to start session"},connected:{title:"Connection established"},timeout:{title:"Connection with cell phone has been lost",content:"Make sure your cell phone is connected to the internet and WhatsApp is open, or click on 'Disconnect' button to get a new QRcode"}},table:{name:"Name",status:"Status",lastUpdate:"Last Update",default:"Default",actions:"Actions",session:"Session"}},whatsappModal:{title:{add:"Add WhatsApp",edit:"Edit WhatsApp"},form:{name:"Name",default:"Default"},buttons:{okAdd:"Add",okEdit:"Save",cancel:"Cancel"},success:"WhatsApp saved successfully."},qrCode:{message:"Read QrCode to start the session"},contacts:{title:"Contacts",toasts:{deleted:"Contact deleted sucessfully!"},searchPlaceholder:"Search ...",confirmationModal:{deleteTitle:"Delete",importTitlte:"Import contacts",deleteMessage:"Are you sure you want to delete this contact? All related tickets will be lost.",importMessage:"Do you want to import all contacts from the phone?"},buttons:{import:"Import Contacts",add:"Add Contact"},table:{name:"Name",whatsapp:"WhatsApp",email:"Email",actions:"Actions"}},contactModal:{title:{add:"Add contact",edit:"Edit contact"},form:{mainInfo:"Contact details",extraInfo:"Additional information",name:"Name",number:"Whatsapp number",email:"Email",extraName:"Field name",extraValue:"Value"},buttons:{addExtraInfo:"Add information",okAdd:"Add",okEdit:"Save",cancel:"Cancel"},success:"Contact saved successfully."},queueModal:{title:{add:"Add queue",edit:"Edit queue"},form:{name:"Name",color:"Color",greetingMessage:"Greeting Message"},buttons:{okAdd:"Add",okEdit:"Save",cancel:"Cancel"}},userModal:{title:{add:"Add user",edit:"Edit user"},form:{name:"Name",email:"Email",password:"Password",profile:"Profile"},buttons:{okAdd:"Add",okEdit:"Save",cancel:"Cancel"},success:"User saved successfully."},chat:{noTicketMessage:"Select a ticket to start chatting."},ticketsManager:{buttons:{newTicket:"New"}},ticketsQueueSelect:{placeholder:"Queues"},tickets:{toasts:{deleted:"The ticket you were on has been deleted."},notification:{message:"Message from"},tabs:{open:{title:"Inbox"},closed:{title:"Resolved"},search:{title:"Search"}},search:{placeholder:"Search tickets and messages."},buttons:{showAll:"All"}},transferTicketModal:{title:"Transfer Ticket",fieldLabel:"Type to search for users",noOptions:"No user found with this name",buttons:{ok:"Transfer",cancel:"Cancel"}},ticketsList:{pendingHeader:"Queue",assignedHeader:"Working on",noTicketsTitle:"Nothing here!",noTicketsMessage:"No tickets found with this status or search term.",buttons:{accept:"Accept"}},newTicketModal:{title:"Create Ticket",fieldLabel:"Type to search for a contact",add:"Add",buttons:{ok:"Save",cancel:"Cancel"}},mainDrawer:{listItems:{dashboard:"Dashboard",connections:"Connections",tickets:"Tickets",contacts:"Contacts",queues:"Queues",administration:"Administration",users:"Users",settings:"Settings"},appBar:{user:{profile:"Profile",logout:"Logout"}}},notifications:{noTickets:"No notifications."},queues:{title:"Queues",table:{name:"Name",color:"Color",greeting:"Greeting message",actions:"Actions"},buttons:{add:"Add queue"},confirmationModal:{deleteTitle:"Delete",deleteMessage:"Are you sure? It cannot be reverted! Tickets in this queue will still exist, but will not have any queues assigned."}},queueSelect:{inputLabel:"Queues"},users:{title:"Users",table:{name:"Name",email:"Email",profile:"Profile",actions:"Actions"},buttons:{add:"Add user"},toasts:{deleted:"User deleted sucessfully."},confirmationModal:{deleteTitle:"Delete",deleteMessage:"All user data will be lost. Users' open tickets will be moved to queue."}},settings:{success:"Settings saved successfully.",title:"Settings",settings:{userCreation:{name:"User creation",options:{enabled:"Enabled",disabled:"Disabled"}}}},messagesList:{header:{assignedTo:"Assigned to:",buttons:{return:"Return",resolve:"Resolve",reopen:"Reopen",accept:"Accept"}}},messagesInput:{placeholderOpen:"Type a message",placeholderClosed:"Reopen or accept this ticket to send a message.",signMessage:"Sign"},contactDrawer:{header:"Contact details",buttons:{edit:"Edit contact"},extraInfo:"Other information"},ticketOptionsMenu:{delete:"Delete",transfer:"Transfer",confirmationModal:{title:"Delete ticket #",titleFrom:"from contact ",message:"Attention! All ticket's related messages will be lost."},buttons:{delete:"Delete",cancel:"Cancel"}},confirmationModal:{buttons:{confirm:"Ok",cancel:"Cancel"}},messageOptionsMenu:{delete:"Delete",reply:"Reply",confirmationModal:{title:"Delete message?",message:"This action cannot be reverted."}},backendErrors:{ERR_NO_OTHER_WHATSAPP:"There must be at lest one default WhatsApp connection.",ERR_NO_DEF_WAPP_FOUND:"No default WhatsApp found. Check connections page.",ERR_WAPP_NOT_INITIALIZED:"This WhatsApp session is not initialized. Check connections page.",ERR_WAPP_CHECK_CONTACT:"Could not check WhatsApp contact. Check connections page.",ERR_WAPP_INVALID_CONTACT:"This is not a valid whatsapp number.",ERR_WAPP_DOWNLOAD_MEDIA:"Could not download media from WhatsApp. Check connections page.",ERR_INVALID_CREDENTIALS:"Authentication error. Please try again.",ERR_SENDING_WAPP_MSG:"Error sending WhatsApp message. Check connections page.",ERR_DELETE_WAPP_MSG:"Couldn't delete message from WhatsApp.",ERR_OTHER_OPEN_TICKET:"There's already an open ticket for this contact.",ERR_SESSION_EXPIRED:"Session expired. Please login.",ERR_USER_CREATION_DISABLED:"User creation was disabled by administrator.",ERR_NO_PERMISSION:"You don't have permission to access this resource.",ERR_DUPLICATED_CONTACT:"A contact with this number already exists.",ERR_NO_SETTING_FOUND:"No setting found with this ID.",ERR_NO_CONTACT_FOUND:"No contact found with this ID.",ERR_NO_TICKET_FOUND:"No ticket found with this ID.",ERR_NO_USER_FOUND:"No user found with this ID.",ERR_NO_WAPP_FOUND:"No WhatsApp found with this ID.",ERR_CREATING_MESSAGE:"Error while creating message on database.",ERR_CREATING_TICKET:"Error while creating ticket on database.",ERR_FETCH_WAPP_MSG:"Error fetching the message in WhtasApp, maybe it is too old.",ERR_QUEUE_COLOR_ALREADY_EXISTS:"This color is already in use, pick another one.",ERR_WAPP_GREETING_REQUIRED:"Greeting message is required if there is more than one queue."}}},es:{translations:{signup:{title:"Registrarse",toasts:{success:"\xa1Usuario creado exitosamente! \xa1Inicie sesi\xf3n!",fail:"Error al crear usuario. Verifique los datos ingresados."},form:{name:"Nombre",email:"Correo electr\xf3nico",password:"Contrase\xf1a"},buttons:{submit:"Registrarse",login:"\xbfYa tienes una cuenta? \xa1Inicia sesi\xf3n!"}},login:{title:"Iniciar sesi\xf3n",form:{email:"Correo electr\xf3nico",password:"Contrase\xf1a"},buttons:{submit:"Iniciar sesi\xf3n",register:" \xa1Crea tu cuenta en solo unos clics!"}},plans:{form:{name:"Nombre",users:"Usuarios",connections:"Conexiones",campaigns:"Campa\xf1as",schedules:"Programaciones",enabled:"Habilitadas",disabled:"Deshabilitadas",clear:"Cancelar",delete:"Eliminar",save:"Guardar",yes:"S\xed",no:"No",money:"R$"}},companies:{title:"Registrar Empresa",form:{name:"Nombre de la Empresa",plan:"Plan",token:"Token",submit:"Registrar",success:"\xa1Empresa creada exitosamente!"}},auth:{toasts:{success:"\xa1Inicio de sesi\xf3n exitoso!"},token:"Token"},dashboard:{charts:{perDay:{title:"Atenciones de hoy: "}}},connections:{title:"Conexiones",toasts:{deleted:"\xa1Conexi\xf3n con WhatsApp eliminada exitosamente!"},confirmationModal:{deleteTitle:"Eliminar",deleteMessage:"\xbfEst\xe1s seguro? Esta acci\xf3n no se puede deshacer.",disconnectTitle:"Desconectar",disconnectMessage:"\xbfEst\xe1s seguro? Deber\xe1s volver a leer el c\xf3digo QR."},buttons:{add:"Agregar WhatsApp",disconnect:"desconectar",tryAgain:"Intentar de nuevo",qrcode:"C\xd3DIGO QR",newQr:"Nuevo C\xd3DIGO QR",connecting:"Conectando"},toolTips:{disconnected:{title:"Error al iniciar sesi\xf3n en WhatsApp",content:"Aseg\xfarate de que tu tel\xe9fono est\xe9 conectado a internet e int\xe9ntalo nuevamente, o solicita un nuevo c\xf3digo QR"},qrcode:{title:"Esperando lectura del c\xf3digo QR",content:"Haz clic en el bot\xf3n 'C\xd3DIGO QR' y lee el c\xf3digo QR con tu tel\xe9fono para iniciar sesi\xf3n"},connected:{title:"\xa1Conexi\xf3n establecida!"},timeout:{title:"Se perdi\xf3 la conexi\xf3n con el tel\xe9fono",content:"Aseg\xfarate de que tu tel\xe9fono est\xe9 conectado a internet y WhatsApp est\xe9 abierto, o haz clic en el bot\xf3n 'Desconectar' para obtener un nuevo c\xf3digo QR"}},table:{name:"Nombre",status:"Estado",lastUpdate:"\xdaltima actualizaci\xf3n",default:"Predeterminado",actions:"Acciones",session:"Sesi\xf3n"},whatsappModal:{title:{add:"Agregar WhatsApp",edit:"Editar WhatsApp"},tabs:{general:"General",messages:"Mensajes",assessments:"Evaluaciones",integrations:"Integraciones",schedules:"Horario de expediente"},form:{name:"Nombre",default:"Predeterminado",sendIdQueue:"Fila",timeSendQueue:"Redireccionar a cola en X minutos",queueRedirection:"Redirecci\xf3n de cola",outOfHoursMessage:"Mensaje de fuera de expediente",queueRedirectionDesc:"Seleccione una fila para redirigir los contactos que no tienen cola",prompt:"Prompt",expiresTicket:"Cerrar chats abiertos despu\xe9s de X minutos",expiresInactiveMessage:"Mensaje de cierre por inactividad",greetingMessage:"Mensaje de saludo",complationMessage:"Mensaje de conclusi\xf3n",sendIdQueue:"Fila"},buttons:{okAdd:"Agregar",okEdit:"Guardar",cancel:"Cancelar"},success:"WhatsApp guardado con \xe9xito."},qrCode:{message:"Lea el c\xf3digo QR para iniciar sesi\xf3n"},contacts:{title:"Contactos",toasts:{deleted:"Contacto eliminado con \xe9xito!",deletedAll:"Todos los contactos eliminados con \xe9xito!"},searchPlaceholder:"Buscar...",confirmationModal:{deleteTitle:"Eliminar ",deleteAllTitle:"Eliminar Todos",importTitle:"Importar contactos",deleteMessage:"\xbfSeguro que desea eliminar este contacto? Se perder\xe1n todos los tickets relacionados.",deleteAllMessage:"\xbfSeguro que desea eliminar todos los contactos? Se perder\xe1n todos los tickets relacionados.",importMessage:"\xbfDesea importar todos los contactos del tel\xe9fono?"},buttons:{import:"Importar Contactos",add:"Agregar Contacto",export:"Exportar Contactos",delete:"Eliminar Todos Contactos"},table:{name:"Nombre",whatsapp:"WhatsApp",email:"Correo electr\xf3nico",actions:"Acciones"}},queueIntegrationModal:{title:{add:"Agregar proyecto",edit:"Editar proyecto"},form:{id:"ID",type:"Tipo",name:"Nombre",projectName:"Nombre del Proyecto",language:"Lenguaje",jsonContent:"JsonContent",urlN8N:"URL",typebotSlug:"Typebot - Slug",typebotExpires:"Tiempo en minutos para expirar una conversaci\xf3n",typebotKeywordFinish:"Palabra para finalizar el ticket",typebotKeywordRestart:"Palabra para reiniciar el flujo",typebotRestartMessage:"Mensaje al reiniciar la conversaci\xf3n",typebotUnknownMessage:"Mensaje de opci\xf3n inv\xe1lida",typebotDelayMessage:"Intervalo (ms) entre mensajes"},buttons:{okAdd:"Agregar",okEdit:"Guardar",cancel:"Cancelar",test:"Probar Bot"},messages:{testSuccess:"Integraci\xf3n probada con \xe9xito!",addSuccess:"Integraci\xf3n agregada con \xe9xito.",editSuccess:"Integraci\xf3n editada con \xe9xito."}},sideMenu:{name:"Men\xfa Lateral Inicial",note:"Si est\xe1 habilitado, el men\xfa lateral se iniciar\xe1 cerrado",options:{enabled:"Abierto",disabled:"Cerrado"}},promptModal:{form:{name:"Nombre",prompt:"Prompt",voice:"Voz",max_tokens:"M\xe1ximo de Tokens en la respuesta",temperature:"Temperatura",apikey:"API Key",max_messages:"M\xe1ximo de mensajes en el Historial",voiceKey:"Clave de la API de Voz",voiceRegion:"Regi\xf3n de Voz"},success:"Prompt guardado con \xe9xito!",title:{add:"Agregar Prompt",edit:"Editar Prompt"},buttons:{okAdd:"Agregar",okEdit:"Guardar",cancel:"Cancelar"}},prompts:{title:"Prompts",table:{name:"Nombre",queue:"Sector/Cola",max_tokens:"M\xe1ximo Tokens Respuesta",actions:"Acciones"},confirmationModal:{deleteTitle:"Eliminar",deleteMessage:"\xbfEst\xe1 seguro? \xa1Esta acci\xf3n no se puede deshacer!"},buttons:{add:"Agregar Prompt"}},contactModal:{title:{add:"Agregar contacto",edit:"Editar contacto"},form:{mainInfo:"Datos del contacto",extraInfo:"Informaci\xf3n adicional",name:"Nombre",number:"N\xfamero de Whatsapp",email:"Email",extraName:"Nombre del campo",extraValue:"Valor",whatsapp:"Conexi\xf3n Origen: "},buttons:{addExtraInfo:"Agregar informaci\xf3n",okAdd:"Agregar",okEdit:"Guardar",cancel:"Cancelar"},success:"Contacto guardado con \xe9xito."},queueModal:{title:{add:"Agregar cola",edit:"Editar cola"},form:{name:"Nombre",color:"Color",greetingMessage:"Mensaje de saludo",complationMessage:"Mensaje de conclusi\xf3n",outOfHoursMessage:"Mensaje de fuera de horario",ratingMessage:"Mensaje de evaluaci\xf3n",token:"Token",orderQueue:"Orden de la cola (Bot)",integrationId:"Integraci\xf3n"},buttons:{okAdd:"Agregar",okEdit:"Guardar",cancel:"Cancelar"}},userModal:{title:{add:"Agregar usuario",edit:"Editar usuario"},form:{name:"Nombre",email:"Email",password:"Contrase\xf1a",profile:"Perfil",whatsapp:"Conexi\xf3n Predeterminada",allTicket:"Ticket Sin Cola [Invisible]",allTicketEnabled:"Habilitado",allTicketDesabled:"Deshabilitado"},buttons:{okAdd:"Agregar",okEdit:"Guardar",cancel:"Cancelar"},success:"Usuario guardado con \xe9xito."},scheduleModal:{title:{add:"Nuevo Agendamiento",edit:"Editar Agendamiento"},form:{body:"Mensaje",contact:"Contacto",sendAt:"Fecha de Agendamiento",sentAt:"Fecha de Env\xedo"},buttons:{okAdd:"Agregar",okEdit:"Guardar",cancel:"Cancelar"},success:"Agendamiento guardado con \xe9xito."},tagModal:{title:{add:"Nueva Etiqueta",edit:"Editar Etiqueta"},form:{name:"Nombre",color:"Color"},buttons:{okAdd:"Agregar",okEdit:"Guardar",cancel:"Cancelar"},success:"Etiqueta guardada con \xe9xito."},chat:{noTicketMessage:"Seleccione un ticket para comenzar a conversar."},uploads:{titles:{titleUploadMsgDragDrop:"ARRASTRE Y SUELTE ARCHIVOS EN EL CAMPO ABAJO",titleFileList:"Lista de archivo(s)"}},ticketsManager:{buttons:{newTicket:"Nuevo"}},ticketsQueueSelect:{placeholder:"Colas"},tickets:{toasts:{deleted:"La atenci\xf3n en la que estaba ha sido eliminada."},notification:{message:"Mensaje de"},tabs:{open:{title:"Abiertas"},closed:{title:"Resueltos"},search:{title:"B\xfasqueda"}},search:{placeholder:"Buscar atenci\xf3n y mensajes"},buttons:{showAll:"Todos"}},transferTicketModal:{title:"Transferir Ticket",fieldLabel:"Escribe para buscar usuarios",fieldQueueLabel:"Transferir a cola",fieldQueuePlaceholder:"Seleccione una cola",noOptions:"No se encontraron usuarios con ese nombre",buttons:{ok:"Transferir",cancel:"Cancelar"}},ticketsList:{pendingHeader:"Pendiente",assignedHeader:"Atendiendo",noTicketsTitle:"\xa1Nada aqu\xed!",noTicketsMessage:"No se encontraron tickets con este estado o t\xe9rmino de b\xfasqueda",buttons:{accept:"Aceptar",closed:"Finalizar",reopen:"Reabrir"}},newTicketModal:{title:"Crear Ticket",fieldLabel:"Escribe para buscar el contacto",add:"Agregar",buttons:{ok:"Guardar",cancel:"Cancelar"}},mainDrawer:{listItems:{dashboard:"Tablero",connections:"Conexiones",tickets:"Tickets",quickMessages:"Respuestas R\xe1pidas",contacts:"Contactos",queues:"Colas y Chatbot",tags:"Etiquetas",administration:"Administraci\xf3n",users:"Usuarios",settings:"Configuraciones",helps:"Ayuda",messagesAPI:"API",schedules:"Agendamientos",campaigns:"Campa\xf1as",annoucements:"Anuncios",chats:"Chat Interno",financeiro:"Financiero",files:"Lista de archivos",prompts:"Open.Ai",queueIntegration:"Integraciones"},appBar:{notRegister:"Sin notificaciones",user:{profile:"Perfil",logout:"Salir"}}},queueIntegration:{title:"Integraciones",table:{id:"ID",type:"Tipo",name:"Nombre",projectName:"Nombre del Proyecto",language:"Idioma",lastUpdate:"\xdaltima actualizaci\xf3n",actions:"Acciones"},buttons:{add:"Agregar Proyecto"},searchPlaceholder:"Buscar...",confirmationModal:{deleteTitle:"Eliminar",deleteMessage:"\xbfEst\xe1s seguro? \xa1Esta acci\xf3n no se puede deshacer! y se eliminar\xe1 de las colas y conexiones vinculadas"}},files:{title:"Lista de archivos",table:{name:"Nombre",contacts:"Contactos",actions:"Acci\xf3n"},toasts:{deleted:"\xa1Lista eliminada correctamente!",deletedAll:"\xa1Todas las listas se han eliminado correctamente!"},buttons:{add:"Agregar",deleteAll:"Eliminar Todos"},confirmationModal:{deleteTitle:"Eliminar",deleteAllTitle:"Eliminar Todos",deleteMessage:"\xbfEst\xe1s seguro de que deseas eliminar esta lista?",deleteAllMessage:"\xbfEst\xe1s seguro de que deseas eliminar todas las listas?"}},messagesAPI:{title:"API",textMessage:{number:"N\xfamero",body:"Mensaje",token:"Token registrado"},mediaMessage:{number:"N\xfamero",body:"Nombre del archivo",media:"Archivo",token:"Token registrado"}},notifications:{noTickets:"No hay notificaciones."},quickMessages:{title:"Respuestas R\xe1pidas",searchPlaceholder:"Buscar...",noAttachment:"Sin adjunto",confirmationModal:{deleteTitle:"Eliminaci\xf3n",deleteMessage:"\xa1Esta acci\xf3n es irreversible! \xbfQuieres continuar?"},buttons:{add:"Agregar",attach:"Adjuntar Archivo",cancel:"Cancelar",edit:"Editar"},toasts:{success:"\xa1Atajo agregado correctamente!",deleted:"\xa1Atajo eliminado correctamente!"},dialog:{title:"Mensaje R\xe1pido",shortcode:"Atajo",message:"Respuesta",save:"Guardar",cancel:"Cancelar",geral:"Permitir editar",add:"Agregar",edit:"Editar",visao:"Permitir vista"},table:{shortcode:"Atajo",message:"Mensaje",actions:"Acciones",mediaName:"Nombre del Archivo",status:"Estado"}},messageVariablesPicker:{label:"Variables disponibles",vars:{contactFirstName:"Primer Nombre",contactName:"Nombre",greeting:"Saludo",protocolNumber:"Protocolo",date:"Fecha",hour:"Hora"}},contactLists:{title:"Listas de Contactos",table:{name:"Nombre",contacts:"Contactos",actions:"Acciones"},buttons:{add:"Nueva Lista"},dialog:{name:"Nombre",company:"Empresa",okEdit:"Editar",okAdd:"Agregar",add:"Agregar",edit:"Editar",cancel:"Cancelar"},confirmationModal:{deleteTitle:"Eliminar",deleteMessage:"Esta acci\xf3n no se puede deshacer."},toasts:{deleted:"Registro eliminado"}},contactListItems:{title:"Contactos",searchPlaceholder:"B\xfasqueda",buttons:{add:"Nuevo",lists:"Listas",import:"Importar"},dialog:{name:"Nombre",number:"N\xfamero",whatsapp:"Whatsapp",email:"Correo electr\xf3nico",okEdit:"Editar",okAdd:"Agregar",add:"Agregar",edit:"Editar",cancel:"Cancelar"},table:{name:"Nombre",number:"N\xfamero",whatsapp:"Whatsapp",email:"Correo electr\xf3nico",actions:"Acciones"},confirmationModal:{deleteTitle:"Eliminar",deleteMessage:"Esta acci\xf3n no se puede deshacer.",importMessage:"\xbfDesea importar los contactos de esta hoja de c\xe1lculo?",importTitlte:"Importar"},toasts:{deleted:"Registro eliminado"}},campaigns:{title:"Campa\xf1as",searchPlaceholder:"B\xfasqueda",buttons:{add:"Nueva Campa\xf1a",contactLists:"Listas de Contactos"},table:{name:"Nombre",whatsapp:"Conexi\xf3n",contactList:"Lista de Contactos",status:"Estado",scheduledAt:"Programada",completedAt:"Completada",confirmation:"Confirmaci\xf3n",actions:"Acciones"},dialog:{new:"Nueva Campa\xf1a",update:"Editar Campa\xf1a",readonly:"Solo Lectura",form:{name:"Nombre",message1:"Mensaje 1",message2:"Mensaje 2",message3:"Mensaje 3",message4:"Mensaje 4",message5:"Mensaje 5",confirmationMessage1:"Mensaje de Confirmaci\xf3n 1",confirmationMessage2:"Mensaje de Confirmaci\xf3n 2",confirmationMessage3:"Mensaje de Confirmaci\xf3n 3",confirmationMessage4:"Mensaje de Confirmaci\xf3n 4",confirmationMessage5:"Mensaje de Confirmaci\xf3n 5",messagePlaceholder:"Contenido del mensaje",whatsapp:"Conexi\xf3n",status:"Estado",scheduledAt:"Programada",confirmation:"Confirmaci\xf3n",contactList:"Lista de Contacto",tagList:"Lista de Etiquetas",fileList:"Lista de Archivos"},buttons:{add:"Agregar",edit:"Actualizar",okadd:"Ok",cancel:"Cancelar",restart:"Reiniciar Campa\xf1as",close:"Cerrar",attach:"Adjuntar Archivo"}},confirmationModal:{deleteTitle:"Eliminar",deleteMessage:"Esta acci\xf3n no se puede deshacer."},toasts:{success:"Operaci\xf3n realizada correctamente",cancel:"Campa\xf1a cancelada",restart:"Campa\xf1as reiniciadas",deleted:"Registro eliminado"}},announcements:{active:"Activo",inactive:"Inactivo",title:"Informativos",searchPlaceholder:"B\xfasqueda",buttons:{add:"Nuevo Informativo",contactLists:"Listas de Informativos"},table:{priority:"Prioridad",title:"T\xedtulo",text:"Texto",mediaName:"Archivo",status:"Estado",actions:"Acciones"},dialog:{edit:"Editar Informativo",add:"Nuevo Informativo",update:"Editar Informativo",readonly:"Solo Lectura",form:{priority:"Prioridad",title:"T\xedtulo",text:"Texto",mediaPath:"Archivo",status:"Estado"},buttons:{add:"Agregar",edit:"Actualizar",okadd:"Ok",cancel:"Cancelar",close:"Cerrar",attach:"Adjuntar Archivo"}},confirmationModal:{deleteTitle:"Eliminar",deleteMessage:"Esta acci\xf3n no se puede deshacer."},toasts:{success:"Operaci\xf3n realizada correctamente",deleted:"Registro eliminado"}},campaignsConfig:{title:"Configuraciones de Campa\xf1as"},queues:{title:"Colas y Chatbot",table:{id:"ID",name:"Nombre",color:"Color",greeting:"Mensaje de bienvenida",actions:"Acciones",orderQueue:"Orden de la cola (bot)"},buttons:{add:"Agregar cola"},confirmationModal:{deleteTitle:"Eliminar",deleteMessage:"\xbfEst\xe1s seguro? \xa1Esta acci\xf3n no se puede deshacer! Los tickets de esta cola seguir\xe1n existiendo pero ya no tendr\xe1n ninguna cola asignada."}},queueSelect:{inputLabel:"Colas"},users:{title:"Usuarios",table:{id:"ID",name:"Nombre",email:"Email",profile:"Perfil",actions:"Acciones"},buttons:{add:"Agregar usuario"},toasts:{deleted:"Usuario eliminado correctamente."},confirmationModal:{deleteTitle:"Eliminar",deleteMessage:"Todos los datos del usuario se perder\xe1n. Los tickets abiertos de este usuario se mover\xe1n a la cola."}},helps:{title:"Centro de Ayuda"},schedules:{title:"Agendamientos",confirmationModal:{deleteTitle:"\xbfEst\xe1s seguro que quieres eliminar este Agendamiento?",deleteMessage:"Esta acci\xf3n no se puede deshacer."},table:{contact:"Contacto",body:"Mensaje",sendAt:"Fecha de Agendamiento",sentAt:"Fecha de Env\xedo",status:"Estado",actions:"Acciones"},buttons:{add:"Nuevo Agendamiento"},toasts:{deleted:"Agendamiento eliminado correctamente."}},tags:{title:"Etiquetas",confirmationModal:{deleteTitle:"\xbfEst\xe1s seguro que quieres eliminar esta Etiqueta?",deleteMessage:"Esta acci\xf3n no se puede deshacer.",deleteAllMessage:"\xbfEst\xe1s seguro que quieres eliminar todas las Etiquetas?",deleteAllTitle:"Eliminar Todas"},table:{name:"Nombre",color:"Color",tickets:"Tickets Etiquetados",actions:"Acciones"},buttons:{add:"Nueva Etiqueta",deleteAll:"Eliminar Todas"},toasts:{deletedAll:"\xa1Todas las Etiquetas se han eliminado correctamente!",deleted:"Etiqueta eliminada correctamente."}},settings:{success:"Configuraciones guardadas correctamente.",title:"Configuraciones",settings:{userCreation:{name:"Creaci\xf3n de usuario",options:{enabled:"Habilitado",disabled:"Deshabilitado"}}}},messagesList:{header:{assignedTo:"Asignado a:",buttons:{return:"Volver",resolve:"Resolver",reopen:"Reabrir",accept:"Aceptar"}}},messagesInput:{placeholderOpen:"Escribe un mensaje",placeholderClosed:"Reabra o acepte este ticket para enviar un mensaje.",signMessage:"Firmar"},contactDrawer:{header:"Datos del contacto",buttons:{edit:"Editar contacto"},extraInfo:"Informaci\xf3n adicional"},fileModal:{title:{add:"Agregar lista de archivos",edit:"Editar lista de archivos"},buttons:{okAdd:"Guardar",okEdit:"Editar",cancel:"Cancelar",fileOptions:"Agregar archivo"},form:{name:"Nombre de la lista de archivos",message:"Detalles de la lista",fileOptions:"Lista de archivos",extraName:"Mensaje para enviar con archivo",extraValue:"Valor de la opci\xf3n"},success:"Lista de archivos guardada correctamente!"},ticketOptionsMenu:{schedule:"Programaci\xf3n",delete:"Eliminar",transfer:"Transferir",registerAppointment:"Observaciones del Contacto",appointmentsModal:{title:"Observaciones del Contacto",textarea:"Observaci\xf3n",placeholder:"Inserta aqu\xed la informaci\xf3n que deseas registrar"},confirmationModal:{title:"Eliminar el ticket",titleFrom:"del contacto ",message:"\xa1Atenci\xf3n! Todos los mensajes relacionados con el ticket se perder\xe1n."},buttons:{delete:"Eliminar",cancel:"Cancelar"}},confirmationModal:{buttons:{confirm:"Ok",cancel:"Cancelar"}},messageOptionsMenu:{delete:"Eliminar",reply:"Responder",confirmationModal:{title:"\xbfEliminar mensaje?",message:"Esta acci\xf3n no se puede deshacer."}},backendErrors:{ERR_NO_OTHER_WHATSAPP:"Debe haber al menos un WhatsApp predeterminado.",ERR_NO_DEF_WAPP_FOUND:"No se encontr\xf3 ning\xfan WhatsApp predeterminado. Comprueba la p\xe1gina de conexiones.",ERR_WAPP_NOT_INITIALIZED:"Esta sesi\xf3n de WhatsApp no se ha inicializado. Comprueba la p\xe1gina de conexiones.",ERR_WAPP_CHECK_CONTACT:"No se pudo verificar el contacto de WhatsApp. Comprueba la p\xe1gina de conexiones",ERR_WAPP_INVALID_CONTACT:"Este no es un n\xfamero de WhatsApp v\xe1lido.",ERR_WAPP_DOWNLOAD_MEDIA:"No se pudo descargar medios de WhatsApp. Comprueba la p\xe1gina de conexiones.",ERR_INVALID_CREDENTIALS:"Error de autenticaci\xf3n. Por favor, int\xe9ntalo de nuevo.",ERR_SENDING_WAPP_MSG:"Error al enviar mensaje de WhatsApp. Comprueba la p\xe1gina de conexiones.",ERR_DELETE_WAPP_MSG:"No se pudo eliminar el mensaje de WhatsApp.",ERR_OTHER_OPEN_TICKET:"Ya hay un ticket abierto para este contacto.",ERR_SESSION_EXPIRED:"Sesi\xf3n expirada. Por favor, inicia sesi\xf3n.",ERR_USER_CREATION_DISABLED:"La creaci\xf3n de usuarios ha sido deshabilitada por el administrador.",ERR_NO_PERMISSION:"No tienes permiso para acceder a este recurso.",ERR_DUPLICATED_CONTACT:"Ya existe un contacto con este n\xfamero.",ERR_NO_SETTING_FOUND:"No se encontr\xf3 ninguna configuraci\xf3n con esta ID.",ERR_NO_CONTACT_FOUND:"No se encontr\xf3 ning\xfan contacto con esta ID.",ERR_NO_TICKET_FOUND:"No se encontr\xf3 ning\xfan ticket con esta ID.",ERR_NO_USER_FOUND:"No se encontr\xf3 ning\xfan usuario con esta ID.",ERR_NO_WAPP_FOUND:"No se encontr\xf3 ning\xfan WhatsApp con esta ID.",ERR_CREATING_MESSAGE:"Error al crear mensaje en la base de datos.",ERR_CREATING_TICKET:"Error al crear ticket en la base de datos.",ERR_FETCH_WAPP_MSG:"Error al obtener mensaje de WhatsApp, puede que sea muy antiguo.",ERR_QUEUE_COLOR_ALREADY_EXISTS:"Este color ya est\xe1 en uso, elige otro.",ERR_WAPP_GREETING_REQUIRED:"El saludo es obligatorio cuando hay m\xe1s de una cola."}}}}};De.a.use(Le.a).init({debug:!1,defaultNS:["translations"],fallbackLng:"pt",ns:["translations"],resources:Fe});var qe=t(29);var We=e=>{var a,t;const n=null===(a=e.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.error;return n?De.a.exists("backendErrors.".concat(n))?void C.b.error(De.a.t("backendErrors.".concat(n)),{toastId:n,autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!1,draggable:!0,progress:void 0,theme:"light"}):void C.b.error(n,{toastId:n,autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!1,draggable:!0,progress:void 0,theme:"light"}):Object(qe.isString)(e)?void C.b.error(e):void C.b.error("An error occurred!")},Be=t(275),ze=t.n(Be);const Ue=ze.a.create({baseURL:"https://boostybackend-production.up.railway.app",withCredentials:!0}),He=ze.a.create({baseURL:"https://boostybackend-production.up.railway.app"});var _e=Ue;const Ve=(e,a)=>{if("LOAD_WHATSAPPS"===a.type){return[...a.payload]}if("UPDATE_WHATSAPPS"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n?(e[n]=t,[...e]):[t,...e]}if("UPDATE_SESSION"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n?(e[n].status=t.status,e[n].updatedAt=t.updatedAt,e[n].qrcode=t.qrcode,e[n].retries=t.retries,[...e]):[...e]}if("DELETE_WHATSAPPS"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t);return-1!==n&&e.splice(n,1),[...e]}if("RESET"===a.type)return[]};var Ge=()=>{const[e,a]=Object(n.useReducer)(Ve,[]),[t,l]=Object(n.useState)(!0),r=Object(n.useContext)(y);return Object(n.useEffect)(()=>{l(!0);(async()=>{try{const{data:e}=await _e.get("/whatsapp/?session=0");a({type:"LOAD_WHATSAPPS",payload:e}),l(!1)}catch(e){l(!1),We(e)}})()},[]),Object(n.useEffect)(()=>{const e=localStorage.getItem("companyId"),t=r.getSocket(e);return t.on("company-".concat(e,"-whatsapp"),e=>{"update"===e.action&&a({type:"UPDATE_WHATSAPPS",payload:e.whatsapp})}),t.on("company-".concat(e,"-whatsapp"),e=>{"delete"===e.action&&a({type:"DELETE_WHATSAPPS",payload:e.whatsappId})}),t.on("company-".concat(e,"-whatsappSession"),e=>{"update"===e.action&&a({type:"UPDATE_SESSION",payload:e.session})}),()=>{t.disconnect()}},[r]),{whatsApps:e,loading:t}};const Ke=Object(n.createContext)(),Ye=e=>{let{children:a}=e;const{loading:t,whatsApps:n}=Ge();return l.a.createElement(Ke.Provider,{value:{whatsApps:n,loading:t}},a)};var Qe=()=>{const e=Object(x.useHistory)(),[a,t]=Object(n.useState)(!1),[l,r]=Object(n.useState)(!0),[o,i]=Object(n.useState)({});_e.interceptors.request.use(e=>{const a=localStorage.getItem("token");return a&&(e.headers.Authorization="Bearer ".concat(JSON.parse(a)),t(!0)),e},e=>{Promise.reject(e)}),_e.interceptors.response.use(e=>e,async e=>{var a,n;const l=e.config;if(403===(null===e||void 0===e||null===(a=e.response)||void 0===a?void 0:a.status)&&!l._retry){l._retry=!0;const{data:e}=await _e.post("/auth/refresh_token");return e&&(localStorage.setItem("token",JSON.stringify(e.token)),_e.defaults.headers.Authorization="Bearer ".concat(e.token)),_e(l)}return 401===(null===e||void 0===e||null===(n=e.response)||void 0===n?void 0:n.status)&&(localStorage.removeItem("token"),localStorage.removeItem("companyId"),_e.defaults.headers.Authorization=void 0,t(!1)),Promise.reject(e)});const c=Object(n.useContext)(y);Object(n.useEffect)(()=>{const e=localStorage.getItem("token");(async()=>{if(e)try{const{data:e}=await _e.post("/auth/refresh_token");_e.defaults.headers.Authorization="Bearer ".concat(e.token),t(!0),i(e.user)}catch(a){We(a)}r(!1)})()},[]),Object(n.useEffect)(()=>{const e=localStorage.getItem("companyId");if(e){const a=c.getSocket(e);return a.on("company-".concat(e,"-user"),e=>{"update"===e.action&&e.user.id===o.id&&i(e.user)}),()=>{a.disconnect()}}},[c,o]);return{isAuth:a,user:o,loading:l,handleLogin:async a=>{r(!0);try{const{data:c}=await _e.post("/auth/login",a),{user:{companyId:s,id:d,company:m}}=c;if(Object(qe.has)(m,"settings")&&Object(qe.isArray)(m.settings)){const e=m.settings.find(e=>"campaignsEnabled"===e.key);e&&"true"===e.value&&localStorage.setItem("cshow",null)}w.a.locale("pt-br");const u=c.user.company.dueDate,p=(w()(w()()).format("DD/MM/yyyy"),w()(u).format("DD/MM/yyyy"));var n=w()(u).diff(w()(w()()).format()),l=w()(w()().format()).isBefore(u),o=w.a.duration(n).asDays();!0===l?(localStorage.setItem("token",JSON.stringify(c.token)),localStorage.setItem("companyId",s),localStorage.setItem("userId",d),localStorage.setItem("companyDueDate",p),_e.defaults.headers.Authorization="Bearer ".concat(c.token),i(c.user),t(!0),C.b.success(De.a.t("auth.toasts.success")),Math.round(o)<5&&C.b.warn("Sua assinatura vence em ".concat(Math.round(o)," ").concat(1===Math.round(o)?"dia":"dias"," ")),e.push("/tickets"),r(!1)):(We("Opss! Sua assinatura venceu ".concat(p,".\nEntre em contato com o Suporte para mais informa\xe7\xf5es! ")),r(!1))}catch(c){We(c),r(!1)}},handleLogout:async()=>{r(!0);try{await _e.delete("/auth/logout"),t(!1),i({}),localStorage.removeItem("token"),localStorage.removeItem("companyId"),localStorage.removeItem("userId"),localStorage.removeItem("cshow"),_e.defaults.headers.Authorization=void 0,r(!1),e.push("/login")}catch(a){We(a),r(!1)}},getCurrentUserInfo:async()=>{try{const{data:e}=await _e.get("/auth/me");return e}catch(e){We(e)}}}};const Xe=Object(n.createContext)(),Je=e=>{let{children:a}=e;const{loading:t,user:n,isAuth:r,handleLogin:o,handleLogout:i}=Qe();return l.a.createElement(Xe.Provider,{value:{loading:t,user:n,isAuth:r,handleLogin:o,handleLogout:i}},a)};var Ze={user:{static:[]},admin:{static:["dashboard:view","drawer-admin-items:view","tickets-manager:showall","user-modal:editProfile","user-modal:editQueues","ticket-options:deleteTicket","contacts-page:deleteContact","connections-page:actionButtons","connections-page:addConnection","connections-page:editOrDeleteConnection"]},"no-unused-vars":"off"};const $e=e=>{let{role:a,perform:t,data:n,yes:l,no:r}=e;return((e,a,t)=>{const n=Ze[e];if(!n)return!1;const l=n.static;if(l&&l.includes(a))return!0;const r=n.dynamic;if(r){const e=r[a];return!!e&&e(t)}return!1})(a,t,n)?l():r()};$e.defaultProps={yes:()=>null,no:()=>null};var ea=t(838),aa=t.n(ea),ta=t(843),na=t.n(ta),la=t(1368),ra=t(960),oa=t(1509),ia=t(332),ca=t.n(ia),sa=t(69),da=t.n(sa);const ma=Object(A.a)({root:{display:"flex",flexDirection:"column",alignItems:"center",margin:"2rem"},inputContainer:{display:"flex",width:"100%",marginBottom:"1rem"},input:{flexGrow:1,marginRight:"1rem"},listContainer:{width:"100%",height:"100%",marginTop:"1rem",backgroundColor:"#f5f5f5",borderRadius:"5px"},list:{marginBottom:"5px"}});var ua=()=>{const e=ma(),[a,t]=Object(n.useState)(""),[r,o]=Object(n.useState)([]),[i,c]=Object(n.useState)(-1);Object(n.useEffect)(()=>{const e=localStorage.getItem("tasks");e&&o(JSON.parse(e))},[]),Object(n.useEffect)(()=>{localStorage.setItem("tasks",JSON.stringify(r))},[r]);return l.a.createElement("div",{className:e.root},l.a.createElement("div",{className:e.inputContainer},l.a.createElement(la.a,{className:e.input,label:"Nueva tarea",value:a,onChange:e=>{t(e.target.value)},variant:"outlined"}),l.a.createElement(ra.a,{variant:"contained",color:"primary",onClick:()=>{if(!a.trim())return;const e=new Date;if(i>=0){const n=[...r];n[i]={text:a,updatedAt:e,createdAt:n[i].createdAt},o(n),t(""),c(-1)}else o([...r,{text:a,createdAt:e,updatedAt:e}]),t("")}},i>=0?"Guardar":"Agregar")),l.a.createElement("div",{className:e.listContainer},l.a.createElement(N.a,null,r.map((a,n)=>l.a.createElement(V.a,{key:n,className:e.list},l.a.createElement(K.a,{primary:a.text,secondary:a.updatedAt.toLocaleString()}),l.a.createElement(oa.a,null,l.a.createElement(T.a,{onClick:()=>(e=>{t(r[e].text),c(e)})(n)},l.a.createElement(da.a,null)),l.a.createElement(T.a,{onClick:()=>(e=>{const a=[...r];a.splice(e,1),o(a)})(n)},l.a.createElement(ca.a,null))))))))},pa=t(1515),ga=t(1516),Ea=t(1517);var ba=()=>({getPlanList:async e=>{const{data:a}=await He.request({url:"/plans/list",method:"GET",params:e});return a},list:async e=>{const{data:a}=await _e.request({url:"/plans/all",method:"GET",params:e});return a},save:async e=>{const{data:a}=await _e.request({url:"/plans",method:"POST",data:e});return a},update:async e=>{const{data:a}=await _e.request({url:"/plans/".concat(e.id),method:"PUT",data:e});return a},finder:async e=>{const{data:a}=await _e.request({url:"/plans/".concat(e),method:"GET"});return a},remove:async e=>{const{data:a}=await _e.request({url:"/plans/".concat(e),method:"DELETE"});return a},getPlanCompany:async(e,a)=>{const{data:t}=await _e.request({url:"/companies/listPlan/".concat(a),method:"GET",params:e});return t},register:async e=>{const{data:a}=await _e.request({url:"/plans/register",method:"GET",params:e});return a}});var fa=()=>({getVersion:async()=>{const{data:e}=await _e.request({url:"/version",method:"GET"});return e}}),ha=t(1511),ya=t(1512);const va=Object(A.a)(e=>({ListSubheader:{height:26,marginTop:"-15px",marginBottom:"-10px"}}));function xa(e){const{icon:a,primary:t,to:n,className:r}=e,o=l.a.useMemo(()=>l.a.forwardRef((e,a)=>l.a.createElement(v.b,Object.assign({to:n,ref:a},e))),[n]);return l.a.createElement("li",null,l.a.createElement(V.a,{button:!0,dense:!0,component:o,className:r},a?l.a.createElement(G.a,null,a):null,l.a.createElement(K.a,{primary:t})))}const Ca=(e,a)=>{if("LOAD_CHATS"===a.type){const t=a.payload,n=[];return Object(qe.isArray)(t)&&t.forEach(a=>{const t=e.findIndex(e=>e.id===a.id);-1!==t?e[t]=a:n.push(a)}),[...e,...n]}if("UPDATE_CHATS"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n?(e[n]=t,[...e]):[t,...e]}if("DELETE_CHAT"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t);return-1!==n&&e.splice(n,1),[...e]}if("RESET"===a.type)return[];if("CHANGE_CHAT"===a.type){return e.map(e=>e.id===a.payload.chat.id?a.payload.chat:e)}};var Oa=e=>{va();const{drawerClose:a,collapsed:t}=e,{whatsApps:r}=Object(n.useContext)(Ke),{user:o,handleLogout:i}=Object(n.useContext)(Xe),[c,s]=Object(n.useState)(!1),[d,m]=Object(n.useState)(!1),[u,p]=Object(n.useState)(!1),[g,E]=Object(n.useState)(!1),[b,f]=Object(n.useState)(!1),[h,v]=Object(n.useState)(!1),C=Object(x.useHistory)(),[O,S]=Object(n.useState)(!1),[w,A]=Object(n.useState)(!1),[j,k]=Object(n.useState)(!1),[T,M]=Object(n.useState)(!0),[P,D]=Object(n.useState)(1),[L]=Object(n.useState)(""),[F,q]=Object(n.useReducer)(Ca,[]),{getPlanCompany:W}=ba(),[B,z]=Object(n.useState)(!1),{getVersion:U}=fa(),H=Object(n.useContext)(y);Object(n.useEffect)(()=>{!async function(){const e=await U();z(e.version)}()},[]),Object(n.useEffect)(()=>{q({type:"RESET"}),D(1)},[L]),Object(n.useEffect)(()=>{!async function(){const e=o.companyId,a=await W(void 0,e);p(a.plan.useCampaigns),E(a.plan.useKanban),f(a.plan.useOpenAi),v(a.plan.useIntegrations),S(a.plan.useSchedules),A(a.plan.useInternalChat),k(a.plan.useExternalApi)}()},[]),Object(n.useEffect)(()=>{const e=setTimeout(()=>{_()},500);return()=>clearTimeout(e)},[L,P]),Object(n.useEffect)(()=>{const e=localStorage.getItem("companyId"),a=H.getSocket(e);return a.on("company-".concat(e,"-chat"),e=>{"new-message"===e.action&&q({type:"CHANGE_CHAT",payload:e}),"update"===e.action&&q({type:"CHANGE_CHAT",payload:e})}),()=>{a.disconnect()}},[H]),Object(n.useEffect)(()=>{let e=0;if(F.length>0)for(let a of F)for(let t of a.users)t.userId===o.id&&(e+=t.unreads);M(!(e>0))},[F,o.id]),Object(n.useEffect)(()=>{localStorage.getItem("cshow")&&p(!0)},[]),Object(n.useEffect)(()=>{const e=setTimeout(()=>{if(r.length>0){r.filter(e=>"qrcode"===e.status||"PAIRING"===e.status||"DISCONNECTED"===e.status||"TIMEOUT"===e.status||"OPENING"===e.status).length>0?s(!0):s(!1)}},2e3);return()=>clearTimeout(e)},[r]);const _=async()=>{try{const{data:e}=await _e.get("/chats/",{params:{searchParam:L,pageNumber:P}});q({type:"LOAD_CHATS",payload:e.records})}catch(e){We(e)}};return l.a.createElement("div",{onClick:a},l.a.createElement($e,{role:o.profile,perform:"dashboard:view",yes:()=>l.a.createElement(xa,{to:"/",primary:"Dashboard",icon:l.a.createElement(Z.a,null)})}),l.a.createElement(xa,{to:"/tickets",primary:De.a.t("mainDrawer.listItems.tickets"),icon:l.a.createElement(ee.a,null)}),g&&l.a.createElement(xa,{to:"/kanban",primary:De.a.t("Kanban"),icon:l.a.createElement(aa.a,null)}),l.a.createElement(xa,{to:"/flowbuilders",primary:"Flujo de Conversaci\xf3n",icon:l.a.createElement(ha.a,null)}),l.a.createElement(xa,{to:"/flowdefault",primary:"Flujo Est\xe1ndar",icon:l.a.createElement(ya.a,null)}),l.a.createElement(xa,{to:"/quick-messages",primary:De.a.t("mainDrawer.listItems.quickMessages"),icon:l.a.createElement(ue.a,null)}),l.a.createElement(xa,{to:"/todolist",primary:De.a.t("Tareas"),icon:l.a.createElement(na.a,null)}),l.a.createElement(xa,{to:"/contacts",primary:De.a.t("mainDrawer.listItems.contacts"),icon:l.a.createElement(ce.a,null)}),l.a.createElement(xa,{to:"/schedules",primary:De.a.t("mainDrawer.listItems.schedules"),icon:l.a.createElement(he.a,null)}),l.a.createElement(xa,{to:"/tags",primary:De.a.t("mainDrawer.listItems.tags"),icon:l.a.createElement(ve.a,null)}),l.a.createElement(xa,{to:"/chats",primary:De.a.t("mainDrawer.listItems.chats"),icon:l.a.createElement(Q.a,{color:"secondary",variant:"dot",invisible:T},l.a.createElement(Re.a,null))}),l.a.createElement(xa,{to:"/helps",primary:De.a.t("mainDrawer.listItems.helps"),icon:l.a.createElement(ge.a,null)}),l.a.createElement($e,{role:o.profile,perform:"drawer-admin-items:view",yes:()=>l.a.createElement(l.a.Fragment,null,l.a.createElement(I.a,null),l.a.createElement(Y.a,{hidden:t,style:{position:"relative",fontSize:"17px",textAlign:"left",paddingLeft:20},inset:!0,color:"inherit"},De.a.t("mainDrawer.listItems.administration")),u&&l.a.createElement(l.a.Fragment,null,l.a.createElement(V.a,{button:!0,onClick:()=>m(e=>!e)},l.a.createElement(G.a,null,l.a.createElement(Ce.a,null)),l.a.createElement(K.a,{primary:De.a.t("mainDrawer.listItems.campaigns")}),d?l.a.createElement(Se.a,null):l.a.createElement(Ae.a,null)),l.a.createElement(X.a,{style:{paddingLeft:15},in:d,timeout:"auto",unmountOnExit:!0},l.a.createElement(N.a,{component:"div",disablePadding:!0},l.a.createElement(V.a,{onClick:()=>C.push("/campaigns"),button:!0},l.a.createElement(G.a,null,l.a.createElement(Ie.a,null)),l.a.createElement(K.a,{primary:"Listado"})),l.a.createElement(V.a,{onClick:()=>C.push("/contact-lists"),button:!0},l.a.createElement(G.a,null,l.a.createElement(ke.a,null)),l.a.createElement(K.a,{primary:"Listas de contactos"})),l.a.createElement(V.a,{onClick:()=>C.push("/campaigns-config"),button:!0},l.a.createElement(G.a,null,l.a.createElement(le.a,null)),l.a.createElement(K.a,{primary:"Configuraciones"}))))),o.super&&l.a.createElement(xa,{to:"/announcements",primary:De.a.t("mainDrawer.listItems.annoucements"),icon:l.a.createElement(Me.a,null)}),b&&l.a.createElement(xa,{to:"/prompts",primary:De.a.t("mainDrawer.listItems.prompts"),icon:l.a.createElement(pa.a,null)}),h&&l.a.createElement(xa,{to:"/queue-integration",primary:De.a.t("mainDrawer.listItems.queueIntegration"),icon:l.a.createElement(ga.a,null)}),l.a.createElement(xa,{to:"/connections",primary:De.a.t("mainDrawer.listItems.connections"),icon:l.a.createElement(Q.a,{badgeContent:c?"!":0,color:"error"},l.a.createElement(te.a,null))}),l.a.createElement(xa,{to:"/files",primary:De.a.t("mainDrawer.listItems.files"),icon:l.a.createElement(Ea.a,null)}),l.a.createElement(xa,{to:"/queues",primary:De.a.t("mainDrawer.listItems.queues"),icon:l.a.createElement(de.a,null)}),l.a.createElement(xa,{to:"/users",primary:De.a.t("mainDrawer.listItems.users"),icon:l.a.createElement(oe.a,null)}),j&&l.a.createElement(l.a.Fragment,null,l.a.createElement(xa,{to:"/messages-api",primary:De.a.t("mainDrawer.listItems.messagesAPI"),icon:l.a.createElement(be.a,null)})),l.a.createElement(xa,{to:"/settings",primary:De.a.t("mainDrawer.listItems.settings"),icon:l.a.createElement(le.a,null)}),!t&&l.a.createElement(l.a.Fragment,null,l.a.createElement(I.a,null),l.a.createElement(R.a,{style:{fontSize:"12px",padding:"10px",textAlign:"right",fontWeight:"bold"}},"".concat(B))))}))},Sa=t(552),wa=t(471),Aa=t(1370),ja=t(488),ka=t.n(ja),Ta=t(486),Ia=t(487),Na=t(1630),Ma=t(964),Pa=t(1535),Ra=t(569),Da=t(566),La=t(568),Fa=t(1381),qa=t(1617);const Wa=Object(n.createContext)(),Ba=e=>{let{children:a}=e;const[t,r]=Object(n.useState)({id:null,code:null}),o=Object(x.useHistory)();return Object(n.useEffect)(()=>{null!==t.id&&o.push("/tickets/".concat(t.uuid))},[t]),l.a.createElement(Wa.Provider,{value:{currentTicket:t,setCurrentTicket:r}},a)};var za=t(1518);const Ua=Object(A.a)(e=>({button:{position:"relative"},buttonProgress:{color:Ra.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}}));var Ha=e=>{let{loading:a,children:t,...n}=e;const r=Ua();return l.a.createElement(ra.a,Object.assign({className:r.button,disabled:a},n),t,a&&l.a.createElement(za.a,{size:24,className:r.buttonProgress}))},_a=t(855);const Va=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],Ga=["a","b","strong","em","u","code","del"],Ka=e=>{let{children:a,...t}=e;return l.a.createElement("a",Object.assign({},t,{target:"_blank",rel:"noopener noreferrer"}),a)};var Ya=e=>{let{children:a,message:t}=e,n=null===t||void 0===t?void 0:t.mediaType;console.log("type",n);const r=/\*(.*?)\*/g,o=/~(.*?)~/g;a&&r.test(a)&&(a=a.replace(r,"**$1**")),a&&o.test(a)&&(a=a.replace(o,"~~$1~~"));const i=l.a.useMemo(()=>{const e={disableParsingRawHTML:!0,forceInline:!0,overrides:{a:{component:Ka}}};return Va.forEach(a=>{Ga.includes(a)||(e.overrides[a]=e=>e.children||null)}),e},[]);if(!a)return null;const c=a.match(/(?<=FN:)(.*)(?=\n)|(?<=TEL;.*:)(.*)(?=\n)/g),s=c?c[0]:"",d=c?c[1]:"",m={backgroundColor:"rgb(74 222 128)",border:"1.5px solid green",borderRadius:"4px",width:"300px",display:"flex",alignItems:"center",padding:"5px 0"},u={marginLeft:"10px"},p={marginLeft:"10px"},g={margin:"2px"};return"contactMessage"===n?l.a.createElement("div",{style:m},l.a.createElement(Na.a,{style:u,src:t.contact.profilePicUrl,alt:"contact_image"}),l.a.createElement("div",{style:p},l.a.createElement("p",{style:g},l.a.createElement("strong",null,"Nome:")," ",s),l.a.createElement("p",{style:g},l.a.createElement("strong",null,"N\xfamero:")," ",d))):l.a.createElement(_a.a,{options:i},a)},Qa=t(654),Xa=t.n(Qa),Ja=t(404),Za=t.n(Ja),$a=t(1392);const et=Object($a.a)(e=>({tag:{padding:"1px 5px",borderRadius:"3px",fontSize:"0.8em",fontWeight:"bold",color:"#FFF",marginRight:"5px",whiteSpace:"nowrap"}}));var at=e=>{let{tag:a}=e;const t=et();return l.a.createElement("div",{className:t.tag,style:{backgroundColor:a.color,marginTop:"2px"}},a.name.toUpperCase())},tt=t(1519),nt=t(1522),lt=t(1526),rt=t(1527),ot=t(1528),it=t(1529),ct=t(1530),st=t(1531),dt=t(948);const mt=Object(A.a)(e=>({messageMedia:{objectFit:"cover",width:250,height:200,borderTopLeftRadius:8,borderTopRightRadius:8,borderBottomLeftRadius:8,borderBottomRightRadius:8}}));var ut=e=>{let{imageUrl:a}=e;const t=mt(),[r,o]=Object(n.useState)(!0),[i,c]=Object(n.useState)("");return Object(n.useEffect)(()=>{if(!a)return;(async()=>{const{data:e,headers:t}=await _e.get(a,{responseType:"blob"}),n=window.URL.createObjectURL(new Blob([e],{type:t["content-type"]}));c(n),o(!1)})()},[a]),l.a.createElement(dt.a,{className:t.messageMedia,smallSrcSet:r?a:i,medium:r?a:i,large:r?a:i,alt:"image"})},pt=t(1521),gt=t(1520);var Et=e=>{let{title:a,children:t,open:n,onClose:r,onConfirm:o}=e;return l.a.createElement(tt.a,{open:n,onClose:()=>r(!1),"aria-labelledby":"confirm-dialog"},l.a.createElement(gt.a,{id:"confirm-dialog"},a),l.a.createElement(pt.a,{dividers:!0},l.a.createElement(R.a,null,t)),l.a.createElement(nt.a,null,l.a.createElement(ra.a,{variant:"contained",onClick:()=>r(!1),color:"default"},De.a.t("confirmationModal.buttons.cancel")),l.a.createElement(ra.a,{variant:"contained",onClick:()=>{r(!1),o()},color:"secondary"},De.a.t("confirmationModal.buttons.confirm"))))};const bt=Object(n.createContext)(),ft=e=>{let{children:a}=e;const[t,r]=Object(n.useState)(null);return l.a.createElement(bt.Provider,{value:{replyingMessage:t,setReplyingMessage:r}},a)};var ht=t(572),yt=t(966),vt=t(472),xt=t.n(vt),Ct=t(129),Ot=t.n(Ct);const St=Object(A.a)(e=>({messagesList:{backgroundSize:"370px",backgroundImage:e.backgroundImage,display:"flex",justifyContent:"center",flexGrow:1,padding:"20px 20px 20px 20px",overflowY:"scroll","@media (max-width: 600px)":{paddingBottom:"90px"},...e.scrollbarStyles,minHeight:"150px",minWidth:"500px"},textContentItem:{overflowWrap:"break-word",padding:"3px 80px 6px 6px"},messageRight:{fontSize:"13px",marginLeft:20,marginTop:2,minWidth:100,maxWidth:510,height:"auto",display:"block",position:"relative",whiteSpace:"pre-wrap",alignSelf:"flex-end",borderRadius:8,paddingLeft:5,paddingRight:5,paddingTop:5,paddingBottom:0},inputmsg:{backgroundColor:"light"===e.mode?"#FFF":"#1c1c1c",display:"flex",width:"100%",margin:"10px 0px 10px 20px",borderRadius:"10px"},timestamp:{fontSize:11,position:"absolute",bottom:0,right:5,color:"#999"},titleBackground:{color:"#ffff",backgroundColor:"#00796b",marginLeft:"3px"},emojiBox:{position:"absolute",bottom:63,width:40,borderTop:"1px solid #e8e8e8",zIndex:1}}));var wt=e=>{let{open:a,onClose:t,onSave:r,message:o}=e;const i=St(),[c,s]=Object(n.useState)(null),[d,m]=Object(n.useState)(!1),[u,p]=Object(n.useState)(""),g=Object(n.useRef)(null),E=Object(n.useRef)(null);Object(n.useEffect)(()=>{a&&s(null===o||void 0===o?void 0:o.body)},[a,o]);return Object(n.useEffect)(()=>{if(a&&a&&E.current&&g.current){const e=E.current.getBoundingClientRect(),a=g.current.getBoundingClientRect(),t={top:a.height>e.height?0:e.height-a.height,left:e.width-a.width};g.current.style.top="".concat(t.top,"px"),g.current.style.left="".concat(t.left,"px")}},[a]),l.a.createElement(tt.a,{open:a,onClose:()=>t(!1),"aria-labelledby":"edit-message-dialog",PaperProps:{style:{zIndex:1}},ref:E},l.a.createElement(gt.a,{id:"edit-message-dialog",className:i.titleBackground},l.a.createElement(T.a,{edge:"start",color:"inherit",onClick:()=>t(!1),"aria-label":"close"},l.a.createElement(xt.a,null)),"Editar Mensagem"),l.a.createElement(pt.a,{style:{padding:"0px"}},l.a.createElement(Ma.a,null,l.a.createElement(Ma.a,{className:i.messagesList},l.a.createElement(Ma.a,{component:"div",className:"".concat(i.messageRight),style:{fontStyle:"italic",backgroundColor:"#d9fdd3"}},l.a.createElement(Ma.a,{className:i.textContentItem},l.a.createElement(Ma.a,{component:"div",style:{color:"#212B36"}},l.a.createElement(Ya,null,null===o||void 0===o?void 0:o.body))))),l.a.createElement(ht.a,{component:"form",style:{p:"2px 4px",display:"flex",alignItems:"center",borderRadius:"0px",backgroundColor:"#f0f2f5"}},l.a.createElement(Ma.a,{className:"".concat(i.inputmsg)},l.a.createElement(yt.a,{style:{padding:"15px 0px 15px 15px",flex:1},multiline:!0,maxRows:6,placeholder:"Search Google Maps",value:c,onChange:e=>s(e.target.value),inputProps:{"aria-label":"search google maps"}})),l.a.createElement(T.a,{color:"primary","aria-label":"directions",onClick:()=>(async e=>{if(e)try{const a={read:1,fromMe:!0,mediaUrl:"",body:e,quotedMsg:null};await _e.post("/messages/edit/".concat(o.id),a),t(!1)}catch(a){}})(c)},l.a.createElement(Ot.a,{style:{width:"35px",height:"35px",color:"#00A884"}}))))))};var At=e=>{let{message:a,menuOpen:t,handleClose:r,anchorEl:o}=e;const{setReplyingMessage:i}=Object(n.useContext)(bt),[c,s]=Object(n.useState)(!1),[d,m]=Object(n.useState)(!1),[u,p]=Object(n.useState)(!1);return l.a.createElement(l.a.Fragment,null,l.a.createElement(Et,{title:De.a.t("messageOptionsMenu.confirmationModal.title"),open:c,onClose:s,onConfirm:async()=>{try{await _e.delete("/messages/".concat(a.id))}catch(e){We(e)}}},De.a.t("messageOptionsMenu.confirmationModal.message")),l.a.createElement(wt,{title:De.a.t("messageOptionsMenu.editMessageModal.title"),open:d,onClose:m,onSave:async()=>{try{await _e.put("/messages/".concat(a.id))}catch(e){We(e)}},message:a},De.a.t("messageOptionsMenu.confirmationModal.message")),l.a.createElement(D.a,{anchorEl:o,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},open:t,onClose:r},a.fromMe&&l.a.createElement(L.a,{onClick:e=>{m(!0),p(a),r()}},De.a.t("messageOptionsMenu.edit")),a.fromMe&&l.a.createElement(L.a,{onClick:e=>{s(!0),r()}},De.a.t("messageOptionsMenu.delete")),l.a.createElement(L.a,{onClick:()=>{i(a),r()}},De.a.t("messageOptionsMenu.reply"))))},jt=t(856),kt=t.n(jt);var Tt=e=>{let{image:a,link:t,description:r}=e;Object(n.useEffect)(()=>{},[a,t,r]);const o=async()=>{try{window.open(t)}catch(e){We(e)}};return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{style:{minWidth:"250px"}},l.a.createElement("div",null,l.a.createElement("div",{style:{float:"left"}},l.a.createElement("img",{src:a,alt:"loc",onClick:o,style:{width:"100px"}})),r&&l.a.createElement("div",{style:{display:"flex",flexWrap:"wrap"}},l.a.createElement(R.a,{style:{marginTop:"12px",marginLeft:"15px",marginRight:"15px",float:"left"},variant:"subtitle1",color:"primary",gutterBottom:!0},l.a.createElement("div",{dangerouslySetInnerHTML:{__html:r.replace("\\n","<br />")}}))),l.a.createElement("div",{style:{display:"block",content:"",clear:"both"}}),l.a.createElement("div",null,l.a.createElement(I.a,null),l.a.createElement(ra.a,{fullWidth:!0,color:"primary",onClick:o,disabled:!t},"Visualizar")))))},It=t(857),Nt=t.n(It),Mt=t(1525),Pt=t(965),Rt=t(1524),Dt=t(1624),Lt=t(19),Ft=t(7),qt=t(45),Wt=t.n(qt);const Bt=Object(A.a)(e=>({root:{display:"flex",flexWrap:"wrap"},textField:{marginRight:e.spacing(1),flex:1},extraAttr:{display:"flex",justifyContent:"center",alignItems:"center"},btnWrapper:{position:"relative"},buttonProgress:{color:Ra.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}})),zt=Lt.b().shape({name:Lt.d().min(2,"Too Short!").max(50,"Too Long!").required("Required"),number:Lt.d().min(8,"Too Short!").max(50,"Too Long!"),email:Lt.d().email("Invalid email")});var Ut=e=>{let{open:a,onClose:t,contactId:r,initialValues:o,onSave:i}=e;const c=Bt(),s=Object(n.useRef)(!0),d={name:"",number:"",email:""},[m,u]=Object(n.useState)(d);Object(n.useEffect)(()=>()=>{s.current=!1},[]),Object(n.useEffect)(()=>{(async()=>{if(o&&u(e=>({...e,...o})),r)try{const{data:e}=await _e.get("/contacts/".concat(r));s.current&&(console.log(e),u(e))}catch(e){We(e)}})()},[r,a,o]);const p=()=>{t(),u(d)};return l.a.createElement("div",{className:c.root},l.a.createElement(tt.a,{open:a,onClose:p,maxWidth:"lg",scroll:"paper"},l.a.createElement(gt.a,{id:"form-dialog-title"},"".concat(r?De.a.t("contactModal.title.edit"):De.a.t("contactModal.title.add"))),l.a.createElement(Ft.e,{initialValues:m,enableReinitialize:!0,validationSchema:zt,onSubmit:(e,a)=>{setTimeout(()=>{(async e=>{try{if(r)await _e.put("/contacts/".concat(r),e),p();else{const{data:a}=await _e.post("/contacts",e);i&&i(a),p()}C.b.success(De.a.t("contactModal.success"))}catch(a){We(a)}})(e),a.setSubmitting(!1)},400)}},e=>{let{values:a,errors:t,touched:n,isSubmitting:o}=e;return l.a.createElement(Ft.d,null,l.a.createElement(pt.a,{dividers:!0},l.a.createElement(R.a,{variant:"subtitle1",gutterBottom:!0},De.a.t("contactModal.form.mainInfo")),l.a.createElement(Ft.b,{as:la.a,label:De.a.t("contactModal.form.name"),name:"name",autoFocus:!0,error:n.name&&Boolean(t.name),helperText:n.name&&t.name,variant:"outlined",margin:"dense",className:c.textField}),l.a.createElement(Ft.b,{as:la.a,label:De.a.t("contactModal.form.number"),name:"number",error:n.number&&Boolean(t.number),helperText:n.number&&t.number,placeholder:"5541998608485",variant:"outlined",margin:"dense"}),l.a.createElement("div",null,l.a.createElement(Ft.b,{as:la.a,label:De.a.t("contactModal.form.email"),name:"email",error:n.email&&Boolean(t.email),helperText:n.email&&t.email,placeholder:"Email address",fullWidth:!0,margin:"dense",variant:"outlined"})),l.a.createElement(R.a,{style:{marginBottom:8,marginTop:12},variant:"subtitle1"},De.a.t("contactModal.form.whatsapp")," ",(null===m||void 0===m?void 0:m.whatsapp)?null===m||void 0===m?void 0:m.whatsapp.name:""),l.a.createElement(R.a,{style:{marginBottom:8,marginTop:12},variant:"subtitle1"},De.a.t("contactModal.form.extraInfo")),l.a.createElement(Ft.c,{name:"extraInfo"},e=>{let{push:t,remove:n}=e;return l.a.createElement(l.a.Fragment,null,a.extraInfo&&a.extraInfo.length>0&&a.extraInfo.map((e,a)=>l.a.createElement("div",{className:c.extraAttr,key:"".concat(a,"-info")},l.a.createElement(Ft.b,{as:la.a,label:De.a.t("contactModal.form.extraName"),name:"extraInfo[".concat(a,"].name"),variant:"outlined",margin:"dense",className:c.textField}),l.a.createElement(Ft.b,{as:la.a,label:De.a.t("contactModal.form.extraValue"),name:"extraInfo[".concat(a,"].value"),variant:"outlined",margin:"dense",className:c.textField}),l.a.createElement(T.a,{size:"small",onClick:()=>n(a)},l.a.createElement(Wt.a,null)))),l.a.createElement("div",{className:c.extraAttr},l.a.createElement(ra.a,{style:{flex:1,marginTop:8},variant:"outlined",color:"primary",onClick:()=>t({name:"",value:""})},"+ ".concat(De.a.t("contactModal.buttons.addExtraInfo")))))})),l.a.createElement(nt.a,null,l.a.createElement(ra.a,{onClick:p,color:"secondary",disabled:o,variant:"outlined"},De.a.t("contactModal.buttons.cancel")),l.a.createElement(ra.a,{type:"submit",color:"primary",disabled:o,variant:"contained",className:c.btnWrapper},"".concat(r?De.a.t("contactModal.buttons.okEdit"):De.a.t("contactModal.buttons.okAdd")),o&&l.a.createElement(za.a,{size:24,className:c.buttonProgress}))))})))},Ht=t(1391);const _t=Object(A.a)(e=>({online:{fontSize:11,color:"#25d366"},offline:{fontSize:11,color:"#e1306c"}})),Vt=Object(Rt.a)({trim:!0});var Gt=e=>{var a;let{modalOpen:t,onClose:r,initialContact:o}=e;const i=_t(),[c,s]=Object(n.useState)([]),[d,m]=Object(n.useState)(!1),[u,p]=Object(n.useState)(""),[g,E]=Object(n.useState)(null),[b,f]=Object(n.useState)(""),[h,y]=Object(n.useState)(""),[v,x]=Object(n.useState)({}),[O,S]=Object(n.useState)([]),[w,A]=Object(n.useState)(!1),{user:j}=Object(n.useContext)(Xe),{companyId:k,whatsappId:T}=j,[I,N]=Object(n.useState)(!1),[M,P]=Object(n.useState)(""),[D,F]=Object(n.useState)("");Object(n.useEffect)(()=>{void 0!==(null===o||void 0===o?void 0:o.id)&&(s([o]),E(o))},[o]),Object(n.useEffect)(()=>{m(!0);const e=setTimeout(()=>{null!==T&&void 0!==T&&y(T),1===j.queues.length&&f(j.queues[0].id),(async()=>{_e.get("/whatsapp",{params:{companyId:k,session:0}}).then(e=>{let{data:a}=e;return S(a)})})(),m(!1)},500);return()=>clearTimeout(e)},[]),Object(n.useEffect)(()=>{if(!t||u.length<3)return void m(!1);m(!0);const e=setTimeout(()=>{(async()=>{try{const{data:e}=await _e.get("contacts",{params:{searchParam:u}});s(e.contacts),m(!1)}catch(e){m(!1),We(e)}})()},500);return()=>clearTimeout(e)},[u,t]);const q=()=>{r(),p(""),N(!1),P(""),F(""),E(null)},W=async e=>{if(e)if(""!==b||"admin"===j.profile){m(!0);try{const a=""!==b?b:null,t=""!==h?h:null,{data:n}=await _e.post("/tickets",{contactId:e,queueId:a,whatsappId:t,userId:j.id,status:"open"});r(n)}catch(a){const e=JSON.parse(a.response.data.error);e.userId!==(null===j||void 0===j?void 0:j.id)?(N(!0),P(e.user.name),F(e.queue.name)):(N(!1),P(""),F(""),m(!1),r(e))}m(!1)}else C.b.error("Selecione uma fila")},B=(e,a)=>{const t=Vt(e,a);return""!==a.inputValue&&!d&&u.length>=3&&t.push({name:"".concat(a.inputValue)}),t},z=e=>e.number?l.a.createElement(l.a.Fragment,null,l.a.createElement(R.a,{component:"span",style:{fontSize:14,marginLeft:"10px",display:"inline-flex",alignItems:"center",lineHeight:"2"}},e.name," - ",e.number)):"".concat(De.a.t("newTicketModal.add")," ").concat(e.name),U=e=>e.number?"".concat(e.name," - ").concat(e.number):"".concat(e.name);return l.a.createElement(l.a.Fragment,null,l.a.createElement(Ut,{open:w,initialValues:v,onClose:()=>{A(!1)},onSave:e=>{W(e.id)}}),l.a.createElement(tt.a,{open:t,onClose:q},l.a.createElement(gt.a,{id:"form-dialog-title"},De.a.t("newTicketModal.title")),l.a.createElement(pt.a,{dividers:!0},l.a.createElement(Mt.a,{style:{width:300},container:!0,spacing:2},void 0===o||void 0===o.id?l.a.createElement(Mt.a,{xs:12,item:!0},l.a.createElement(Dt.a,{fullWidth:!0,options:c,loading:d,clearOnBlur:!0,autoHighlight:!0,freeSolo:!0,clearOnEscape:!0,getOptionLabel:U,renderOption:z,filterOptions:B,onChange:(e,a)=>((e,a)=>{(null===a||void 0===a?void 0:a.number)?E(a):(null===a||void 0===a?void 0:a.name)&&(x({name:a.name}),A(!0))})(0,a),renderInput:e=>l.a.createElement(la.a,Object.assign({},e,{label:De.a.t("newTicketModal.fieldLabel"),variant:"outlined",autoFocus:!0,onChange:e=>p(e.target.value),onKeyPress:e=>{!d&&g&&"Enter"===e.key&&W(g.id)},InputProps:{...e.InputProps,endAdornment:l.a.createElement(l.a.Fragment,null,d?l.a.createElement(za.a,{color:"inherit",size:20}):null,e.InputProps.endAdornment)}}))})):null,l.a.createElement(Mt.a,{xs:12,item:!0},l.a.createElement(Ht.a,{required:!0,fullWidth:!0,displayEmpty:!0,variant:"outlined",value:b,onChange:e=>{f(e.target.value)},MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},getContentAnchorEl:null},renderValue:()=>{if(""===b)return"Selecione uma fila";return j.queues.find(e=>e.id===b).name}},(null===(a=j.queues)||void 0===a?void 0:a.length)>0&&j.queues.map((e,a)=>l.a.createElement(L.a,{dense:!0,key:a,value:e.id},l.a.createElement(K.a,{primary:e.name}))))),l.a.createElement(Mt.a,{xs:12,item:!0},l.a.createElement(Ht.a,{required:!0,fullWidth:!0,displayEmpty:!0,variant:"outlined",value:h,onChange:e=>{y(e.target.value)},MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},getContentAnchorEl:null},renderValue:()=>{if(""===h)return"Selecione uma Conex\xe3o";return O.find(e=>e.id===h).name}},(null===O||void 0===O?void 0:O.length)>0&&O.map((e,a)=>l.a.createElement(L.a,{dense:!0,key:a,value:e.id},l.a.createElement(K.a,{primary:l.a.createElement(l.a.Fragment,null,l.a.createElement(R.a,{component:"span",style:{fontSize:14,marginLeft:"10px",display:"inline-flex",alignItems:"center",lineHeight:"2"}},e.name," \xa0 ",l.a.createElement("p",{className:"CONNECTED"===e.status?i.online:i.offline},"(",e.status,")")))}))))))),l.a.createElement(nt.a,null,l.a.createElement(ra.a,{onClick:q,color:"secondary",disabled:d,variant:"outlined"},De.a.t("newTicketModal.buttons.cancel")),l.a.createElement(Ha,{variant:"contained",type:"button",disabled:!g,onClick:()=>W(g.id),color:"primary",loading:d},De.a.t("newTicketModal.buttons.ok")))))};var Kt=e=>{let{contact:a,numbers:t}=e;const r=Object(x.useHistory)(),{user:o}=Object(n.useContext)(Xe),[i,c]=Object(n.useState)({name:"",number:0,profilePicUrl:""}),[s,d]=Object(n.useState)(""),[m,u]=Object(n.useState)(!1),[p,g]=Object(n.useState)(!0),[E,b]=Object(n.useState)(!1),[f,h]=Object(n.useState)({});Object(n.useEffect)(()=>{const e=setTimeout(async()=>{try{let e={name:a,number:t.replace(/\D/g,""),email:""};const{data:n}=await _e.post("/contacts",e);n.alreadyExists?c(n.existingContact):c(e),n.invalido&&g(!1)}catch(e){We(e)}},1500);return()=>clearTimeout(e)},[a,t]);const y=async e=>{try{let a=i.id;if(!a){const e={name:i.name,number:i.number,email:""},{data:t}=await _e.post("/contacts",e);a=t.existingContact.id}const{data:t}=await _e.post("/tickets",{contactId:a,queueId:e,userId:o.id,status:"open"});r.push("/tickets/".concat(t.uuid))}catch(a){We(a)}};return l.a.createElement(l.a.Fragment,null,l.a.createElement(Pt.a,{open:m,onClose:()=>u(!1)},l.a.createElement("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"#FFF",padding:"20px",outline:"none"}},l.a.createElement("h2",null,"Selecione a Fila"),o.queues.map(e=>l.a.createElement("div",{key:e.id},l.a.createElement(ra.a,{onClick:()=>(async e=>{d(e),u(!1),""!==e&&await y(e)})(e.id)},e.name))))),l.a.createElement("div",{style:{minWidth:"250px"}},l.a.createElement(Gt,{modalOpen:E,initialContact:i,onClose:e=>{(e=>{b(!1),void 0!==e&&void 0!==e.uuid&&r.push("/tickets/".concat(e.uuid))})(e)}}),l.a.createElement(Mt.a,{container:!0,spacing:1},l.a.createElement(Mt.a,{item:!0,xs:1},l.a.createElement(Na.a,{src:i.profilePicUrl})),l.a.createElement(Mt.a,{item:!0,xs:9},l.a.createElement(R.a,{style:{marginTop:"12px",marginLeft:"10px"},variant:"subtitle1",color:"primary",gutterBottom:!0},i.name)),l.a.createElement(Mt.a,{item:!0,xs:9},l.a.createElement(R.a,{style:{marginLeft:"10px"},variant:"body2",color:"textSecondary",gutterBottom:!0},l.a.createElement("strong",null,"Nome:")," ",i.name),l.a.createElement(R.a,{style:{marginLeft:"10px"},variant:"body2",color:"textSecondary",gutterBottom:!0},l.a.createElement(R.a,{variant:"body2",color:"textSecondary",component:"span"},l.a.createElement("strong",null,"Telefone:")," ",i.number))),l.a.createElement(Mt.a,{item:!0,xs:12},l.a.createElement(I.a,null),l.a.createElement(ra.a,{fullWidth:!0,color:"primary",onClick:()=>{h(i),b(!0)},disabled:!i.number||!p},p?"Conversar (Novo Ticket)":"CONTATO FORA DO WHATSAPP")))))};const Yt=Object(A.a)(e=>({messagesListWrapper:{overflow:"hidden",position:"relative",display:"flex",flexDirection:"column",flexGrow:1,width:"100%",minWidth:300,minHeight:200},messagesList:{backgroundImage:"light"===e.mode?"url(".concat(kt.a,")"):"url(".concat(Nt.a,")"),display:"flex",flexDirection:"column",flexGrow:1,padding:"20px 20px 20px 20px",overflowY:"scroll",...e.scrollbarStyles},circleLoading:{color:Ra.a[500],position:"absolute",opacity:"70%",top:0,left:"50%",marginTop:12},messageLeft:{marginRight:20,marginTop:2,minWidth:100,maxWidth:600,height:"auto",display:"block",position:"relative","&:hover #messageActionsButton":{display:"flex",position:"absolute",top:0,right:0},whiteSpace:"pre-wrap",backgroundColor:"#ffffff",color:"#303030",alignSelf:"flex-start",borderTopLeftRadius:0,borderTopRightRadius:8,borderBottomLeftRadius:8,borderBottomRightRadius:8,paddingLeft:5,paddingRight:5,paddingTop:5,paddingBottom:0,boxShadow:"0 1px 1px #b3b3b3"},quotedContainerLeft:{margin:"-3px -80px 6px -6px",overflow:"hidden",backgroundColor:"#f0f0f0",borderRadius:"7.5px",display:"flex",position:"relative"},quotedMsg:{padding:10,maxWidth:300,height:"auto",display:"block",whiteSpace:"pre-wrap",overflow:"hidden"},quotedSideColorLeft:{flex:"none",width:"4px",backgroundColor:"#6bcbef"},messageRight:{marginLeft:20,marginTop:2,minWidth:100,maxWidth:600,height:"auto",display:"block",position:"relative","&:hover #messageActionsButton":{display:"flex",position:"absolute",top:0,right:0},whiteSpace:"pre-wrap",backgroundColor:"#dcf8c6",color:"#303030",alignSelf:"flex-end",borderTopLeftRadius:8,borderTopRightRadius:8,borderBottomLeftRadius:8,borderBottomRightRadius:0,paddingLeft:5,paddingRight:5,paddingTop:5,paddingBottom:0,boxShadow:"0 1px 1px #b3b3b3"},quotedContainerRight:{margin:"-3px -80px 6px -6px",overflowY:"hidden",backgroundColor:"#cfe9ba",borderRadius:"7.5px",display:"flex",position:"relative"},quotedMsgRight:{padding:10,maxWidth:300,height:"auto",whiteSpace:"pre-wrap"},quotedSideColorRight:{flex:"none",width:"4px",backgroundColor:"#35cd96"},messageActionsButton:{display:"none",position:"relative",color:"#999",zIndex:1,backgroundColor:"inherit",opacity:"90%","&:hover, &.Mui-focusVisible":{backgroundColor:"inherit"}},messageContactName:{display:"flex",color:"#6bcbef",fontWeight:500},textContentItem:{overflowWrap:"break-word",padding:"3px 80px 6px 6px"},textContentItemEdited:{overflowWrap:"break-word",padding:"3px 120px 6px 6px"},textContentItemDeleted:{fontStyle:"italic",color:"rgba(0, 0, 0, 0.36)",overflowWrap:"break-word",padding:"3px 80px 6px 6px"},messageMedia:{objectFit:"cover",width:250,height:200,borderTopLeftRadius:8,borderTopRightRadius:8,borderBottomLeftRadius:8,borderBottomRightRadius:8},timestamp:{fontSize:11,position:"absolute",bottom:0,right:5,color:"#999"},dailyTimestamp:{alignItems:"center",textAlign:"center",alignSelf:"center",width:"110px",backgroundColor:"#e1f3fb",margin:"10px",borderRadius:"10px",boxShadow:"0 1px 1px #b3b3b3"},dailyTimestampText:{color:"#808888",padding:8,alignSelf:"center",marginLeft:"0px"},ackIcons:{fontSize:18,verticalAlign:"middle",marginLeft:4},deletedIcon:{fontSize:18,verticalAlign:"middle",marginRight:4},ackDoneAllIcon:{color:Ra.a[500],fontSize:18,verticalAlign:"middle",marginLeft:4},downloadMedia:{display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"inherit",padding:10}})),Qt=(e,a)=>{if("LOAD_MESSAGES"===a.type){const t=a.payload,n=[];return t.forEach(a=>{const t=e.findIndex(e=>e.id===a.id);-1!==t?e[t]=a:n.push(a)}),[...n,...e]}if("ADD_MESSAGE"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n?e[n]=t:e.push(t),[...e]}if("UPDATE_MESSAGE"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n&&(e[n]=t),[...e]}if("RESET"===a.type)return[]};var Xt=e=>{let{ticket:a,ticketId:t,isGroup:r}=e;const o=Yt(),[i,c]=Object(n.useReducer)(Qt,[]),[s,d]=Object(n.useState)(1),[m,u]=Object(n.useState)(!1),[p,g]=Object(n.useState)(!1),E=Object(n.useRef)(),[b,f]=Object(n.useState)({}),[h,v]=Object(n.useState)(null),x=Boolean(h),C=Object(n.useRef)(t),S=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,w=Object(n.useContext)(y);Object(n.useEffect)(()=>{c({type:"RESET"}),d(1),C.current=t},[t]),Object(n.useEffect)(()=>{g(!0);const e=setTimeout(()=>{(async()=>{if(void 0!==t)try{const{data:e}=await _e.get("/messages/"+t,{params:{pageNumber:s}});C.current===t&&(c({type:"LOAD_MESSAGES",payload:e.messages}),u(e.hasMore),g(!1)),1===s&&e.messages.length>1&&A()}catch(e){g(!1),We(e)}})()},500);return()=>{clearTimeout(e)}},[s,t]),Object(n.useEffect)(()=>{const e=localStorage.getItem("companyId"),t=w.getSocket(e);return t.on("ready",()=>t.emit("joinChatBox","".concat(a.id))),t.on("company-".concat(e,"-appMessage"),e=>{"create"===e.action&&e.message.ticketId===C.current&&(c({type:"ADD_MESSAGE",payload:e.message}),A()),"update"===e.action&&e.message.ticketId===C.current&&c({type:"UPDATE_MESSAGE",payload:e.message})}),()=>{t.disconnect()}},[t,a,w]);const A=()=>{E.current&&E.current.scrollIntoView({})},j=(e,a)=>{v(e.currentTarget),f(a)},k=e=>{if("locationMessage"===e.mediaType&&e.body.split("|").length>=2){let a=e.body.split("|"),t=a[0],n=a[1],r=null;return a.length>2&&(r=e.body.split("|")[2]),l.a.createElement(Tt,{image:t,link:n,description:r})}if("contactMessage"===e.mediaType){let a=e.body.split("\n"),t=[],n="";for(let e=0;e<a.length;e++){let l=a[e].split(":");for(let e=0;e<l.length;e++)-1!==l[e].indexOf("+")&&t.push({number:l[e]}),-1!==l[e].indexOf("FN")&&(n=l[e+1])}return l.a.createElement(Kt,{contact:n,numbers:t[0].number})}return"image"===e.mediaType?l.a.createElement(ut,{imageUrl:e.mediaUrl}):"audio"===e.mediaType?S?(e.mediaUrl=e.mediaUrl.replace("ogg","mp3"),l.a.createElement("audio",{controls:!0},l.a.createElement("source",{src:e.mediaUrl,type:"audio/mp3"}))):l.a.createElement("audio",{controls:!0},l.a.createElement("source",{src:e.mediaUrl,type:"audio/ogg"})):"video"===e.mediaType?l.a.createElement("video",{className:o.messageMedia,src:e.mediaUrl,controls:!0}):l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:o.downloadMedia},l.a.createElement(ra.a,{startIcon:l.a.createElement(lt.a,null),color:"primary",variant:"outlined",target:"_blank",href:e.mediaUrl},"Download")),l.a.createElement(I.a,null))},N=(e,a)=>{if(0===a)return l.a.createElement("span",{className:o.dailyTimestamp,key:"timestamp-".concat(e.id)},l.a.createElement("div",{className:o.dailyTimestampText},Object(Sa.a)(Object(Ta.a)(i[a].createdAt),"dd/MM/yyyy")));if(a<i.length-1){let t=Object(Ta.a)(i[a].createdAt),n=Object(Ta.a)(i[a-1].createdAt);if(!Object(Ia.a)(t,n))return l.a.createElement("span",{className:o.dailyTimestamp,key:"timestamp-".concat(e.id)},l.a.createElement("div",{className:o.dailyTimestampText},Object(Sa.a)(Object(Ta.a)(i[a].createdAt),"dd/MM/yyyy")))}return a===i.length-1?l.a.createElement("div",{key:"ref-".concat(e.createdAt),ref:E,style:{float:"left",clear:"both"}}):void 0},M=(e,a)=>{if(a<i.length&&a>0){var t,n;let r=e.ticketId;null===(t=e.ticket)||void 0===t||null===(n=t.whatsapp)||void 0===n||n.name;if(r!==i[a-1].ticketId)return l.a.createElement("center",null,l.a.createElement("div",{className:o.ticketNunberClosed},"Conversa encerrada: ",Object(Sa.a)(Object(Ta.a)(i[a-1].createdAt),"dd/MM/yyyy HH:mm:ss")),l.a.createElement("div",{className:o.ticketNunberOpen},"Conversa iniciada: ",Object(Sa.a)(Object(Ta.a)(e.createdAt),"dd/MM/yyyy HH:mm:ss")))}},P=(e,a)=>{if(a<i.length&&a>0){if(i[a].fromMe!==i[a-1].fromMe)return l.a.createElement("span",{style:{marginTop:16},key:"divider-".concat(e.id)})}},R=e=>{var a,t,n,r,i;return l.a.createElement("div",{className:Object(O.a)(o.quotedContainerLeft,{[o.quotedContainerRight]:e.fromMe})},l.a.createElement("span",{className:Object(O.a)(o.quotedSideColorLeft,{[o.quotedSideColorRight]:null===(a=e.quotedMsg)||void 0===a?void 0:a.fromMe})}),l.a.createElement("div",{className:o.quotedMsg},!(null===(t=e.quotedMsg)||void 0===t?void 0:t.fromMe)&&l.a.createElement("span",{className:o.messageContactName},null===(n=e.quotedMsg)||void 0===n||null===(r=n.contact)||void 0===r?void 0:r.name),"audio"===e.quotedMsg.mediaType&&l.a.createElement("div",{className:o.downloadMedia},l.a.createElement("audio",{controls:!0},l.a.createElement("source",{src:e.quotedMsg.mediaUrl,type:"audio/ogg"}))),"video"===e.quotedMsg.mediaType&&l.a.createElement("video",{className:o.messageMedia,src:e.quotedMsg.mediaUrl,controls:!0}),"application"===e.quotedMsg.mediaType&&l.a.createElement("div",{className:o.downloadMedia},l.a.createElement(ra.a,{startIcon:l.a.createElement(lt.a,null),color:"primary",variant:"outlined",target:"_blank",href:e.quotedMsg.mediaUrl},"Download")),"image"===e.quotedMsg.mediaType&&l.a.createElement(ut,{imageUrl:e.quotedMsg.mediaUrl})||(null===(i=e.quotedMsg)||void 0===i?void 0:i.body)))};return l.a.createElement("div",{className:o.messagesListWrapper},l.a.createElement(At,{message:b,anchorEl:h,menuOpen:x,handleClose:e=>{v(null)}}),l.a.createElement("div",{id:"messagesList",className:o.messagesList,onScroll:e=>{if(!m)return;const{scrollTop:a}=e.currentTarget;0===a&&(document.getElementById("messagesList").scrollTop=1),p||a<50&&d(e=>e+1)}},i.length>0?(()=>{if(i.length>0){return i.map((e,a)=>{var t,n;return"call_log"===e.mediaType?l.a.createElement(l.a.Fragment,{key:e.id},N(e,a),M(e,a),P(e,a),l.a.createElement("div",{className:o.messageCenter},l.a.createElement(T.a,{variant:"contained",size:"small",id:"messageActionsButton",disabled:e.isDeleted,className:o.messageActionsButton,onClick:a=>j(a,e)},l.a.createElement(ct.a,null)),r&&l.a.createElement("span",{className:o.messageContactName},null===(t=e.contact)||void 0===t?void 0:t.name),l.a.createElement("div",null,l.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 17",width:"20",height:"17"},l.a.createElement("path",{fill:"#df3333",d:"M18.2 12.1c-1.5-1.8-5-2.7-8.2-2.7s-6.7 1-8.2 2.7c-.7.8-.3 2.3.2 2.8.2.2.3.3.5.3 1.4 0 3.6-.7 3.6-.7.5-.2.8-.5.8-1v-1.3c.7-1.2 5.4-1.2 6.4-.1l.1.1v1.3c0 .2.1.4.2.6.1.2.3.3.5.4 0 0 2.2.7 3.6.7.2 0 1.4-2 .5-3.1zM5.4 3.2l4.7 4.6 5.8-5.7-.9-.8L10.1 6 6.4 2.3h2.5V1H4.1v4.8h1.3V3.2z"}))," ",l.a.createElement("span",null,"Chamada de voz/v\xeddeo perdida \xe0s ",Object(Sa.a)(Object(Ta.a)(e.createdAt),"HH:mm"))))):e.fromMe?l.a.createElement(l.a.Fragment,{key:e.id},N(e,a),M(e,a),P(e,a),l.a.createElement("div",{className:o.messageRight},l.a.createElement(T.a,{variant:"contained",size:"small",id:"messageActionsButton",disabled:e.isDeleted,className:o.messageActionsButton,onClick:a=>j(a,e)},l.a.createElement(ct.a,null)),(e.mediaUrl||"locationMessage"===e.mediaType||"vcard"===e.mediaType||"contactMessage"===e.mediaType)&&k(e),l.a.createElement("div",{className:Object(O.a)(o.textContentItem,{[o.textContentItemDeleted]:e.isDeleted})},e.isDeleted&&l.a.createElement(st.a,{color:"disabled",fontSize:"small",className:o.deletedIcon}),e.quotedMsg&&R(e),l.a.createElement(Ya,null,e.body),l.a.createElement("span",{className:o.timestamp},Object(Sa.a)(Object(Ta.a)(e.createdAt),"HH:mm"),(e=>0===e.ack?l.a.createElement(rt.a,{fontSize:"small",className:o.ackIcons}):1===e.ack||2===e.ack?l.a.createElement(ot.a,{fontSize:"small",className:o.ackIcons}):3===e.ack?l.a.createElement(it.a,{fontSize:"small",className:o.ackIcons}):4===e.ack||5===e.ack?l.a.createElement(it.a,{fontSize:"small",className:o.ackDoneAllIcon,style:{color:"#0377FC"}}):void 0)(e))))):l.a.createElement(l.a.Fragment,{key:e.id},N(e,a),M(e,a),P(e,a),l.a.createElement("div",{className:o.messageLeft},l.a.createElement(T.a,{variant:"contained",size:"small",id:"messageActionsButton",disabled:e.isDeleted,className:o.messageActionsButton,onClick:a=>j(a,e)},l.a.createElement(ct.a,null)),r&&l.a.createElement("span",{className:o.messageContactName},null===(n=e.contact)||void 0===n?void 0:n.name),e.isDeleted&&l.a.createElement("div",null,l.a.createElement("span",{className:"message-deleted"},"Essa mensagem foi apagada pelo contato \xa0",l.a.createElement(st.a,{color:"error",fontSize:"small",className:o.deletedIcon}))),(e.mediaUrl||"locationMessage"===e.mediaType||"vcard"===e.mediaType||"contactMessage"===e.mediaType)&&k(e),l.a.createElement("div",{className:o.textContentItem},e.quotedMsg&&R(e),l.a.createElement(Ya,null,"locationMessage"===e.mediaType||"contactMessage"===e.mediaType?null:e.body),l.a.createElement("span",{className:o.timestamp},Object(Sa.a)(Object(Ta.a)(e.createdAt),"HH:mm")))))})}return l.a.createElement("div",null,"Diga ol\xe1 para seu novo contato!")})():[]),p&&l.a.createElement("div",null,l.a.createElement(za.a,{className:o.circleLoading})))},Jt=t(1532),Zt=t(1533),$t=t(1534);const en=Object(A.a)(e=>({ticketHeader:{display:"flex",backgroundColor:"#eee",flex:"none",borderBottom:"1px solid rgba(0, 0, 0, 0.12)"}}));var an=()=>{const e=en();return l.a.createElement(Jt.a,{square:!0,className:e.ticketHeader},l.a.createElement(Zt.a,{titleTypographyProps:{noWrap:!0},subheaderTypographyProps:{noWrap:!0},avatar:l.a.createElement($t.a,{animation:"wave",variant:"circle"},l.a.createElement(Na.a,{alt:"contact_image"})),title:l.a.createElement($t.a,{animation:"wave",width:80}),subheader:l.a.createElement($t.a,{animation:"wave",width:140})}))};const tn=Object(A.a)(e=>({ticketHeader:{display:"flex",backgroundColor:e.palette.tabHeaderBackground,flex:"none",borderBottom:"1px solid rgba(0, 0, 0, 0.12)",[e.breakpoints.down("sm")]:{flexWrap:"wrap"}}}));var nn=e=>{let{loading:a,children:t}=e;const n=tn();return l.a.createElement(l.a.Fragment,null,a?l.a.createElement(an,null):l.a.createElement(Jt.a,{square:!0,className:n.ticketHeader},t))};var ln=e=>{let{contact:a,ticket:t,onClick:r}=e;const{user:o}=t,[i,c]=Object(n.useState)(""),[s,d]=Object(n.useState)("");return Object(n.useEffect)(()=>{if(a&&(d(a.name),document.body.offsetWidth<600&&a.name.length>10)){const e=a.name.substring(0,10)+"...";d(e)}o&&a&&(c("".concat(De.a.t("messagesList.header.assignedTo")," ").concat(o.name)),document.body.offsetWidth<600&&c("".concat(o.name)))},[]),l.a.createElement(Zt.a,{onClick:r,style:{cursor:"pointer"},titleTypographyProps:{noWrap:!0},subheaderTypographyProps:{noWrap:!0},avatar:l.a.createElement(Na.a,{src:a.profilePicUrl,alt:"contact_image"}),title:"".concat(s," #").concat(t.id),subheader:t.user&&"".concat(i)})};const rn=Object(A.a)(e=>({root:{display:"flex",height:"100%",position:"relative",overflow:"hidden"},mainWrapper:{flex:1,height:"100%",display:"flex",flexDirection:"column",overflow:"hidden",borderTopLeftRadius:0,borderBottomLeftRadius:0,borderLeft:"0",marginRight:-320,transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},mainWrapperShift:{borderTopRightRadius:0,borderBottomRightRadius:0,transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginRight:0}}));function on(e){let{open:a,handleClose:t,ticketId:r}=e;const o=Object(x.useHistory)(),i=rn(),{user:c}=Object(n.useContext)(Xe),[,s]=Object(n.useState)(!1),[d,m]=Object(n.useState)(!0),[u,p]=Object(n.useState)({}),[g,E]=Object(n.useState)({}),b=Object(n.useContext)(y);Object(n.useEffect)(()=>{let e=null;return a&&(m(!0),e=setTimeout(()=>{(async()=>{try{const{data:e}=await _e.get("/tickets/"+r),{queueId:a}=e,{queues:t,profile:n}=c;if(void 0===t.find(e=>e.id===a)&&"admin"!==n)return C.b.error("Acesso n\xe3o permitido"),void o.push("/tickets");p(e.contact),E(e),m(!1)}catch(e){m(!1),We(e)}})()},500)),()=>{null!==e&&clearTimeout(e)}},[r,c,o,a]),Object(n.useEffect)(()=>{const e=localStorage.getItem("companyId");if(a){const a=b.getSocket(e);a.on("ready",()=>a.emit("joinChatBox","".concat(g.id))),a.on("company-".concat(e,"-ticket"),e=>{"update"===e.action&&e.ticket.id===g.id&&E(e.ticket),"delete"===e.action&&e.ticketId===g.id&&o.push("/tickets")}),a.on("company-".concat(e,"-contact"),e=>{"update"===e.action&&p(a=>{var t;return a.id===(null===(t=e.contact)||void 0===t?void 0:t.id)?{...a,...e.contact}:a})})}return()=>{0}},[r,g,o,a,b]);const f=()=>{s(!0)};return l.a.createElement(tt.a,{maxWidth:"md",onClose:t,open:a},l.a.createElement(nn,{loading:d},(()=>{if(void 0!==g.user)return l.a.createElement(ln,{contact:u,ticket:g,onClick:f})})()),l.a.createElement(ft,null,l.a.createElement(Ma.a,{className:i.root},l.a.createElement(Xt,{ticket:g,ticketId:g.id,isGroup:g.isGroup}))),l.a.createElement(nt.a,null,l.a.createElement(ra.a,{onClick:t,color:"primary"},"Fechar")))}const cn=Object(A.a)(e=>({ticket:{position:"relative"},pendingTicket:{cursor:"unset"},queueTag:{background:"#FCFCFC",color:"#000",marginRight:1,padding:1,fontWeight:"bold",paddingLeft:5,paddingRight:5,borderRadius:3,fontSize:"0.8em",whiteSpace:"nowrap"},noTicketsDiv:{display:"flex",height:"100px",margin:40,flexDirection:"column",alignItems:"center",justifyContent:"center"},newMessagesCount:{position:"absolute",alignSelf:"center",marginRight:8,marginLeft:"auto",top:"10px",left:"20px",borderRadius:0},noTicketsText:{textAlign:"center",color:"rgb(104, 121, 146)",fontSize:"14px",lineHeight:"1.4"},connectionTag:{background:"green",color:"#FFF",marginRight:1,padding:1,fontWeight:"bold",paddingLeft:5,paddingRight:5,borderRadius:3,fontSize:"0.8em",whiteSpace:"nowrap"},noTicketsTitle:{textAlign:"center",fontSize:"16px",fontWeight:"600",margin:"0px"},contactNameWrapper:{display:"flex",justifyContent:"space-between",marginLeft:"5px"},lastMessageTime:{justifySelf:"flex-end",textAlign:"right",position:"relative",top:-21,background:"#333333",color:"#ffffff",border:"1px solid #3a3b6c",borderRadius:5,padding:1,paddingLeft:5,paddingRight:5,fontSize:"0.9em"},closedBadge:{alignSelf:"center",justifySelf:"flex-end",marginRight:32,marginLeft:"auto"},contactLastMessage:{paddingRight:"0%",marginLeft:"5px"},badgeStyle:{color:"white",backgroundColor:Ra.a[500]},acceptButton:{position:"absolute",right:"108px"},acceptButton:{position:"absolute",left:"50%"},ticketQueueColor:{flex:"none",width:"8px",height:"100%",position:"absolute",top:"0%",left:"0%"},ticketInfo:{position:"relative",top:-13},secondaryContentSecond:{display:"flex",alignItems:"flex-start",flexWrap:"wrap",flexDirection:"row",alignContent:"flex-start"},ticketInfo1:{position:"relative",top:13,right:0},Radiusdot:{"& .MuiBadge-badge":{borderRadius:2,position:"inherit",height:16,margin:2,padding:3},"& .MuiBadge-anchorOriginTopRightRectangle":{transform:"scale(1) translate(0%, -40%)"}}}));var sn=e=>{var a,t,r,o,i,c,s,d,m,u,p;let{ticket:g}=e;const E=cn(),b=Object(x.useHistory)(),[f,h]=Object(n.useState)(!1),[y,v]=Object(n.useState)(null),[C,S]=Object(n.useState)(null),[w,A]=Object(n.useState)(null),[j,k]=Object(n.useState)([]),[T,N]=Object(n.useState)(null),[M,P]=Object(n.useState)(""),[D,L]=Object(n.useState)(!1),{ticketId:F}=Object(x.useParams)(),q=Object(n.useRef)(!0),{setCurrentTicket:W}=Object(n.useContext)(Wa),{user:B}=Object(n.useContext)(Xe),[z,U]=Object(n.useState)(!1),{profile:H}=B;Object(n.useEffect)(()=>{var e,a,t,n,l,r;g.userId&&g.user&&v(null===(n=g.user)||void 0===n||null===(l=n.name)||void 0===l?void 0:l.toUpperCase());(S(null===(e=g.queue)||void 0===e||null===(a=e.name)||void 0===a?void 0:a.toUpperCase()),A(null===(t=g.queue)||void 0===t?void 0:t.color),g.whatsappId&&g.whatsapp)&&N(null===(r=g.whatsapp.name)||void 0===r?void 0:r.toUpperCase());return k(null===g||void 0===g?void 0:g.tags),()=>{q.current=!1}},[]);Object(n.useEffect)(()=>{const e=()=>{const{labelText:a,labelColor:t}=(()=>{let e="",a="";if(!g.lastMessage)return"";const t=Object(Ta.a)(g.updatedAt),n=new Date-t,l=Math.floor(n/36e5),r=Math.floor(n/6e4);return r>=3&&r<=10?(a="(".concat(r," m atr\xe1s)"),e="green"):r>=30&&r<60?(a="(".concat(r," m atr\xe1s)"),e="Orange"):r>60&&l<24?(a="(".concat(l," h atr\xe1s)"),e="red"):l>=24&&(a="(".concat(Math.floor(l/24)," dias atr\xe1s)"),e="red"),{labelText:a,labelColor:e}})();P(l.a.createElement(Q.a,{className:E.lastInteractionLabel,style:{color:t}},a)),setTimeout(e,3e4)};e()},[g]);const _=async e=>{const a="{{ms}} *{{name}}*, mi nombre es *".concat(null===B||void 0===B?void 0:B.name,"* y ahora proceder\xe9 con tu atenci\xf3n."),t={read:1,fromMe:!0,mediaUrl:"",body:"*Mensaje autom\xe1tico:*\n".concat(a.trim())};try{await _e.post("/messages/".concat(e),t)}catch(n){We(n)}};return l.a.createElement(l.a.Fragment,{key:g.id},l.a.createElement(on,{open:D,handleClose:()=>L(!1),ticketId:g.id}),l.a.createElement(V.a,{dense:!0,button:!0,onClick:e=>{"pending"!==g.status&&(e=>{const a=Object(qa.a)(),{id:t,uuid:n}=e;W({id:t,uuid:n,code:a})})(g)},selected:F&&+F===g.id,className:Object(O.a)(E.ticket,{[E.pendingTicket]:"pending"===g.status})},l.a.createElement(Fa.a,{arrow:!0,placement:"right",title:(null===(a=g.queue)||void 0===a||null===(t=a.name)||void 0===t?void 0:t.toUpperCase())||"SIN COLA"},l.a.createElement("span",{style:{backgroundColor:(null===(r=g.queue)||void 0===r?void 0:r.color)||"#7C7C7C"},className:E.ticketQueueColor})),l.a.createElement(Pa.a,null,"pending"!==g.status?l.a.createElement(Na.a,{style:{marginTop:"-20px",marginLeft:"-3px",width:"55px",height:"55px",borderRadius:"10%"},src:null===g||void 0===g||null===(o=g.contact)||void 0===o?void 0:o.profilePicUrl}):l.a.createElement(Na.a,{style:{marginTop:"-30px",marginLeft:"0px",width:"50px",height:"50px",borderRadius:"10%"},src:null===g||void 0===g||null===(i=g.contact)||void 0===i?void 0:i.profilePicUrl})),l.a.createElement(K.a,{disableTypography:!0,primary:l.a.createElement("span",{className:E.contactNameWrapper},l.a.createElement(R.a,{noWrap:!0,component:"span",variant:"body2",color:"textPrimary"},l.a.createElement("strong",null,g.contact.name," ",M),l.a.createElement(oa.a,null,l.a.createElement(Ma.a,{className:E.ticketInfo1},l.a.createElement(l.a.Fragment,null,g.chatbot&&l.a.createElement(Fa.a,{title:"Chatbot"},l.a.createElement(Xa.a,{fontSize:"small",style:{color:Da.a[700],marginRight:5}}))))),"admin"===H&&l.a.createElement(Fa.a,{title:"Espiar Conversa"},l.a.createElement(Za.a,{onClick:()=>L(!0),fontSize:"small",style:{color:La.a[700],cursor:"pointer",marginLeft:10,verticalAlign:"middle"}})))),secondary:l.a.createElement("span",{className:E.contactNameWrapper},l.a.createElement(R.a,{className:E.contactLastMessage,noWrap:!0,component:"span",variant:"body2",color:"textSecondary"}," ",g.lastMessage&&g.lastMessage.includes("data:image/png;base64")?l.a.createElement(Ya,null," Localiza\xe7\xe3o"):l.a.createElement(Ya,null,g.lastMessage),g.lastMessage&&z?l.a.createElement(l.a.Fragment,null,g.lastMessage.includes("VCARD")?l.a.createElement(Ya,null,"Novo Contato recebido"):g.lastMessage.includes("data:image")?l.a.createElement(Ya,null,"Localiza\xe7\xe3o recebida"):l.a.createElement(Ya,null,g.lastMessage.slice(0,20)+"...")):l.a.createElement(Ya,null,"---"),l.a.createElement("span",{className:E.secondaryContentSecond},(null===g||void 0===g||null===(c=g.whatsapp)||void 0===c?void 0:c.name)?l.a.createElement(Q.a,{className:E.connectionTag},null===g||void 0===g||null===(s=g.whatsapp)||void 0===s||null===(d=s.name)||void 0===d?void 0:d.toUpperCase()):l.a.createElement("br",null),y?l.a.createElement(Q.a,{style:{backgroundColor:"#000000"},className:E.connectionTag},y):l.a.createElement("br",null),l.a.createElement(Q.a,{style:{backgroundColor:(null===(m=g.queue)||void 0===m?void 0:m.color)||"#7c7c7c"},className:E.connectionTag},(null===(u=g.queue)||void 0===u||null===(p=u.name)||void 0===p?void 0:p.toUpperCase())||"SIN COLA")),l.a.createElement("span",{style:{paddingTop:"2px"},className:E.secondaryContentSecond},null===j||void 0===j?void 0:j.map(e=>l.a.createElement(at,{tag:e,key:"ticket-contact-tag-".concat(g.id,"-").concat(e.id)})))),l.a.createElement(Q.a,{className:E.newMessagesCount,badgeContent:g.unreadMessages,classes:{badge:E.badgeStyle}}))}),l.a.createElement(oa.a,null,g.lastMessage&&l.a.createElement(l.a.Fragment,null,l.a.createElement(R.a,{className:E.lastMessageTime,component:"span",variant:"body2",color:"textSecondary"},Object(Ia.a)(Object(Ta.a)(g.updatedAt),new Date)?l.a.createElement(l.a.Fragment,null,Object(Sa.a)(Object(Ta.a)(g.updatedAt),"HH:mm")):l.a.createElement(l.a.Fragment,null,Object(Sa.a)(Object(Ta.a)(g.updatedAt),"dd/MM/yyyy"))),l.a.createElement("br",null))),l.a.createElement("span",{className:E.secondaryContentSecond},"pending"===g.status&&l.a.createElement(Ha,{style:{backgroundColor:"green",color:"white",padding:"0px",bottom:"17px",borderRadius:"0px",left:"8px",fontSize:"0.6rem"},variant:"contained",className:E.acceptButton,size:"small",loading:f,onClick:e=>(async e=>{h(!0);try{let t;await _e.put("/tickets/".concat(e),{status:"open",userId:null===B||void 0===B?void 0:B.id});try{const{data:e}=await _e.get("/settings/");t=e.filter(e=>"sendGreetingAccepted"===e.key)}catch(a){We(a)}"enabled"!==t[0].value||g.isGroup||_(g.id)}catch(a){h(!1),We(a)}q.current&&h(!1),b.push("/tickets/".concat(g.uuid))})(g.id)},De.a.t("ticketsList.buttons.accept")),"closed"!==g.status&&l.a.createElement(Ha,{style:{backgroundColor:"red",color:"white",padding:"0px",bottom:"0px",borderRadius:"0px",left:"8px",fontSize:"0.6rem"},variant:"contained",className:E.acceptButton,size:"small",loading:f,onClick:e=>(async e=>{k(null===g||void 0===g?void 0:g.tags),h(!0);try{var a;await _e.put("/tickets/".concat(e),{status:"closed",userId:null===B||void 0===B?void 0:B.id,queueId:null===g||void 0===g||null===(a=g.queue)||void 0===a?void 0:a.id,useIntegration:!1,promptId:null,integrationId:null})}catch(t){h(!1),We(t)}q.current&&h(!1),b.push("/tickets/")})(g.id)},De.a.t("ticketsList.buttons.closed")),"closed"===g.status&&l.a.createElement(Ha,{style:{backgroundColor:"red",color:"white",padding:"0px",bottom:"0px",borderRadius:"0px",left:"8px",fontSize:"0.6rem"},variant:"contained",className:E.acceptButton,size:"small",loading:f,onClick:e=>(async e=>{h(!0);try{var a;await _e.put("/tickets/".concat(e),{status:"open",userId:null===B||void 0===B?void 0:B.id,queueId:null===g||void 0===g||null===(a=g.queue)||void 0===a?void 0:a.id})}catch(t){h(!1),We(t)}q.current&&h(!1),b.push("/tickets/".concat(g.uuid))})(g.id)},De.a.t("ticketsList.buttons.reopen")))),l.a.createElement(I.a,{variant:"inset",component:"li"}))};var dn=e=>{let{searchParam:a,tags:t,users:l,pageNumber:r,status:o,date:i,updatedAt:c,showAll:s,queueIds:d,withUnreadMessages:m}=e;const[u,p]=Object(n.useState)(!0),[g,E]=Object(n.useState)(!1),[b,f]=Object(n.useState)([]);return Object(n.useEffect)(()=>{p(!0);const e=setTimeout(()=>{(async()=>{try{const{data:e}=await _e.get("/tickets",{params:{searchParam:a,pageNumber:r,tags:t,users:l,status:o,date:i,updatedAt:c,showAll:s,queueIds:d,withUnreadMessages:m}});f(e.tickets),E(e.hasMore),p(!1)}catch(e){p(!1),We(e)}})()},500);return()=>clearTimeout(e)},[a,t,l,r,o,i,c,s,d,m]),{tickets:b,loading:u,hasMore:g}},mn=t(863),un=t.n(mn);const pn=Object(A.a)(e=>({tabContainer:{overflowY:"auto",maxHeight:350,...e.scrollbarStyles},popoverPaper:{width:"100%",maxWidth:350,marginLeft:e.spacing(2),marginRight:e.spacing(1),[e.breakpoints.down("sm")]:{maxWidth:270}},noShadow:{boxShadow:"none !important"}}));var gn=e=>{const a=pn(),t=Object(x.useHistory)(),{user:r}=Object(n.useContext)(Xe),o=+t.location.pathname.split("/")[2],i=Object(n.useRef)(o),c=Object(n.useRef)(),[s,d]=Object(n.useState)(!1),[m,u]=Object(n.useState)([]),[p,g]=Object(n.useState)(!1),[,E]=Object(n.useState)([]),{tickets:b}=dn({withUnreadMessages:"true"}),[f]=Object(wa.a)(un.a,e),h=Object(n.useRef)(),v=Object(n.useRef)(t),C=Object(n.useContext)(y);Object(n.useEffect)(()=>{(async()=>{try{"enable"===r.allTicket&&g(!0)}catch(e){We(e)}})()},[]),Object(n.useEffect)(()=>{h.current=f,"Notification"in window?Notification.requestPermission():console.log("This browser doesn't support notifications")},[f]),Object(n.useEffect)(()=>{(()=>{if(p)u(b);else{const e=b.filter(e=>"pending"!==e.status);u(e)}})()},[b]),Object(n.useEffect)(()=>{i.current=o},[o]),Object(n.useEffect)(()=>{const e=C.getSocket(r.companyId);return e.on("ready",()=>e.emit("joinNotification")),e.on("company-".concat(r.companyId,"-ticket"),e=>{"updateUnread"!==e.action&&"delete"!==e.action||(u(a=>{const t=a.findIndex(a=>a.id===e.ticketId);return-1!==t?(a.splice(t,1),[...a]):a}),E(a=>{const t=a.findIndex(a=>a.tag===String(e.ticketId));return-1!==t?(a[t].close(),a.splice(t,1),[...a]):a}))}),e.on("company-".concat(r.companyId,"-appMessage"),e=>{var a;if("create"===e.action&&!e.message.fromMe&&"pending"!==e.ticket.status&&(!e.message.read||"pending"===e.ticket.status)&&(e.ticket.userId===(null===r||void 0===r?void 0:r.id)||!e.ticket.userId)&&((null===r||void 0===r||null===(a=r.queues)||void 0===a?void 0:a.some(a=>a.id===e.ticket.queueId))||!e.ticket.queueId)){u(a=>{const t=a.findIndex(a=>a.id===e.ticket.id);return-1!==t?(a[t]=e.ticket,[...a]):[e.ticket,...a]});if(e.message.ticketId===i.current&&"visible"===document.visibilityState||e.ticket.userId&&e.ticket.userId!==(null===r||void 0===r?void 0:r.id)||e.ticket.isGroup)return;O(e)}}),()=>{e.disconnect()}},[r,p,C]);const O=e=>{const{message:a,contact:t,ticket:n}=e,l={body:"".concat(a.body," - ").concat(Object(Sa.a)(new Date,"HH:mm")),icon:t.urlPicture,tag:n.id,renotify:!0},r=new Notification("".concat(De.a.t("tickets.notification.message")," ").concat(t.name),l);r.onclick=e=>{e.preventDefault(),window.focus(),v.current.push("/tickets/".concat(n.uuid))},E(e=>{const a=e.findIndex(e=>e.tag===r.tag);return-1!==a?(e[a]=r,[...e]):[r,...e]}),h.current()},S=()=>{d(!1)},w=e=>{let{children:a}=e;return l.a.createElement("div",{onClick:S},a)};return l.a.createElement(l.a.Fragment,null,l.a.createElement(T.a,{onClick:()=>{d(e=>!e)},ref:c,"aria-label":"Open Notifications",color:"inherit",style:{color:"white"}},l.a.createElement(Q.a,{overlap:"rectangular",badgeContent:m.length,color:"secondary"},l.a.createElement(ka.a,null))),l.a.createElement(Aa.a,{disableScrollLock:!0,open:s,anchorEl:c.current,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},classes:{paper:a.popoverPaper},onClose:S},l.a.createElement(N.a,{dense:!0,className:a.tabContainer},0===m.length?l.a.createElement(V.a,null,l.a.createElement(K.a,null,De.a.t("notifications.noTickets"))):m.map(e=>l.a.createElement(w,{key:e.id},l.a.createElement(sn,{ticket:e}))))))},En=t(655),bn=t.n(En),fn=t(864),hn=t.n(fn),yn=t(968);const vn=Object(A.a)(e=>({tabContainer:{padding:e.spacing(2)},popoverPaper:{width:"100%",maxWidth:350,marginLeft:e.spacing(2),marginRight:e.spacing(1),[e.breakpoints.down("sm")]:{maxWidth:270}},noShadow:{boxShadow:"none !important"},icons:{color:"#fff"},customBadge:{backgroundColor:"#f44336",color:"#fff"}}));var xn=e=>{let{volume:a,setVolume:t}=e;const r=vn(),o=Object(n.useRef)(),[i,c]=Object(n.useState)(!1);return l.a.createElement(l.a.Fragment,null,l.a.createElement(T.a,{className:r.icons,onClick:()=>{c(e=>!e)},ref:o,"aria-label":"Open Notifications"},l.a.createElement(bn.a,{color:"inherit"})),l.a.createElement(Aa.a,{disableScrollLock:!0,open:i,anchorEl:o.current,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},classes:{paper:r.popoverPaper},onClose:()=>{c(!1)}},l.a.createElement(N.a,{dense:!0,className:r.tabContainer},l.a.createElement(Mt.a,{container:!0,spacing:2},l.a.createElement(Mt.a,{item:!0},l.a.createElement(hn.a,null)),l.a.createElement(Mt.a,{item:!0,xs:!0},l.a.createElement(yn.a,{value:a,"aria-labelledby":"continuous-slider",step:.1,min:0,max:1,onChange:(e,a)=>(e=>{t(e),localStorage.setItem("volume",e)})(a)})),l.a.createElement(Mt.a,{item:!0},l.a.createElement(bn.a,null))))))},Cn=t(967),On=t(665),Sn=t(1631);const wn=Object(A.a)(e=>({chips:{display:"flex",flexWrap:"wrap"},chip:{margin:2}}));var An=e=>{let{selectedQueueIds:a,onChange:t,multiple:r=!0,title:o=De.a.t("queueSelect.inputLabel")}=e;const i=wn(),[c,s]=Object(n.useState)([]);Object(n.useEffect)(()=>{d()},[]);const d=async()=>{try{const{data:e}=await _e.get("/queue");s(e)}catch(e){We(e)}};return l.a.createElement("div",null,l.a.createElement(On.a,{fullWidth:!0,margin:"dense",variant:"outlined"},l.a.createElement(Cn.a,{shrink:!!a},o),l.a.createElement(Ht.a,{label:o,multiple:r,labelWidth:60,value:a,onChange:e=>{t(e.target.value)},MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},getContentAnchorEl:null},renderValue:e=>{var a,t;return l.a.createElement("div",{className:i.chips},(null===e||void 0===e?void 0:e.length)>0&&r?e.map(e=>{const a=c.find(a=>a.id===e);return a?l.a.createElement(Sn.a,{key:e,style:{backgroundColor:a.color},variant:"outlined",label:a.name,className:i.chip}):null}):l.a.createElement(Sn.a,{key:e,variant:"outlined",style:{backgroundColor:null===(a=c.find(a=>a.id===e))||void 0===a?void 0:a.color},label:null===(t=c.find(a=>a.id===e))||void 0===t?void 0:t.name,className:i.chip}))}},!r&&l.a.createElement(L.a,{value:null},"Nenhum"),c.map(e=>l.a.createElement(L.a,{key:e.id,value:e.id},e.name)))))};const jn=Object(A.a)(e=>({root:{display:"flex",flexWrap:"wrap"},multFieldLine:{display:"flex","& > *:not(:last-child)":{marginRight:e.spacing(1)}},btnWrapper:{position:"relative"},buttonProgress:{color:Ra.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},formControl:{margin:e.spacing(1),minWidth:120}})),kn=Lt.b().shape({name:Lt.d().min(2,"Too Short!").max(50,"Too Long!").required("Required"),password:Lt.d().min(5,"Too Short!").max(50,"Too Long!"),email:Lt.d().email("Invalid email").required("Required")});var Tn=e=>{let{open:a,onClose:t,userId:r}=e;const o=jn(),i={name:"",email:"",password:"",profile:"user",allTicket:"desabled"},{user:c}=Object(n.useContext)(Xe),[s,d]=Object(n.useState)(i),[m,u]=Object(n.useState)([]),[p,g]=Object(n.useState)(!1),{loading:E,whatsApps:b}=Ge();Object(n.useEffect)(()=>{(async()=>{if(r)try{var e;const{data:a}=await _e.get("/users/".concat(r));d(e=>({...e,...a}));const t=null===(e=a.queues)||void 0===e?void 0:e.map(e=>e.id);u(t),g(a.whatsappId?a.whatsappId:"")}catch(a){We(a)}})()},[r,a]);const f=()=>{t(),d(i)};return l.a.createElement("div",{className:o.root},l.a.createElement(tt.a,{open:a,onClose:f,maxWidth:"xs",fullWidth:!0,scroll:"paper"},l.a.createElement(gt.a,{id:"form-dialog-title"},"".concat(r?De.a.t("userModal.title.edit"):De.a.t("userModal.title.add"))),l.a.createElement(Ft.e,{initialValues:s,enableReinitialize:!0,validationSchema:kn,onSubmit:(e,a)=>{setTimeout(()=>{(async e=>{const a={...e,whatsappId:p,queueIds:m,allTicket:e.allTicket};try{r?await _e.put("/users/".concat(r),a):await _e.post("/users",a),C.b.success(De.a.t("userModal.success"))}catch(t){We(t)}f()})(e),a.setSubmitting(!1)},400)}},e=>{let{touched:a,errors:t,isSubmitting:n}=e;return l.a.createElement(Ft.d,null,l.a.createElement(pt.a,{dividers:!0},l.a.createElement("div",{className:o.multFieldLine},l.a.createElement(Ft.b,{as:la.a,label:De.a.t("userModal.form.name"),autoFocus:!0,name:"name",error:a.name&&Boolean(t.name),helperText:a.name&&t.name,variant:"outlined",margin:"dense",fullWidth:!0}),l.a.createElement(Ft.b,{as:la.a,label:De.a.t("userModal.form.password"),type:"password",name:"password",error:a.password&&Boolean(t.password),helperText:a.password&&t.password,variant:"outlined",margin:"dense",fullWidth:!0})),l.a.createElement("div",{className:o.multFieldLine},l.a.createElement(Ft.b,{as:la.a,label:De.a.t("userModal.form.email"),name:"email",error:a.email&&Boolean(t.email),helperText:a.email&&t.email,variant:"outlined",margin:"dense",fullWidth:!0}),l.a.createElement(On.a,{variant:"outlined",className:o.formControl,margin:"dense"},l.a.createElement($e,{role:c.profile,perform:"user-modal:editProfile",yes:()=>l.a.createElement(l.a.Fragment,null,l.a.createElement(Cn.a,{id:"profile-selection-input-label"},De.a.t("userModal.form.profile")),l.a.createElement(Ft.b,{as:Ht.a,label:De.a.t("userModal.form.profile"),name:"profile",labelId:"profile-selection-label",id:"profile-selection",required:!0},l.a.createElement(L.a,{value:"admin"},"Admin"),l.a.createElement(L.a,{value:"user"},"User")))}))),l.a.createElement($e,{role:c.profile,perform:"user-modal:editQueues",yes:()=>l.a.createElement(An,{selectedQueueIds:m,onChange:e=>u(e)})}),l.a.createElement($e,{role:c.profile,perform:"user-modal:editProfile",yes:()=>l.a.createElement(On.a,{variant:"outlined",margin:"dense",className:o.maxWidth,fullWidth:!0},l.a.createElement(Cn.a,null,De.a.t("userModal.form.whatsapp")),l.a.createElement(Ft.b,{as:Ht.a,value:p,onChange:e=>g(e.target.value),label:De.a.t("userModal.form.whatsapp")},l.a.createElement(L.a,{value:""},"\xa0"),b.map(e=>l.a.createElement(L.a,{key:e.id,value:e.id},e.name))))}),l.a.createElement("div",{className:o.divider},l.a.createElement("span",{className:o.dividerText},"Libera\xe7\xf5es")),l.a.createElement($e,{role:c.profile,perform:"user-modal:editProfile",yes:()=>!E&&l.a.createElement("div",{className:o.textField},l.a.createElement(On.a,{variant:"outlined",className:o.maxWidth,margin:"dense",fullWidth:!0},l.a.createElement(l.a.Fragment,null,l.a.createElement(Cn.a,{id:"profile-selection-input-label"},De.a.t("userModal.form.allTicket")),l.a.createElement(Ft.b,{as:Ht.a,label:De.a.t("allTicket.form.viewTags"),name:"allTicket",labelId:"allTicket-selection-label",id:"allTicket-selection",required:!0},l.a.createElement(L.a,{value:"enabled"},De.a.t("userModal.form.allTicketEnabled")),l.a.createElement(L.a,{value:"desabled"},De.a.t("userModal.form.allTicketDesabled"))))))})),l.a.createElement(nt.a,null,l.a.createElement(ra.a,{onClick:f,color:"secondary",disabled:n,variant:"outlined"},De.a.t("userModal.buttons.cancel")),l.a.createElement(ra.a,{type:"submit",color:"primary",disabled:n,variant:"contained",className:o.btnWrapper},"".concat(r?De.a.t("userModal.buttons.okEdit"):De.a.t("userModal.buttons.okAdd")),n&&l.a.createElement(za.a,{size:24,className:o.buttonProgress}))))})))},In=t(1379);const Nn=Object(A.a)(e=>({backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}));var Mn=()=>{const e=Nn();return l.a.createElement(In.a,{className:e.backdrop,open:!0},l.a.createElement(za.a,{color:"inherit"}))},Pn=t(489),Rn=t.n(Pn),Dn=t(490),Ln=t.n(Dn);Object(A.a)(e=>({icons:{color:"#fff"},switch:{color:"#fff"},visible:{display:"none"},btnHeader:{color:"#fff"}}));var Fn=t(865),qn=t.n(Fn),Wn=t(1537);const Bn=Object(A.a)(e=>({mainPaper:{flex:1,maxHeight:3e3,maxWidth:5e3,padding:e.spacing(1),overflowY:"scroll",...e.scrollbarStyles}}));function zn(e){let{announcement:a,open:t,handleClose:n}=e;return l.a.createElement(tt.a,{open:t,onClose:()=>n(),"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},l.a.createElement(gt.a,{id:"alert-dialog-title"},a.title),l.a.createElement(pt.a,null,a.mediaPath&&l.a.createElement("div",{style:{border:"1px solid #f1f1f1",margin:"0 auto 20px",textAlign:"center",width:"400px",height:300,backgroundImage:"url(".concat((r=a.mediaPath,"".concat("https://boostybackend-production.up.railway.app","/public/").concat(r)),")"),backgroundRepeat:"no-repeat",backgroundSize:"contain",backgroundPosition:"center"}}),l.a.createElement(Wn.a,{id:"alert-dialog-description"},a.text)),l.a.createElement(nt.a,null,l.a.createElement(ra.a,{onClick:()=>n(),color:"primary",autoFocus:!0},"Fechar")));var r}const Un=(e,a)=>{if("LOAD_ANNOUNCEMENTS"===a.type){const t=a.payload,n=[];return Object(qe.isArray)(t)&&t.forEach(a=>{const t=e.findIndex(e=>e.id===a.id);-1!==t?e[t]=a:n.push(a)}),[...e,...n]}if("UPDATE_ANNOUNCEMENTS"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n?(e[n]=t,[...e]):[t,...e]}if("DELETE_ANNOUNCEMENT"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t);return-1!==n&&e.splice(n,1),[...e]}if("RESET"===a.type)return[]};function Hn(){const e=Bn(),[a,t]=Object(n.useState)(!1),[r,o]=Object(n.useState)(null),[i,c]=Object(n.useState)(1),[s,d]=Object(n.useState)(!1),[m]=Object(n.useState)(""),[u,p]=Object(n.useReducer)(Un,[]),[g,E]=Object(n.useState)(!1),[b,f]=Object(n.useState)({}),[h,v]=Object(n.useState)(!1),x=Object(n.useContext)(y);Object(n.useEffect)(()=>{p({type:"RESET"}),c(1)},[m]),Object(n.useEffect)(()=>{t(!0);const e=setTimeout(()=>{C()},500);return()=>clearTimeout(e)},[m,i]),Object(n.useEffect)(()=>{const e=localStorage.getItem("companyId"),a=x.getSocket(e);return a?(a.on("company-announcement",e=>{"update"!==e.action&&"create"!==e.action||(p({type:"UPDATE_ANNOUNCEMENTS",payload:e.record}),E(!1)),"delete"===e.action&&p({type:"DELETE_ANNOUNCEMENT",payload:+e.id})}),()=>{a.disconnect()}):()=>{}},[x]);const C=async()=>{try{const{data:e}=await _e.get("/announcements/",{params:{searchParam:m,pageNumber:i}});p({type:"LOAD_ANNOUNCEMENTS",payload:e.records}),d(e.hasMore),t(!1)}catch(e){We(e)}},O=Boolean(r),S=O?"simple-popover":void 0;return l.a.createElement("div",null,l.a.createElement(zn,{announcement:b,open:h,handleClose:()=>v(!1)}),l.a.createElement(T.a,{variant:"contained","aria-describedby":S,onClick:e=>{o(e.currentTarget),E(!0)},style:{color:"white"}},l.a.createElement(Q.a,{color:"secondary",variant:"dot",invisible:g||u.length<1},l.a.createElement(qn.a,null))),l.a.createElement(Aa.a,{id:S,open:O,anchorEl:r,onClose:()=>{o(null)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},l.a.createElement(ht.a,{variant:"outlined",onScroll:e=>{if(!s||a)return;const{scrollTop:t,scrollHeight:n,clientHeight:l}=e.currentTarget;n-(t+100)<l&&c(e=>e+1)},className:e.mainPaper},l.a.createElement(N.a,{component:"nav","aria-label":"main mailbox folders",style:{minWidth:300}},Object(qe.isArray)(u)&&u.map((e,a)=>{return l.a.createElement(V.a,{key:a,style:{border:"1px solid #eee",borderLeft:(n=e.priority,1===n?"4px solid #b81111":2===n?"4px solid orange":3===n?"4px solid grey":void 0),cursor:"pointer"},onClick:()=>(f(e),v(!0),void o(null))},e.mediaPath&&l.a.createElement(Pa.a,null,l.a.createElement(Na.a,{alt:e.mediaName,src:(t=e.mediaPath,"".concat("https://boostybackend-production.up.railway.app","/public/").concat(t))})),l.a.createElement(K.a,{primary:e.title,secondary:l.a.createElement(l.a.Fragment,null,l.a.createElement(R.a,{component:"span",style:{fontSize:12}},w()(e.createdAt).format("DD/MM/YYYY")),l.a.createElement("span",{style:{marginTop:5,display:"block"}}),l.a.createElement(R.a,{component:"span",variant:"body2"},e.text))}));var t,n}),Object(qe.isArray)(u)&&0===u.length&&l.a.createElement(K.a,{primary:"Nenhum registro"})))))}function _n(){return{dateToClient:function(e){return w()(e).isValid()?w()(e).format("DD/MM/YYYY"):e},datetimeToClient:function(e){return w()(e).isValid()?w()(e).format("DD/MM/YYYY HH:mm"):e},dateToDatabase:function(e){return w()(e,"DD/MM/YYYY").isValid()?w()(e).format("YYYY-MM-DD HH:mm:ss"):e}}}var Vn=t(866),Gn=t.n(Vn);const Kn=Object(A.a)(e=>({mainPaper:{flex:1,maxHeight:300,maxWidth:500,padding:e.spacing(1),overflowY:"scroll",...e.scrollbarStyles}})),Yn=(e,a)=>{if("LOAD_CHATS"===a.type){const t=a.payload,n=[];return Object(qe.isArray)(t)&&t.forEach(a=>{const t=e.findIndex(e=>e.id===a.id);-1!==t?e[t]=a:n.push(a)}),[...e,...n]}if("UPDATE_CHATS"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n?(e[n]=t,[...e]):[t,...e]}if("DELETE_CHAT"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t);return-1!==n&&e.splice(n,1),[...e]}if("RESET"===a.type)return[];if("CHANGE_CHAT"===a.type){return e.map(e=>e.id===a.payload.chat.id?a.payload.chat:e)}};function Qn(){const e=Kn(),{user:a}=Object(n.useContext)(Xe),[t,r]=Object(n.useState)(!1),[o,i]=Object(n.useState)(null),[c,s]=Object(n.useState)(1),[d,m]=Object(n.useState)(!1),[u]=Object(n.useState)(""),[p,g]=Object(n.useReducer)(Yn,[]),[E,b]=Object(n.useState)(!0),{datetimeToClient:f}=_n(),[h]=Object(wa.a)(Gn.a),v=Object(n.useRef)(),x=Object(n.useContext)(y);Object(n.useEffect)(()=>{v.current=h,"Notification"in window?Notification.requestPermission():console.log("This browser doesn't support notifications")},[h]),Object(n.useEffect)(()=>{g({type:"RESET"}),s(1)},[u]),Object(n.useEffect)(()=>{r(!0);const e=setTimeout(()=>{C()},500);return()=>clearTimeout(e)},[u,c]),Object(n.useEffect)(()=>{const e=localStorage.getItem("companyId"),t=x.getSocket(e);return t?(t.on("company-".concat(e,"-chat"),e=>{if("new-message"===e.action){g({type:"CHANGE_CHAT",payload:e});e.newMessage.chat.users.map(e=>e.userId).includes(a.id)&&e.newMessage.senderId!==a.id&&v.current()}"update"===e.action&&g({type:"CHANGE_CHAT",payload:e})}),()=>{t.disconnect()}):()=>{}},[x,a.id]),Object(n.useEffect)(()=>{let e=0;if(p.length>0)for(let t of p)for(let n of t.users)n.userId===a.id&&(e+=n.unreads);b(!(e>0))},[p,a.id]);const C=async()=>{try{const{data:e}=await _e.get("/chats/",{params:{searchParam:u,pageNumber:c}});g({type:"LOAD_CHATS",payload:e.records}),m(e.hasMore),r(!1)}catch(e){We(e)}},O=Boolean(o),S=O?"simple-popover":void 0;return l.a.createElement("div",null,l.a.createElement(T.a,{"aria-describedby":S,variant:"contained",color:E?"default":"inherit",onClick:e=>{i(e.currentTarget),b(!0)},style:{color:"white"}},l.a.createElement(Q.a,{color:"secondary",variant:"dot",invisible:E},l.a.createElement(Re.a,null))),l.a.createElement(Aa.a,{id:S,open:O,anchorEl:o,onClose:()=>{i(null)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},l.a.createElement(ht.a,{variant:"outlined",onScroll:e=>{if(!d||t)return;const{scrollTop:a,scrollHeight:n,clientHeight:l}=e.currentTarget;n-(a+100)<l&&s(e=>e+1)},className:e.mainPaper},l.a.createElement(N.a,{component:"nav","aria-label":"main mailbox folders",style:{minWidth:300}},Object(qe.isArray)(p)&&p.map((e,a)=>l.a.createElement(V.a,{key:a,style:{background:a%2===0?"#ededed":"white",border:"1px solid #eee",cursor:"pointer"},onClick:()=>{return a=e,void(window.location.href="/chats/".concat(a.uuid));var a},button:!0},l.a.createElement(K.a,{primary:e.lastMessage,secondary:l.a.createElement(l.a.Fragment,null,l.a.createElement(R.a,{component:"span",style:{fontSize:12}},f(e.updatedAt)),l.a.createElement("span",{style:{marginTop:5,display:"block"}}))}))),Object(qe.isArray)(p)&&0===p.length&&l.a.createElement(K.a,{primary:De.a.t("mainDrawer.appBar.notRegister")})))))}const Xn=Object(A.a)(e=>({root:{display:"flex",height:"100vh",[e.breakpoints.down("sm")]:{height:"calc(100vh - 56px)"},backgroundColor:e.palette.fancyBackground,"& .MuiButton-outlinedPrimary":{color:(e.mode,"#FFF"),backgroundColor:"light"===e.mode?"#47A865":"#1c1c1c"},"& .MuiTab-textColorPrimary.Mui-selected":{color:"light"===e.mode?"#47A865":"#FFF"}},avatar:{width:"100%"},toolbar:{paddingRight:24,color:e.palette.dark.main,background:e.palette.barraSuperior},toolbarIcon:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 8px",minHeight:"48px",[e.breakpoints.down("sm")]:{height:"48px"}},appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen}),[e.breakpoints.down("sm")]:{display:"none"}},menuButton:{marginRight:36},menuButtonHidden:{display:"none"},title:{flexGrow:1,fontSize:14,color:"white"},drawerPaper:{position:"relative",whiteSpace:"nowrap",width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen}),[e.breakpoints.down("sm")]:{width:"100%"},...e.scrollbarStylesSoft},drawerPaperClose:{overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:e.spacing(7),[e.breakpoints.up("sm")]:{width:e.spacing(9)},[e.breakpoints.down("sm")]:{width:"100%"}},appBarSpacer:{minHeight:"48px"},content:{flex:1,overflow:"auto"},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},containerWithScroll:{flex:1,padding:e.spacing(1),overflowY:"scroll",...e.scrollbarStyles},NotificationsPopOver:{},logo:{width:"80%",height:"auto",maxWidth:180,[e.breakpoints.down("sm")]:{width:"auto",height:"80%",maxWidth:180},logo:e.logo}}));var Jn=e=>{var a,t,r,o;let{children:i,themeToggle:c}=e;const s=Xn(),[d,m]=Object(n.useState)(!1),[g,E]=Object(n.useState)(null),[b,f]=Object(n.useState)(!1),{handleLogout:h,loading:v}=Object(n.useContext)(Xe),[x,C]=Object(n.useState)(!1),[S,w]=Object(n.useState)("permanent"),{user:A}=Object(n.useContext)(Xe),F=Object(j.a)(),{colorMode:W}=Object(n.useContext)(p),z=Object(u.a)(F.breakpoints.up("sm")),[H,V]=Object(n.useState)(localStorage.getItem("volume")||1),{dateToClient:G}=_n(),K=Object(n.useContext)(y);Object(n.useEffect)(()=>{document.body.offsetWidth>1200&&C(!0)},[]),Object(n.useEffect)(()=>{document.body.offsetWidth<600?w("temporary"):w("permanent")},[x]),Object(n.useEffect)(()=>{const e=localStorage.getItem("companyId"),a=localStorage.getItem("userId"),t=K.getSocket(e);t.on("company-".concat(e,"-auth"),e=>{e.user.id===+a&&(We("Sua conta foi acessada em outro computador."),setTimeout(()=>{localStorage.clear(),window.location.reload()},1e3))}),t.emit("userStatus");const n=setInterval(()=>{t.emit("userStatus")},3e5);return()=>{t.disconnect(),clearInterval(n)}},[K]);const Y=()=>{E(null),f(!1)};if(v)return l.a.createElement(Mn,null);const Q="".concat("https://boostybackend-production.up.railway.app","/public/logotipos/interno.png"),X=Math.random(),J="".concat(Q,"?r=").concat(X);return l.a.createElement("div",{className:s.root},l.a.createElement(k.a,{variant:S,className:x?s.drawerPaper:s.drawerPaperClose,classes:{paper:Object(O.a)(s.drawerPaper,!x&&s.drawerPaperClose)},open:x},l.a.createElement("div",{className:s.toolbarIcon},l.a.createElement("img",{src:J,style:{margin:"0 auto",width:"50%"},alt:"".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_BACKEND_URL:"https://boostybackend-production.up.railway.app",REACT_APP_HOURS_CLOSE_TICKETS_AUTO:"24"}).REACT_APP_NAME_SYSTEM)}),l.a.createElement(T.a,{onClick:()=>C(!x)},l.a.createElement(B.a,null))),l.a.createElement(I.a,null),l.a.createElement(N.a,{className:s.containerWithScroll},l.a.createElement(Oa,{drawerClose:()=>{document.body.offsetWidth<600&&C(!1)},collapsed:!x})),l.a.createElement(I.a,null)),l.a.createElement(Tn,{open:d,onClose:()=>m(!1),userId:null===A||void 0===A?void 0:A.id}),l.a.createElement(M.a,{position:"absolute",className:Object(O.a)(s.appBar,x&&s.appBarShift),color:"primary"},l.a.createElement(P.a,{variant:"dense",className:s.toolbar},l.a.createElement(T.a,{edge:"start",variant:"contained","aria-label":"open drawer",onClick:()=>C(!x),className:Object(O.a)(s.menuButton,x&&s.menuButtonHidden)},l.a.createElement(q.a,null)),l.a.createElement(R.a,{component:"h2",variant:"h6",color:"inherit",noWrap:!0,className:s.title},z&&"admin"===(null===A||void 0===A?void 0:A.profile)&&(null===A||void 0===A||null===(a=A.company)||void 0===a?void 0:a.dueDate)?l.a.createElement(l.a.Fragment,null,"Hola ",l.a.createElement("b",null,A.name),", Bienvenido a ",l.a.createElement("b",null,null===A||void 0===A||null===(t=A.company)||void 0===t?void 0:t.name),"! (Activo hasta ",G(null===A||void 0===A||null===(r=A.company)||void 0===r?void 0:r.dueDate),")"):l.a.createElement(l.a.Fragment,null,"Hola  ",l.a.createElement("b",null,A.name),", Bienvenido a ",l.a.createElement("b",null,null===A||void 0===A||null===(o=A.company)||void 0===o?void 0:o.name),"!")),l.a.createElement(T.a,{edge:"start",onClick:()=>{W.toggleColorMode()}},"dark"===F.mode?l.a.createElement(Ln.a,{style:{color:"white"}}):l.a.createElement(Rn.a,{style:{color:"white"}})),l.a.createElement(xn,{setVolume:V,volume:H}),l.a.createElement(T.a,{onClick:()=>{window.location.reload(!1)},"aria-label":De.a.t("mainDrawer.appBar.refresh"),color:"inherit"},l.a.createElement(_.a,{style:{color:"white"}})),A.id&&l.a.createElement(gn,{volume:H}),l.a.createElement(Hn,null),l.a.createElement(Qn,null),l.a.createElement("div",null,l.a.createElement(T.a,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:e=>{E(e.currentTarget),f(!0)},variant:"contained",style:{color:"white"}},l.a.createElement(U.a,null)),l.a.createElement(D.a,{id:"menu-appbar",anchorEl:g,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},open:b,onClose:Y},l.a.createElement(L.a,{onClick:()=>{m(!0),Y()}},De.a.t("mainDrawer.appBar.user.profile")),l.a.createElement(L.a,{onClick:()=>{Y(),h()}},De.a.t("mainDrawer.appBar.user.logout")))))),l.a.createElement("main",{className:s.content},l.a.createElement("div",{className:s.appBarSpacer}),i||null))},Zn=t(1559),$n=t(959),el=t(884),al=t.n(el),tl=t(885),nl=t.n(tl),ll=t(886),rl=t.n(ll),ol=t(888),il=t.n(ol),cl=t(887),sl=t.n(cl),dl=t(889),ml=t.n(dl),ul=t(890),pl=t.n(ul);t(1540),t(1606),t(1541),t(878),t(879),t(285),t(410),t(201),t(877),t(656);const gl=Object(A.a)(e=>({cardAvatar:{fontSize:"55px",color:Da.a[500],backgroundColor:"#ffffff",width:e.spacing(7),height:e.spacing(7)},cardTitle:{fontSize:"18px",color:e.palette.text.primary},cardSubtitle:{color:Da.a[600],fontSize:"14px"}}));function El(e){const{icon:a,title:t,value:n,loading:r}=e,o=gl();return r?l.a.createElement($t.a,{variant:"rect",height:80}):l.a.createElement(Jt.a,null,l.a.createElement(Zt.a,{avatar:l.a.createElement(Na.a,{className:o.cardAvatar},a),title:l.a.createElement(R.a,{variant:"h6",component:"h2",className:o.cardTitle},t),subheader:l.a.createElement(R.a,{variant:"subtitle1",component:"p",className:o.cardSubtitle},n)}))}var bl=t(1545),fl=t(1547),hl=t(1543),yl=t(1544),vl=t(1546),xl=t(1542),Cl=t(567),Ol=t(880),Sl=t.n(Ol),wl=t(1636);const Al=Object(A.a)(e=>({on:{color:Ra.a[600],fontSize:"20px"},off:{color:Cl.a[600],fontSize:"20px"},pointer:{cursor:"pointer"}}));function jl(e){let{rating:a}=e;const t=null===a?0:Math.trunc(a);return l.a.createElement(wl.a,{defaultValue:t,max:3,readOnly:!0})}function kl(e){const{loading:a,attendants:t}=e,n=Al();return a?l.a.createElement($t.a,{variant:"rect",height:150}):l.a.createElement(yl.a,{component:ht.a},l.a.createElement(bl.a,null,l.a.createElement(vl.a,null,l.a.createElement(xl.a,null,l.a.createElement(hl.a,null,"Nombre"),l.a.createElement(hl.a,{align:"center"},"Evaluaciones"),l.a.createElement(hl.a,{align:"center"},"T.M. de Atenci\xf3n"),l.a.createElement(hl.a,{align:"center"},"Estado (Actual)"))),l.a.createElement(fl.a,null,t.map((e,a)=>{return l.a.createElement(xl.a,{key:a},l.a.createElement(hl.a,null,e.name),l.a.createElement(hl.a,{align:"center",title:"1 - Insatisfeito, 2 - Satisfeito, 3 - Muito Satisfeito",className:n.pointer},l.a.createElement(jl,{rating:e.rating})),l.a.createElement(hl.a,{align:"center"},(t=e.avgSupportTime,w()().startOf("day").add(t,"minutes").format("HH[h] mm[m]"))),l.a.createElement(hl.a,{align:"center"},e.online?l.a.createElement(Ot.a,{className:n.on}):l.a.createElement(Sl.a,{className:n.off})));var t}))))}var Tl=()=>({find:async e=>{const{data:a}=await _e.request({url:"/dashboard",method:"GET",params:e});return a}});var Il=e=>{let{searchParam:a,pageNumber:t,date:l,dateStart:r,dateEnd:o}=e;const[i,c]=Object(n.useState)(!0),[s,d]=Object(n.useState)(!1),[m,u]=Object(n.useState)([]),[p,g]=Object(n.useState)(0);return Object(n.useEffect)(()=>{c(!0);const e=setTimeout(()=>{(async()=>{try{const{data:e}=await _e.get("/contacts",{params:{searchParam:a,pageNumber:t,date:l,dateStart:r,dateEnd:o}});u(e.contacts),d(e.hasMore),g(e.count),c(!1)}catch(e){c(!1),We(e)}})()},500);return()=>clearTimeout(e)},[a,t,l,r,o]),{contacts:m,loading:i,hasMore:s,count:p}};var Nl=t(68),Ml=t(542),Pl=t(949),Rl=t(1609),Dl=t(371),Ll=t(881),Fl=t(1605),ql=t(1548),Wl=t(1620),Bl=t(1625);t(805);Object(A.a)(e=>({container:{paddingTop:e.spacing(1),paddingBottom:e.padding,paddingLeft:e.spacing(1),paddingRight:e.spacing(2)}}));Nl.f.register(Nl.e,Nl.j,Nl.c,Nl.p,Nl.q,Nl.h,Pl.a);const zl={responsive:!0,plugins:{legend:{position:"top",display:!1},title:{display:!0,text:"Gr\xe1fico de Conversaciones",position:"left"},datalabels:{display:!0,anchor:"start",offset:-30,align:"start",color:"#fff",textStrokeColor:"#000",textStrokeWidth:2,font:{size:20,weight:"bold"}}}},Ul=()=>{const[e,a]=Object(n.useState)(new Date),[t,r]=Object(n.useState)(new Date),[o,i]=Object(n.useState)({data:[]}),c=localStorage.getItem("companyId");Object(n.useEffect)(()=>{d()},[]);const s={labels:o&&(null===o||void 0===o?void 0:o.data.length)>0&&(null===o||void 0===o?void 0:o.data.map(e=>e.nome)),datasets:[{data:(null===o||void 0===o?void 0:o.data.length)>0&&(null===o||void 0===o?void 0:o.data.map((e,a)=>e.quantidade)),backgroundColor:"#47A865"}]},d=async()=>{try{const{data:a}=await _e.get("/dashboard/ticketsUsers?initialDate=".concat(Object(Sa.a)(e,"yyyy-MM-dd"),"&finalDate=").concat(Object(Sa.a)(t,"yyyy-MM-dd"),"&companyId=").concat(c));i(a)}catch(a){C.b.error("Erro ao obter informa\xe7\xf5es da conversa")}};return l.a.createElement(l.a.Fragment,null,l.a.createElement(R.a,{component:"h2",variant:"h6",color:"primary",gutterBottom:!0},"Total de Conversaciones por Usuarios"),l.a.createElement(ql.a,{direction:"row",spacing:2,alignItems:"center",sx:{my:2}},l.a.createElement(Ll.a,{dateAdapter:Rl.a,adapterLocale:Dl.a},l.a.createElement(Fl.a,{value:e,onChange:e=>{a(e)},label:"Inicio",renderInput:e=>l.a.createElement(Wl.a,Object.assign({fullWidth:!0},e,{sx:{width:"20ch"}}))})),l.a.createElement(Ll.a,{dateAdapter:Rl.a,adapterLocale:Dl.a},l.a.createElement(Fl.a,{value:t,onChange:e=>{r(e)},label:"Fin",renderInput:e=>l.a.createElement(Wl.a,Object.assign({fullWidth:!0},e,{sx:{width:"20ch"}}))})),l.a.createElement(Bl.a,{className:"buttonHover",onClick:d,variant:"contained"},"Filtrar")),l.a.createElement(Ml.a,{options:zl,data:s,style:{maxWidth:"100%",maxHeight:"280px"}}))};Nl.f.register(Nl.e,Nl.j,Nl.c,Nl.p,Nl.q,Nl.h);const Hl={responsive:!0,plugins:{legend:{position:"top",display:!1},title:{display:!0,text:"Gr\xe1fico de Conversaciones",position:"left"},datalabels:{display:!0,anchor:"start",offset:-30,align:"start",color:"#fff",textStrokeColor:"#000",textStrokeWidth:2,font:{size:20,weight:"bold"}}}},_l=()=>{const[e,a]=Object(n.useState)(new Date),[t,r]=Object(n.useState)(new Date),[o,i]=Object(n.useState)({data:[],count:0}),c=localStorage.getItem("companyId");Object(n.useEffect)(()=>{d()},[]);const s={labels:o&&(null===o||void 0===o?void 0:o.data.length)>0&&(null===o||void 0===o?void 0:o.data.map(e=>e.hasOwnProperty("horario")?"Das ".concat(e.horario,":00 as ").concat(e.horario,":59"):e.data)),datasets:[{data:(null===o||void 0===o?void 0:o.data.length)>0&&(null===o||void 0===o?void 0:o.data.map((e,a)=>e.total)),backgroundColor:"#47A865"}]},d=async()=>{try{const{data:a}=await _e.get("/dashboard/ticketsDay?initialDate=".concat(Object(Sa.a)(e,"yyyy-MM-dd"),"&finalDate=").concat(Object(Sa.a)(t,"yyyy-MM-dd"),"&companyId=").concat(c));i(a)}catch(a){C.b.error("Erro ao buscar informa\xe7\xf5es dos tickets")}};return l.a.createElement(l.a.Fragment,null,l.a.createElement(R.a,{component:"h2",variant:"h6",color:"primary",gutterBottom:!0},"Total (",null===o||void 0===o?void 0:o.count,")"),l.a.createElement(ql.a,{direction:"row",spacing:2,alignItems:"center",sx:{my:2}},l.a.createElement(Ll.a,{dateAdapter:Rl.a,adapterLocale:Dl.a},l.a.createElement(Fl.a,{value:e,onChange:e=>{a(e)},label:"Inicio",renderInput:e=>l.a.createElement(Wl.a,Object.assign({fullWidth:!0},e,{sx:{width:"20ch"}}))})),l.a.createElement(Ll.a,{dateAdapter:Rl.a,adapterLocale:Dl.a},l.a.createElement(Fl.a,{value:t,onChange:e=>{r(e)},label:"Fin",renderInput:e=>l.a.createElement(Wl.a,Object.assign({fullWidth:!0},e,{sx:{width:"20ch"}}))})),l.a.createElement(Bl.a,{className:"buttonHover",onClick:d,variant:"contained"},"Filtrar")),l.a.createElement(Ml.a,{options:Hl,data:s,style:{maxWidth:"100%",maxHeight:"280px"}}))},Vl=Object(A.a)(e=>({container:{paddingTop:e.spacing(1),paddingBottom:e.padding,paddingLeft:e.spacing(1),paddingRight:e.spacing(2)},fixedHeightPaper:{padding:e.spacing(2),display:"flex",flexDirection:"column",height:240,overflowY:"auto",...e.scrollbarStyles},cardAvatar:{fontSize:"55px",color:Da.a[500],backgroundColor:"#ffffff",width:e.spacing(7),height:e.spacing(7)},cardTitle:{fontSize:"18px",color:La.a[700]},cardSubtitle:{color:Da.a[600],fontSize:"14px"},alignRight:{textAlign:"right"},fullWidth:{width:"100%"},selectContainer:{width:"100%",textAlign:"left"},iframeDashboard:{width:"100%",height:"calc(100vh - 64px)",border:"none"},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},fixedHeightPaper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column",height:240},customFixedHeightPaper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column",height:120},customFixedHeightPaperLg:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column",height:"100%"},card0:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column",height:"100%",backgroundColor:"#47A865",color:"#eee"},card00:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column",height:"100%",backgroundColor:"#47A865",color:"#eee"},card1:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column",height:"100%",backgroundColor:"#47A865",color:"#eee"},card2:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column",height:"100%",backgroundColor:"#47A865",color:"#eee"},card3:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column",height:"100%",backgroundColor:"#47A865",color:"#eee"},card4:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column",height:"100%",backgroundColor:"#47A865",color:"#eee"},card5:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column",height:"100%",backgroundColor:"#47A865",color:"#eee"},card6:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column",height:"100%",backgroundColor:"#47A865",color:"#eee"},card7:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column",height:"100%",backgroundColor:"#47A865",color:"#eee"},card8:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column",height:"100%",backgroundColor:"#47A865",color:"#eee"},card9:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column",height:"100%",backgroundColor:"#47A865",color:"#eee"},fixedHeightPaper2:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"}}));var Gl=()=>{const e=Vl(),[a,t]=Object(n.useState)({}),[r,o]=Object(n.useState)([]),[i,c]=Object(n.useState)(0),[s,d]=Object(n.useState)(1),[m,u]=Object(n.useState)(w()("1","D").format("YYYY-MM-DD")),[p,g]=Object(n.useState)(w()().format("YYYY-MM-DD")),[E,b]=Object(n.useState)(!1),{find:f}=Tl();let h=new Date,y=h.getDate(),v=h.getMonth()+1,x=h.getFullYear();"".concat(x,"-").concat(v<10?"0".concat(v):"".concat(v),"-").concat(y<10?"0".concat(y):"".concat(y));const[O,S]=Object(n.useState)(!1),[A,j]=Object(n.useState)(!1),{user:k}=Object(n.useContext)(Xe);async function T(){b(!0);let e={};if(i>0&&(e={days:i}),!Object(qe.isEmpty)(m)&&w()(m).isValid()&&(e={...e,date_from:w()(m).format("YYYY-MM-DD")}),!Object(qe.isEmpty)(p)&&w()(p).isValid()&&(e={...e,date_to:w()(p).format("YYYY-MM-DD")}),0===Object.keys(e).length)return C.b.error("Parametrize o filtro"),void b(!1);const a=await f(e);t(a.counters),Object(qe.isArray)(a.attendants)?o(a.attendants):o([]),b(!1)}function I(e){return w()().startOf("day").add(e,"minutes").format("HH[h] mm[m]")}k.queues&&k.queues.length>0&&k.queues.map(e=>e.id),Object(n.useEffect)(()=>{setTimeout(()=>{!async function(){await T()}()},1e3)},[]);return l.a.createElement("div",null,l.a.createElement(Zn.a,{maxWidth:"lg",className:e.container},l.a.createElement(Mt.a,{container:!0,spacing:3,justifyContent:"flex-end"},l.a.createElement(Mt.a,{item:!0,xs:12,sm:6,md:4},l.a.createElement(On.a,{className:e.selectContainer},l.a.createElement(Cn.a,{id:"period-selector-label"},"Tipo de Filtro"),l.a.createElement(Ht.a,{labelId:"period-selector-label",value:s,onChange:e=>async function(e){d(e),1===e?c(0):(u(""),g(""))}(e.target.value)},l.a.createElement(L.a,{value:1},"Filtro por Fecha"),l.a.createElement(L.a,{value:2},"Filtro por Per\xedodo")),l.a.createElement($n.a,null,"Seleccione el per\xedodo deseado"))),1===s?l.a.createElement(l.a.Fragment,null,l.a.createElement(Mt.a,{item:!0,xs:12,sm:6,md:4},l.a.createElement(la.a,{label:"Fecha de inicio",type:"date",value:m,onChange:e=>u(e.target.value),className:e.fullWidth,InputLabelProps:{shrink:!0}})),l.a.createElement(Mt.a,{item:!0,xs:12,sm:6,md:4},l.a.createElement(la.a,{label:"Fecha final",type:"date",value:p,onChange:e=>g(e.target.value),className:e.fullWidth,InputLabelProps:{shrink:!0}}))):l.a.createElement(Mt.a,{item:!0,xs:12,sm:6,md:4},l.a.createElement(On.a,{className:e.selectContainer},l.a.createElement(Cn.a,{id:"period-selector-label"},"Per\xedodo"),l.a.createElement(Ht.a,{labelId:"period-selector-label",id:"period-selector",value:i,onChange:e=>async function(e){c(e)}(e.target.value)},l.a.createElement(L.a,{value:0},"Ninguno seleccionado"),l.a.createElement(L.a,{value:3},"\xdaltimos 3 d\xedas"),l.a.createElement(L.a,{value:7},"\xdaltimos 7 d\xedas"),l.a.createElement(L.a,{value:15},"\xdaltimos 15 d\xedas"),l.a.createElement(L.a,{value:30},"\xdaltimos 30 d\xedas"),l.a.createElement(L.a,{value:60},"\xdaltimos 60 d\xedas"),l.a.createElement(L.a,{value:90},"\xdaltimos 90 d\xedas")),l.a.createElement($n.a,null,"Seleccione el per\xedodo deseado"))),l.a.createElement(Mt.a,{item:!0,xs:12,className:e.alignRight},l.a.createElement(Ha,{loading:E,onClick:()=>T(),variant:"contained",color:"primary"},"Filtrar")),k.super&&l.a.createElement(Mt.a,{item:!0,xs:12,sm:6,md:4},l.a.createElement(ht.a,{className:e.card0,style:{overflow:"hidden"},elevation:4},l.a.createElement(Mt.a,{container:!0,spacing:3},l.a.createElement(Mt.a,{item:!0,xs:8},l.a.createElement(R.a,{component:"h3",variant:"h6",paragraph:!0},"Conexiones Activas"),l.a.createElement(Mt.a,{item:!0},l.a.createElement(R.a,{component:"h1",variant:"h4"},a.totalWhatsappSessions))),l.a.createElement(Mt.a,{item:!0,xs:2},l.a.createElement(al.a,{style:{fontSize:100,color:"#FFFFFF"}}))))),k.super&&l.a.createElement(Mt.a,{item:!0,xs:12,sm:6,md:4},l.a.createElement(ht.a,{className:e.card00,style:{overflow:"hidden"},elevation:4},l.a.createElement(Mt.a,{container:!0,spacing:3},l.a.createElement(Mt.a,{item:!0,xs:8},l.a.createElement(R.a,{component:"h3",variant:"h6",paragraph:!0},"Empresas"),l.a.createElement(Mt.a,{item:!0},l.a.createElement(R.a,{component:"h1",variant:"h4"},a.totalCompanies))),l.a.createElement(Mt.a,{item:!0,xs:2},l.a.createElement(nl.a,{style:{fontSize:100,color:"#FFFFFF"}}))))),l.a.createElement(Mt.a,{item:!0,xs:12,sm:6,md:4},l.a.createElement(ht.a,{className:e.card1,style:{overflow:"hidden"},elevation:4},l.a.createElement(Mt.a,{container:!0,spacing:3},l.a.createElement(Mt.a,{item:!0,xs:8},l.a.createElement(R.a,{component:"h3",variant:"h6",paragraph:!0},"En Conversaci\xf3n"),l.a.createElement(Mt.a,{item:!0},l.a.createElement(R.a,{component:"h1",variant:"h4"},a.supportHappening))),l.a.createElement(Mt.a,{item:!0,xs:2},l.a.createElement(rl.a,{style:{fontSize:100,color:"#FFFFFF"}}))))),l.a.createElement(Mt.a,{item:!0,xs:12,sm:6,md:4},l.a.createElement(ht.a,{className:e.card2,style:{overflow:"hidden"},elevation:6},l.a.createElement(Mt.a,{container:!0,spacing:3},l.a.createElement(Mt.a,{item:!0,xs:8},l.a.createElement(R.a,{component:"h3",variant:"h6",paragraph:!0},"En Espera"),l.a.createElement(Mt.a,{item:!0},l.a.createElement(R.a,{component:"h1",variant:"h4"},a.supportPending))),l.a.createElement(Mt.a,{item:!0,xs:4},l.a.createElement(sl.a,{style:{fontSize:100,color:"#FFFFFF"}}))))),l.a.createElement(Mt.a,{item:!0,xs:12,sm:6,md:4},l.a.createElement(ht.a,{className:e.card3,style:{overflow:"hidden"},elevation:6},l.a.createElement(Mt.a,{container:!0,spacing:3},l.a.createElement(Mt.a,{item:!0,xs:8},l.a.createElement(R.a,{component:"h3",variant:"h6",paragraph:!0},"Finalizados"),l.a.createElement(Mt.a,{item:!0},l.a.createElement(R.a,{component:"h1",variant:"h4"},a.supportFinished))),l.a.createElement(Mt.a,{item:!0,xs:4},l.a.createElement(Ot.a,{style:{fontSize:100,color:"#FFFFFF"}}))))),l.a.createElement(Mt.a,{item:!0,xs:12,sm:6,md:4},l.a.createElement(ht.a,{className:e.card4,style:{overflow:"hidden"},elevation:6},l.a.createElement(Mt.a,{container:!0,spacing:3},l.a.createElement(Mt.a,{item:!0,xs:8},l.a.createElement(R.a,{component:"h3",variant:"h6",paragraph:!0},"Nuevos Contactos"),l.a.createElement(Mt.a,{item:!0},l.a.createElement(R.a,{component:"h1",variant:"h4"},(e=>{let a={};e&&(a={});const{count:t}=Il(a);return t})(!0)))),l.a.createElement(Mt.a,{item:!0,xs:4},l.a.createElement(il.a,{style:{fontSize:100,color:"#FFFFFF"}}))))),l.a.createElement(Mt.a,{item:!0,xs:12,sm:6,md:4},l.a.createElement(ht.a,{className:e.card8,style:{overflow:"hidden"},elevation:6},l.a.createElement(Mt.a,{container:!0,spacing:3},l.a.createElement(Mt.a,{item:!0,xs:8},l.a.createElement(R.a,{component:"h3",variant:"h6",paragraph:!0},"T.M. de Conversaci\xf3n"),l.a.createElement(Mt.a,{item:!0},l.a.createElement(R.a,{component:"h1",variant:"h4"},I(a.avgSupportTime)))),l.a.createElement(Mt.a,{item:!0,xs:4},l.a.createElement(ml.a,{style:{fontSize:100,color:"#FFFFFF"}}))))),l.a.createElement(Mt.a,{item:!0,xs:12,sm:6,md:4},l.a.createElement(ht.a,{className:e.card9,style:{overflow:"hidden"},elevation:6},l.a.createElement(Mt.a,{container:!0,spacing:3},l.a.createElement(Mt.a,{item:!0,xs:8},l.a.createElement(R.a,{component:"h3",variant:"h6",paragraph:!0},"T.M. de Espera"),l.a.createElement(Mt.a,{item:!0},l.a.createElement(R.a,{component:"h1",variant:"h4"},I(a.avgWaitTime)))),l.a.createElement(Mt.a,{item:!0,xs:4},l.a.createElement(pl.a,{style:{fontSize:100,color:"#FFFFFF"}}))))),l.a.createElement(Mt.a,{item:!0,xs:12},r.length?l.a.createElement(kl,{attendants:r,loading:E}):null),l.a.createElement(Mt.a,{item:!0,xs:12},l.a.createElement(ht.a,{className:e.fixedHeightPaper2},l.a.createElement(Ul,null))),l.a.createElement(Mt.a,{item:!0,xs:12},l.a.createElement(ht.a,{className:e.fixedHeightPaper2},l.a.createElement(_l,null))))))},Kl=t(1564),Yl=t(76),Ql=t.n(Yl),Xl=t(1608),Jl=t(1560),Zl=t(891),$l=t.n(Zl),er=t(892),ar=t.n(er),tr=t(1561),nr=t(1562);var lr=()=>l.a.createElement(l.a.Fragment,null,l.a.createElement(V.a,{dense:!0},l.a.createElement(Pa.a,null,l.a.createElement($t.a,{animation:"wave",variant:"circle",width:40,height:40})),l.a.createElement(K.a,{primary:l.a.createElement($t.a,{animation:"wave",height:20,width:60}),secondary:l.a.createElement($t.a,{animation:"wave",height:20,width:90})})),l.a.createElement(I.a,{variant:"inset"}),l.a.createElement(V.a,{dense:!0},l.a.createElement(Pa.a,null,l.a.createElement($t.a,{animation:"wave",variant:"circle",width:40,height:40})),l.a.createElement(K.a,{primary:l.a.createElement($t.a,{animation:"wave",height:20,width:70}),secondary:l.a.createElement($t.a,{animation:"wave",height:20,width:120})})),l.a.createElement(I.a,{variant:"inset"}),l.a.createElement(V.a,{dense:!0},l.a.createElement(Pa.a,null,l.a.createElement($t.a,{animation:"wave",variant:"circle",width:40,height:40})),l.a.createElement(K.a,{primary:l.a.createElement($t.a,{animation:"wave",height:20,width:60}),secondary:l.a.createElement($t.a,{animation:"wave",height:20,width:90})})),l.a.createElement(I.a,{variant:"inset"}));const rr=Object(A.a)(e=>({ticketsListWrapper:{position:"relative",display:"flex",height:"100%",flexDirection:"column",overflow:"hidden",borderTopRightRadius:0,borderBottomRightRadius:0},ticketsList:{flex:1,maxHeight:"100%",overflowY:"scroll",...e.scrollbarStyles,borderTop:"2px solid rgba(0, 0, 0, 0.12)"},ticketsListHeader:{color:"rgb(67, 83, 105)",zIndex:2,backgroundColor:"white",borderBottom:"1px solid rgba(0, 0, 0, 0.12)",display:"flex",alignItems:"center",justifyContent:"space-between"},ticketsCount:{fontWeight:"normal",color:"rgb(104, 121, 146)",marginLeft:"8px",fontSize:"14px"},noTicketsText:{textAlign:"center",color:"rgb(104, 121, 146)",fontSize:"14px",lineHeight:"1.4"},noTicketsTitle:{textAlign:"center",fontSize:"16px",fontWeight:"600",margin:"0px"},noTicketsDiv:{display:"flex",height:"100px",margin:40,flexDirection:"column",alignItems:"center",justifyContent:"center"}})),or=(e,a)=>{if("LOAD_TICKETS"===a.type){return a.payload.forEach(a=>{const t=e.findIndex(e=>e.id===a.id);-1!==t?(e[t]=a,a.unreadMessages>0&&e.unshift(e.splice(t,1)[0])):e.push(a)}),[...e]}if("RESET_UNREAD"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t);return-1!==n&&(e[n].unreadMessages=0),[...e]}if("UPDATE_TICKET"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n?e[n]=t:e.unshift(t),[...e]}if("UPDATE_TICKET_UNREAD_MESSAGES"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n?(e[n]=t,e.unshift(e.splice(n,1)[0])):e.unshift(t),[...e]}if("UPDATE_TICKET_CONTACT"===a.type){const t=a.payload,n=e.findIndex(e=>e.contactId===t.id);return-1!==n&&(e[n].contact=t),[...e]}if("DELETE_TICKET"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t);return-1!==n&&e.splice(n,1),[...e]}if("RESET"===a.type)return[]};var ir=e=>{const{status:a,searchParam:t,tags:r,users:o,showAll:i,selectedQueueIds:c,updateCount:s,style:d}=e,m=rr(),[u,p]=Object(n.useState)(1),[g,E]=Object(n.useReducer)(or,[]),{user:b}=Object(n.useContext)(Xe),{profile:f,queues:h}=b,v=Object(n.useContext)(y);Object(n.useEffect)(()=>{E({type:"RESET"}),p(1)},[a,t,E,i,r,o,c]);const{tickets:x,hasMore:C,loading:O}=dn({pageNumber:u,searchParam:t,status:a,showAll:i,tags:JSON.stringify(r),users:JSON.stringify(o),queueIds:JSON.stringify(c)});Object(n.useEffect)(()=>{const e=h.map(e=>e.id),a=x.filter(a=>e.indexOf(a.queueId)>-1);E("user"===f?{type:"LOAD_TICKETS",payload:a}:{type:"LOAD_TICKETS",payload:x})},[x,a,t,h,f]),Object(n.useEffect)(()=>{const e=localStorage.getItem("companyId"),t=v.getSocket(e),n=e=>(!e.userId||e.userId===(null===b||void 0===b?void 0:b.id)||i)&&(!e.queueId||c.indexOf(e.queueId)>-1);return t.on("ready",()=>{a?t.emit("joinTickets",a):t.emit("joinNotification")}),t.on("company-".concat(e,"-ticket"),e=>{var t;"updateUnread"===e.action&&E({type:"RESET_UNREAD",payload:e.ticketId}),"update"===e.action&&n(e.ticket)&&e.ticket.status===a&&E({type:"UPDATE_TICKET",payload:e.ticket}),"update"===e.action&&((t=e.ticket).queueId&&-1===c.indexOf(t.queueId))&&E({type:"DELETE_TICKET",payload:e.ticket.id}),"delete"===e.action&&E({type:"DELETE_TICKET",payload:e.ticketId})}),t.on("company-".concat(e,"-appMessage"),e=>{var t,l;const r=h.map(e=>e.id);("user"!==f||-1!==r.indexOf(null===(t=e.ticket)||void 0===t||null===(l=t.queue)||void 0===l?void 0:l.id)&&null!==e.ticket.queue)&&("create"!==e.action||!n(e.ticket)||void 0!==a&&e.ticket.status!==a||E({type:"UPDATE_TICKET_UNREAD_MESSAGES",payload:e.ticket}))}),t.on("company-".concat(e,"-contact"),e=>{"update"===e.action&&E({type:"UPDATE_TICKET_CONTACT",payload:e.contact})}),()=>{t.disconnect()}},[a,i,b,c,r,o,f,h,v]),Object(n.useEffect)(()=>{"function"===typeof s&&s(g.length)},[g]);return l.a.createElement(ht.a,{className:m.ticketsListWrapper,style:d},l.a.createElement(ht.a,{square:!0,name:"closed",elevation:0,className:m.ticketsList,onScroll:e=>{if(!C||O)return;const{scrollTop:a,scrollHeight:t,clientHeight:n}=e.currentTarget;t-(a+100)<n&&p(e=>e+1)}},l.a.createElement(N.a,{style:{paddingTop:0}},0!==g.length||O?l.a.createElement(l.a.Fragment,null,g.map(e=>l.a.createElement(sn,{ticket:e,key:e.id}))):l.a.createElement("div",{className:m.noTicketsDiv},l.a.createElement("span",{className:m.noTicketsTitle},De.a.t("ticketsList.noTicketsTitle")),l.a.createElement("p",{className:m.noTicketsText},De.a.t("ticketsList.noTicketsMessage"))),O&&l.a.createElement(lr,null))))};var cr=e=>{let{children:a,value:t,name:n,...r}=e;return t===n?l.a.createElement("div",Object.assign({role:"tabpanel",id:"simple-tabpanel-".concat(n),"aria-labelledby":"simple-tab-".concat(n)},r),l.a.createElement(l.a.Fragment,null,a)):null},sr=t(1618);var dr=e=>{let{userQueues:a,selectedQueueIds:t=[],onChange:n}=e;return l.a.createElement("div",{style:{width:120,marginTop:-4}},l.a.createElement(On.a,{fullWidth:!0,margin:"dense"},l.a.createElement(Ht.a,{multiple:!0,displayEmpty:!0,variant:"outlined",value:t,onChange:e=>{n(e.target.value)},MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},getContentAnchorEl:null},renderValue:()=>De.a.t("ticketsQueueSelect.placeholder")},(null===a||void 0===a?void 0:a.length)>0&&a.map(e=>l.a.createElement(L.a,{dense:!0,key:e.id,value:e.id},l.a.createElement(sr.a,{style:{color:e.color},size:"small",color:"primary",checked:t.indexOf(e.id)>-1}),l.a.createElement(K.a,{primary:e.name}))))))};function mr(e){let{onFiltered:a}=e;const[t,r]=Object(n.useState)([]),[o,i]=Object(n.useState)([]);Object(n.useEffect)(()=>{!async function(){await c()}()},[]);const c=async()=>{try{const{data:e}=await _e.get("/tags/list");r(e)}catch(e){We(e)}};return l.a.createElement(Ma.a,{style:{padding:10}},l.a.createElement(Dt.a,{multiple:!0,size:"small",options:t,value:o,onChange:(e,t,n)=>(async e=>{i(e),a(e)})(t),getOptionLabel:e=>e.name,renderTags:(e,a)=>e.map((e,t)=>l.a.createElement(Sn.a,Object.assign({variant:"outlined",style:{backgroundColor:e.color||"#eee",textShadow:"1px 1px 1px #000",color:"white"},label:e.name},a({index:t}),{size:"small"}))),renderInput:e=>l.a.createElement(la.a,Object.assign({},e,{variant:"outlined",placeholder:"Filtro por Tags"}))}))}function ur(e){let{onFiltered:a,initialUsers:t}=e;const[r,o]=Object(n.useState)([]),[i,c]=Object(n.useState)([]);Object(n.useEffect)(()=>{!async function(){await s()}()},[]),Object(n.useEffect)(()=>{c([]),Array.isArray(t)&&Array.isArray(r)&&r.length>0&&d(t)},[t,r]);const s=async()=>{try{const{data:e}=await _e.get("/users/list"),a=e.map(e=>({id:e.id,name:e.name}));o(a)}catch(e){We(e)}},d=async e=>{c(e),a(e)};return l.a.createElement(Ma.a,{style:{padding:"0px 10px 10px"}},l.a.createElement(Dt.a,{multiple:!0,size:"small",options:r,value:i,onChange:(e,a,t)=>d(a),getOptionLabel:e=>e.name,getOptionSelected:(e,a)=>(null===e||void 0===e?void 0:e.id)===(null===a||void 0===a?void 0:a.id)||(null===e||void 0===e?void 0:e.name.toLowerCase())===(null===a||void 0===a?void 0:a.name.toLowerCase()),renderTags:(e,a)=>e.map((e,t)=>l.a.createElement(Sn.a,Object.assign({variant:"outlined",style:{backgroundColor:"#bfbfbf",textShadow:"1px 1px 1px #000",color:"white"},label:e.name},a({index:t}),{size:"small"}))),renderInput:e=>l.a.createElement(la.a,Object.assign({},e,{variant:"outlined",placeholder:"Filtro por Users"}))}))}const pr=Object(A.a)(e=>({ticketsWrapper:{position:"relative",display:"flex",height:"100%",flexDirection:"column",overflow:"hidden",borderTopRightRadius:0,borderBottomRightRadius:0,borderRadius:0},tabsHeader:{flex:"none",backgroundColor:e.palette.tabHeaderBackground},tabsInternal:{flex:"none",backgroundColor:e.palette.tabHeaderBackground},settingsIcon:{alignSelf:"center",marginLeft:"auto",padding:8},tab:{minWidth:120,width:120},internalTab:{minWidth:120,width:120,padding:5},ticketOptionsBox:{display:"flex",justifyContent:"space-between",alignItems:"center",background:e.palette.optionsBackground,padding:e.spacing(1)},ticketSearchLine:{padding:e.spacing(1)},serachInputWrapper:{flex:1,background:e.palette.total,display:"flex",borderRadius:40,padding:4,marginRight:e.spacing(1)},searchIcon:{color:"grey",marginLeft:6,marginRight:6,alignSelf:"center"},searchInput:{flex:1,border:"none",borderRadius:30},insiderTabPanel:{height:"100%",marginTop:"-72px",paddingTop:"72px"},insiderDoubleTabPanel:{display:"flex",flexDirection:"column",marginTop:"-72px",paddingTop:"72px",height:"100%"},labelContainer:{width:"auto",padding:0},iconLabelWrapper:{flexDirection:"row","& > *:first-child":{marginBottom:"3px !important",marginRight:16}},insiderTabLabel:{[e.breakpoints.down(1600)]:{display:"none"}},smallFormControl:{"& .MuiOutlinedInput-input":{padding:"12px 10px"},"& .MuiInputLabel-outlined":{marginTop:"-6px"}}}));var gr=()=>{const e=pr(),a=Object(x.useHistory)(),[t,r]=Object(n.useState)(""),[o,i]=Object(n.useState)("open"),[c,s]=Object(n.useState)("open"),[d,m]=Object(n.useState)(!1),[u,p]=Object(n.useState)(!1),g=Object(n.useRef)(),{user:E}=Object(n.useContext)(Xe),{profile:b}=E,[f,h]=Object(n.useState)(0),[y,v]=Object(n.useState)(0),C=E.queues.map(e=>e.id),[O,S]=Object(n.useState)(C||[]),[w,A]=Object(n.useState)([]),[j,k]=Object(n.useState)([]);let T;Object(n.useEffect)(()=>{"ADMIN"===E.profile.toUpperCase()&&p(!0)},[]),Object(n.useEffect)(()=>{"search"===o&&g.current.focus()},[o]);const I=e=>{if(c!==e)return{width:0,height:0}};return l.a.createElement(ht.a,{elevation:0,variant:"outlined",className:e.ticketsWrapper},l.a.createElement(Gt,{modalOpen:d,onClose:e=>{(e=>{m(!1),void 0!==e&&void 0!==e.uuid&&a.push("/tickets/".concat(e.uuid))})(e)}}),l.a.createElement(ht.a,{elevation:0,square:!0,className:e.tabsHeader},l.a.createElement(Xl.a,{value:o,onChange:(e,a)=>{i(a)},variant:"fullWidth",indicatorColor:"primary",textColor:"primary","aria-label":"icon label tabs example"},l.a.createElement(Jl.a,{value:"open",icon:l.a.createElement($l.a,null),label:De.a.t("tickets.tabs.open.title"),classes:{root:e.tab}}),l.a.createElement(Jl.a,{value:"closed",icon:l.a.createElement(ar.a,null),label:De.a.t("tickets.tabs.closed.title"),classes:{root:e.tab}}),l.a.createElement(Jl.a,{value:"search",icon:l.a.createElement(Ql.a,null),label:De.a.t("tickets.tabs.search.title"),classes:{root:e.tab}}))),l.a.createElement(ht.a,{square:!0,elevation:0,className:e.ticketOptionsBox},"search"===o?l.a.createElement("div",{className:e.serachInputWrapper},l.a.createElement(Ql.a,{className:e.searchIcon}),l.a.createElement(yt.a,{className:e.searchInput,inputRef:g,placeholder:De.a.t("tickets.search.placeholder"),type:"search",onChange:e=>{const a=e.target.value.toLowerCase();if(clearTimeout(T),""===a)return r(a),void i("open");T=setTimeout(()=>{r(a)},500)}})):l.a.createElement(l.a.Fragment,null,l.a.createElement(ra.a,{variant:"outlined",color:"primary",onClick:()=>m(!0)},De.a.t("ticketsManager.buttons.newTicket")),l.a.createElement($e,{role:E.profile,perform:"tickets-manager:showall",yes:()=>l.a.createElement(tr.a,{label:De.a.t("tickets.buttons.showAll"),labelPlacement:"start",control:l.a.createElement(nr.a,{size:"small",checked:u,onChange:()=>p(e=>!e),name:"showAllTickets",color:"primary"})})})),l.a.createElement(dr,{style:{marginLeft:6},selectedQueueIds:O,userQueues:null===E||void 0===E?void 0:E.queues,onChange:e=>S(e)})),l.a.createElement(cr,{value:o,name:"open",className:e.ticketsWrapper},l.a.createElement(Xl.a,{value:c,onChange:(e,a)=>{s(a)},indicatorColor:"primary",textColor:"primary",variant:"fullWidth"},l.a.createElement(Jl.a,{label:l.a.createElement(Q.a,{className:e.badge,badgeContent:f,color:"primary"},De.a.t("ticketsList.assignedHeader")),value:"open"}),l.a.createElement(Jl.a,{label:l.a.createElement(Q.a,{className:e.badge,badgeContent:y,color:"secondary"},De.a.t("ticketsList.pendingHeader")),value:"pending"})),l.a.createElement(ht.a,{className:e.ticketsWrapper},l.a.createElement(ir,{status:"open",showAll:u,selectedQueueIds:O,updateCount:e=>h(e),style:I("open")}),l.a.createElement(ir,{status:"pending",selectedQueueIds:O,updateCount:e=>v(e),style:I("pending")}))),l.a.createElement(cr,{value:o,name:"closed",className:e.ticketsWrapper},l.a.createElement(ir,{status:"closed",showAll:!0,selectedQueueIds:O})),l.a.createElement(cr,{value:o,name:"search",className:e.ticketsWrapper},l.a.createElement(mr,{onFiltered:e=>{const a=e.map(e=>e.id);A(a)}}),"admin"===b&&l.a.createElement(ur,{onFiltered:e=>{const a=e.map(e=>e.id);k(a)}}),l.a.createElement(ir,{searchParam:t,showAll:!0,tags:w,users:j,selectedQueueIds:O})))},Er=t(1563),br=t(893),fr=t.n(br);var hr=e=>{let{classes:a}=e;return l.a.createElement("div",{className:a.content},l.a.createElement(ht.a,{square:!0,variant:"outlined",className:a.contactHeader},l.a.createElement(Mt.a,{container:!0},l.a.createElement(Mt.a,{item:!0},l.a.createElement($t.a,{animation:"wave",variant:"circle",width:60,height:60,className:a.contactAvatar})),l.a.createElement(Mt.a,{item:!0},l.a.createElement($t.a,{animation:"wave",height:25,width:90}),l.a.createElement($t.a,{animation:"wave",height:25,width:80}),l.a.createElement($t.a,{animation:"wave",height:25,width:80})))),l.a.createElement(ht.a,{square:!0,className:a.contactDetails},l.a.createElement(R.a,{variant:"subtitle1"},De.a.t("contactDrawer.extraInfo")),l.a.createElement(ht.a,{square:!0,variant:"outlined",className:a.contactExtraInfo},l.a.createElement($t.a,{animation:"wave",height:20,width:60}),l.a.createElement($t.a,{animation:"wave",height:20,width:160})),l.a.createElement(ht.a,{square:!0,variant:"outlined",className:a.contactExtraInfo},l.a.createElement($t.a,{animation:"wave",height:20,width:60}),l.a.createElement($t.a,{animation:"wave",height:20,width:160})),l.a.createElement(ht.a,{square:!0,variant:"outlined",className:a.contactExtraInfo},l.a.createElement($t.a,{animation:"wave",height:20,width:60}),l.a.createElement($t.a,{animation:"wave",height:20,width:160}))))};const yr=Object(A.a)(e=>({root:{display:"flex",flexWrap:"wrap"},textField:{marginRight:e.spacing(1),flex:1},extraAttr:{display:"flex",justifyContent:"center",alignItems:"center"},btnWrapper:{position:"relative"},buttonProgress:{color:Ra.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},textCenter:{backgroundColor:"red"}})),vr=Lt.b().shape({name:Lt.d().min(2,"Too Short!").max(50,"Too Long!").required("Required"),number:Lt.d().min(8,"Too Short!").max(50,"Too Long!"),email:Lt.d().email("Invalid email")});function xr(e){let{initialContact:a,onSave:t,onCancel:r}=e;const o=yr(),[i,c]=Object(n.useState)(a);Object(n.useEffect)(()=>{c(a)},[a]);return l.a.createElement(Ft.e,{initialValues:i,enableReinitialize:!0,validationSchema:vr,onSubmit:(e,a)=>{setTimeout(()=>{(async e=>{try{if(i.id)await _e.put("/contacts/".concat(i.id),e);else{const{data:a}=await _e.post("/contacts",e);t&&t(a)}C.b.success(De.a.t("contactModal.success"))}catch(a){We(a)}})(e),a.setSubmitting(!1)},400)}},e=>{let{values:a,errors:t,touched:n,isSubmitting:c}=e;return l.a.createElement(Ft.d,null,l.a.createElement(Mt.a,{container:!0,spacing:1},l.a.createElement(Mt.a,{item:!0,xs:12},l.a.createElement(Ft.b,{as:la.a,label:De.a.t("contactModal.form.name"),name:"name",autoFocus:!0,error:n.name&&Boolean(t.name),helperText:n.name&&t.name,variant:"outlined",margin:"dense",className:o.textField,fullWidth:!0})),l.a.createElement(Mt.a,{item:!0,xs:12},l.a.createElement(Ft.b,{as:la.a,label:De.a.t("contactModal.form.number"),name:"number",error:n.number&&Boolean(t.number),helperText:n.number&&t.number,placeholder:"5513912344321",variant:"outlined",margin:"dense",fullWidth:!0})),l.a.createElement(Mt.a,{item:!0,xs:12},l.a.createElement(Ft.b,{as:la.a,label:De.a.t("contactModal.form.email"),name:"email",error:n.email&&Boolean(t.email),helperText:n.email&&t.email,placeholder:"Email address",fullWidth:!0,margin:"dense",variant:"outlined"})),l.a.createElement(Mt.a,{item:!0,xs:12,spacing:1},l.a.createElement(Mt.a,{container:!0,spacing:1},l.a.createElement(Mt.a,{xs:6,item:!0},l.a.createElement(ra.a,{onClick:r,color:"secondary",disabled:c,variant:"outlined",fullWidth:!0},De.a.t("contactModal.buttons.cancel"))),l.a.createElement(Mt.a,{classes:o.textCenter,xs:6,item:!0},l.a.createElement(ra.a,{type:"submit",color:"primary",disabled:c,variant:"contained",className:o.btnWrapper,fullWidth:!0},i.id?"".concat(De.a.t("contactModal.buttons.okEdit")):"".concat(De.a.t("contactModal.buttons.okAdd")),c&&l.a.createElement(za.a,{size:24,className:o.buttonProgress})))))))})}const Cr=Object(A.a)(e=>({inline:{width:"100%"}}));function Or(e){const{note:a,deleteItem:t}=e,n=Cr();return l.a.createElement(V.a,{alignItems:"flex-start"},l.a.createElement(Pa.a,null,l.a.createElement(Na.a,{alt:a.user.name,src:"/static/images/avatar/1.jpg"})),l.a.createElement(K.a,{primary:l.a.createElement(l.a.Fragment,null,l.a.createElement(R.a,{component:"span",variant:"body2",className:n.inline,color:"textPrimary"},a.note)),secondary:l.a.createElement(l.a.Fragment,null,a.user.name,", ",w()(a.createdAt).format("DD/MM/YY HH:mm"))}),l.a.createElement(oa.a,null,l.a.createElement(T.a,{onClick:()=>{t(a)},edge:"end","aria-label":"delete"},l.a.createElement(ca.a,null))))}var Sr=()=>({saveNote:async e=>{const{data:a}=await _e.request({url:"/ticket-notes",method:"POST",data:e});return a},deleteNote:async e=>{const{data:a}=await _e.request({url:"/ticket-notes/".concat(e),method:"DELETE"});return a},listNotes:async e=>{const{data:a}=await _e.request({url:"/ticket-notes/list",method:"GET",params:e});return a}});const wr=Object(A.a)(e=>({root:{"& .MuiTextField-root":{margin:e.spacing(1),width:"350px"}},list:{width:"100%",maxWidth:"350px",maxHeight:"200px",backgroundColor:e.palette.background.paper,overflow:"auto"},inline:{width:"100%"}})),Ar=Lt.b().shape({note:Lt.d().min(2,"Too Short!").required("Required")});function jr(e){let{ticket:a}=e;const{id:t,contactId:r}=a,o=wr(),[i,c]=Object(n.useState)({note:""}),[s,d]=Object(n.useState)(!1),[m,u]=Object(n.useState)(!1),[p,g]=Object(n.useState)({}),[E,b]=Object(n.useState)([]),{saveNote:f,deleteNote:h,listNotes:y}=Sr();Object(n.useEffect)(()=>{!async function(){v(),await S()}()},[]);const v=()=>{c({note:""}),d(!1)},x=e=>{c({note:e.target.value})},O=e=>{g(e),u(!0)},S=async()=>{d(!0);try{const e=await y({ticketId:t,contactId:r});b(e)}catch(e){C.b.error(e)}d(!1)};return l.a.createElement(l.a.Fragment,null,l.a.createElement(Et,{title:"Excluir Registro",open:m,onClose:u,onConfirm:async()=>{d(!0);try{await h(p.id),await S(),g({}),C.b.success("Observa\xe7\xe3o exclu\xedda com sucesso!")}catch(e){C.b.error(e)}d(!1)}},"Deseja realmente excluir este registro?"),l.a.createElement(Ft.e,{initialValues:i,enableReinitialize:!0,validationSchema:Ar,onSubmit:(e,a)=>{setTimeout(()=>{(async e=>{d(!0);try{await f({...e,ticketId:t,contactId:r}),await S(),c({note:""}),C.b.success("Observa\xe7\xe3o adicionada com sucesso!")}catch(a){C.b.error(a)}d(!1)})(e),a.setSubmitting(!1)},400)}},e=>{let{touched:a,errors:t,setErrors:n}=e;return l.a.createElement(Ft.d,null,l.a.createElement(Mt.a,{container:!0,spacing:2},l.a.createElement(Mt.a,{xs:12,item:!0},l.a.createElement(Ft.b,{as:la.a,name:"note",rows:3,label:De.a.t("ticketOptionsMenu.appointmentsModal.textarea"),placeholder:De.a.t("ticketOptionsMenu.appointmentsModal.placeholder"),multiline:!0,error:a.note&&Boolean(t.note),helperText:a.note&&t.note,variant:"outlined",onChange:x,fullWidth:!0})),E.length>0&&l.a.createElement(Mt.a,{xs:12,item:!0},l.a.createElement(N.a,{className:o.list},E.map(e=>l.a.createElement(Or,{note:e,key:e.id,deleteItem:O})))),l.a.createElement(Mt.a,{xs:12,item:!0},l.a.createElement(Mt.a,{container:!0,spacing:2},l.a.createElement(Mt.a,{xs:6,item:!0},l.a.createElement(ra.a,{onClick:()=>{c(""),n({})},color:"primary",variant:"outlined",fullWidth:!0},"Cancelar")),l.a.createElement(Mt.a,{xs:6,item:!0},l.a.createElement(Ha,{loading:s,color:"primary",type:"submit",variant:"contained",autoFocus:!0,fullWidth:!0},"Guardar"))))))}))}const kr=Object(A.a)(e=>({drawer:{width:320,flexShrink:0},drawerPaper:{width:320,display:"flex",borderTop:"1px solid rgba(0, 0, 0, 0.12)",borderRight:"1px solid rgba(0, 0, 0, 0.12)",borderBottom:"1px solid rgba(0, 0, 0, 0.12)",borderTopRightRadius:4,borderBottomRightRadius:4},header:{display:"flex",borderBottom:"1px solid rgba(0, 0, 0, 0.12)",backgroundColor:e.palette.contactdrawer,alignItems:"center",padding:e.spacing(0,1),minHeight:"73px",justifyContent:"flex-start"},content:{display:"flex",backgroundColor:e.palette.contactdrawer,flexDirection:"column",padding:"8px 0px 8px 8px",height:"100%",overflowY:"scroll",...e.scrollbarStyles},contactAvatar:{margin:15,width:100,height:100},contactHeader:{display:"flex",padding:8,flexDirection:"column",alignItems:"center",justifyContent:"center","& > *":{margin:4}},contactDetails:{marginTop:8,padding:8,display:"flex",flexDirection:"column"},contactExtraInfo:{marginTop:4,padding:6}}));var Tr=e=>{var a;let{open:t,handleDrawerClose:r,contact:o,ticket:i,loading:c}=e;const s=kr(),[d,m]=Object(n.useState)(!1),[u,p]=Object(n.useState)(!1);return Object(n.useEffect)(()=>{p(!1)},[t,o]),l.a.createElement(l.a.Fragment,null,l.a.createElement(k.a,{className:s.drawer,variant:"persistent",anchor:"right",open:t,PaperProps:{style:{position:"absolute"}},BackdropProps:{style:{position:"absolute"}},ModalProps:{container:document.getElementById("drawer-container"),style:{position:"absolute"}},classes:{paper:s.drawerPaper}},l.a.createElement("div",{className:s.header},l.a.createElement(T.a,{onClick:r},l.a.createElement(xt.a,null)),l.a.createElement(R.a,{style:{justifySelf:"center"}},De.a.t("contactDrawer.header"))),c?l.a.createElement(hr,{classes:s}):l.a.createElement("div",{className:s.content},l.a.createElement(ht.a,{square:!0,variant:"outlined",className:s.contactHeader},l.a.createElement(Zt.a,{onClick:()=>{},style:{cursor:"pointer",width:"100%"},titleTypographyProps:{noWrap:!0},subheaderTypographyProps:{noWrap:!0},avatar:l.a.createElement(Na.a,{src:o.profilePicUrl,alt:"contact_image",style:{width:60,height:60}}),title:l.a.createElement(l.a.Fragment,null,l.a.createElement(R.a,{onClick:()=>p(!0)},o.name,l.a.createElement(fr.a,{style:{fontSize:16,marginLeft:5}}))),subheader:l.a.createElement(l.a.Fragment,null,l.a.createElement(R.a,{style:{fontSize:12}},l.a.createElement(Er.a,{href:"tel:".concat(o.number)},o.number)),l.a.createElement(R.a,{style:{fontSize:12}},l.a.createElement(Er.a,{href:"mailto:".concat(o.email)},o.email)))}),l.a.createElement(ra.a,{variant:"outlined",color:"primary",onClick:()=>m(!u),style:{fontSize:12}},De.a.t("contactDrawer.buttons.edit")),o.id&&u&&l.a.createElement(xr,{initialContact:o,onCancel:()=>p(!1)})),l.a.createElement(ht.a,{square:!0,variant:"outlined",className:s.contactDetails},l.a.createElement(R.a,{variant:"subtitle1",style:{marginBottom:10}},De.a.t("ticketOptionsMenu.appointmentsModal.title")),l.a.createElement(jr,{ticket:i})),l.a.createElement(ht.a,{square:!0,variant:"outlined",className:s.contactDetails},l.a.createElement(Ut,{open:d,onClose:()=>m(!1),contactId:o.id}),l.a.createElement(R.a,{variant:"subtitle1"},De.a.t("contactDrawer.extraInfo")),null===o||void 0===o||null===(a=o.extraInfo)||void 0===a?void 0:a.map(e=>l.a.createElement(ht.a,{key:e.id,square:!0,variant:"outlined",className:s.contactExtraInfo},l.a.createElement(Cn.a,null,e.name),l.a.createElement(R.a,{component:"div",noWrap:!0,style:{paddingTop:2}},l.a.createElement(Ya,null,e.value))))))))},Ir=(t(1268),t(944)),Nr=t(894),Mr=t.n(Nr),Pr=t(158),Rr=t.n(Pr),Dr=t(642),Lr=t.n(Dr),Fr=t(354),qr=t.n(Fr),Wr=t(544),Br=t.n(Wr),zr=t(643),Ur=t.n(zr),Hr=t(897),_r=t.n(Hr),Vr=t(896),Gr=t.n(Vr),Kr=t(895),Yr=t.n(Kr);const Qr=Object(A.a)(e=>({timerBox:{display:"flex",marginLeft:10,marginRight:10,alignItems:"center"}}));var Xr=()=>{const e=Qr(),[a,t]=Object(n.useState)({minutes:0,seconds:0});Object(n.useEffect)(()=>{const e=setInterval(()=>t(e=>59===e.seconds?{...e,minutes:e.minutes+1,seconds:0}:{...e,seconds:e.seconds+1}),1e3);return()=>{clearInterval(e)}},[]);const r=e=>e<10?"0"+e:e;return l.a.createElement("div",{className:e.timerBox},l.a.createElement("span",null,"".concat(r(a.minutes),":").concat(r(a.seconds))))};var Jr=()=>({save:async e=>{const{data:a}=await _e.request({url:"/quick-messages",method:"POST",data:e});return a},update:async e=>{const{data:a}=await _e.request({url:"/quick-messages/".concat(e.id),method:"PUT",data:e});return a},deleteRecord:async e=>{const{data:a}=await _e.request({url:"/quick-messages/".concat(e),method:"DELETE"});return a},list:async e=>{const{data:a}=await _e.request({url:"/quick-messages/list",method:"GET",params:e});return a}});const Zr=new Mr.a({bitRate:128}),$r=Object(A.a)(e=>({mainWrapper:{backgroundColor:e.palette.bordabox,display:"flex",flexDirection:"column",alignItems:"center",borderTop:"1px solid rgba(0, 0, 0, 0.12)"},newMessageBox:{backgroundColor:e.palette.newmessagebox,width:"100%",display:"flex",padding:"7px",alignItems:"center"},messageInputWrapper:{padding:6,marginRight:7,backgroundColor:e.palette.inputdigita,display:"flex",borderRadius:20,flex:1},messageInput:{paddingLeft:10,flex:1,border:"none"},sendMessageIcons:{color:"grey"},uploadInput:{display:"none"},viewMediaInputWrapper:{display:"flex",padding:"10px 13px",position:"relative",justifyContent:"space-between",alignItems:"center",backgroundColor:"#eee",borderTop:"1px solid rgba(0, 0, 0, 0.12)"},emojiBox:{position:"absolute",bottom:63,width:40,borderTop:"1px solid #e8e8e8"},circleLoading:{color:Ra.a[500],opacity:"70%",position:"absolute",top:"20%",left:"50%",marginLeft:-12},audioLoading:{color:Ra.a[500],opacity:"70%"},recorderWrapper:{display:"flex",alignItems:"center",alignContent:"middle"},cancelAudioIcon:{color:"red"},sendAudioIcon:{color:"green"},replyginMsgWrapper:{display:"flex",width:"100%",alignItems:"center",justifyContent:"center",paddingTop:8,paddingLeft:73,paddingRight:7},replyginMsgContainer:{flex:1,marginRight:5,overflowY:"hidden",backgroundColor:"rgba(0, 0, 0, 0.05)",borderRadius:"7.5px",display:"flex",position:"relative"},replyginMsgBody:{padding:10,height:"auto",display:"block",whiteSpace:"pre-wrap",overflow:"hidden"},replyginContactMsgSideColor:{flex:"none",width:"4px",backgroundColor:"#35cd96"},replyginSelfMsgSideColor:{flex:"none",width:"4px",backgroundColor:"#6bcbef"},messageContactName:{display:"flex",color:"#6bcbef",fontWeight:500}})),eo=e=>{const{disabled:a,showEmoji:t,setShowEmoji:n,handleAddEmoji:r}=e,o=$r();return l.a.createElement(l.a.Fragment,null,l.a.createElement(T.a,{"aria-label":"emojiPicker",component:"span",disabled:a,onClick:e=>n(e=>!e)},l.a.createElement(Lr.a,{className:o.sendMessageIcons})),t?l.a.createElement("div",{className:o.emojiBox},l.a.createElement(Ir.a,{perLine:16,showPreview:!1,showSkinTones:!1,onSelect:r})):null)},ao=e=>{const{width:a,setSignMessage:t,signMessage:n}=e;return Object(Kl.b)("md",a)?l.a.createElement(tr.a,{style:{marginRight:7,color:"gray"},label:De.a.t("messagesInput.signMessage"),labelPlacement:"start",control:l.a.createElement(nr.a,{size:"small",checked:n,onChange:e=>{t(e.target.checked)},name:"showAllTickets",color:"primary"})}):null},to=e=>{const{handleChangeMedias:a,disableOption:t}=e,n=$r();return l.a.createElement(l.a.Fragment,null,l.a.createElement("input",{multiple:!0,type:"file",id:"upload-button",disabled:t(),className:n.uploadInput,onChange:a}),l.a.createElement("label",{htmlFor:"upload-button"},l.a.createElement(T.a,{"aria-label":"upload",component:"span",disabled:t()},l.a.createElement(Rr.a,{className:n.sendMessageIcons}))))},no=e=>{const{inputMessage:a,loading:t,recording:n,ticketStatus:r,handleSendMessage:o,handleCancelAudio:i,handleUploadAudio:c,handleStartRecording:s}=e,d=$r();return a?l.a.createElement(T.a,{"aria-label":"sendMessage",component:"span",onClick:o,disabled:t},l.a.createElement(qr.a,{className:d.sendMessageIcons})):n?l.a.createElement("div",{className:d.recorderWrapper},l.a.createElement(T.a,{"aria-label":"cancelRecording",component:"span",fontSize:"large",disabled:t,onClick:i},l.a.createElement(Yr.a,{className:d.cancelAudioIcon})),t?l.a.createElement("div",null,l.a.createElement(za.a,{className:d.audioLoading})):l.a.createElement(Xr,null),l.a.createElement(T.a,{"aria-label":"sendRecordedAudio",component:"span",onClick:c,disabled:t},l.a.createElement(Gr.a,{className:d.sendAudioIcon}))):l.a.createElement(T.a,{"aria-label":"showRecorder",component:"span",disabled:t||"open"!==r,onClick:s},l.a.createElement(_r.a,{className:d.sendMessageIcons}))},lo=e=>{const{loading:a,inputRef:t,ticketStatus:r,inputMessage:o,setInputMessage:i,handleSendMessage:c,handleInputPaste:s,disableOption:d,handleQuickAnswersClick:m}=e,u=$r(),[p,g]=Object(n.useState)([]),[E,b]=Object(n.useState)([]),[f,h]=Object(n.useState)(!1),{user:y}=Object(n.useContext)(Xe),{list:v}=Jr();Object(n.useEffect)(()=>{!async function(){const e=localStorage.getItem("companyId"),a=(await v({companyId:e,userId:y.id})).map(e=>{let a=e.message;return Object(qe.isString)(a)&&a.length>35&&(a=e.message.substring(0,35)+"..."),{value:e.message,label:"/".concat(e.shortcode," - ").concat(a),mediaPath:e.mediaPath}});g(a)}()},[]),Object(n.useEffect)(()=>{if(Object(qe.isString)(o)&&!Object(qe.isEmpty)(o)&&o.length>1){const e=o.charAt(0);h(e.indexOf("/")>-1);const a=p.filter(e=>e.label.indexOf(o)>-1);b(a)}else h(!1)},[o]);const x=e=>{e&&(e.focus(),t.current=e)};return l.a.createElement("div",{className:u.messageInputWrapper},l.a.createElement(Dt.a,{freeSolo:!0,open:f,id:"grouped-demo",value:o,options:E,closeIcon:null,getOptionLabel:e=>Object(qe.isObject)(e)?e.label:e,onChange:(e,a)=>{Object(qe.isObject)(a)&&Object(qe.has)(a,"value")&&Object(qe.isNil)(a.mediaPath)?(i(a.value),setTimeout(()=>{t.current.scrollTop=t.current.scrollHeight},200)):Object(qe.isObject)(a)&&Object(qe.has)(a,"value")&&!Object(qe.isNil)(a.mediaPath)&&(m(a),setTimeout(()=>{t.current.scrollTop=t.current.scrollHeight},200))},onInputChange:(e,a,t)=>{"input"===t&&i(e.target.value)},onPaste:e=>{"open"===r&&s(e)},onKeyPress:e=>{a||e.shiftKey||"Enter"===e.key&&c()},style:{width:"100%"},renderInput:e=>{const{InputLabelProps:a,InputProps:t,...n}=e;return l.a.createElement(yt.a,Object.assign({},e.InputProps,n,{disabled:d(),inputRef:x,placeholder:"open"===r?De.a.t("messagesInput.placeholderOpen"):De.a.t("messagesInput.placeholderClosed"),multiline:!0,className:u.messageInput,maxRows:5}))}}))};var ro=Object(Kl.a)()(e=>{var a;const{ticketStatus:t,ticketId:r}=e,o=$r(),[i,c]=Object(n.useState)([]),[s,d]=Object(n.useState)(""),[m,u]=Object(n.useState)(!1),[p,g]=Object(n.useState)(!1),[E,b]=Object(n.useState)(!1),f=Object(n.useRef)(),{setReplyingMessage:h,replyingMessage:y}=Object(n.useContext)(bt),{user:v}=Object(n.useContext)(Xe),[x,C]=function(e,a){const[t,l]=Object(n.useState)(()=>{try{const t=localStorage.getItem(e);return t?JSON.parse(t):a}catch(t){return We(t),a}});return[t,a=>{try{const n=a instanceof Function?a(t):a;l(n),localStorage.setItem(e,JSON.stringify(n))}catch(n){We(n)}}]}("signOption",!0);Object(n.useEffect)(()=>{f.current.focus()},[y]),Object(n.useEffect)(()=>(f.current.focus(),()=>{d(""),u(!1),c([]),h(null)}),[r,h]);const S=e=>{let a=e.native;d(e=>e+a)},w=e=>{if(!e.target.files)return;const a=Array.from(e.target.files);c(a)},A=e=>{e.clipboardData.files[0]&&c([e.clipboardData.files[0]])},j=async e=>{if(e.mediaPath)try{const{data:a}=await ze.a.get(e.mediaPath,{responseType:"blob"});return(async(e,a)=>{g(!0);try{const t=e.type.split("/")[1],n=new FormData,l="".concat((new Date).getTime(),".").concat(t);n.append("medias",e,l),n.append("body",a),n.append("fromMe",!0),await _e.post("/messages/".concat(r),n)}catch(t){We(t),g(!1)}g(!1)})(a,e.value),void d("")}catch(a){We(a)}d(""),d(e.value)},k=async()=>{if(""===s.trim())return;g(!0);const e={read:1,fromMe:!0,mediaUrl:"",body:x?"*".concat(null===v||void 0===v?void 0:v.name,":*\n").concat(s.trim()):s.trim(),quotedMsg:y};try{await _e.post("/messages/".concat(r),e)}catch(a){We(a)}d(""),u(!1),g(!1),h(null)},I=async()=>{g(!0);try{await navigator.mediaDevices.getUserMedia({audio:!0}),await Zr.start(),b(!0),g(!1)}catch(e){We(e),g(!1)}},N=async()=>{g(!0);try{const[,e]=await Zr.stop().getMp3();if(e.size<1e4)return g(!1),void b(!1);const a=new FormData,t="audio-record-site-".concat((new Date).getTime(),".mp3");a.append("medias",e,t),a.append("body",t),a.append("fromMe",!0),await _e.post("/messages/".concat(r),a)}catch(e){We(e)}b(!1),g(!1)},M=async()=>{try{await Zr.stop().getMp3(),b(!1)}catch(e){We(e)}},P=()=>p||E||"open"!==t;return i.length>0?l.a.createElement(ht.a,{elevation:0,square:!0,className:o.viewMediaInputWrapper},l.a.createElement(T.a,{"aria-label":"cancel-upload",component:"span",onClick:e=>c([])},l.a.createElement(Br.a,{className:o.sendMessageIcons})),p?l.a.createElement("div",null,l.a.createElement(za.a,{className:o.circleLoading})):l.a.createElement("span",null,null===(a=i[0])||void 0===a?void 0:a.name),l.a.createElement(T.a,{"aria-label":"send-upload",component:"span",onClick:async e=>{g(!0),e.preventDefault();const a=new FormData;a.append("fromMe",!0),i.forEach(e=>{a.append("medias",e),a.append("body",e.name)});try{await _e.post("/messages/".concat(r),a)}catch(t){We(t)}g(!1),c([])},disabled:p},l.a.createElement(qr.a,{className:o.sendMessageIcons}))):l.a.createElement(ht.a,{square:!0,elevation:0,className:o.mainWrapper},y&&(e=>{var a;return l.a.createElement("div",{className:o.replyginMsgWrapper},l.a.createElement("div",{className:o.replyginMsgContainer},l.a.createElement("span",{className:Object(O.a)(o.replyginContactMsgSideColor,{[o.replyginSelfMsgSideColor]:!e.fromMe})}),l.a.createElement("div",{className:o.replyginMsgBody},!e.fromMe&&l.a.createElement("span",{className:o.messageContactName},null===(a=e.contact)||void 0===a?void 0:a.name),e.body)),l.a.createElement(T.a,{"aria-label":"showRecorder",component:"span",disabled:p||"open"!==t,onClick:()=>h(null)},l.a.createElement(Ur.a,{className:o.sendMessageIcons})))})(y),l.a.createElement("div",{className:o.newMessageBox},l.a.createElement(eo,{disabled:P(),handleAddEmoji:S,showEmoji:m,setShowEmoji:u}),l.a.createElement(to,{disableOption:P,handleChangeMedias:w}),l.a.createElement(ao,{width:e.width,setSignMessage:C,signMessage:x}),l.a.createElement(lo,{loading:p,inputRef:f,ticketStatus:t,inputMessage:s,setInputMessage:d,handleSendMessage:k,handleInputPaste:A,disableOption:P,handleQuickAnswersClick:j}),l.a.createElement(no,{inputMessage:s,loading:p,recording:E,ticketStatus:t,handleSendMessage:k,handleCancelAudio:M,handleUploadAudio:N,handleStartRecording:I})))});function oo(e){let{ticket:a}=e;const[t,r]=Object(n.useState)([]),[o,i]=Object(n.useState)([]),c=Object(n.useRef)(!0);Object(n.useEffect)(()=>()=>{c.current=!1},[]),Object(n.useEffect)(()=>{c.current&&d().then(()=>{Array.isArray(a.tags)?i(a.tags):i([])})},[a]);const s=async e=>{try{const{data:a}=await _e.post("/tags",e);return a}catch(a){We(a)}},d=async()=>{try{const{data:e}=await _e.get("/tags/list");r(e)}catch(e){We(e)}},m=async(e,t)=>{let n=[];if("create-option"===t){if(Object(qe.isArray)(e))for(let a of e)if(Object(qe.isString)(a)){const e=await s({name:a});n.push(e)}else n.push(a);await d()}else n=e;i(n),await(async e=>{try{const{data:a}=await _e.post("/tags/sync",e);return a}catch(a){We(a)}})({ticketId:a.id,tags:n})};return l.a.createElement(ht.a,{style:{padding:12}},l.a.createElement(Dt.a,{multiple:!0,size:"small",options:t,value:o,freeSolo:!0,onChange:(e,a,t)=>m(a,t),getOptionLabel:e=>e.name,renderTags:(e,a)=>e.map((e,t)=>l.a.createElement(Sn.a,Object.assign({variant:"outlined",style:{background:e.color||"#eee",color:"#FFF",marginRight:1,fontWeight:600,borderRadius:3,fontSize:"0.8em",whiteSpace:"nowrap"},label:e.name.toUpperCase()},a({index:t}),{size:"small"}))),renderInput:e=>l.a.createElement(la.a,Object.assign({},e,{variant:"outlined",placeholder:"Tags"})),PaperComponent:e=>{let{children:a}=e;return l.a.createElement(ht.a,{style:{width:400,marginLeft:12}},a)}}))}var io=t(1565),co=t(1567);var so=()=>({findAll:async()=>{const{data:e}=await _e.get("/queue");return e}});const mo=Object(A.a)(e=>({maxWidth:{width:"100%"}})),uo=Object(Rt.a)({trim:!0});var po=e=>{let{modalOpen:a,onClose:t,ticketid:r}=e;const o=Object(x.useHistory)(),[i,c]=Object(n.useState)([]),[s,d]=Object(n.useState)([]),[m,u]=Object(n.useState)([]),[p,g]=Object(n.useState)(!1),[E,b]=Object(n.useState)(""),[f,h]=Object(n.useState)(null),[y,v]=Object(n.useState)(""),C=mo(),{findAll:O}=so(),S=Object(n.useRef)(!0),[w,A]=Object(n.useState)([]),[j,k]=Object(n.useState)(""),{user:T}=Object(n.useContext)(Xe),{companyId:I,whatsappId:N}=T;Object(n.useEffect)(()=>()=>{S.current=!1},[]),Object(n.useEffect)(()=>{g(!0);const e=setTimeout(()=>{null!==N&&void 0!==N&&k(N),1===T.queues.length&&v(T.queues[0].id),(async()=>{_e.get("/whatsapp",{params:{companyId:I,session:0}}).then(e=>{let{data:a}=e;return A(a)})})(),g(!1)},500);return()=>clearTimeout(e)},[]),Object(n.useEffect)(()=>{if(S.current){(async()=>{const e=await O();u(e),d(e)})()}},[]),Object(n.useEffect)(()=>{if(!a||E.length<3)return void g(!1);const e=setTimeout(()=>{g(!0);(async()=>{try{const{data:e}=await _e.get("/users/",{params:{searchParam:E}});c(e.users),g(!1)}catch(e){g(!1),We(e)}})()},500);return()=>clearTimeout(e)},[E,a]);const M=()=>{t(),b(""),h(null)};return l.a.createElement(tt.a,{open:a,onClose:M,maxWidth:"lg",scroll:"paper"},l.a.createElement("form",{onSubmit:async e=>{if(e.preventDefault(),r&&y&&""!==y){g(!0);try{let e={};f&&(e.userId=f.id),y&&null!==y&&(e.queueId=y,f||(e.status="pending",e.userId=null)),j&&(e.whatsappId=j),await _e.put("/tickets/".concat(r),e),o.push("/tickets")}catch(a){g(!1),We(a)}}}},l.a.createElement(gt.a,{id:"form-dialog-title"},De.a.t("transferTicketModal.title")),l.a.createElement(pt.a,{dividers:!0},l.a.createElement(Dt.a,{style:{width:300,marginBottom:20},getOptionLabel:e=>"".concat(e.name),onChange:(e,a)=>{h(a),null!=a&&Array.isArray(a.queues)?d(a.queues):(d(m),v(""))},options:i,filterOptions:uo,freeSolo:!0,autoHighlight:!0,noOptionsText:De.a.t("transferTicketModal.noOptions"),loading:p,renderInput:e=>l.a.createElement(la.a,Object.assign({},e,{label:De.a.t("transferTicketModal.fieldLabel"),variant:"outlined",autoFocus:!0,onChange:e=>b(e.target.value),InputProps:{...e.InputProps,endAdornment:l.a.createElement(l.a.Fragment,null,p?l.a.createElement(za.a,{color:"inherit",size:20}):null,e.InputProps.endAdornment)}}))}),l.a.createElement(On.a,{variant:"outlined",className:C.maxWidth},l.a.createElement(Cn.a,null,De.a.t("transferTicketModal.fieldQueueLabel")),l.a.createElement(Ht.a,{value:y,onChange:e=>v(e.target.value),label:De.a.t("transferTicketModal.fieldQueuePlaceholder")},s.map(e=>l.a.createElement(L.a,{key:e.id,value:e.id},e.name)))),l.a.createElement(Mt.a,{container:!0,spacing:2,style:{marginTop:"15px"}},l.a.createElement(Mt.a,{xs:12,item:!0},l.a.createElement(Ht.a,{required:!0,fullWidth:!0,displayEmpty:!0,variant:"outlined",value:j,onChange:e=>{k(e.target.value)},MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},getContentAnchorEl:null},renderValue:()=>{if(""===j)return"Selecione uma Conex\xe3o";return w.find(e=>e.id===j).name}},(null===w||void 0===w?void 0:w.length)>0&&w.map((e,a)=>l.a.createElement(L.a,{dense:!0,key:a,value:e.id},l.a.createElement(K.a,{primary:l.a.createElement(l.a.Fragment,null,l.a.createElement(R.a,{component:"span",style:{fontSize:14,marginLeft:"10px",display:"inline-flex",alignItems:"center",lineHeight:"2"}},e.name," \xa0 ",l.a.createElement("p",{className:"CONNECTED"===e.status?C.online:C.offline},"(",e.status,")")))}))))))),l.a.createElement(nt.a,null,l.a.createElement(ra.a,{onClick:M,color:"secondary",disabled:p,variant:"outlined"},De.a.t("transferTicketModal.buttons.cancel")),l.a.createElement(Ha,{variant:"contained",type:"submit",color:"primary",loading:p},De.a.t("transferTicketModal.buttons.ok")))))};const go=e=>{let{inputRef:a,...t}=e;return l.a.createElement("div",t)};var Eo=e=>{let{InputProps:a,children:t,InputLabelProps:n,label:r,...o}=e;return l.a.createElement(la.a,Object.assign({},o,{variant:"outlined",label:r,multiline:!0,InputLabelProps:{shrink:!0,...n},InputProps:{inputComponent:go,...a},inputProps:{children:t}}))};const bo=Object(A.a)(e=>({chip:{margin:e.spacing(.5),cursor:"pointer"}}));var fo=e=>{let{onClick:a,disabled:t}=e;const n=bo(),r=[{name:De.a.t("messageVariablesPicker.vars.contactFirstName"),value:"{{firstName}}"},{name:De.a.t("messageVariablesPicker.vars.contactName"),value:"{{name}} "},{name:De.a.t("messageVariablesPicker.vars.greeting"),value:"{{ms}} "},{name:De.a.t("messageVariablesPicker.vars.protocolNumber"),value:"{{protocol}} "},{name:De.a.t("messageVariablesPicker.vars.hour"),value:"{{hora}} "}];return l.a.createElement(Eo,{margin:"dense",fullWidth:!0,label:De.a.t("messageVariablesPicker.label"),disabled:t},r.map(e=>l.a.createElement(Sn.a,{key:e.value,onMouseDown:n=>((e,n)=>{e.preventDefault(),t||a(n)})(n,e.value),label:e.name,size:"small",className:n.chip,color:"primary"})))};const ho=Object(A.a)(e=>({root:{display:"flex",flexWrap:"wrap"},multFieldLine:{display:"flex","& > *:not(:last-child)":{marginRight:e.spacing(1)}},btnWrapper:{position:"relative"},buttonProgress:{color:Ra.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},formControl:{margin:e.spacing(1),minWidth:120}})),yo=Lt.b().shape({body:Lt.d().min(5,"Mensagem muito curta").required("Obrigat\xf3rio"),contactId:Lt.a().required("Obrigat\xf3rio"),sendAt:Lt.d().required("Obrigat\xf3rio")});var vo=e=>{let{open:a,onClose:t,scheduleId:r,contactId:o,cleanContact:i,reload:c}=e;const s=ho(),d=Object(x.useHistory)(),{user:m}=Object(n.useContext)(Xe),u={body:"",contactId:"",sendAt:w()().add(1,"hour").format("YYYY-MM-DDTHH:mm"),sentAt:""},p={id:"",name:""},[g,E]=Object(n.useState)(u),[b,f]=Object(n.useState)(p),[h,y]=Object(n.useState)([p]),[v,O]=Object(n.useState)(null),S=Object(n.useRef)(null),[A,j]=Object(n.useState)(!1),k=Object(n.useRef)();Object(n.useEffect)(()=>{if(o&&h.length){const e=h.find(e=>e.id===o);e&&f(e)}},[o,h]),Object(n.useEffect)(()=>{const{companyId:e}=m;if(a)try{(async()=>{const{data:a}=await _e.get("/contacts/list",{params:{companyId:e}});let t=a.map(e=>({id:e.id,name:e.name}));if(Object(qe.isArray)(t)&&y([{id:"",name:""},...t]),o&&E(e=>({...e,contactId:o})),!r)return;const{data:n}=await _e.get("/schedules/".concat(r));E(e=>({...e,...n,sendAt:w()(n.sendAt).format("YYYY-MM-DDTHH:mm")})),f(n.contact)})()}catch(t){We(t)}},[r,o,a,m]);const I=()=>{t(),O(null),E(u)};return l.a.createElement("div",{className:s.root},l.a.createElement(Et,{title:De.a.t("scheduleModal.confirmationModal.deleteTitle"),open:A,onClose:()=>j(!1),onConfirm:async()=>{v&&(O(null),S.current.value=null),g.mediaPath&&(await _e.delete("/schedules/".concat(g.id,"/media-upload")),E(e=>({...e,mediaPath:null})),C.b.success(De.a.t("scheduleModal.toasts.deleted")),"function"==typeof c&&(console.log(c),console.log("1"),c()))}},De.a.t("scheduleModal.confirmationModal.deleteMessage")),l.a.createElement(tt.a,{open:a,onClose:I,maxWidth:"xs",fullWidth:!0,scroll:"paper"},l.a.createElement(gt.a,{id:"form-dialog-title"},"ERRO"===g.status?"Erro de Envio":"Mensagem ".concat(Object(qe.capitalize)(g.status))),l.a.createElement("div",{style:{display:"none"}},l.a.createElement("input",{type:"file",accept:".png,.jpg,.jpeg",ref:S,onChange:e=>(e=>{const a=Object(qe.head)(e.target.files);a&&O(a)})(e)})),l.a.createElement(Ft.e,{initialValues:g,enableReinitialize:!0,validationSchema:yo,onSubmit:(e,a)=>{setTimeout(()=>{(async e=>{const a={...e,userId:m.id};try{if(r){if(await _e.put("/schedules/".concat(r),a),null!=v){const e=new FormData;e.append("file",v),await _e.post("/schedules/".concat(r,"/media-upload"),e)}}else{const{data:e}=await _e.post("/schedules",a);if(null!=v){const a=new FormData;a.append("file",v),await _e.post("/schedules/".concat(e.id,"/media-upload"),a)}}C.b.success(De.a.t("scheduleModal.success")),"function"==typeof c&&c(),o&&"function"===typeof i&&(i(),d.push("/schedules"))}catch(t){We(t)}f(p),E(u),I()})(e),a.setSubmitting(!1)},400)}},e=>{let{touched:a,errors:t,isSubmitting:n,values:o,setFieldValue:i}=e;return l.a.createElement(Ft.d,null,l.a.createElement(pt.a,{dividers:!0},l.a.createElement("div",{className:s.multFieldLine},l.a.createElement(On.a,{variant:"outlined",fullWidth:!0},l.a.createElement(Dt.a,{fullWidth:!0,value:b,options:h,onChange:(e,a)=>{const t=a?a.id:"";E({...g,contactId:t}),f(a||p)},getOptionLabel:e=>e.name,getOptionSelected:(e,a)=>a.id===e.id,renderInput:e=>l.a.createElement(la.a,Object.assign({},e,{variant:"outlined",placeholder:"Contato"}))}))),l.a.createElement("br",null),l.a.createElement("div",{className:s.multFieldLine},l.a.createElement(Ft.b,{as:la.a,rows:9,multiline:!0,label:De.a.t("scheduleModal.form.body"),name:"body",inputRef:k,error:a.body&&Boolean(t.body),helperText:a.body&&t.body,variant:"outlined",margin:"dense",fullWidth:!0})),l.a.createElement(Mt.a,{item:!0},l.a.createElement(fo,{disabled:n,onClick:e=>(async(e,a)=>{const t=k.current,n=t.value.substring(0,t.selectionStart),l=t.value.substring(t.selectionEnd),r=t.selectionStart+e.length;a("body","".concat(n).concat(e).concat(l)),await new Promise(e=>setTimeout(e,100)),k.current.setSelectionRange(r,r)})(e,i)})),l.a.createElement("br",null),l.a.createElement("div",{className:s.multFieldLine},l.a.createElement(Ft.b,{as:la.a,label:De.a.t("scheduleModal.form.sendAt"),type:"datetime-local",name:"sendAt",InputLabelProps:{shrink:!0},error:a.sendAt&&Boolean(t.sendAt),helperText:a.sendAt&&t.sendAt,variant:"outlined",fullWidth:!0})),(g.mediaPath||v)&&l.a.createElement(Mt.a,{xs:12,item:!0},l.a.createElement(ra.a,{startIcon:l.a.createElement(Rr.a,null)},v?v.name:g.mediaName),l.a.createElement(T.a,{onClick:()=>j(!0),color:"secondary"},l.a.createElement(Wt.a,{color:"secondary"})))),l.a.createElement(nt.a,null,!v&&!g.mediaPath&&l.a.createElement(ra.a,{color:"primary",onClick:()=>S.current.click(),disabled:n,variant:"outlined"},De.a.t("quickMessages.buttons.attach")),l.a.createElement(ra.a,{onClick:I,color:"secondary",disabled:n,variant:"outlined"},De.a.t("scheduleModal.buttons.cancel")),(null===g.sentAt||""===g.sentAt)&&l.a.createElement(ra.a,{type:"submit",color:"primary",disabled:n,variant:"contained",className:s.btnWrapper},"".concat(r?De.a.t("scheduleModal.buttons.okEdit"):De.a.t("scheduleModal.buttons.okAdd")),n&&l.a.createElement(za.a,{size:24,className:s.buttonProgress}))))})))};var xo=e=>{let{ticket:a,menuOpen:t,handleClose:r,anchorEl:o}=e;const[i,c]=Object(n.useState)(!1),[s,d]=Object(n.useState)(!1),m=Object(n.useRef)(!0),{user:u}=Object(n.useContext)(Xe),[p,g]=Object(n.useState)(!1),[E,b]=Object(n.useState)(null);Object(n.useEffect)(()=>()=>{m.current=!1},[]);const f=e=>{c(!0),r()};return l.a.createElement(l.a.Fragment,null,l.a.createElement(D.a,{id:"menu-appbar",anchorEl:o,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:t,onClose:r},l.a.createElement(L.a,{onClick:()=>{r(),b(a.contact.id),g(!0)}},De.a.t("ticketOptionsMenu.schedule")),l.a.createElement(L.a,{onClick:e=>{d(!0),r()}},De.a.t("ticketOptionsMenu.transfer")),l.a.createElement($e,{role:u.profile,perform:"ticket-options:deleteTicket",yes:()=>l.a.createElement(L.a,{onClick:f},De.a.t("ticketOptionsMenu.delete"))})),l.a.createElement(Et,{title:"".concat(De.a.t("ticketOptionsMenu.confirmationModal.title")).concat(a.id," ").concat(De.a.t("ticketOptionsMenu.confirmationModal.titleFrom")," ").concat(a.contact.name,"?"),open:i,onClose:c,onConfirm:async()=>{try{await _e.delete("/tickets/".concat(a.id))}catch(e){We(e)}}},De.a.t("ticketOptionsMenu.confirmationModal.message")),l.a.createElement(po,{modalOpen:s,onClose:()=>{m.current&&d(!1)},ticketid:a.id}),l.a.createElement(vo,{open:p,onClose:()=>{g(!1),b(null)},"aria-labelledby":"form-dialog-title",contactId:E}))},Co=t(898),Oo=t.n(Co);const So=Object(A.a)(e=>({actionButtons:{marginRight:6,flex:"none",alignSelf:"center",marginLeft:"auto","& > *":{margin:e.spacing(.5)}}}));var wo=e=>{let{ticket:a}=e;const t=So(),r=Object(x.useHistory)(),[o,i]=Object(n.useState)(null),[c,s]=Object(n.useState)(!1),u=Boolean(o),{user:p}=Object(n.useContext)(Xe),{setCurrentTicket:g}=Object(n.useContext)(Wa),E=Object(d.a)({palette:{primary:Ra.a}}),b=async(e,t,n)=>{s(!0);try{await _e.put("/tickets/".concat(a.id),{status:t,userId:n||null,useIntegration:"closed"!==t&&a.useIntegration,promptId:"closed"!==t&&a.promptId,integrationId:"closed"!==t&&a.integrationId}),s(!1),"open"===t?g({...a,code:"#open"}):(g({id:null,code:null}),r.push("/tickets"))}catch(l){s(!1),We(l)}};return l.a.createElement("div",{className:t.actionButtons},"closed"===a.status&&l.a.createElement(Ha,{loading:c,startIcon:l.a.createElement(io.a,null),size:"small",onClick:e=>b(0,"open",null===p||void 0===p?void 0:p.id)},De.a.t("messagesList.header.buttons.reopen")),"open"===a.status&&l.a.createElement(l.a.Fragment,null,l.a.createElement(Fa.a,{title:De.a.t("messagesList.header.buttons.return")},l.a.createElement(T.a,{onClick:e=>b(0,"pending",null)},l.a.createElement(Oo.a,null))),l.a.createElement(m.a,{theme:E},l.a.createElement(Fa.a,{title:De.a.t("messagesList.header.buttons.resolve")},l.a.createElement(T.a,{onClick:e=>b(0,"closed",null===p||void 0===p?void 0:p.id),color:"primary"},l.a.createElement(Ot.a,null)))),l.a.createElement(T.a,{onClick:e=>{i(e.currentTarget)}},l.a.createElement(co.a,null)),l.a.createElement(xo,{ticket:a,anchorEl:o,menuOpen:u,handleClose:e=>{i(null)}})),"pending"===a.status&&l.a.createElement(Ha,{loading:c,size:"small",variant:"contained",color:"primary",onClick:e=>b(0,"open",null===p||void 0===p?void 0:p.id)},De.a.t("messagesList.header.buttons.accept")))};const Ao=Object(A.a)(e=>({root:{display:"flex",height:"100%",position:"relative",overflow:"hidden"},mainWrapper:{flex:1,height:"100%",display:"flex",flexDirection:"column",overflow:"hidden",borderTopLeftRadius:0,borderBottomLeftRadius:0,borderLeft:"0",marginRight:-320,transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},mainWrapperShift:{borderTopRightRadius:0,borderBottomRightRadius:0,transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginRight:0}}));var jo=()=>{const{ticketId:e}=Object(x.useParams)(),a=Object(x.useHistory)(),t=Ao(),{user:r}=Object(n.useContext)(Xe),[o,i]=Object(n.useState)(!1),[c,s]=Object(n.useState)(!0),[d,m]=Object(n.useState)({}),[u,p]=Object(n.useState)({}),g=Object(n.useContext)(y);Object(n.useEffect)(()=>{s(!0);const t=setTimeout(()=>{(async()=>{try{const{data:t}=await _e.get("/tickets/u/"+e),{queueId:n}=t,{queues:l,profile:o}=r;if(void 0===l.find(e=>e.id===n)&&"admin"!==o)return C.b.error("Acesso n\xe3o permitido"),void a.push("/tickets");m(t.contact),p(t),s(!1)}catch(t){s(!1),We(t)}})()},500);return()=>clearTimeout(t)},[e,r,a]),Object(n.useEffect)(()=>{const e=localStorage.getItem("companyId"),t=g.getSocket(e);return t.on("ready",()=>t.emit("joinChatBox","".concat(u.id))),t.on("company-".concat(e,"-ticket"),e=>{"update"===e.action&&e.ticket.id===u.id&&p(e.ticket),"delete"===e.action&&e.ticketId===u.id&&a.push("/tickets")}),t.on("company-".concat(e,"-contact"),e=>{"update"===e.action&&m(a=>{var t;return a.id===(null===(t=e.contact)||void 0===t?void 0:t.id)?{...a,...e.contact}:a})}),()=>{t.disconnect()}},[e,u,a,g]);const E=()=>{i(!0)};return l.a.createElement("div",{className:t.root,id:"drawer-container"},l.a.createElement(ht.a,{variant:"outlined",elevation:0,className:Object(O.a)(t.mainWrapper,{[t.mainWrapperShift]:o})},l.a.createElement(nn,{loading:c},(()=>{if(void 0!==u.user)return l.a.createElement(ln,{contact:d,ticket:u,onClick:E})})(),l.a.createElement(wo,{ticket:u})),l.a.createElement(ht.a,null,l.a.createElement(oo,{ticket:u})),l.a.createElement(ft,null,l.a.createElement(l.a.Fragment,null,l.a.createElement(Xt,{ticket:u,ticketId:u.id,isGroup:u.isGroup}),l.a.createElement(ro,{ticketId:u.id,ticketStatus:u.status})))),l.a.createElement(Tr,{open:o,handleDrawerClose:()=>{i(!1)},contact:d,loading:c,ticket:u}))};const ko=Object(A.a)(e=>({chatContainer:{flex:1,padding:e.spacing(1),height:"calc(100% - 48px)",overflowY:"hidden"},chatPapper:{display:"flex",height:"100%"},contactsWrapper:{display:"flex",height:"100%",flexDirection:"column",overflowY:"hidden"},messagesWrapper:{display:"flex",height:"100%",flexDirection:"column"},welcomeMsg:{backgroundColor:e.palette.boxticket,display:"flex",justifyContent:"space-evenly",alignItems:"center",height:"100%",textAlign:"center"}})),To="".concat("https://boostybackend-production.up.railway.app","/public/logotipos/login.png"),Io=Math.random(),No="".concat(To,"?r=").concat(Io);var Mo=()=>{const e=ko(),{ticketId:a}=Object(x.useParams)();return l.a.createElement("div",{className:e.chatContainer},l.a.createElement("div",{className:e.chatPapper},l.a.createElement(Mt.a,{container:!0,spacing:0},l.a.createElement(Mt.a,{item:!0,xs:4,className:e.contactsWrapper},l.a.createElement(gr,null)),l.a.createElement(Mt.a,{item:!0,xs:8,className:e.messagesWrapper},a?l.a.createElement(l.a.Fragment,null,l.a.createElement(jo,null)):l.a.createElement(ht.a,{square:!0,variant:"outlined",className:e.welcomeMsg},l.a.createElement("div",null,l.a.createElement("center",null,l.a.createElement("img",{style:{margin:"0 auto",width:"80%"},src:No,alt:"".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_BACKEND_URL:"https://boostybackend-production.up.railway.app",REACT_APP_HOURS_CLOSE_TICKETS_AUTO:"24"}).REACT_APP_NAME_SYSTEM)}))))))))},Po=t(1568),Ro=t(1569),Do=t(899),Lo=t.n(Do),Fo=t(950);var qo=Object(Fo.a)(ht.a)({height:"calc(100% - 48px)",display:"grid",gridTemplateRows:"56px 1fr"});const Wo=Object(A.a)(e=>({header:{},content:{overflow:"auto"},placeholderContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",backgroundColor:e.palette.boxticket},placeholderItem:{}}));var Bo=e=>{const a=Wo(),{ticketId:t}=Object(x.useParams)(),[r,o]=Object(n.useState)(0),{currentTicket:i,setCurrentTicket:c}=Object(n.useContext)(Wa);Object(n.useEffect)(()=>(null!==i.id&&c({id:i.id,code:"#open"}),t||o(1),()=>{c({id:null,code:null})}),[]),Object(n.useEffect)(()=>{null!==i.id&&o(0)},[i]);const s="".concat("https://boostybackend-production.up.railway.app","/public/logotipos/login.png"),d=Math.random(),m="".concat(s,"?r=").concat(d);return l.a.createElement(qo,null,l.a.createElement(Ma.a,{className:a.header},l.a.createElement(Po.a,{value:r,onChange:(e,a)=>{o(a)},showLabels:!0,className:a.root},l.a.createElement(Ro.a,{label:"Ticket",icon:l.a.createElement(ka.a,null)}),l.a.createElement(Ro.a,{label:"Atendimentos",icon:l.a.createElement(Lo.a,null)}))),l.a.createElement(Ma.a,{className:a.content},0===r?t?l.a.createElement(jo,null):l.a.createElement(Ma.a,{className:a.placeholderContainer},"//TRX SISTEMAS LOGO//",l.a.createElement("div",null,l.a.createElement("center",null,l.a.createElement("img",{style:{margin:"0 auto",width:"80%"},src:m,alt:"".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_BACKEND_URL:"https://boostybackend-production.up.railway.app",REACT_APP_HOURS_CLOSE_TICKETS_AUTO:"24"}).REACT_APP_NAME_SYSTEM)}))),"//TRX SISTEMAS LOGO//",l.a.createElement("br",null),l.a.createElement(ra.a,{onClick:()=>o(1),variant:"contained",color:"primary"},"Selecionar Ticket")):l.a.createElement(gr,null)))};var zo=Object(Kl.a)()((function(e){return Object(Kl.b)("md",e.width)?l.a.createElement(Mo,null):l.a.createElement(Bo,null)})),Uo=t(355),Ho=t.n(Uo),_o=t(545),Vo=t.n(_o);const Go=Object(A.a)(e=>({paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}})),Ko=Lt.b().shape({name:Lt.d().min(2,"Too Short!").max(50,"Too Long!").required("Required"),password:Lt.d().min(5,"Too Short!").max(50,"Too Long!"),email:Lt.d().email("Invalid email").required("Required")});var Yo=()=>{const e=Go(),a=Object(x.useHistory)();let t=null;const r=Ho.a.parse(window.location.search);void 0!==r.companyId&&(t=r.companyId);const[o]=Object(n.useState)({name:"",email:"",phone:"",password:"",planId:""}),c=w()().add(3,"day").format(),[s,d]=Object(n.useState)([]),{list:m}=ba();Object(n.useEffect)(()=>{!async function(){const e=await m();d(e)}()},[]);const u="".concat("https://boostybackend-production.up.railway.app","/public/logotipos/signup.png"),p=Math.random(),g="".concat(u,"?r=").concat(p);return l.a.createElement(Zn.a,{component:"main",maxWidth:"xs"},l.a.createElement(i.a,null),l.a.createElement("div",{className:e.paper},l.a.createElement("div",null,l.a.createElement("img",{style:{margin:"0 auto",width:"80%"},src:g,alt:"".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_BACKEND_URL:"https://boostybackend-production.up.railway.app",REACT_APP_HOURS_CLOSE_TICKETS_AUTO:"24"}).REACT_APP_NAME_SYSTEM)})),l.a.createElement(Ft.e,{initialValues:o,enableReinitialize:!0,validationSchema:Ko,onSubmit:(e,t)=>{setTimeout(()=>{(async e=>{Object.assign(e,{recurrence:"MENSAL"}),Object.assign(e,{dueDate:c}),Object.assign(e,{status:"t"}),Object.assign(e,{campaignsEnabled:!0});try{await He.post("/companies/cadastro",e),C.b.success(De.a.t("signup.toasts.success")),a.push("/login")}catch(t){console.log(t),We(t)}})(e),t.setSubmitting(!1)},400)}},a=>{let{touched:t,errors:n,isSubmitting:r}=a;return l.a.createElement(Ft.d,{className:e.form},l.a.createElement(Mt.a,{container:!0,spacing:2},l.a.createElement(Mt.a,{item:!0,xs:12},l.a.createElement(Ft.b,{as:la.a,autoComplete:"name",name:"name",error:t.name&&Boolean(n.name),helperText:t.name&&n.name,variant:"outlined",fullWidth:!0,id:"name",label:"Nombre de la empresa"})),l.a.createElement(Mt.a,{item:!0,xs:12},l.a.createElement(Ft.b,{as:la.a,variant:"outlined",fullWidth:!0,id:"email",label:De.a.t("signup.form.email"),name:"email",error:t.email&&Boolean(n.email),helperText:t.email&&n.email,autoComplete:"email",required:!0})),l.a.createElement(Mt.a,{item:!0,xs:12},l.a.createElement(Ft.b,{as:Vo.a,mask:"(99) 99999-9999",variant:"outlined",fullWidth:!0,id:"phone",name:"phone",error:t.phone&&Boolean(n.phone),helperText:t.phone&&n.phone,autoComplete:"phone",required:!0},e=>{let{field:a}=e;return l.a.createElement(la.a,Object.assign({},a,{variant:"outlined",fullWidth:!0,label:"WhatsApp",inputProps:{maxLength:11}}))})),l.a.createElement(Mt.a,{item:!0,xs:12},l.a.createElement(Ft.b,{as:la.a,variant:"outlined",fullWidth:!0,name:"password",error:t.password&&Boolean(n.password),helperText:t.password&&n.password,label:De.a.t("signup.form.password"),type:"password",id:"password",autoComplete:"current-password",required:!0})),l.a.createElement(Mt.a,{item:!0,xs:12},l.a.createElement(Cn.a,{htmlFor:"plan-selection"},"Plan"),l.a.createElement(Ft.b,{as:Ht.a,variant:"outlined",fullWidth:!0,id:"plan-selection",label:"Plano",name:"planId",required:!0},s.map((e,a)=>l.a.createElement(L.a,{key:a,value:e.id},e.name," - Agentes: ",e.users," - Usuarios: ",e.connections," - Colas: ",e.queues," - US$ ",e.value))))),l.a.createElement(ra.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit},De.a.t("signup.buttons.submit")),l.a.createElement(Mt.a,{container:!0,justify:"flex-end"},l.a.createElement(Mt.a,{item:!0},l.a.createElement(Er.a,{href:"#",variant:"body2",component:v.b,to:"/login"},De.a.t("signup.buttons.login")))))})),l.a.createElement(Ma.a,{mt:5}))},Qo=t(900);const{versionSystem:Xo,nomeEmpresa:Jo}=Qo,Zo=()=>l.a.createElement(R.a,{variant:"body2",color:"primary",align:"center"},"Copyright ",l.a.createElement(Er.a,{color:"primary",href:"#"},Jo," - v ",Xo)," ",(new Date).getFullYear(),"."),$o=Object(A.a)(e=>({root:{width:"100vw",height:"100vh",backgroundImage:"url(https://i.imgur.com/CGby9tN.png)",backgroundRepeat:"no-repeat",backgroundSize:"100% 100%",backgroundPosition:"center",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center"},paper:{backgroundColor:e.palette.login,display:"flex",flexDirection:"column",alignItems:"center",padding:"55px 30px",borderRadius:"12.5px"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)},powered:{color:"white"}}));var ei=()=>{const e=$o(),[a,t]=Object(n.useState)({email:"",password:""}),{handleLogin:r}=Object(n.useContext)(Xe),[o,c]=Object(n.useState)("disabled"),s=e=>{t({...a,[e.target.name]:e.target.value})};Object(n.useEffect)(()=>{d()},[]);const d=async()=>{try{var e;const a=await _e.get("/settings/viewregister"),t=null===a||void 0===a||null===(e=a.data)||void 0===e?void 0:e.value;c(t)}catch(a){console.error("Error retrieving viewregister",a)}},m="".concat("https://boostybackend-production.up.railway.app","/public/logotipos/login.png"),u=Math.random(),p="".concat(m,"?r=").concat(u);return l.a.createElement("div",{className:e.root},l.a.createElement(Zn.a,{component:"main",maxWidth:"xs"},l.a.createElement(i.a,null),l.a.createElement("div",{className:e.paper},l.a.createElement("div",null,l.a.createElement("img",{style:{margin:"0 auto",width:"80%"},src:p,alt:"".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_BACKEND_URL:"https://boostybackend-production.up.railway.app",REACT_APP_HOURS_CLOSE_TICKETS_AUTO:"24"}).REACT_APP_NAME_SYSTEM)})),l.a.createElement("form",{className:e.form,noValidate:!0,onSubmit:e=>{e.preventDefault(),r(a)}},l.a.createElement(la.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:De.a.t("login.form.email"),name:"email",value:a.email,onChange:s,autoComplete:"email",autoFocus:!0}),l.a.createElement(la.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:De.a.t("login.form.password"),type:"password",id:"password",value:a.password,onChange:s,autoComplete:"current-password"}),l.a.createElement(Mt.a,{container:!0,justify:"flex-end"},l.a.createElement(Mt.a,{item:!0,xs:6,style:{textAlign:"right"}},l.a.createElement(Er.a,{component:v.b,to:"/forgetpsw",variant:"body2"},"\xbfOlvidaste tu contrase\xf1a?"))),l.a.createElement(ra.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit},De.a.t("login.buttons.submit")),"enabled"===o&&l.a.createElement(l.a.Fragment,null,l.a.createElement(Mt.a,{container:!0},l.a.createElement(Mt.a,{item:!0},l.a.createElement(Er.a,{href:"#",variant:"body2",component:v.b,to:"/signup"},De.a.t("login.buttons.register"))))),l.a.createElement(Mt.a,{container:!0,justifyContent:"center"},l.a.createElement(Mt.a,{item:!0},l.a.createElement(Er.a,{href:"#",variant:"body2",component:v.b,to:"/signup"},De.a.t("\xbfNo tienes una cuenta? \xa1Reg\xedstrate!")))))),l.a.createElement(Ma.a,{mt:8},l.a.createElement(Zo,null))))},ai=t(1570),ti=t(1571),ni=t(1572),li=t(1573),ri=t(1574),oi=t(1575),ii=t(1576);class ci{setPhoneFormatMask(e){if(!e||e.length<12)return;const a=(""+e).replace(/\D/g,"");if(a.length<=12){const e=a.match(/^(\d{2})(\d{2})(\d{4})(\d{4})$/);return"+"+e[1]+" ("+e[2]+") "+e[3]+"-"+e[4]}if(13===a.length){const e=a.match(/^(\d{2})(\d{2})(\d{5})(\d{4})$/);return"+"+e[1]+" ("+e[2]+") "+e[3]+"-"+e[4]}return null}removeMask(e){return e.replace(/\D/g,"")}maskPhonePattern(e){return e.length<13?"+55 (99) 9999 9999":"+55 (99) 99999 9999"}}var si=e=>{const a=new ci,t=null===e||void 0===e?void 0:e.replace("@c.us","");return a.setPhoneFormatMask(t)};const di=Object(A.a)(e=>({mainContainer:{flex:1,padding:e.spacing(2),height:"calc(100% - 48px)"},contentWrapper:{height:"100%",overflowY:"hidden",display:"flex",flexDirection:"column"}}));var mi=e=>{let{children:a}=e;const t=di();return l.a.createElement(Zn.a,{className:t.mainContainer},l.a.createElement("div",{className:t.contentWrapper},a))};const ui=Object(A.a)(e=>({contactsHeader:{display:"flex",alignItems:"center",padding:"0px 6px 6px 6px"}}));var pi=e=>{let{children:a}=e;const t=ui();return l.a.createElement("div",{className:t.contactsHeader},a)};const gi=Object(A.a)(e=>({MainHeaderButtonsWrapper:{flex:"none",marginLeft:"auto","& > *":{margin:e.spacing(1)}}}));var Ei=e=>{let{children:a}=e;const t=gi();return l.a.createElement("div",{className:t.MainHeaderButtonsWrapper},a)};function bi(e){return l.a.createElement(R.a,{variant:"h5",color:"primary",gutterBottom:!0},e.children)}const fi=Object(A.a)(e=>({customTableCell:{display:"flex",alignItems:"center",justifyContent:"center"}}));var hi=e=>{let{avatar:a,columns:t}=e;const n=fi();return l.a.createElement(l.a.Fragment,null,l.a.createElement(xl.a,null,a&&l.a.createElement(l.a.Fragment,null,l.a.createElement(hl.a,{style:{paddingRight:0}},l.a.createElement($t.a,{animation:"wave",variant:"circle",width:40,height:40})),l.a.createElement(hl.a,null,l.a.createElement($t.a,{animation:"wave",height:30,width:80}))),Array.from({length:t},(e,a)=>l.a.createElement(hl.a,{align:"center",key:a},l.a.createElement("div",{className:n.customTableCell},l.a.createElement($t.a,{align:"center",animation:"wave",height:30,width:80}))))))};const yi=Object(A.a)(e=>({root:{display:"flex",flexWrap:"wrap"},multFieldLine:{display:"flex","& > *:not(:last-child)":{marginRight:e.spacing(1)}},btnWrapper:{position:"relative"},buttonProgress:{color:Ra.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}})),vi=Lt.b().shape({name:Lt.d().min(2,"Too Short!").max(50,"Too Long!").required("Required")});var xi=l.a.memo(e=>{let{open:a,onClose:t,whatsAppId:r}=e;const o=yi(),i={name:"",greetingMessage:"",complationMessage:"",outOfHoursMessage:"",ratingMessage:"",isDefault:!1,token:"",provider:"beta",expiresInactiveMessage:"",expiresTicket:0,timeUseBotQueues:0,maxUseBotQueues:3},[c,s]=Object(n.useState)(i),[d,m]=Object(n.useState)([]),[u,p]=Object(n.useState)([]),[g,E]=Object(n.useState)(null),[b,f]=Object(n.useState)(null),[h,y]=Object(n.useState)([]),[v,x]=Object(n.useState)(null),[O,S]=Object(n.useState)([]),[w,A]=Object(n.useState)(!1);Object(n.useEffect)(()=>{(async()=>{if(r)try{var e;const{data:a}=await _e.get("whatsapp/".concat(r,"?session=0"));s(a),console.log("WhatsappModal",a);const t=null===(e=a.queues)||void 0===e?void 0:e.map(e=>e.id);m(t),x(null===a||void 0===a?void 0:a.integrationId),E(a.transferQueueId)}catch(a){We(a)}})()},[r]),Object(n.useEffect)(()=>{(async()=>{try{const{data:e}=await _e.get("/prompt");y(e.prompts)}catch(e){We(e)}})()},[r]),Object(n.useEffect)(()=>{(async()=>{try{const{data:e}=await _e.get("/queue");p(e)}catch(e){We(e)}})()},[]),Object(n.useEffect)(()=>{(async()=>{try{const{data:e}=await _e.get("/queueIntegration");console.log({data:e}),S(e.queueIntegrations)}catch(e){We(e)}})()},[]);const j=e=>{x(e.target.value),f(null),m([])},k=e=>{f(e.target.value),m([])},T=()=>{t(),s(i),E(null),m([])};return l.a.createElement("div",{className:o.root},l.a.createElement(tt.a,{open:a,onClose:T,maxWidth:"md",fullWidth:!0,scroll:"paper"},l.a.createElement(gt.a,null,r?De.a.t("whatsappModal.title.edit"):De.a.t("whatsappModal.title.add")),l.a.createElement(Ft.e,{initialValues:c,enableReinitialize:!0,validationSchema:vi,onSubmit:(e,a)=>{setTimeout(()=>{(async e=>{const a={...e,integrationId:v||null,queueIds:d,transferQueueId:g,promptId:b||null};delete a.queues,delete a.session;try{r?await _e.put("/whatsapp/".concat(r),a):await _e.post("/whatsapp",a),C.b.success(De.a.t("whatsappModal.success")),T()}catch(t){We(t)}})(e),a.setSubmitting(!1)},400)}},e=>{let{values:a,touched:t,errors:n,isSubmitting:i}=e;return l.a.createElement(Ft.d,null,l.a.createElement(pt.a,{dividers:!0},l.a.createElement("div",{className:o.multFieldLine},l.a.createElement(Mt.a,{spacing:2,container:!0},l.a.createElement(Mt.a,{item:!0},l.a.createElement(Ft.b,{as:la.a,label:De.a.t("whatsappModal.form.name"),autoFocus:!0,name:"name",error:t.name&&Boolean(n.name),helperText:t.name&&n.name,variant:"outlined",margin:"dense",className:o.textField})),l.a.createElement(Mt.a,{style:{paddingTop:15},item:!0},l.a.createElement(tr.a,{control:l.a.createElement(Ft.b,{as:nr.a,color:"primary",name:"isDefault",checked:a.isDefault}),label:De.a.t("whatsappModal.form.default")})))),l.a.createElement("div",null,l.a.createElement(Ft.b,{as:la.a,label:De.a.t("queueModal.form.greetingMessage"),type:"greetingMessage",multiline:!0,rows:4,fullWidth:!0,name:"greetingMessage",error:t.greetingMessage&&Boolean(n.greetingMessage),helperText:t.greetingMessage&&n.greetingMessage,variant:"outlined",margin:"dense"})),l.a.createElement("div",null,l.a.createElement(Ft.b,{as:la.a,label:De.a.t("queueModal.form.complationMessage"),type:"complationMessage",multiline:!0,rows:4,fullWidth:!0,name:"complationMessage",error:t.complationMessage&&Boolean(n.complationMessage),helperText:t.complationMessage&&n.complationMessage,variant:"outlined",margin:"dense"})),l.a.createElement("div",null,l.a.createElement(Ft.b,{as:la.a,label:De.a.t("queueModal.form.outOfHoursMessage"),type:"outOfHoursMessage",multiline:!0,rows:4,fullWidth:!0,name:"outOfHoursMessage",error:t.outOfHoursMessage&&Boolean(n.outOfHoursMessage),helperText:t.outOfHoursMessage&&n.outOfHoursMessage,variant:"outlined",margin:"dense"})),l.a.createElement("div",null,l.a.createElement(Ft.b,{as:la.a,label:De.a.t("queueModal.form.ratingMessage"),type:"ratingMessage",multiline:!0,rows:4,fullWidth:!0,name:"ratingMessage",error:t.ratingMessage&&Boolean(n.ratingMessage),helperText:t.ratingMessage&&n.ratingMessage,variant:"outlined",margin:"dense"})),l.a.createElement("div",null,l.a.createElement(Ft.b,{as:la.a,label:De.a.t("queueModal.form.token"),type:"token",fullWidth:!0,name:"token",variant:"outlined",margin:"dense"})),l.a.createElement(An,{selectedQueueIds:d,onChange:e=>(m(e),void f(null))}),l.a.createElement(On.a,{margin:"dense",variant:"outlined",fullWidth:!0},l.a.createElement(Cn.a,null,De.a.t("whatsappModal.form.prompt")),l.a.createElement(Ht.a,{labelId:"dialog-select-prompt-label",id:"dialog-select-prompt",name:"promptId",value:b||"",onChange:k,label:De.a.t("whatsappModal.form.prompt"),fullWidth:!0,MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},getContentAnchorEl:null}},h.map(e=>l.a.createElement(L.a,{key:e.id,value:e.id},e.name)))),l.a.createElement(On.a,{margin:"dense",variant:"outlined",fullWidth:!0},l.a.createElement(Cn.a,null,"Integra\xe7\xe3o"),l.a.createElement(Ht.a,{labelId:"dialog-select-prompt-label",id:"dialog-select-prompt",name:"promptId",value:v||"",onChange:j,label:"Integra\xe7\xe3o",fullWidth:!0,MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},getContentAnchorEl:null}},l.a.createElement(L.a,{value:null},"Desabilitado"),O.map(e=>l.a.createElement(L.a,{key:e.id,value:e.id},e.name)))),l.a.createElement("div",null,l.a.createElement("h3",null,De.a.t("whatsappModal.form.queueRedirection")),l.a.createElement("p",null,De.a.t("whatsappModal.form.queueRedirectionDesc")),l.a.createElement(Mt.a,{container:!0,spacing:2},l.a.createElement(Mt.a,{item:!0,sm:6},l.a.createElement(Ft.b,{fullWidth:!0,type:"number",as:la.a,label:"Transferir despu\xe9s de x (minutos)",name:"timeToTransfer",error:t.timeToTransfer&&Boolean(n.timeToTransfer),helperText:t.timeToTransfer&&n.timeToTransfer,variant:"outlined",margin:"dense",className:o.textField,InputLabelProps:{shrink:!!a.timeToTransfer}})),l.a.createElement(Mt.a,{item:!0,sm:6},l.a.createElement(An,{selectedQueueIds:g,onChange:e=>{E(e)},multiple:!1,title:"Cola de Transferencia"}))),l.a.createElement(Mt.a,{spacing:2,container:!0},l.a.createElement(Mt.a,{xs:12,md:12,item:!0},l.a.createElement(Ft.b,{as:la.a,label:De.a.t("whatsappModal.form.expiresTicket"),fullWidth:!0,name:"expiresTicket",variant:"outlined",margin:"dense",error:t.expiresTicket&&Boolean(n.expiresTicket),helperText:t.expiresTicket&&n.expiresTicket}))),l.a.createElement("div",null,l.a.createElement(Ft.b,{as:la.a,label:De.a.t("whatsappModal.form.expiresInactiveMessage"),multiline:!0,rows:4,fullWidth:!0,name:"expiresInactiveMessage",error:t.expiresInactiveMessage&&Boolean(n.expiresInactiveMessage),helperText:t.expiresInactiveMessage&&n.expiresInactiveMessage,variant:"outlined",margin:"dense"})))),l.a.createElement(nt.a,null,l.a.createElement(ra.a,{onClick:T,color:"secondary",disabled:i,variant:"outlined"},De.a.t("whatsappModal.buttons.cancel")),l.a.createElement(ra.a,{type:"submit",color:"primary",disabled:i,variant:"contained",className:o.btnWrapper},r?De.a.t("whatsappModal.buttons.okEdit"):De.a.t("whatsappModal.buttons.okAdd"),i&&l.a.createElement(za.a,{size:24,className:o.buttonProgress}))))})))}),Ci=t(901),Oi=t.n(Ci);var Si=l.a.memo(e=>{let{open:a,onClose:t,whatsAppId:r}=e;const[o,i]=Object(n.useState)(""),c=(Object(j.a)(),Object(n.useContext)(y));return Object(n.useEffect)(()=>{(async()=>{if(r)try{const{data:e}=await _e.get("/whatsapp/".concat(r));i(e.qrcode)}catch(e){We(e)}})()},[r]),Object(n.useEffect)(()=>{if(!r)return;const e=localStorage.getItem("companyId"),a=c.getSocket(e);return a.on("company-".concat(e,"-whatsappSession"),e=>{"update"===e.action&&e.session.id===r&&i(e.session.qrcode),"update"===e.action&&""===e.session.qrcode&&t()}),()=>{a.disconnect()}},[r,t,c]),l.a.createElement(tt.a,{open:a,onClose:t,maxWidth:"lg",scroll:"paper"},l.a.createElement(pt.a,null,l.a.createElement(ht.a,{elevation:0,style:{display:"flex",alignItems:"center"}},l.a.createElement("div",{style:{marginRight:"20px"}},l.a.createElement(R.a,{variant:"h2",component:"h2",color:"textPrimary",gutterBottom:!0,style:{fontFamily:"Montserrat",fontWeight:"bold",fontSize:"20px"}},"Utiliza el software con tu WhatsApp:"),l.a.createElement(R.a,{variant:"body1",color:"textPrimary",gutterBottom:!0},"1 - Abre WhatsApp en tu celular"),l.a.createElement(R.a,{variant:"body1",color:"textPrimary",gutterBottom:!0},'2 - Toca en "M\xe1s opciones" en Android ',l.a.createElement("svg",{class:"MuiSvgIcon-root",focusable:"false",viewBox:"0 0 24 24","aria-hidden":"true"},l.a.createElement("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}))," o en Configuraci\xf3n ",l.a.createElement("svg",{class:"MuiSvgIcon-root",focusable:"false",viewBox:"0 0 24 24","aria-hidden":"true"},l.a.createElement("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"}))," en el iPhone"),l.a.createElement(R.a,{variant:"body1",color:"textPrimary",gutterBottom:!0},"3 - Toca en Dispositivos conectados y luego en Conectar dispositivos"),l.a.createElement(R.a,{variant:"body1",color:"textPrimary",gutterBottom:!0},"4 - Apunta tu celular hacia esta pantalla para capturar el c\xf3digo QR")),l.a.createElement("div",null,o?l.a.createElement(Oi.a,{value:o,size:256}):l.a.createElement("span",null,"Waiting for QR Code")))))});const wi=Object(A.a)(e=>({mainPaper:{flex:1,padding:e.spacing(1),overflowY:"scroll",...e.scrollbarStyles},customTableCell:{display:"flex",alignItems:"center",justifyContent:"center"},tooltip:{backgroundColor:"#f5f5f9",color:"rgba(0, 0, 0, 0.87)",fontSize:e.typography.pxToRem(14),border:"1px solid #dadde9",maxWidth:450},tooltipPopper:{textAlign:"center"},buttonProgress:{color:Ra.a[500]}})),Ai=e=>{let{title:a,content:t,children:n}=e;const r=wi();return l.a.createElement(Fa.a,{arrow:!0,classes:{tooltip:r.tooltip,popper:r.tooltipPopper},title:l.a.createElement(l.a.Fragment,null,l.a.createElement(R.a,{gutterBottom:!0,color:"inherit"},a),t&&l.a.createElement(R.a,null,t))},n)};var ji=()=>{const e=wi(),{user:a}=Object(n.useContext)(Xe),{whatsApps:t,loading:r}=Object(n.useContext)(Ke),[o,i]=Object(n.useState)(!1),[c,s]=Object(n.useState)(!1),[d,m]=Object(n.useState)(null),[u,p]=Object(n.useState)(!1),g={action:"",title:"",message:"",whatsAppId:"",open:!1},[E,b]=Object(n.useState)(g),f=async()=>{try{await _e.post("/whatsapp-restart/"),C.b.warn(De.a.t("Aguarde... reiniciando..."))}catch(e){We(e)}},h=()=>{m(null),i(!0)},y=Object(n.useCallback)(()=>{i(!1),m(null)},[m,i]),v=Object(n.useCallback)(()=>{m(null),s(!1)},[s,m]),x=(e,a)=>{"disconnect"===e&&b({action:e,title:De.a.t("connections.confirmationModal.disconnectTitle"),message:De.a.t("connections.confirmationModal.disconnectMessage"),whatsAppId:a}),"delete"===e&&b({action:e,title:De.a.t("connections.confirmationModal.deleteTitle"),message:De.a.t("connections.confirmationModal.deleteMessage"),whatsAppId:a}),p(!0)},O=e=>l.a.createElement(l.a.Fragment,null,"qrcode"===e.status&&l.a.createElement(ra.a,{size:"small",variant:"contained",color:"primary",onClick:()=>(e=>{m(e),s(!0)})(e)},De.a.t("connections.buttons.qrcode")),"DISCONNECTED"===e.status&&l.a.createElement(l.a.Fragment,null,l.a.createElement(ra.a,{size:"small",variant:"outlined",color:"primary",onClick:()=>(async e=>{try{await _e.post("/whatsappsession/".concat(e))}catch(a){We(a)}})(e.id)},De.a.t("connections.buttons.tryAgain"))," ",l.a.createElement(ra.a,{size:"small",variant:"outlined",color:"secondary",onClick:()=>(async e=>{try{await _e.put("/whatsappsession/".concat(e))}catch(a){We(a)}})(e.id)},De.a.t("connections.buttons.newQr"))),("CONNECTED"===e.status||"PAIRING"===e.status||"TIMEOUT"===e.status)&&l.a.createElement(ra.a,{size:"small",variant:"outlined",color:"secondary",onClick:()=>{x("disconnect",e.id)}},De.a.t("connections.buttons.disconnect")),"OPENING"===e.status&&l.a.createElement(ra.a,{size:"small",variant:"outlined",disabled:!0,color:"default"},De.a.t("connections.buttons.connecting")));return l.a.createElement(mi,null,l.a.createElement(Et,{title:E.title,open:u,onClose:p,onConfirm:async()=>{if("disconnect"===E.action)try{await _e.delete("/whatsappsession/".concat(E.whatsAppId))}catch(e){We(e)}if("delete"===E.action)try{await _e.delete("/whatsapp/".concat(E.whatsAppId)),C.b.success(De.a.t("connections.toasts.deleted"))}catch(e){We(e)}b(g)}},E.message),l.a.createElement(Si,{open:c,onClose:v,whatsAppId:!o&&(null===d||void 0===d?void 0:d.id)}),l.a.createElement(xi,{open:o,onClose:y,whatsAppId:!c&&(null===d||void 0===d?void 0:d.id)}),l.a.createElement(pi,null,l.a.createElement(bi,null,De.a.t("connections.title")),l.a.createElement(Ei,null,l.a.createElement($e,{role:a.profile,perform:"connections-page:addConnection",yes:()=>l.a.createElement(l.a.Fragment,null,l.a.createElement(ra.a,{variant:"contained",color:"primary",onClick:h},De.a.t("connections.buttons.add")),l.a.createElement(ra.a,{variant:"contained",color:"primary",onClick:f},De.a.t("REINICIAR CONEXIONES")))}))),l.a.createElement(ht.a,{className:e.mainPaper,variant:"outlined"},l.a.createElement(bl.a,{size:"small"},l.a.createElement(vl.a,null,l.a.createElement(xl.a,null,l.a.createElement(hl.a,{align:"center"},De.a.t("connections.table.name")),l.a.createElement(hl.a,{align:"center"},De.a.t("connections.table.number")),l.a.createElement(hl.a,{align:"center"},De.a.t("connections.table.status")),l.a.createElement($e,{role:a.profile,perform:"connections-page:actionButtons",yes:()=>l.a.createElement(hl.a,{align:"center"},De.a.t("connections.table.session"))}),l.a.createElement(hl.a,{align:"center"},De.a.t("connections.table.lastUpdate")),l.a.createElement(hl.a,{align:"center"},De.a.t("connections.table.default")),l.a.createElement($e,{role:a.profile,perform:"connections-page:editOrDeleteConnection",yes:()=>l.a.createElement(hl.a,{align:"center"},De.a.t("connections.table.actions"))}))),l.a.createElement(fl.a,null,r?l.a.createElement(hi,null):l.a.createElement(l.a.Fragment,null,(null===t||void 0===t?void 0:t.length)>0&&t.map(t=>l.a.createElement(xl.a,{key:t.id},l.a.createElement(hl.a,{align:"center"},t.name),l.a.createElement(hl.a,{align:"center"},t.number?l.a.createElement(l.a.Fragment,null,console.log("N\xfamero do WhatsApp:",t.number),console.log("N\xfamero formatado:",si(t.number)),si(t.number)):"-"),l.a.createElement(hl.a,{align:"center"},(a=>l.a.createElement("div",{className:e.customTableCell},"DISCONNECTED"===a.status&&l.a.createElement(Ai,{title:De.a.t("connections.toolTips.disconnected.title"),content:De.a.t("connections.toolTips.disconnected.content")},l.a.createElement(ai.a,{color:"secondary"})),"OPENING"===a.status&&l.a.createElement(za.a,{size:24,className:e.buttonProgress}),"qrcode"===a.status&&l.a.createElement(Ai,{title:De.a.t("connections.toolTips.qrcode.title"),content:De.a.t("connections.toolTips.qrcode.content")},l.a.createElement(ti.a,null)),"CONNECTED"===a.status&&l.a.createElement(Ai,{title:De.a.t("connections.toolTips.connected.title")},l.a.createElement(ni.a,{style:{color:Ra.a[500]}})),("TIMEOUT"===a.status||"PAIRING"===a.status)&&l.a.createElement(Ai,{title:De.a.t("connections.toolTips.timeout.title"),content:De.a.t("connections.toolTips.timeout.content")},l.a.createElement(li.a,{color:"secondary"}))))(t)),l.a.createElement($e,{role:a.profile,perform:"connections-page:actionButtons",yes:()=>l.a.createElement(hl.a,{align:"center"},O(t))}),l.a.createElement(hl.a,{align:"center"},Object(Sa.a)(Object(Ta.a)(t.updatedAt),"dd/MM/yy HH:mm")),l.a.createElement(hl.a,{align:"center"},t.isDefault&&l.a.createElement("div",{className:e.customTableCell},l.a.createElement(ri.a,{style:{color:Ra.a[500]}}))),l.a.createElement($e,{role:a.profile,perform:"connections-page:editOrDeleteConnection",yes:()=>l.a.createElement(hl.a,{align:"center"},l.a.createElement(T.a,{size:"small",onClick:()=>(e=>{m(e),i(!0)})(t)},l.a.createElement(oi.a,null)),l.a.createElement(T.a,{size:"small",onClick:e=>{x("delete",t.id)}},l.a.createElement(ii.a,null)))}))))))))},ki=t(658);const Ti=Object(A.a)(e=>({root:{width:"100%"},fullWidth:{width:"100%"},textfield:{width:"100%"},row:{paddingTop:e.spacing(2),paddingBottom:e.spacing(2)},control:{paddingRight:e.spacing(1),paddingLeft:e.spacing(1)},buttonContainer:{textAlign:"right",padding:e.spacing(1)}}));var Ii=function(e){const{initialValues:a,onSubmit:t,loading:r,labelSaveButton:o}=e,i=Ti(),[c,s]=Object(n.useState)([{weekday:"Segunda-feira",weekdayEn:"monday",startTime:"",endTime:""},{weekday:"Ter\xe7a-feira",weekdayEn:"tuesday",startTime:"",endTime:""},{weekday:"Quarta-feira",weekdayEn:"wednesday",startTime:"",endTime:""},{weekday:"Quinta-feira",weekdayEn:"thursday",startTime:"",endTime:""},{weekday:"Sexta-feira",weekdayEn:"friday",startTime:"",endTime:""},{weekday:"S\xe1bado",weekdayEn:"saturday",startTime:"",endTime:""},{weekday:"Domingo",weekdayEn:"sunday",startTime:"",endTime:""}]);return Object(n.useEffect)(()=>{Object(qe.isArray)(a)&&a.length>0&&s(a)},[a]),l.a.createElement(Ft.e,{enableReinitialize:!0,className:i.fullWidth,initialValues:{schedules:c},onSubmit:e=>{let{schedules:a}=e;return setTimeout(()=>{t(a)},500)}},e=>{let{values:a}=e;return l.a.createElement(Ft.d,{className:i.fullWidth},l.a.createElement(Ft.c,{name:"schedules",render:e=>l.a.createElement(Mt.a,{spacing:4,container:!0},a.schedules.map((e,a)=>l.a.createElement(Zn.a,null,l.a.createElement(Ft.a,{as:la.a,label:"Dia da Semana",name:"schedules[".concat(a,"].weekday"),disabled:!0,variant:"outlined",style:{marginRight:"3.2%",width:"30%"},margin:"dense"}),l.a.createElement(Ft.a,{name:"schedules[".concat(a,"].startTime")},e=>{let{field:a}=e;return l.a.createElement(ki.a,Object.assign({label:"Hora de Inicial"},a,{variant:"outlined",margin:"dense",customInput:la.a,format:"##:##",style:{marginRight:"3.2%",width:"30%"}}))}),l.a.createElement(Ft.a,{name:"schedules[".concat(a,"].endTime")},e=>{let{field:a}=e;return l.a.createElement(ki.a,Object.assign({label:"Hora de Final"},a,{variant:"outlined",margin:"dense",customInput:la.a,format:"##:##",style:{marginRight:"3.2%",width:"30%"}}))}))))}),l.a.createElement("div",{style:{textAlign:"center",marginTop:"2%"},className:i.buttonContainer},l.a.createElement(Ha,{loading:r,type:"submit",color:"primary",variant:"contained"},null!==o&&void 0!==o?o:"Salvar")))})};var Ni=()=>({save:async e=>{const{data:a}=await _e.request({url:"/companies",method:"POST",data:e});return a},update:async e=>{const{data:a}=await _e.request({url:"/companies/".concat(e.id),method:"PUT",data:e});return a},remove:async e=>{const{data:a}=await _e.request({url:"/companies/".concat(e),method:"DELETE"});return a},list:async e=>{const{data:a}=await _e.request({url:"/companies/list",method:"GET"});return a},find:async e=>{const{data:a}=await _e.request({url:"/companies/".concat(e),method:"GET"});return a},finding:async e=>{const{data:a}=await _e.request({url:"/companies/".concat(e),method:"GET"});return a},findAll:async e=>{const{data:a}=await _e.request({url:"/companies",method:"GET"});return a},updateSchedules:async e=>{const{data:a}=await _e.request({url:"/companies/".concat(e.id,"/schedules"),method:"PUT",data:e});return a}});const Mi=Object(A.a)(e=>({chips:{display:"flex",flexWrap:"wrap"},chip:{margin:2}}));var Pi=e=>{let{selectedQueueIds:a,companyId:t,onChange:r}=e;const o=Mi(),[i,c]=Object(n.useState)([]);Object(n.useEffect)(()=>{(async()=>{try{const{data:e}=await _e.get("/queue",{params:{companyId:t}});c(e)}catch(e){We(e)}})()},[t]);return l.a.createElement("div",{style:{marginTop:6}},l.a.createElement(On.a,{fullWidth:!0,margin:"dense",variant:"outlined"},l.a.createElement(Cn.a,null,De.a.t("queueSelect.inputLabel")),l.a.createElement(Ht.a,{multiple:!0,labelWidth:60,value:a,onChange:e=>{r(e.target.value)},MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},getContentAnchorEl:null},renderValue:e=>l.a.createElement("div",{className:o.chips},(null===e||void 0===e?void 0:e.length)>0&&e.map(e=>{const a=i.find(a=>a.id===e);return a?l.a.createElement(Sn.a,{key:e,style:{backgroundColor:a.color},variant:"outlined",label:a.name,className:o.chip}):null}))},i.map(e=>l.a.createElement(L.a,{key:e.id,value:e.id},e.name)))))};const Ri=Object(A.a)(e=>({root:{display:"flex",flexWrap:"wrap"},multFieldLine:{display:"flex","& > *:not(:last-child)":{marginRight:e.spacing(1)}},btnWrapper:{position:"relative"},buttonProgress:{color:Ra.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},formControl:{margin:e.spacing(1),minWidth:120}})),Di=Lt.b().shape({name:Lt.d().min(2,"Too Short!").max(50,"Too Long!").required("Required"),password:Lt.d().min(5,"Too Short!").max(50,"Too Long!"),email:Lt.d().email("Invalid email").required("Required")});var Li=e=>{let{open:a,onClose:t,userId:r,companyId:o}=e;const i=Ri(),c={name:"",email:"",password:"",profile:"user"},{user:s}=Object(n.useContext)(Xe),[d,m]=Object(n.useState)(c),[u,p]=Object(n.useState)([]);Object(n.useEffect)(()=>{(async()=>{if(r&&a)try{var e;const{data:a}=await _e.get("/users/".concat(r));m(e=>({...e,...a}));const t=null===(e=a.queues)||void 0===e?void 0:e.map(e=>e.id);p(t)}catch(t){We(t)}})()},[r,a]);const g=()=>{t(),m(c)};return l.a.createElement("div",{className:i.root},l.a.createElement(tt.a,{open:a,onClose:g,maxWidth:"xs",fullWidth:!0,scroll:"paper"},l.a.createElement(gt.a,{id:"form-dialog-title"},"".concat(r?De.a.t("userModal.title.edit"):De.a.t("userModal.title.add"))),l.a.createElement(Ft.e,{initialValues:d,enableReinitialize:!0,validationSchema:Di,onSubmit:(e,a)=>{setTimeout(()=>{(async e=>{const a={...e,companyId:o,queueIds:u};try{r?await _e.put("/users/".concat(r),a):await _e.post("/users",a),C.b.success(De.a.t("userModal.success"))}catch(t){We(t)}g()})(e),a.setSubmitting(!1)},400)}},e=>{let{touched:a,errors:t,isSubmitting:n}=e;return l.a.createElement(Ft.d,null,l.a.createElement(pt.a,{dividers:!0},l.a.createElement("div",{className:i.multFieldLine},l.a.createElement(Ft.b,{as:la.a,label:De.a.t("userModal.form.name"),autoFocus:!0,name:"name",error:a.name&&Boolean(t.name),helperText:a.name&&t.name,variant:"outlined",margin:"dense",fullWidth:!0}),l.a.createElement(Ft.b,{as:la.a,label:De.a.t("userModal.form.password"),type:"password",name:"password",error:a.password&&Boolean(t.password),helperText:a.password&&t.password,variant:"outlined",margin:"dense",fullWidth:!0})),l.a.createElement("div",{className:i.multFieldLine},l.a.createElement(Ft.b,{as:la.a,label:De.a.t("userModal.form.email"),name:"email",error:a.email&&Boolean(t.email),helperText:a.email&&t.email,variant:"outlined",margin:"dense",fullWidth:!0}),l.a.createElement(On.a,{variant:"outlined",className:i.formControl,margin:"dense"},l.a.createElement($e,{role:s.profile,perform:"user-modal:editProfile",yes:()=>l.a.createElement(l.a.Fragment,null,l.a.createElement(Cn.a,{id:"profile-selection-input-label"},De.a.t("userModal.form.profile")),l.a.createElement(Ft.b,{as:Ht.a,label:De.a.t("userModal.form.profile"),name:"profile",labelId:"profile-selection-label",id:"profile-selection",required:!0},l.a.createElement(L.a,{value:"admin"},"Admin"),l.a.createElement(L.a,{value:"user"},"User")))}))),l.a.createElement($e,{role:s.profile,perform:"user-modal:editQueues",yes:()=>l.a.createElement(Pi,{companyId:o,selectedQueueIds:u,onChange:e=>p(e)})})),l.a.createElement(nt.a,null,l.a.createElement(ra.a,{onClick:g,color:"secondary",disabled:n,variant:"outlined"},De.a.t("userModal.buttons.cancel")),l.a.createElement(ra.a,{type:"submit",color:"primary",disabled:n,variant:"contained",className:i.btnWrapper},"".concat(r?De.a.t("userModal.buttons.okEdit"):De.a.t("userModal.buttons.okAdd")),n&&l.a.createElement(za.a,{size:24,className:i.buttonProgress}))))})))};const Fi=Object(A.a)(e=>({root:{width:"100%"},mainPaper:{width:"100%",flex:1,padding:e.spacing(2)},fullWidth:{width:"100%"},tableContainer:{width:"100%",overflowX:"scroll",...e.scrollbarStyles},textfield:{width:"100%"},textRight:{textAlign:"right"},row:{paddingTop:e.spacing(2),paddingBottom:e.spacing(2)},control:{paddingRight:e.spacing(1),paddingLeft:e.spacing(1)},buttonContainer:{textAlign:"right",padding:e.spacing(1)}}));function qi(e){const{onSubmit:a,onDelete:t,onCancel:r,initialValue:o,loading:i}=e,c=Fi(),[s,d]=Object(n.useState)([]),[m,u]=Object(n.useState)(!1),[p,g]=Object(n.useState)({}),[E,b]=Object(n.useState)({name:"",email:"",phone:"",planId:"",status:!0,campaignsEnabled:!1,dueDate:"",recurrence:"",...o}),{list:f}=ba();Object(n.useEffect)(()=>{!async function(){const e=await f();d(e)}()},[]),Object(n.useEffect)(()=>{b(e=>(w()(o).isValid()&&(o.dueDate=w()(o.dueDate).format("YYYY-MM-DD")),{...e,...o}))},[o]);return l.a.createElement(l.a.Fragment,null,l.a.createElement(Li,{userId:p.id,companyId:o.id,open:m,onClose:()=>{g({}),u(!1)}}),l.a.createElement(Ft.e,{enableReinitialize:!0,className:c.fullWidth,initialValues:E,onSubmit:(e,t)=>{let{resetForm:n}=t;return setTimeout(()=>{(async e=>{""!==e.dueDate&&!1!==w()(e.dueDate).isValid()||(e.dueDate=null),a(e),b({...o,dueDate:""})})(e),n()},500)}},(e,a)=>l.a.createElement(Ft.d,{className:c.fullWidth},l.a.createElement(Mt.a,{spacing:2,justifyContent:"flex-end",container:!0},l.a.createElement(Mt.a,{xs:12,sm:6,md:4,item:!0},l.a.createElement(Ft.b,{as:la.a,label:"Nome",name:"name",variant:"outlined",className:c.fullWidth,margin:"dense"})),l.a.createElement(Mt.a,{xs:12,sm:6,md:2,item:!0},l.a.createElement(Ft.b,{as:la.a,label:"E-mail",name:"email",variant:"outlined",className:c.fullWidth,margin:"dense",required:!0})),l.a.createElement(Mt.a,{xs:12,sm:6,md:2,item:!0},l.a.createElement(Ft.b,{as:la.a,label:"Telefone",name:"phone",variant:"outlined",className:c.fullWidth,margin:"dense"})),l.a.createElement(Mt.a,{xs:12,sm:6,md:2,item:!0},l.a.createElement(On.a,{margin:"dense",variant:"outlined",fullWidth:!0},l.a.createElement(Cn.a,{htmlFor:"plan-selection"},"Plan"),l.a.createElement(Ft.b,{as:Ht.a,id:"plan-selection",label:"Plan",labelId:"plan-selection-label",name:"planId",margin:"dense",required:!0},s.map((e,a)=>l.a.createElement(L.a,{key:a,value:e.id},e.name))))),l.a.createElement(Mt.a,{xs:12,sm:6,md:2,item:!0},l.a.createElement(On.a,{margin:"dense",variant:"outlined",fullWidth:!0},l.a.createElement(Cn.a,{htmlFor:"status-selection"},"Estado"),l.a.createElement(Ft.b,{as:Ht.a,id:"status-selection",label:"Estado",labelId:"status-selection-label",name:"status",margin:"dense"},l.a.createElement(L.a,{value:!0},"Si"),l.a.createElement(L.a,{value:!1},"No")))),l.a.createElement(Mt.a,{xs:12,sm:6,md:2,item:!0},l.a.createElement(On.a,{margin:"dense",variant:"outlined",fullWidth:!0},l.a.createElement(Cn.a,{htmlFor:"status-selection"},"Campa\xf1as"),l.a.createElement(Ft.b,{as:Ht.a,id:"campaigns-selection",label:"Campa\xf1as",labelId:"campaigns-selection-label",name:"campaignsEnabled",margin:"dense"},l.a.createElement(L.a,{value:!0},"Habilitadas"),l.a.createElement(L.a,{value:!1},"Deshabilitadas")))),l.a.createElement(Mt.a,{xs:12,sm:6,md:2,item:!0},l.a.createElement(On.a,{variant:"outlined",fullWidth:!0},l.a.createElement(Ft.b,{as:la.a,label:"Fecha de Vencimiento",type:"date",name:"dueDate",InputLabelProps:{shrink:!0},variant:"outlined",fullWidth:!0,margin:"dense"}))),l.a.createElement(Mt.a,{xs:12,sm:6,md:2,item:!0},l.a.createElement(On.a,{margin:"dense",variant:"outlined",fullWidth:!0},l.a.createElement(Cn.a,{htmlFor:"recorrencia-selection"},"Recurrencia"),l.a.createElement(Ft.b,{as:Ht.a,label:"Recurrencia",labelId:"recorrencia-selection-label",id:"recurrence",name:"recurrence",margin:"dense"},l.a.createElement(L.a,{value:"MENSAL"},"Mensual")))),l.a.createElement(Mt.a,{xs:12,item:!0},l.a.createElement(Mt.a,{justifyContent:"flex-end",spacing:1,container:!0},l.a.createElement(Mt.a,{xs:4,md:1,item:!0},l.a.createElement(Ha,{className:c.fullWidth,style:{marginTop:7},loading:i,onClick:()=>r(),variant:"contained"},"Limpiar")),void 0!==E.id?l.a.createElement(l.a.Fragment,null,l.a.createElement(Mt.a,{xs:6,md:1,item:!0},l.a.createElement(Ha,{style:{marginTop:7},className:c.fullWidth,loading:i,onClick:()=>t(E),variant:"contained",color:"secondary"},"Eliminar")),l.a.createElement(Mt.a,{xs:6,md:2,item:!0},l.a.createElement(Ha,{style:{marginTop:7},className:c.fullWidth,loading:i,onClick:()=>(()=>{const e={...E};if(""!==e.dueDate&&null!==e.dueDate)switch(e.recurrence){case"MENSAL":e.dueDate=w()(e.dueDate).add(1,"month").format("YYYY-MM-DD");break;case"BIMESTRAL":e.dueDate=w()(e.dueDate).add(2,"month").format("YYYY-MM-DD");break;case"TRIMESTRAL":e.dueDate=w()(e.dueDate).add(3,"month").format("YYYY-MM-DD");break;case"SEMESTRAL":e.dueDate=w()(e.dueDate).add(6,"month").format("YYYY-MM-DD");break;case"ANUAL":e.dueDate=w()(e.dueDate).add(12,"month").format("YYYY-MM-DD")}b(e)})(),variant:"contained",color:"primary"},"+ Vencimiento")),l.a.createElement(Mt.a,{xs:6,md:1,item:!0},l.a.createElement(Ha,{style:{marginTop:7},className:c.fullWidth,loading:i,onClick:()=>(async()=>{try{const{data:e}=await _e.get("/users/list",{params:{companyId:o.id}});Object(qe.isArray)(e)&&e.length&&g(Object(qe.head)(e)),u(!0)}catch(e){C.b.error(e)}})(),variant:"contained",color:"primary"},"Usuario"))):null,l.a.createElement(Mt.a,{xs:6,md:1,item:!0},l.a.createElement(Ha,{className:c.fullWidth,style:{marginTop:7},loading:i,type:"submit",variant:"contained",color:"primary"},"Guardar"))))))))}function Wi(e){const{records:a,onSelect:t}=e,n=Fi(),{dateToClient:r}=_n(),o=e=>{if(w()(e.dueDate).isValid()){const a=w()(),t=w()(e.dueDate).diff(a,"days");if(5===t)return{backgroundColor:"#fffead"};if(t>=-3&&t<=4)return{backgroundColor:"#f7cc8f"};if(-4===t)return{backgroundColor:"#fa8c8c"}}return{}};return l.a.createElement(ht.a,{className:n.tableContainer},l.a.createElement(bl.a,{className:n.fullWidth,size:"small","aria-label":"a dense table"},l.a.createElement(vl.a,null,l.a.createElement(xl.a,null,l.a.createElement(hl.a,{align:"center",style:{width:"1%"}},"#"),l.a.createElement(hl.a,{align:"left"},"Nome"),l.a.createElement(hl.a,{align:"left"},"Correo electr\xf3nico"),l.a.createElement(hl.a,{align:"left"},"Tel\xe9fono"),l.a.createElement(hl.a,{align:"left"},"Plan"),l.a.createElement(hl.a,{align:"left"},"Campa\xf1as"),l.a.createElement(hl.a,{align:"left"},"Estado"),l.a.createElement(hl.a,{align:"left"},"Creada en"),l.a.createElement(hl.a,{align:"left"},"Vencimiento"))),l.a.createElement(fl.a,null,a.map((e,a)=>l.a.createElement(xl.a,{style:o(e),key:a},l.a.createElement(hl.a,{align:"center",style:{width:"1%"}},l.a.createElement(T.a,{onClick:()=>t(e),"aria-label":"delete"},l.a.createElement(oi.a,null))),l.a.createElement(hl.a,{align:"left"},e.name||"-"),l.a.createElement(hl.a,{align:"left"},e.email||"-"),l.a.createElement(hl.a,{align:"left"},e.phone||"-"),l.a.createElement(hl.a,{align:"left"},(e=>null!==e.planId?e.plan.name:"-")(e)),l.a.createElement(hl.a,{align:"left"},(e=>{if(Object(qe.has)(e,"settings")&&Object(qe.isArray)(e.settings)&&e.settings.length>0){const a=e.settings.find(e=>"campaignsEnabled"===e.key);if(a)return"true"===a.value?"Habilitadas":"Desabilitadas"}return"Desabilitadas"})(e)),l.a.createElement(hl.a,{align:"left"},(e=>!1===e.status?"N\xe3o":"Sim")(e)),l.a.createElement(hl.a,{align:"left"},r(e.createdAt)),l.a.createElement(hl.a,{align:"left"},r(e.dueDate),l.a.createElement("br",null),l.a.createElement("span",null,e.recurrence)))))))}function Bi(){const e=Fi(),{list:a,save:t,update:r,remove:o}=Ni(),[i,c]=Object(n.useState)(!1),[s,d]=Object(n.useState)(!1),[m,u]=Object(n.useState)([]),[p,g]=Object(n.useState)({name:"",email:"",phone:"",planId:"",status:!0,campaignsEnabled:!1,dueDate:"",recurrence:""});Object(n.useEffect)(()=>{E()},[]);const E=async()=>{d(!0);try{const e=await a();u(e)}catch(e){C.b.error("N\xe3o foi poss\xedvel carregar a lista de registros")}d(!1)},b=()=>{g(e=>({...e,name:"",email:"",phone:"",planId:"",status:!0,campaignsEnabled:!1,dueDate:"",recurrence:""}))};return l.a.createElement(ht.a,{className:e.mainPaper,elevation:0},l.a.createElement(Mt.a,{spacing:2,container:!0},l.a.createElement(Mt.a,{xs:12,item:!0},l.a.createElement(qi,{initialValue:p,onDelete:()=>{c(!0)},onSubmit:async e=>{d(!0);try{void 0!==e.id?await r(e):await t(e),await E(),b(),C.b.success("Opera\xe7\xe3o realizada com sucesso!")}catch(a){C.b.error("N\xe3o foi poss\xedvel realizar a opera\xe7\xe3o. Verifique se j\xe1 existe uma empresa com o mesmo nome ou se os campos foram preenchidos corretamente")}d(!1)},onCancel:b,loading:s})),l.a.createElement(Mt.a,{xs:12,item:!0},l.a.createElement(Wi,{records:m,onSelect:e=>{let a=!1;const t=e.settings.find(e=>e.key.indexOf("campaignsEnabled")>-1);t&&(a="true"===t.value||"enabled"===t.value),g(t=>({...t,id:e.id,name:e.name||"",phone:e.phone||"",email:e.email||"",planId:e.planId||"",status:!1!==e.status,campaignsEnabled:a,dueDate:e.dueDate||"",recurrence:e.recurrence||""}))}}))),l.a.createElement(Et,{title:"Exclus\xe3o de Registro",open:i,onClose:()=>c(!1),onConfirm:()=>(async()=>{d(!0);try{await o(p.id),await E(),b(),C.b.success("Opera\xe7\xe3o realizada com sucesso!")}catch(e){C.b.error("N\xe3o foi poss\xedvel realizar a opera\xe7\xe3o")}d(!1)})()},"Deseja realmente excluir esse registro?"))}const zi=Object(A.a)(e=>({root:{width:"100%"},mainPaper:{width:"100%",flex:1,padding:e.spacing(2)},fullWidth:{width:"100%"},tableContainer:{width:"100%",overflowX:"scroll",...e.scrollbarStyles},textfield:{width:"100%"},textRight:{textAlign:"right"},row:{paddingTop:e.spacing(2),paddingBottom:e.spacing(2)},control:{paddingRight:e.spacing(1),paddingLeft:e.spacing(1)},buttonContainer:{textAlign:"right",padding:e.spacing(1)}}));function Ui(e){const{onSubmit:a,onDelete:t,onCancel:r,initialValue:o,loading:i}=e,c=zi(),[s,d]=Object(n.useState)({name:"",users:0,connections:0,queues:0,value:0,useCampaigns:!0,useSchedules:!0,useInternalChat:!0,useExternalApi:!0,useKanban:!0,useOpenAi:!0,useIntegrations:!0,useInternal:!0});Object(n.useEffect)(()=>{d(o)},[o]);return l.a.createElement(Ft.e,{enableReinitialize:!0,className:c.fullWidth,initialValues:s,onSubmit:(e,t)=>{let{resetForm:n}=t;return setTimeout(()=>{(async e=>{a(e)})(e),n()},500)}},e=>l.a.createElement(Ft.d,{className:c.fullWidth},l.a.createElement(Mt.a,{spacing:1,justifyContent:"flex-start",container:!0},l.a.createElement(Mt.a,{xs:12,sm:6,md:2,item:!0},l.a.createElement(Ft.b,{as:la.a,label:De.a.t("plans.form.name"),name:"name",variant:"outlined",className:c.fullWidth,margin:"dense"})),l.a.createElement(Mt.a,{xs:12,sm:6,md:1,item:!0},l.a.createElement(Ft.b,{as:la.a,label:De.a.t("plans.form.users"),name:"users",variant:"outlined",className:c.fullWidth,margin:"dense",type:"number"})),l.a.createElement(Mt.a,{xs:12,sm:6,md:1,item:!0},l.a.createElement(Ft.b,{as:la.a,label:De.a.t("plans.form.connections"),name:"connections",variant:"outlined",className:c.fullWidth,margin:"dense",type:"number"})),l.a.createElement(Mt.a,{xs:12,sm:6,md:1,item:!0},l.a.createElement(Ft.b,{as:la.a,label:"Colas",name:"queues",variant:"outlined",className:c.fullWidth,margin:"dense",type:"number"})),l.a.createElement(Mt.a,{xs:12,sm:6,md:1,item:!0},l.a.createElement(Ft.b,{as:la.a,label:"Valor",name:"value",variant:"outlined",className:c.fullWidth,margin:"dense",type:"text"})),l.a.createElement(Mt.a,{xs:12,sm:6,md:2,item:!0},l.a.createElement(On.a,{margin:"dense",variant:"outlined",fullWidth:!0},l.a.createElement(Cn.a,{htmlFor:"useCampaigns-selection"},De.a.t("plans.form.campaigns")),l.a.createElement(Ft.b,{as:Ht.a,id:"useCampaigns-selection",label:De.a.t("plans.form.campaigns"),labelId:"useCampaigns-selection-label",name:"useCampaigns",margin:"dense"},l.a.createElement(L.a,{value:!0},De.a.t("plans.form.enabled")),l.a.createElement(L.a,{value:!1},De.a.t("plans.form.disabled"))))),l.a.createElement(Mt.a,{xs:12,sm:8,md:2,item:!0},l.a.createElement(On.a,{margin:"dense",variant:"outlined",fullWidth:!0},l.a.createElement(Cn.a,{htmlFor:"useSchedules-selection"},De.a.t("plans.form.schedules")),l.a.createElement(Ft.b,{as:Ht.a,id:"useSchedules-selection",label:De.a.t("plans.form.schedules"),labelId:"useSchedules-selection-label",name:"useSchedules",margin:"dense"},l.a.createElement(L.a,{value:!0},De.a.t("plans.form.enabled")),l.a.createElement(L.a,{value:!1},De.a.t("plans.form.disabled"))))),l.a.createElement(Mt.a,{xs:12,sm:8,md:2,item:!0},l.a.createElement(On.a,{margin:"dense",variant:"outlined",fullWidth:!0},l.a.createElement(Cn.a,{htmlFor:"useInternalChat-selection"},"Chat Interno"),l.a.createElement(Ft.b,{as:Ht.a,id:"useInternalChat-selection",label:"Chat Interno",labelId:"useInternalChat-selection-label",name:"useInternalChat",margin:"dense"},l.a.createElement(L.a,{value:!0},De.a.t("plans.form.enabled")),l.a.createElement(L.a,{value:!1},De.a.t("plans.form.disabled"))))),l.a.createElement(Mt.a,{xs:12,sm:8,md:4,item:!0},l.a.createElement(On.a,{margin:"dense",variant:"outlined",fullWidth:!0},l.a.createElement(Cn.a,{htmlFor:"useExternalApi-selection"},"API Externa"),l.a.createElement(Ft.b,{as:Ht.a,id:"useExternalApi-selection",label:"API Externa",labelId:"useExternalApi-selection-label",name:"useExternalApi",margin:"dense"},l.a.createElement(L.a,{value:!0},De.a.t("plans.form.enabled")),l.a.createElement(L.a,{value:!1},De.a.t("plans.form.disabled"))))),l.a.createElement(Mt.a,{xs:12,sm:8,md:2,item:!0},l.a.createElement(On.a,{margin:"dense",variant:"outlined",fullWidth:!0},l.a.createElement(Cn.a,{htmlFor:"useKanban-selection"},"Kanban"),l.a.createElement(Ft.b,{as:Ht.a,id:"useKanban-selection",label:"Kanban",labelId:"useKanban-selection-label",name:"useKanban",margin:"dense"},l.a.createElement(L.a,{value:!0},De.a.t("plans.form.enabled")),l.a.createElement(L.a,{value:!1},De.a.t("plans.form.disabled"))))),l.a.createElement(Mt.a,{xs:12,sm:8,md:2,item:!0},l.a.createElement(On.a,{margin:"dense",variant:"outlined",fullWidth:!0},l.a.createElement(Cn.a,{htmlFor:"useOpenAi-selection"},"Open.Ai"),l.a.createElement(Ft.b,{as:Ht.a,id:"useOpenAi-selection",label:"Talk.Ai",labelId:"useOpenAi-selection-label",name:"useOpenAi",margin:"dense"},l.a.createElement(L.a,{value:!0},De.a.t("plans.form.enabled")),l.a.createElement(L.a,{value:!1},De.a.t("plans.form.disabled"))))),l.a.createElement(Mt.a,{xs:12,sm:8,md:2,item:!0},l.a.createElement(On.a,{margin:"dense",variant:"outlined",fullWidth:!0},l.a.createElement(Cn.a,{htmlFor:"useIntegrations-selection"},"Integraciones"),l.a.createElement(Ft.b,{as:Ht.a,id:"useIntegrations-selection",label:"Integraciones",labelId:"useIntegrations-selection-label",name:"useIntegrations",margin:"dense"},l.a.createElement(L.a,{value:!0},De.a.t("plans.form.enabled")),l.a.createElement(L.a,{value:!1},De.a.t("plans.form.disabled"))))),l.a.createElement(Mt.a,{xs:12,sm:6,md:2,item:!0},l.a.createElement(On.a,{margin:"dense",variant:"outlined",fullWidth:!0},l.a.createElement(Cn.a,{htmlFor:"useInternal-selection"},"Uso Interno"),l.a.createElement(Ft.b,{as:Ht.a,id:"useInternal-selection",label:"Uso Interno",labelId:"useInternal-selection-label",name:"useInternal",margin:"dense"},l.a.createElement(L.a,{value:!1},"Sim"),l.a.createElement(L.a,{value:!0},"N\xe3o"))))),l.a.createElement(Mt.a,{spacing:2,justifyContent:"flex-end",container:!0},l.a.createElement(Mt.a,{sm:3,md:2,item:!0},l.a.createElement(Ha,{className:c.fullWidth,loading:i,onClick:()=>r(),variant:"contained"},De.a.t("plans.form.clear"))),void 0!==s.id?l.a.createElement(Mt.a,{sm:3,md:2,item:!0},l.a.createElement(Ha,{className:c.fullWidth,loading:i,onClick:()=>t(s),variant:"contained",color:"secondary"},De.a.t("plans.form.delete"))):null,l.a.createElement(Mt.a,{sm:3,md:2,item:!0},l.a.createElement(Ha,{className:c.fullWidth,loading:i,type:"submit",variant:"contained",color:"primary"},De.a.t("plans.form.save"))))))}function Hi(e){const{records:a,onSelect:t}=e,n=zi();return l.a.createElement(ht.a,{className:n.tableContainer},l.a.createElement(bl.a,{className:n.fullWidth,padding:"none","aria-label":"a dense table"},l.a.createElement(vl.a,null,l.a.createElement(xl.a,null,l.a.createElement(hl.a,{align:"center",style:{width:"1%"}},"#"),l.a.createElement(hl.a,{align:"left"},De.a.t("plans.form.name")),l.a.createElement(hl.a,{align:"center"},De.a.t("plans.form.users")),l.a.createElement(hl.a,{align:"center"},De.a.t("plans.form.connections")),l.a.createElement(hl.a,{align:"center"},"Colas"),l.a.createElement(hl.a,{align:"center"},"Valor"),l.a.createElement(hl.a,{align:"center"},De.a.t("plans.form.campaigns")),l.a.createElement(hl.a,{align:"center"},De.a.t("plans.form.schedules")),l.a.createElement(hl.a,{align:"center"},"Chat Interno"),l.a.createElement(hl.a,{align:"center"},"API Externa"),l.a.createElement(hl.a,{align:"center"},"Kanban"),l.a.createElement(hl.a,{align:"center"},"Open.Ai"),l.a.createElement(hl.a,{align:"center"},"Integraciones"),l.a.createElement(hl.a,{align:"center"},"Plano Interno"))),l.a.createElement(fl.a,null,a.map(e=>l.a.createElement(xl.a,{key:e.id},l.a.createElement(hl.a,{align:"center",style:{width:"1%"}},l.a.createElement(T.a,{onClick:()=>t(e),"aria-label":"delete"},l.a.createElement(oi.a,null))),l.a.createElement(hl.a,{align:"left"},e.name||"-"),l.a.createElement(hl.a,{align:"center"},e.users||"-"),l.a.createElement(hl.a,{align:"center"},e.connections||"-"),l.a.createElement(hl.a,{align:"center"},e.queues||"-"),l.a.createElement(hl.a,{align:"center"},De.a.t("plans.form.money")," ",e.value?e.value.toLocaleString("pt-br",{minimumFractionDigits:2}):"00.00"),l.a.createElement(hl.a,{align:"center"},(e=>!1===e.useCampaigns?"".concat(De.a.t("plans.form.no")):"".concat(De.a.t("plans.form.yes")))(e)),l.a.createElement(hl.a,{align:"center"},(e=>!1===e.useSchedules?"".concat(De.a.t("plans.form.no")):"".concat(De.a.t("plans.form.yes")))(e)),l.a.createElement(hl.a,{align:"center"},(e=>!1===e.useInternalChat?"".concat(De.a.t("plans.form.no")):"".concat(De.a.t("plans.form.yes")))(e)),l.a.createElement(hl.a,{align:"center"},(e=>!1===e.useExternalApi?"".concat(De.a.t("plans.form.no")):"".concat(De.a.t("plans.form.yes")))(e)),l.a.createElement(hl.a,{align:"center"},(e=>!1===e.useKanban?"".concat(De.a.t("plans.form.no")):"".concat(De.a.t("plans.form.yes")))(e)),l.a.createElement(hl.a,{align:"center"},(e=>!1===e.useOpenAi?"".concat(De.a.t("plans.form.no")):"".concat(De.a.t("plans.form.yes")))(e)),l.a.createElement(hl.a,{align:"center"},(e=>!1===e.useIntegrations?"".concat(De.a.t("plans.form.no")):"".concat(De.a.t("plans.form.yes")))(e)),l.a.createElement(hl.a,{align:"center"},(e=>!1===e.useInternal?"Sim":"N\xe3o")(e)))))))}function _i(){const e=zi(),{list:a,save:t,update:r,remove:o}=ba(),[i,c]=Object(n.useState)(!1),[s,d]=Object(n.useState)(!1),[m,u]=Object(n.useState)([]),[p,g]=Object(n.useState)({name:"",users:0,connections:0,queues:0,value:0,useCampaigns:!0,useSchedules:!0,useInternalChat:!0,useExternalApi:!0,useKanban:!0,useOpenAi:!0,useIntegrations:!0,useInternal:!0});Object(n.useEffect)(()=>{!async function(){await E()}()},[p]);const E=async()=>{d(!0);try{const e=await a();u(e)}catch(e){C.b.error("N\xe3o foi poss\xedvel carregar a lista de registros")}d(!1)},b=()=>{g({id:void 0,name:"",users:0,connections:0,queues:0,value:0,useCampaigns:!0,useSchedules:!0,useInternalChat:!0,useExternalApi:!0,useKanban:!0,useOpenAi:!0,useIntegrations:!0,useInternal:!0})};return l.a.createElement(ht.a,{className:e.mainPaper,elevation:0},l.a.createElement(Mt.a,{spacing:2,container:!0},l.a.createElement(Mt.a,{xs:12,item:!0},l.a.createElement(Ui,{initialValue:p,onDelete:()=>{c(!0)},onSubmit:async e=>{d(!0),console.log(e);try{void 0!==e.id?await r(e):await t(e),await E(),b(),C.b.success("Opera\xe7\xe3o realizada com sucesso!")}catch(a){C.b.error("N\xe3o foi poss\xedvel realizar a opera\xe7\xe3o. Verifique se j\xe1 existe uma plano com o mesmo nome ou se os campos foram preenchidos corretamente")}d(!1)},onCancel:b,loading:s})),l.a.createElement(Mt.a,{xs:12,item:!0},l.a.createElement(Hi,{records:m,onSelect:e=>{var a;let t=!1!==e.useCampaigns,n=!1!==e.useSchedules,l=!1!==e.useInternalChat,r=!1!==e.useExternalApi,o=!1!==e.useKanban,i=!1!==e.useOpenAi,c=!1!==e.useIntegrations,s=!0===e.useInternal;g({id:e.id,name:e.name||"",users:e.users||0,connections:e.connections||0,queues:e.queues||0,value:(null===(a=e.value)||void 0===a?void 0:a.toLocaleString("pt-br",{minimumFractionDigits:0}))||0,useCampaigns:t,useSchedules:n,useInternalChat:l,useExternalApi:r,useKanban:o,useOpenAi:i,useIntegrations:c,useInternal:s})}}))),l.a.createElement(Et,{title:"Exclus\xe3o de Registro",open:i,onClose:()=>c(!1),onConfirm:()=>(async()=>{d(!0);try{await o(p.id),await E(),b(),C.b.success("Opera\xe7\xe3o realizada com sucesso!")}catch(e){C.b.error("N\xe3o foi poss\xedvel realizar a opera\xe7\xe3o")}d(!1)})()},"Deseja realmente excluir esse registro?"))}var Vi=()=>({findAll:async e=>{const{data:a}=await _e.request({url:"/helps",method:"GET",params:e});return a},list:async e=>{const{data:a}=await _e.request({url:"/helps/list",method:"GET",params:e});return a},save:async e=>{const{data:a}=await _e.request({url:"/helps",method:"POST",data:e});return a},update:async e=>{const{data:a}=await _e.request({url:"/helps/".concat(e.id),method:"PUT",data:e});return a},remove:async e=>{const{data:a}=await _e.request({url:"/helps/".concat(e),method:"DELETE"});return a}});const Gi=Object(A.a)(e=>({root:{width:"100%"},mainPaper:{width:"100%",flex:1,padding:e.spacing(2)},fullWidth:{width:"100%"},tableContainer:{width:"100%",overflowX:"scroll",...e.scrollbarStyles},textfield:{width:"100%"},textRight:{textAlign:"right"},row:{paddingTop:e.spacing(2),paddingBottom:e.spacing(2)},control:{paddingRight:e.spacing(1),paddingLeft:e.spacing(1)},buttonContainer:{textAlign:"right",padding:e.spacing(1)}}));function Ki(e){const{onSubmit:a,onDelete:t,onCancel:r,initialValue:o,loading:i}=e,c=Gi(),[s,d]=Object(n.useState)(o);Object(n.useEffect)(()=>{d(o)},[o]);return l.a.createElement(Ft.e,{enableReinitialize:!0,className:c.fullWidth,initialValues:s,onSubmit:(e,t)=>{let{resetForm:n}=t;return setTimeout(()=>{(async e=>{a(e)})(e),n()},500)}},e=>l.a.createElement(Ft.d,{className:c.fullWidth},l.a.createElement(Mt.a,{spacing:2,justifyContent:"flex-end",container:!0},l.a.createElement(Mt.a,{xs:12,sm:6,md:3,item:!0},l.a.createElement(Ft.b,{as:la.a,label:"T\xedtulo",name:"title",variant:"outlined",className:c.fullWidth,margin:"dense"})),l.a.createElement(Mt.a,{xs:12,sm:6,md:3,item:!0},l.a.createElement(Ft.b,{as:la.a,label:"C\xf3digo del video",name:"video",variant:"outlined",className:c.fullWidth,margin:"dense"})),l.a.createElement(Mt.a,{xs:12,sm:12,md:6,item:!0},l.a.createElement(Ft.b,{as:la.a,label:"Descri\xe7\xe3o",name:"description",variant:"outlined",className:c.fullWidth,margin:"dense"})),l.a.createElement(Mt.a,{sm:3,md:1,item:!0},l.a.createElement(Ha,{className:c.fullWidth,loading:i,onClick:()=>r(),variant:"contained"},"Limpar")),void 0!==s.id?l.a.createElement(Mt.a,{sm:3,md:1,item:!0},l.a.createElement(Ha,{className:c.fullWidth,loading:i,onClick:()=>t(s),variant:"contained",color:"secondary"},"Excluir")):null,l.a.createElement(Mt.a,{sm:3,md:1,item:!0},l.a.createElement(Ha,{className:c.fullWidth,loading:i,type:"submit",variant:"contained",color:"primary"},"Salvar")))))}function Yi(e){const{records:a,onSelect:t}=e,n=Gi();return l.a.createElement(ht.a,{className:n.tableContainer},l.a.createElement(bl.a,{className:n.fullWidth,size:"small","aria-label":"a dense table"},l.a.createElement(vl.a,null,l.a.createElement(xl.a,null,l.a.createElement(hl.a,{align:"center",style:{width:"1%"}},"#"),l.a.createElement(hl.a,{align:"left"},"T\xedtulo"),l.a.createElement(hl.a,{align:"left"},"Descri\xe7\xe3o"),l.a.createElement(hl.a,{align:"left"},"V\xeddeo"))),l.a.createElement(fl.a,null,a.map(e=>l.a.createElement(xl.a,{key:e.id},l.a.createElement(hl.a,{align:"center",style:{width:"1%"}},l.a.createElement(T.a,{onClick:()=>t(e),"aria-label":"delete"},l.a.createElement(oi.a,null))),l.a.createElement(hl.a,{align:"left"},e.title||"-"),l.a.createElement(hl.a,{align:"left"},e.description||"-"),l.a.createElement(hl.a,{align:"left"},e.video||"-"))))))}function Qi(){const e=Gi(),{list:a,save:t,update:r,remove:o}=Vi(),[i,c]=Object(n.useState)(!1),[s,d]=Object(n.useState)(!1),[m,u]=Object(n.useState)([]),[p,g]=Object(n.useState)({title:"",description:"",video:""});Object(n.useEffect)(()=>{!async function(){await E()}()},[]);const E=async()=>{d(!0);try{const e=await a();u(e)}catch(e){C.b.error("N\xe3o foi poss\xedvel carregar a lista de registros")}d(!1)},b=()=>{g({title:"",description:"",video:""})};return l.a.createElement(ht.a,{className:e.mainPaper,elevation:0},l.a.createElement(Mt.a,{spacing:2,container:!0},l.a.createElement(Mt.a,{xs:12,item:!0},l.a.createElement(Ki,{initialValue:p,onDelete:()=>{c(!0)},onSubmit:async e=>{d(!0);try{void 0!==e.id?await r(e):await t(e),await E(),b(),C.b.success("Opera\xe7\xe3o realizada com sucesso!")}catch(a){C.b.error("N\xe3o foi poss\xedvel realizar a opera\xe7\xe3o. Verifique se j\xe1 existe uma helpo com o mesmo nome ou se os campos foram preenchidos corretamente")}d(!1)},onCancel:b,loading:s})),l.a.createElement(Mt.a,{xs:12,item:!0},l.a.createElement(Yi,{records:m,onSelect:e=>{g({id:e.id,title:e.title||"",description:e.description||"",video:e.video||""})}}))),l.a.createElement(Et,{title:"Exclus\xe3o de Registro",open:i,onClose:()=>c(!1),onConfirm:()=>(async()=>{d(!0);try{await o(p.id),await E(),b(),C.b.success("Opera\xe7\xe3o realizada com sucesso!")}catch(e){C.b.error("N\xe3o foi poss\xedvel realizar a opera\xe7\xe3o")}d(!1)})()},"Deseja realmente excluir esse registro?"))}var Xi=()=>({getAll:async e=>{const{data:a}=await _e.request({url:"/settings",method:"GET",params:e});return a},update:async e=>{const{data:a}=await _e.request({url:"/settings/".concat(e.key),method:"PUT",data:e});return a}});const Ji=e=>{let{user:a,yes:t,no:n}=e;return a.super?t():n()};Ji.defaultProps={user:{},yes:()=>null,no:()=>null};var Zi=Ji;const $i=Object(A.a)(e=>({container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},fixedHeightPaper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column",height:240},tab:{backgroundColor:e.palette.options,borderRadius:4,width:"100%","& .MuiTab-wrapper":{color:e.palette.fontecor},"& .MuiTabs-flexContainer":{justifyContent:"center"}},paper:{padding:e.spacing(2),display:"flex",alignItems:"center",marginBottom:12,width:"100%"},cardAvatar:{fontSize:"55px",color:Da.a[500],backgroundColor:"#ffffff",width:e.spacing(7),height:e.spacing(7)},cardTitle:{fontSize:"18px",color:La.a[700]},cardSubtitle:{color:Da.a[600],fontSize:"14px"},alignRight:{textAlign:"right"},fullWidth:{width:"100%"},selectContainer:{width:"100%",textAlign:"left"}}));function ec(e){const{settings:a,scheduleTypeChanged:t}=e,r=$i(),[o,i]=Object(n.useState)({}),{getCurrentUserInfo:c}=Qe(),[s,d]=Object(n.useState)(!1);Object(n.useEffect)(()=>{!async function(){d(!0);try{const e=await c();i(e)}catch(e){C.b.error(e)}d(!1)}()},[]);const[m,u]=Object(n.useState)("disabled"),[p,g]=Object(n.useState)("disabled"),[E,b]=Object(n.useState)("enabled"),[f,h]=Object(n.useState)(""),[y,v]=Object(n.useState)("enabled"),[x,O]=Object(n.useState)(!1),[S,w]=Object(n.useState)(!1),[A,j]=Object(n.useState)(!1),[k,T]=Object(n.useState)(!1),[I,N]=Object(n.useState)(!1),[M,P]=Object(n.useState)(""),[R,D]=Object(n.useState)(!1),[F,q]=Object(n.useState)(""),[W,B]=Object(n.useState)(!1),[z,U]=Object(n.useState)(""),[H,_]=Object(n.useState)(!1),[V,G]=Object(n.useState)(""),[K,Y]=Object(n.useState)(!1),[Q,X]=Object(n.useState)(""),[J,Z]=Object(n.useState)(!1),[$,ee]=Object(n.useState)(""),[ae,te]=Object(n.useState)(!1),[ne,le]=Object(n.useState)("3"),[re,oe]=Object(n.useState)(!1),[ie,ce]=Object(n.useState)("disabled"),[se,de]=Object(n.useState)(!1),[me,ue]=Object(n.useState)("disabled"),[pe,ge]=Object(n.useState)(!1),[Ee,be]=Object(n.useState)("disabled"),[fe,he]=Object(n.useState)(!1),[ye,ve]=Object(n.useState)("disabled"),[xe,Ce]=Object(n.useState)(!1),[Oe,Se]=Object(n.useState)("disabled"),[we,Ae]=Object(n.useState)(!1),{update:je}=Xi();return Object(n.useEffect)(()=>{if(Array.isArray(a)&&a.length){const e=a.find(e=>"userRating"===e.key);e&&u(e.value);const t=a.find(e=>"scheduleType"===e.key);t&&g(t.value);const n=a.find(e=>"call"===e.key);n&&b(n.value);const l=a.find(e=>"CheckMsgIsGroup"===e.key);l&&v(l.value);const r=a.find(e=>"allowregister"===e.key);r&&ue(r.value);const o=a.find(e=>"sendGreetingAccepted"===e.key);o&&be(o.value);const i=a.find(e=>"sendMsgTransfTicket"===e.key);i&&ve(i.value);const c=a.find(e=>"viewregister"===e.key);c&&ce(c.value);const s=a.find(e=>"sendGreetingMessageOneQueues"===e.key);s&&Se(s.value);const d=a.find(e=>"chatBotType"===e.key);d&&h(d.value);const m=a.find(e=>"trial"===e.key);m&&le(m.value);const p=a.find(e=>"ipixc"===e.key);p&&P(p.value);const E=a.find(e=>"tokenixc"===e.key);E&&q(E.value);const f=a.find(e=>"ipmkauth"===e.key);f&&U(f.value);const y=a.find(e=>"clientidmkauth"===e.key);y&&G(y.value);const x=a.find(e=>"clientsecretmkauth"===e.key);x&&X(x.value);const C=a.find(e=>"asaas"===e.key);C&&ee(C.value)}},[a]),l.a.createElement(l.a.Fragment,null,l.a.createElement(Mt.a,{spacing:3,container:!0},l.a.createElement(Mt.a,{xs:12,sm:12,md:12,item:!0},l.a.createElement(On.a,{className:r.selectContainer},l.a.createElement(Cn.a,{id:"ratings-label"},"Evaluaciones"),l.a.createElement(Ht.a,{labelId:"ratings-label",value:m,onChange:async e=>{!async function(e){u(e),O(!0),await je({key:"userRating",value:e}),C.b.success("Opera\xe7\xe3o atualizada com sucesso."),O(!1)}(e.target.value)}},l.a.createElement(L.a,{value:"disabled"},"Deshabilitadas"),l.a.createElement(L.a,{value:"enabled"},"Habilitadas")),l.a.createElement($n.a,null,x&&"Actualizando..."))),l.a.createElement(Mt.a,{xs:12,sm:12,md:12,item:!0},l.a.createElement(On.a,{className:r.selectContainer},l.a.createElement(Cn.a,{id:"schedule-type-label"},"Gesti\xf3n de Expedientes"),l.a.createElement(Ht.a,{labelId:"schedule-type-label",value:p,onChange:async e=>{!async function(e){g(e),w(!0),await je({key:"scheduleType",value:e}),C.b.success("Opera\xe7\xe3o atualizada com sucesso.",{position:"top-right",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!1,draggable:!0,theme:"light"}),w(!1),"function"===typeof t&&t(e)}(e.target.value)}},l.a.createElement(L.a,{value:"disabled"},"Deshabilitado"),l.a.createElement(L.a,{value:"queue"},"Colas"),l.a.createElement(L.a,{value:"company"},"Empresa")),l.a.createElement($n.a,null,S&&"Actualizando..."))),l.a.createElement(Mt.a,{xs:12,sm:12,md:12,item:!0},l.a.createElement(On.a,{className:r.selectContainer},l.a.createElement(Cn.a,{id:"group-type-label"},"Ignorar Mensajes de Grupos"),l.a.createElement(Ht.a,{labelId:"group-type-label",value:y,onChange:async e=>{!async function(e){v(e),N(!0),await je({key:"CheckMsgIsGroup",value:e}),C.b.success("Opera\xe7\xe3o atualizada com sucesso."),v(!1)}(e.target.value)}},l.a.createElement(L.a,{value:"disabled"},"Deshabilitado"),l.a.createElement(L.a,{value:"enabled"},"Activado")),l.a.createElement($n.a,null,S&&"Actualizando..."))),l.a.createElement(Mt.a,{xs:12,sm:12,md:12,item:!0},l.a.createElement(On.a,{className:r.selectContainer},l.a.createElement(Cn.a,{id:"call-type-label"},"Aceptar Llamada"),l.a.createElement(Ht.a,{labelId:"call-type-label",value:E,onChange:async e=>{!async function(e){b(e),j(!0),await je({key:"call",value:e}),C.b.success("Opera\xe7\xe3o atualizada com sucesso."),j(!1)}(e.target.value)}},l.a.createElement(L.a,{value:"disabled"},"No Aceptar"),l.a.createElement(L.a,{value:"enabled"},"Aceptar")),l.a.createElement($n.a,null,A&&"Actualizando..."))),l.a.createElement(Mt.a,{xs:12,sm:12,md:12,item:!0},l.a.createElement(On.a,{className:r.selectContainer},l.a.createElement(Cn.a,{id:"chatbot-type-label"},"Tipo Chatbot"),l.a.createElement(Ht.a,{labelId:"chatbot-type-label",value:f,onChange:async e=>{!async function(e){h(e),T(!0),await je({key:"chatBotType",value:e}),C.b.success("Opera\xe7\xe3o atualizada com sucesso."),T(!1)}(e.target.value)}},l.a.createElement(L.a,{value:"text"},"Texto")),l.a.createElement($n.a,null,k&&"Actualizando..."))),l.a.createElement(Mt.a,{xs:12,sm:12,md:12,item:!0},l.a.createElement(On.a,{className:r.selectContainer},l.a.createElement(Cn.a,{id:"sendGreetingAccepted-label"},"Enviar saludo al aceptar conversaci\xf3n"),l.a.createElement(Ht.a,{labelId:"sendGreetingAccepted-label",value:Ee,onChange:async e=>{!async function(e){be(e),he(!0),await je({key:"sendGreetingAccepted",value:e}),C.b.success("Opera\xe7\xe3o atualizada com sucesso."),he(!1)}(e.target.value)}},l.a.createElement(L.a,{value:"disabled"},"Deshabilitado"),l.a.createElement(L.a,{value:"enabled"},"Habilitadas")),l.a.createElement($n.a,null,fe&&"Actualizando..."))),l.a.createElement(Mt.a,{xs:12,sm:12,md:12,item:!0},l.a.createElement(On.a,{className:r.selectContainer},l.a.createElement(Cn.a,{id:"sendMsgTransfTicket-label"},"Enviar mensaje de transferencia de Cola/Agente"),l.a.createElement(Ht.a,{labelId:"sendMsgTransfTicket-label",value:ye,onChange:async e=>{!async function(e){ve(e),Ce(!0),await je({key:"sendMsgTransfTicket",value:e}),C.b.success("Opera\xe7\xe3o atualizada com sucesso."),Ce(!1)}(e.target.value)}},l.a.createElement(L.a,{value:"disabled"},"Deshabilitado"),l.a.createElement(L.a,{value:"enabled"},"Habilitado")),l.a.createElement($n.a,null,xe&&"Actualizando..."))),l.a.createElement(Mt.a,{xs:12,sm:12,md:12,item:!0},l.a.createElement(On.a,{className:r.selectContainer},l.a.createElement(Cn.a,{id:"sendGreetingMessageOneQueues-label"},"Enviar saludo cuando solo haya 1 cola"),l.a.createElement(Ht.a,{labelId:"sendGreetingMessageOneQueues-label",value:Oe,onChange:async e=>{!async function(e){Se(e),Ae(!0),await je({key:"sendGreetingMessageOneQueues",value:e}),C.b.success("Opera\xe7\xe3o atualizada com sucesso."),Ae(!1)}(e.target.value)}},l.a.createElement(L.a,{value:"disabled"},"Deshabilitado"),l.a.createElement(L.a,{value:"enabled"},"Habilitado")),l.a.createElement($n.a,null,we&&"Actualizando...")))),l.a.createElement(Zi,{user:o,yes:()=>l.a.createElement(l.a.Fragment,null,l.a.createElement(Mt.a,{spacing:3,container:!0},l.a.createElement(Xl.a,{indicatorColor:"primary",textColor:"primary",scrollButtons:"on",variant:"scrollable",className:r.tab,style:{marginBottom:20,marginTop:20}},l.a.createElement(Jl.a,{label:"Configuraciones globales"}))),l.a.createElement(Mt.a,{xs:12,sm:12,md:12,item:!0},l.a.createElement(On.a,{className:r.selectContainer},l.a.createElement(Cn.a,{id:"allowregister-label"},"\xbfRegistro (inscripci\xf3n) permitido?"),l.a.createElement(Ht.a,{labelId:"allowregister-label",value:me,onChange:async e=>{!async function(e){ue(e),ge(!0),await je({key:"allowregister",value:e}),C.b.success("Opera\xe7\xe3o atualizada com sucesso."),ge(!1)}(e.target.value)}},l.a.createElement(L.a,{value:"disabled"},"No"),l.a.createElement(L.a,{value:"enabled"},"Si")),l.a.createElement($n.a,null,pe&&"Actualizando..."))),l.a.createElement(Mt.a,{xs:12,sm:12,md:12,item:!0},l.a.createElement(On.a,{className:r.selectContainer},l.a.createElement(Cn.a,{id:"viewregister-label"},"\xbfRegistro (inscripci\xf3n) visible?"),l.a.createElement(Ht.a,{labelId:"viewregister-label",value:ie,onChange:async e=>{!async function(e){ce(e),de(!0),await je({key:"viewregister",value:e}),C.b.success("Opera\xe7\xe3o atualizada com sucesso."),de(!1)}(e.target.value)}},l.a.createElement(L.a,{value:"disabled"},"No"),l.a.createElement(L.a,{value:"enabled"},"Si")),l.a.createElement($n.a,null,se&&"Actualizando..."))),l.a.createElement(Mt.a,{xs:12,sm:12,md:12,item:!0},l.a.createElement(On.a,{className:r.selectContainer},l.a.createElement(Cn.a,{id:"trial-label"},"\xbfTiempo de prueba?"),l.a.createElement(Ht.a,{labelId:"trial-label",value:ne,onChange:async e=>{!async function(e){le(e),oe(!0),await je({key:"trial",value:e}),C.b.success("Opera\xe7\xe3o atualizada com sucesso."),oe(!1)}(e.target.value)}},l.a.createElement(L.a,{value:"1"},"1"),l.a.createElement(L.a,{value:"2"},"2"),l.a.createElement(L.a,{value:"3"},"3"),l.a.createElement(L.a,{value:"4"},"4"),l.a.createElement(L.a,{value:"5"},"5"),l.a.createElement(L.a,{value:"6"},"6"),l.a.createElement(L.a,{value:"7"},"7")),l.a.createElement($n.a,null,re&&"Actualizando..."))))}),l.a.createElement(Mt.a,{spacing:3,container:!0},l.a.createElement(Xl.a,{indicatorColor:"primary",textColor:"primary",scrollButtons:"on",variant:"scrollable",className:r.tab,style:{marginBottom:20,marginTop:20}},l.a.createElement(Jl.a,{label:"INTEGRACIONES"}))),l.a.createElement(Mt.a,{spacing:3,container:!0,style:{marginBottom:10}},l.a.createElement(Xl.a,{indicatorColor:"primary",textColor:"primary",scrollButtons:"on",variant:"scrollable",className:r.tab},l.a.createElement(Jl.a,{label:"IXC"})),l.a.createElement(Mt.a,{xs:12,sm:6,md:6,item:!0},l.a.createElement(On.a,{className:r.selectContainer},l.a.createElement(la.a,{id:"ipixc",name:"ipixc",margin:"dense",label:"IP do IXC",variant:"outlined",value:M,onChange:async e=>{!async function(e){P(e),D(!0),await je({key:"ipixc",value:e}),C.b.success("Opera\xe7\xe3o atualizada com sucesso."),D(!1)}(e.target.value)}}),l.a.createElement($n.a,null,R&&"Actualizando..."))),l.a.createElement(Mt.a,{xs:12,sm:6,md:6,item:!0},l.a.createElement(On.a,{className:r.selectContainer},l.a.createElement(la.a,{id:"tokenixc",name:"tokenixc",margin:"dense",label:"Token do IXC",variant:"outlined",value:F,onChange:async e=>{!async function(e){q(e),B(!0),await je({key:"tokenixc",value:e}),C.b.success("Opera\xe7\xe3o atualizada com sucesso."),B(!1)}(e.target.value)}}),l.a.createElement($n.a,null,W&&"Actualizando...")))),l.a.createElement(Mt.a,{spacing:3,container:!0,style:{marginBottom:10}},l.a.createElement(Xl.a,{indicatorColor:"primary",textColor:"primary",scrollButtons:"on",variant:"scrollable",className:r.tab},l.a.createElement(Jl.a,{label:"MK-AUTH"})),l.a.createElement(Mt.a,{xs:12,sm:12,md:4,item:!0},l.a.createElement(On.a,{className:r.selectContainer},l.a.createElement(la.a,{id:"ipmkauth",name:"ipmkauth",margin:"dense",label:"Ip Mk-Auth",variant:"outlined",value:z,onChange:async e=>{!async function(e){U(e),_(!0),await je({key:"ipmkauth",value:e}),C.b.success("Opera\xe7\xe3o atualizada com sucesso."),_(!1)}(e.target.value)}}),l.a.createElement($n.a,null,H&&"Actualizando..."))),l.a.createElement(Mt.a,{xs:12,sm:12,md:4,item:!0},l.a.createElement(On.a,{className:r.selectContainer},l.a.createElement(la.a,{id:"clientidmkauth",name:"clientidmkauth",margin:"dense",label:"Client Id",variant:"outlined",value:V,onChange:async e=>{!async function(e){G(e),Y(!0),await je({key:"clientidmkauth",value:e}),C.b.success("Opera\xe7\xe3o atualizada com sucesso."),Y(!1)}(e.target.value)}}),l.a.createElement($n.a,null,K&&"Actualizando..."))),l.a.createElement(Mt.a,{xs:12,sm:12,md:4,item:!0},l.a.createElement(On.a,{className:r.selectContainer},l.a.createElement(la.a,{id:"clientsecretmkauth",name:"clientsecretmkauth",margin:"dense",label:"Client Secret",variant:"outlined",value:Q,onChange:async e=>{!async function(e){X(e),Z(!0),await je({key:"clientsecretmkauth",value:e}),C.b.success("Opera\xe7\xe3o atualizada com sucesso."),Z(!1)}(e.target.value)}}),l.a.createElement($n.a,null,J&&"Actualizando...")))),l.a.createElement(Mt.a,{spacing:3,container:!0,style:{marginBottom:10}},l.a.createElement(Xl.a,{indicatorColor:"primary",textColor:"primary",scrollButtons:"on",variant:"scrollable",className:r.tab},l.a.createElement(Jl.a,{label:"ASAAS"})),l.a.createElement(Mt.a,{xs:12,sm:12,md:12,item:!0},l.a.createElement(On.a,{className:r.selectContainer},l.a.createElement(la.a,{id:"asaas",name:"asaas",margin:"dense",label:"Token Asaas",variant:"outlined",value:$,onChange:async e=>{!async function(e){ee(e),te(!0),await je({key:"asaas",value:e}),C.b.success("Opera\xe7\xe3o atualizada com sucesso."),te(!1)}(e.target.value)}}),l.a.createElement($n.a,null,ae&&"Actualizando...")))))}const ac=Object(A.a)(e=>({root:{width:"100%"},mainPaper:{width:"100%",flex:1,padding:e.spacing(2)},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},fixedHeightPaper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column",height:240},tab:{background:"#f2f5f3",borderRadius:4,width:"100%","& .MuiTab-wrapper":{color:"#128c7e"},"& .MuiTabs-flexContainer":{justifyContent:"center"}},paper:{padding:e.spacing(2),display:"flex",alignItems:"center",marginBottom:12,width:"100%"},cardAvatar:{fontSize:"55px",color:Da.a[500],backgroundColor:"#ffffff",width:e.spacing(7),height:e.spacing(7)},cardTitle:{fontSize:"18px",color:La.a[700]},cardSubtitle:{color:Da.a[600],fontSize:"14px"},alignRight:{textAlign:"right"},fullWidth:{width:"100%"},selectContainer:{width:"100%",textAlign:"left"},buttonContainer:{textAlign:"right",padding:e.spacing(1)},fullWidth:{width:"100%"},fileInput:{background:"red"},fileInputLabel:{display:"inline-block",backgroundColor:"#7c7c7c",color:"#fff",padding:"8px 16px",borderRadius:"4px",cursor:"pointer","& input":{display:"none"}}}));var tc=()=>{const[e,a]=Object(n.useState)(null),[t,r]=Object(n.useState)(!1),[o,i]=Object(n.useState)(""),c=ac(),{user:s}=Object(n.useContext)(Xe),{profile:d}=s,m=Object(x.useHistory)(),[u,p]=Object(n.useState)("");Object(n.useEffect)(()=>{!async function(){s.super||(C.b.error("Sem permiss\xe3o para acessar!"),setTimeout(()=>{m.push("/")},500))}()},[]);return l.a.createElement(l.a.Fragment,null,l.a.createElement(Mt.a,{spacing:3,container:!0},l.a.createElement(Xl.a,{indicatorColor:"primary",textColor:"primary",scrollButtons:"on",variant:"scrollable",className:c.tab,style:{marginBottom:20,marginTop:20}},l.a.createElement(Jl.a,{label:"Logotipos / Iconos"})),l.a.createElement("form",{onSubmit:async a=>{if(a.preventDefault(),!e)return void C.b.warn("Escolha um arquivo!");if(!o)return void C.b.warn("Escolha um destino!");const t=new FormData;t.append("file",e);try{"Arquivo Anexado"===(await _e.post("/settings/media-upload?ref=".concat(o),t)).data.mensagem&&(r(!0),C.b.success("Arquivo enviado com sucesso!"),window.location.reload())}catch(n){console.log(n)}},className:c.fullWidth},l.a.createElement(Mt.a,{item:!0,xs:12,sm:12,md:12,style:{display:"flex"}},l.a.createElement(On.a,{className:c.selectContainer},l.a.createElement(Cn.a,{id:"selectOption-label"},"Elige una opci\xf3n:"),l.a.createElement(Ht.a,{labelId:"selectOption-label",value:o,onChange:e=>{i(e.target.value)},style:{marginTop:15,marginBottom:15}},l.a.createElement(L.a,{value:"signup"},"Pantalla de Registro"),l.a.createElement(L.a,{value:"login"},"Pantalla de Inicio de Sesi\xf3n"),l.a.createElement(L.a,{value:"interno"},"Logotipo Interno"),l.a.createElement(L.a,{value:"favicon"},"Favicon.Ico"),l.a.createElement(L.a,{value:"favicon-256x256"},"\xcdcono 256x256"),l.a.createElement(L.a,{value:"apple-touch-icon"},"Icono de Apple Touch")))),l.a.createElement(Mt.a,{item:!0,xs:12,sm:12,md:12,style:{display:"flex"}},l.a.createElement(On.a,{className:c.fullWidth},l.a.createElement("label",{className:c.fileInputLabel},l.a.createElement("input",{type:"file",onChange:e=>{const t=e.target.files[0];t&&["image/png","image/x-icon","image/svg+xml"].includes(t.type)?(a(t),p(t.name)):(a(null),p(null),C.b.error("Use somente arquivos em formato PNG, ICO ou SVG!"))},className:c.fileInput,style:{marginTop:15,marginBottom:15}}),u||"Elegir imagen en PNG"))),l.a.createElement(Mt.a,{item:!0,xs:12,sm:12,md:12,style:{display:"flex"}},l.a.createElement(Ha,{type:"submit",className:"".concat(c.fullWidth," ").concat(c.button),style:{marginTop:15,marginBottom:15},variant:"contained",color:"primary"},"ENVIAR ARCHIVO")))))};const nc="".concat("https://boostybackend-production.up.railway.app","/public/logotipos/login.png"),lc=Object(A.a)(e=>({paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}})),rc=Lt.b().shape({name:Lt.d().min(2,"Too Short!").max(50,"Too Long!").required("Required"),password:Lt.d().min(5,"Too Short!").max(50,"Too Long!"),email:Lt.d().email("Invalid email").required("Required")});var oc=()=>{const e=lc(),a=Object(x.useHistory)();let t=null;const r=Ho.a.parse(window.location.search);void 0!==r.companyId&&(t=r.companyId);const[o]=Object(n.useState)({name:"",email:"",phone:"",password:"",planId:""}),c=w()().add(3,"day").format(),[s,d]=Object(n.useState)([]),{list:m}=ba();return Object(n.useEffect)(()=>{!async function(){const e=await m();d(e)}()},[]),l.a.createElement(Zn.a,{component:"main",maxWidth:"xs"},l.a.createElement(i.a,null),l.a.createElement("div",{className:e.paper},l.a.createElement("div",null,l.a.createElement("img",{style:{margin:"0 auto",height:"80px",width:"100%"},src:nc,alt:"Whats"})),l.a.createElement(Ft.e,{initialValues:o,enableReinitialize:!0,validationSchema:rc,onSubmit:(e,t)=>{setTimeout(()=>{(async e=>{Object.assign(e,{recurrence:"MENSAL"}),Object.assign(e,{dueDate:c}),Object.assign(e,{status:"t"}),Object.assign(e,{campaignsEnabled:!0});try{await He.post("/companies/cadastro",e),C.b.success(De.a.t("signup.toasts.success")),a.push("/login")}catch(t){console.log(t),We(t)}})(e),t.setSubmitting(!1)},400)}},a=>{let{touched:t,errors:n,isSubmitting:r}=a;return l.a.createElement(Ft.d,{className:e.form},l.a.createElement(Mt.a,{container:!0,spacing:2},l.a.createElement(Mt.a,{item:!0,xs:12},l.a.createElement(Ft.b,{as:la.a,autoComplete:"name",name:"name",error:t.name&&Boolean(n.name),helperText:t.name&&n.name,variant:"outlined",fullWidth:!0,id:"name",label:"Nombre de la empresa"})),l.a.createElement(Mt.a,{item:!0,xs:12},l.a.createElement(Ft.b,{as:la.a,variant:"outlined",fullWidth:!0,id:"email",label:De.a.t("signup.form.email"),name:"email",error:t.email&&Boolean(n.email),helperText:t.email&&n.email,autoComplete:"email",required:!0})),l.a.createElement(Mt.a,{item:!0,xs:12},l.a.createElement(Ft.b,{as:Vo.a,mask:"(99) 99999-9999",variant:"outlined",fullWidth:!0,id:"phone",name:"phone",error:t.phone&&Boolean(n.phone),helperText:t.phone&&n.phone,autoComplete:"phone",required:!0},e=>{let{field:a}=e;return l.a.createElement(la.a,Object.assign({},a,{variant:"outlined",fullWidth:!0,label:"DDD988888888",inputProps:{maxLength:11}}))})),l.a.createElement(Mt.a,{item:!0,xs:12},l.a.createElement(Ft.b,{as:la.a,variant:"outlined",fullWidth:!0,name:"password",error:t.password&&Boolean(n.password),helperText:t.password&&n.password,label:De.a.t("signup.form.password"),type:"password",id:"password",autoComplete:"current-password",required:!0})),l.a.createElement(Mt.a,{item:!0,xs:12},l.a.createElement(Cn.a,{htmlFor:"plan-selection"},"Plano"),l.a.createElement(Ft.b,{as:Ht.a,variant:"outlined",fullWidth:!0,id:"plan-selection",label:"Plano",name:"planId",required:!0},s.map((e,a)=>l.a.createElement(L.a,{key:a,value:e.id},e.name," - Atendentes: ",e.users," - WhatsApp: ",e.connections," - Filas: ",e.queues," - US$ ",e.value))))),l.a.createElement(ra.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit},De.a.t("signup.buttons.submit")))})))};const ic=Object(A.a)(e=>({root:{flex:1,backgroundColor:e.palette.background.paper},mainPaper:{...e.scrollbarStyles,overflowY:"scroll",flex:1},tab:{backgroundColor:e.palette.options,borderRadius:4},paper:{...e.scrollbarStyles,overflowY:"scroll",padding:e.spacing(2),display:"flex",alignItems:"center",width:"100%"},container:{width:"100%",maxHeight:"100%"},control:{padding:e.spacing(1)},textfield:{width:"100%"}}));var cc=()=>{const e=ic(),[a,t]=Object(n.useState)("options"),[r,o]=Object(n.useState)([]),[i,c]=Object(n.useState)({}),[s,d]=Object(n.useState)(!1),[m,u]=Object(n.useState)({}),[p,g]=Object(n.useState)({}),[E,b]=Object(n.useState)(!1),{getCurrentUserInfo:f}=Qe(),{find:h,updateSchedules:y}=Ni(),{getAll:v}=Xi();Object(n.useEffect)(()=>{!async function(){d(!0);try{const e=localStorage.getItem("companyId"),a=await h(e),t=await v();if(c(a),o(a.schedules),g(t),Array.isArray(t)){const e=t.find(e=>"scheduleType"===e.key);e&&b("company"===e.value)}const n=await f();u(n)}catch(e){C.b.error(e)}d(!1)}()},[]);const x=()=>m.super;return l.a.createElement(mi,{className:e.root},l.a.createElement(pi,null,l.a.createElement(bi,null,De.a.t("settings.title"))),l.a.createElement(ht.a,{className:e.mainPaper,elevation:1},l.a.createElement(Xl.a,{value:a,indicatorColor:"primary",textColor:"primary",scrollButtons:"on",variant:"scrollable",onChange:(e,a)=>{!async function(){d(!0);try{const e=localStorage.getItem("companyId"),a=await h(e),t=await v();if(c(a),o(a.schedules),g(t),Array.isArray(t)){const e=t.find(e=>"scheduleType"===e.key);e&&b("company"===e.value)}const n=await f();u(n)}catch(e){C.b.error(e)}d(!1)}(),t(a)},className:e.tab},l.a.createElement(Jl.a,{label:"Op\xe7\xf5es",value:"options"}),E&&l.a.createElement(Jl.a,{label:"Opciones",value:"schedules"}),x()?l.a.createElement(Jl.a,{label:"Logo",value:"uploader"}):null,x()?l.a.createElement(Jl.a,{label:"Empresas",value:"companies"}):null,x()?l.a.createElement(Jl.a,{label:"Registrar Empresa",value:"newcompanie"}):null,x()?l.a.createElement(Jl.a,{label:"Planes",value:"plans"}):null,x()?l.a.createElement(Jl.a,{label:"Ayuda",value:"helps"}):null),l.a.createElement(ht.a,{className:e.paper,elevation:0},l.a.createElement(cr,{className:e.container,value:a,name:"schedules"},l.a.createElement(Ii,{loading:s,onSubmit:async e=>{d(!0);try{o(e),await y({id:i.id,schedules:e}),C.b.success("Hor\xe1rios atualizados com sucesso.")}catch(a){C.b.error(a)}d(!1)},initialValues:r})),l.a.createElement(Zi,{user:m,yes:()=>l.a.createElement(cr,{className:e.container,value:a,name:"companies"},l.a.createElement(Bi,null))}),l.a.createElement(Zi,{user:m,yes:()=>l.a.createElement(cr,{className:e.container,value:a,name:"newcompanie"},l.a.createElement(oc,null))}),l.a.createElement(Zi,{user:m,yes:()=>l.a.createElement(cr,{className:e.container,value:a,name:"plans"},l.a.createElement(_i,null))}),l.a.createElement(Zi,{user:m,yes:()=>l.a.createElement(cr,{className:e.container,value:a,name:"helps"},l.a.createElement(Qi,null))}),l.a.createElement(Zi,{user:m,yes:()=>l.a.createElement(cr,{className:e.container,value:a,name:"uploader"},l.a.createElement(tc,null))}),l.a.createElement(cr,{className:e.container,value:a,name:"options"},l.a.createElement(ec,{settings:p,scheduleTypeChanged:e=>b("company"===e)})))))},sc=t(1633),dc=t(1579),mc=t(1619);function uc(e){const{errorText:a,...t}=e,[n,r]=Object(Ft.f)(e);return l.a.createElement(la.a,Object.assign({type:"text",error:r.touched&&r.error&&!0,helperText:function(){const[e,a]=Object(qe.at)(r,"touched","error");if(e&&a)return a}()},n,t))}function pc(e){const{label:a,data:t,...n}=e,[r,o]=Object(Ft.f)(e),{value:i}=r,[c,s]=Object(qe.at)(o,"touched","error"),d=c&&s&&!0;return l.a.createElement(On.a,Object.assign({},n,{error:d}),l.a.createElement(Cn.a,null,a),l.a.createElement(Ht.a,Object.assign({},r,{value:i||""}),t.map((e,a)=>l.a.createElement(L.a,{key:a,value:e.value},e.label))),function(){if(d)return l.a.createElement($n.a,null,s)}())}pc.defaultProps={data:[]};var gc=pc;t(134),t(1607),t(952);const Ec=[{value:"BR",label:"Brasil"},{value:"usa",label:"United States"}];function bc(e){const{user:a}=Object(n.useContext)(Xe),[t,r]=Object(n.useState)(a.company.billingName),[o,i]=Object(n.useState)(a.company.addressZipCode),[c,s]=Object(n.useState)(a.company.addressStreet),[d,m]=Object(n.useState)(a.company.addressState),[u,p]=Object(n.useState)(a.company.addressCity),[g,E]=Object(n.useState)(a.company.addressDistrict),{formField:{firstName:b,address1:f,city:h,state:y,zipcode:v,country:x},setFieldValue:C}=e;return Object(n.useEffect)(()=>{C("firstName",t),C("zipcode",o),C("address2",c),C("state",d),C("city",u),C("country",g)},[]),l.a.createElement(l.a.Fragment,null,l.a.createElement(R.a,{variant:"h6",gutterBottom:!0},"Vamos precisar de algumas informa\xe7\xf5es"),l.a.createElement(Mt.a,{container:!0,spacing:3},l.a.createElement(Mt.a,{item:!0,xs:6,sm:6},l.a.createElement(uc,{name:b.name,label:b.label,fullWidth:!0,value:t,onChange:e=>{r(e.target.value),C("firstName",e.target.value)}})),l.a.createElement(Mt.a,{item:!0,xs:6,sm:6},l.a.createElement(gc,{name:x.name,label:x.label,data:Ec,fullWidth:!0,value:g,onChange:e=>{E(e.target.value),C("country",e.target.value)}})),l.a.createElement(Mt.a,{item:!0,xs:4},l.a.createElement(uc,{name:v.name,label:v.label,fullWidth:!0,value:o,onChange:e=>{i(e.target.value),C("zipcode",e.target.value)}})),l.a.createElement(Mt.a,{item:!0,xs:8},l.a.createElement(uc,{name:f.name,label:f.label,fullWidth:!0,value:c,onChange:e=>{s(e.target.value),C("address2",e.target.value)}})),l.a.createElement(Mt.a,{item:!0,xs:4},l.a.createElement(uc,{name:y.name,label:y.label,fullWidth:!0,value:d,onChange:e=>{m(e.target.value),C("state",e.target.value)}})),l.a.createElement(Mt.a,{item:!0,xs:8},l.a.createElement(uc,{name:h.name,label:h.label,fullWidth:!0,value:u,onChange:e=>{p(e.target.value),C("city",e.target.value)}}))))}var fc=t(1578),hc=t(1577),yc=t(902),vc=t.n(yc);const xc=Object(A.a)(e=>({"@global":{ul:{margin:0,padding:0,listStyle:"none"}},margin:{margin:e.spacing(1)},cardHeader:{backgroundColor:"light"===e.palette.type?e.palette.grey[200]:e.palette.grey[700]},cardPricing:{display:"flex",justifyContent:"center",alignItems:"baseline",marginBottom:e.spacing(2)},footer:{borderTop:"1px solid ".concat(e.palette.divider),marginTop:e.spacing(8),paddingTop:e.spacing(3),paddingBottom:e.spacing(3),[e.breakpoints.up("sm")]:{paddingTop:e.spacing(6),paddingBottom:e.spacing(6)}},customCard:{display:"flex",marginTop:"16px",alignItems:"center",flexDirection:"column"},custom:{display:"flex",alignItems:"center",justifyContent:"space-between"}}));function Cc(e){const{setFieldValue:a,setActiveStep:t,activeStep:r}=e,{list:o,finder:i}=ba(),{find:c}=Ni(),s=xc(),[d,m]=l.a.useState(3),[u,p]=Object(n.useState)(0),[g,E]=l.a.useState(3),[b,f]=l.a.useState([]),[h,y]=l.a.useState(49),[v,x]=l.a.useState(!1),C=localStorage.getItem("companyId");Object(n.useEffect)(()=>{!async function(){await O()}()},[]);const O=async()=>{x(!0);try{const e=await c(C);p(e.planId),await S(e.planId)}catch(e){console.log(e)}x(!1)},S=async e=>{x(!0);try{const a=await i(e),t=[];t.push({title:a.name,planId:a.id,price:a.value,description:["".concat(a.users," Usu\xe1rios"),"".concat(a.connections," Conex\xe3o"),"".concat(a.queues," Filas")],users:a.users,connections:a.connections,queues:a.queues,buttonText:"SELECIONAR",buttonVariant:"outlined"}),f(t)}catch(a){console.log(a)}x(!1)},w=b;return l.a.createElement(l.a.Fragment,null,l.a.createElement(Mt.a,{container:!0,spacing:3},w.map(e=>l.a.createElement(Mt.a,{item:!0,key:e.title,xs:12,sm:(e.title,12),md:12},l.a.createElement(Jt.a,null,l.a.createElement(Zt.a,{title:e.title,subheader:e.subheader,titleTypographyProps:{align:"center"},subheaderTypographyProps:{align:"center"},action:"Pro"===e.title?l.a.createElement(vc.a,null):null,className:s.cardHeader}),l.a.createElement(hc.a,null,l.a.createElement("div",{className:s.cardPricing},l.a.createElement(R.a,{component:"h2",variant:"h3",color:"textPrimary"},l.a.createElement(l.a.Fragment,null,"R$",e.price.toLocaleString("pt-br",{minimumFractionDigits:2}))),l.a.createElement(R.a,{variant:"h6",color:"textSecondary"},"/m\xeas")),l.a.createElement("ul",null,e.description.map(e=>l.a.createElement(R.a,{component:"li",variant:"subtitle1",align:"center",key:e},e)))),l.a.createElement(fc.a,null,l.a.createElement(ra.a,{fullWidth:!0,variant:e.buttonVariant,color:"primary",onClick:()=>{e.custom?a("plan",JSON.stringify({users:d,connections:g,price:h})):a("plan",JSON.stringify(e)),t(r+1)}},e.buttonText)))))))}var Oc=Object(A.a)(e=>({listItem:{padding:e.spacing(1,0)},total:{fontWeight:"700"},title:{marginTop:e.spacing(2)}}));var Sc=function(e){const{formValues:a}=e,t=Oc(),{plan:n}=a,r=JSON.parse(n),{users:o,connections:i,price:c}=r;return l.a.createElement(Mt.a,{item:!0,xs:12,sm:12},l.a.createElement(R.a,{variant:"h6",gutterBottom:!0,className:t.title},"Detalhes do plano"),l.a.createElement(R.a,{gutterBottom:!0},"Usu\xe1rios: ",o),l.a.createElement(R.a,{gutterBottom:!0},"Whatsapps: ",i),l.a.createElement(R.a,{gutterBottom:!0},"Cobran\xe7a: Mensal"),l.a.createElement(R.a,{gutterBottom:!0},"Total: R$",c.toLocaleString("pt-br",{minimumFractionDigits:2})))};var wc,Ac,jc,kc,Tc=function(){const{values:e}=Object(Ft.g)();return l.a.createElement(l.a.Fragment,null,l.a.createElement(R.a,{variant:"h6",gutterBottom:!0},"Resumo da assinatura"),l.a.createElement(Mt.a,{container:!0,spacing:2},l.a.createElement(Sc,{formValues:e})))},Ic=t(903),Nc=t.n(Ic),Mc=t(145),Pc=t(238);Pc.default.div(wc||(wc=Object(Mc.a)(["\n  footer {\n    margin-top: 30px;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    width: 100%;\n\n    @media (max-width: 768px) {\n      flex-direction: column;\n      .checkout-buttons {\n        display: flex;\n        flex-direction: column-reverse;\n        width: 100%;\n\n        button {\n          width: 100%;\n          margin-top: 16px;\n          margin-left: 0;\n        }\n      }\n    }\n\n    button {\n      margin-left: 16px;\n    }\n  }\n"])));const Rc=Pc.default.div(Ac||(Ac=Object(Mc.a)(["\n  display: flex;\n  align-items: baseline;\n\n  span {\n    color: #333;\n    font-weight: bold;\n  }\n\n  strong {\n    color: #333;\n    font-size: 28px;\n    margin-left: 5px;\n  }\n\n  @media (max-width: 768px) {\n    min-width: 100%;\n    justify-content: space-between;\n  }\n"]))),Dc=Pc.default.div(jc||(jc=Object(Mc.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n\n  > h2 {\n    text-align: center;\n  }\n\n  > svg {\n    margin-top: 16px;\n  }\n\n  > span {\n    margin-top: 24px;\n    text-align: center;\n  }\n\n  > p,\n  strong {\n    margin-top: 8px;\n    font-size: 9px;\n    color: #999;\n  }\n\n  .copy-button {\n    font-size: 14px;\n    cursor: pointer;\n    text-align: center;\n    user-select: none;\n    min-height: 56px;\n    display: inline-flex;\n    -webkit-box-pack: center;\n    justify-content: center;\n    -webkit-box-align: center;\n    align-items: center;\n    background-color: #f9f9f9;\n    color: #000;\n    -webkit-appearance: none !important;\n    outline: none;\n    margin-top: 16px;\n    width: 256px;\n    font-weight: 600;\n    text-transform: uppercase;\n    border: none;\n\n    > span {\n      margin-right: 8px;\n    }\n  }\n"])));Pc.default.div(kc||(kc=Object(Mc.a)(["\n  width: 100%;\n  margin: 0 auto 0;\n  max-width: 1110px;\n  display: flex;\n  flex-direction: column;\n  -webkit-box-align: center;\n  align-items: center;\n  padding: 50px 95px;\n  background: #fff;\n  @media (max-width: 768px) {\n    padding: 16px 24px;\n"])));var Lc=t(907),Fc=t(663);var qc=function(e){const{pix:a}=e,[t]=Object(n.useState)(a.qrcode.qrcode),[r,o]=Object(n.useState)(!1),i=Object(x.useHistory)(),{dateToClient:c}=_n(),s=Object(n.useContext)(y);return Object(n.useEffect)(()=>{const e=localStorage.getItem("companyId");s.getSocket(e).on("company-".concat(e,"-payment"),e=>{"CONCLUIDA"===e.action&&(C.b.success("Sua licen\xe7a foi renovada at\xe9 ".concat(c(e.company.dueDate),"!")),setTimeout(()=>{i.push("/")},4e3))})},[i,s]),l.a.createElement(l.a.Fragment,null,l.a.createElement(Rc,null,l.a.createElement("span",null,"TOTAL"),l.a.createElement("strong",null,"R$",a.valor.original.toLocaleString("pt-br",{minimumFractionDigits:2}))),l.a.createElement(Dc,null,l.a.createElement(Nc.a,{value:t}),l.a.createElement(Lc.CopyToClipboard,{text:t,onCopy:()=>{setTimeout(()=>{o(!1)},1e3),o(!0)}},l.a.createElement("button",{className:"copy-button",type:"button"},r?l.a.createElement(l.a.Fragment,null,l.a.createElement("span",null,"Copiado"),l.a.createElement(Fc.a,{size:18})):l.a.createElement(l.a.Fragment,null,l.a.createElement("span",null,"Copiar c\xf3digo QR"),l.a.createElement(Fc.b,{size:18})))),l.a.createElement("span",null,"Para finalizar, basta realizar o pagamento escaneando ou colando o c\xf3digo Pix acima :)")))},Wc={formId:"checkoutForm",formField:{firstName:{name:"firstName",label:"Nome completo*",requiredErrorMsg:"O nome completo \xe9 obrigat\xf3rio"},lastName:{name:"lastName",label:"Last name*",requiredErrorMsg:"Last name is required"},address1:{name:"address2",label:"Endere\xe7o*",requiredErrorMsg:"O Endere\xe7o \xe9 obrigat\xf3rio"},city:{name:"city",label:"Cidade*",requiredErrorMsg:"Cidade \xe9 obrigat\xf3ria"},state:{name:"state",label:"Estado*",requiredErrorMsg:"Cidade \xe9 obrigat\xf3ria"},zipcode:{name:"zipcode",label:"CEP*",requiredErrorMsg:"CEP \xe9 obrigat\xf3rio",invalidErrorMsg:"Formato de CEP inv\xe1lido"},country:{name:"country",label:"Pa\xeds*",requiredErrorMsg:"Pa\xeds \xe9 obrigat\xf3rio"},useAddressForPaymentDetails:{name:"useAddressForPaymentDetails",label:"Use this address for payment details"},invoiceId:{name:"invoiceId",label:"Use this invoiceId"},nameOnCard:{name:"nameOnCard",label:"Name on card*",requiredErrorMsg:"Name on card is required"},cardNumber:{name:"cardNumber",label:"Card number*",requiredErrorMsg:"Card number is required",invalidErrorMsg:"Card number is not valid (e.g. 4111111111111)"},expiryDate:{name:"expiryDate",label:"Expiry date*",requiredErrorMsg:"Expiry date is required",invalidErrorMsg:"Expiry date is not valid"},cvv:{name:"cvv",label:"CVV*",requiredErrorMsg:"CVV is required",invalidErrorMsg:"CVV is invalid (e.g. 357)"}}};const{formField:{firstName:Bc,address1:zc,city:Uc,zipcode:Hc,country:_c}}=Wc;var Vc=[Lt.b().shape({[Bc.name]:Lt.d().required("".concat(Bc.requiredErrorMsg)),[zc.name]:Lt.d().required("".concat(zc.requiredErrorMsg)),[Uc.name]:Lt.d().nullable().required("".concat(Uc.requiredErrorMsg)),[Hc.name]:Lt.d().required("".concat(Hc.requiredErrorMsg)),[_c.name]:Lt.d().nullable().required("".concat(_c.requiredErrorMsg))})];const{formField:{firstName:Gc,lastName:Kc,address1:Yc,city:Qc,state:Xc,zipcode:Jc,country:Zc,useAddressForPaymentDetails:$c,nameOnCard:es,cardNumber:as,invoiceId:ts,cvv:ns}}=Wc;var ls={[Gc.name]:"",[Kc.name]:"",[Yc.name]:"",[Qc.name]:"",[Xc.name]:"",[Jc.name]:"",[Zc.name]:"",[$c.name]:!1,[es.name]:"",[as.name]:"",[ts.name]:"",[ns.name]:""},rs=Object(A.a)(e=>({stepper:{padding:e.spacing(3,0,5)},buttons:{display:"flex",justifyContent:"flex-end"},button:{marginTop:e.spacing(3),marginLeft:e.spacing(1)},wrapper:{margin:e.spacing(1),position:"relative"},buttonProgress:{position:"absolute",top:"50%",left:"50%"}}));var os=function(e){const a=["Dados","Personalizar","Revisar"],{formId:t,formField:r}=Wc,o=rs(),[i,c]=Object(n.useState)(1),[s,d]=Object(n.useState)(null),[m,u]=Object(n.useState)(e.Invoice.id),p=Vc[i],g=i===a.length-1,{user:E}=Object(n.useContext)(Xe);function b(){c(i-1)}return l.a.createElement(l.a.Fragment,null,l.a.createElement(R.a,{component:"h1",variant:"h4",align:"center"},"Falta pouco!"),l.a.createElement(sc.a,{activeStep:i,className:o.stepper},a.map(e=>l.a.createElement(dc.a,{key:e},l.a.createElement(mc.a,null,e)))),l.a.createElement(l.a.Fragment,null,i===a.length?l.a.createElement(qc,{pix:s}):l.a.createElement(Ft.e,{initialValues:{...E,...ls},validationSchema:p,onSubmit:function(e,a){g?async function(e,a){try{const t=JSON.parse(e.plan),n={firstName:e.firstName,lastName:e.lastName,address2:e.address2,city:e.city,state:e.state,zipcode:e.zipcode,country:e.country,useAddressForPaymentDetails:e.useAddressForPaymentDetails,nameOnCard:e.nameOnCard,cardNumber:e.cardNumber,cvv:e.cvv,plan:e.plan,price:t.price,users:t.users,connections:t.connections,invoiceId:m},{data:l}=await _e.post("/subscription",n);d(l),a.setSubmitting(!1),c(i+1),C.b.success("Assinatura realizada com sucesso!, aguardando a realiza\xe7\xe3o do pagamento")}catch(t){We(t)}}(e,a):(c(i+1),a.setTouched({}),a.setSubmitting(!1))}},e=>{let{isSubmitting:a,setFieldValue:n,values:s}=e;return l.a.createElement(Ft.d,{id:t},function(e,a,t,n){switch(e){case 0:return l.a.createElement(bc,{formField:r,values:n,setFieldValue:a});case 1:return l.a.createElement(Cc,{formField:r,setFieldValue:a,setActiveStep:t,activeStep:e,invoiceId:m,values:n});case 2:return l.a.createElement(Tc,null);default:return l.a.createElement("div",null,"Not Found")}}(i,n,c,s),l.a.createElement("div",{className:o.buttons},1!==i&&l.a.createElement(ra.a,{onClick:b,className:o.button},"VOLTAR"),l.a.createElement("div",{className:o.wrapper},1!==i&&l.a.createElement(ra.a,{disabled:a,type:"submit",variant:"contained",color:"primary",className:o.button},g?"PAGAR":"PR\xd3XIMO"),a&&l.a.createElement(za.a,{size:24,className:o.buttonProgress}))))})))};const is=Object(A.a)(e=>({root:{display:"flex",flexWrap:"wrap"},textField:{marginRight:e.spacing(1),flex:1},extraAttr:{display:"flex",justifyContent:"center",alignItems:"center"},btnWrapper:{position:"relative"},buttonProgress:{color:Ra.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}}));var cs=e=>{let{open:a,onClose:t,Invoice:r,contactId:o,initialValues:i,onSave:c}=e;const s=is(),d=Object(n.useRef)(!0);Object(n.useEffect)(()=>()=>{d.current=!1},[]);return l.a.createElement("div",{className:s.root},l.a.createElement(tt.a,{open:a,onClose:()=>{t()},maxWidth:"md",scroll:"paper"},l.a.createElement(pt.a,{dividers:!0},l.a.createElement(os,{Invoice:r}))))};const ss=(e,a)=>{if("LOAD_INVOICES"===a.type){const t=a.payload,n=[];return t.forEach(a=>{const t=e.findIndex(e=>e.id===a.id);-1!==t?e[t]=a:n.push(a)}),[...e,...n]}if("UPDATE_USERS"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n?(e[n]=t,[...e]):[t,...e]}if("DELETE_USER"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t);return-1!==n&&e.splice(n,1),[...e]}if("RESET"===a.type)return[]},ds=Object(A.a)(e=>({mainPaper:{flex:1,padding:e.spacing(1),overflowY:"scroll",...e.scrollbarStyles}}));var ms=()=>{const e=ds(),[a,t]=Object(n.useState)(!1),[r,o]=Object(n.useState)(1),[i,c]=Object(n.useState)(!1),[s,d]=Object(n.useState)(""),[m,u]=Object(n.useReducer)(ss,[]),[p,g]=l.a.useState([]),[E,b]=Object(n.useState)(null),[f,h]=Object(n.useState)(!1);Object(n.useEffect)(()=>{u({type:"RESET"}),o(1)},[s]),Object(n.useEffect)(()=>{t(!0);const e=setTimeout(()=>{(async()=>{try{const{data:e}=await _e.get("/invoices/all",{params:{searchParam:s,pageNumber:r}});u({type:"LOAD_INVOICES",payload:e}),c(e.hasMore),t(!1)}catch(e){We(e)}})()},500);return()=>clearTimeout(e)},[s,r]);const y=e=>{const a=w()(w()()).format("DD/MM/yyyy"),t=w()(e.dueDate).format("DD/MM/yyyy");var n=w()(t,"DD/MM/yyyy").diff(w()(a,"DD/MM/yyyy"));if(w.a.duration(n).asDays()<0&&"paid"!==e.status)return{backgroundColor:"#ffbcbc9c"}},v=e=>{const a=w()(w()()).format("DD/MM/yyyy"),t=w()(e.dueDate).format("DD/MM/yyyy");var n=w()(t,"DD/MM/yyyy").diff(w()(a,"DD/MM/yyyy")),l=w.a.duration(n).asDays();return"paid"===e.status?"Pago":l<0?"Vencido":"Em Aberto"};return l.a.createElement(mi,null,l.a.createElement(cs,{open:f,onClose:()=>{b(null),h(!1)},"aria-labelledby":"form-dialog-title",Invoice:p,contactId:E}),l.a.createElement(pi,null,l.a.createElement(bi,null,"Faturas")),l.a.createElement(ht.a,{className:e.mainPaper,variant:"outlined",onScroll:e=>{if(!i||a)return;const{scrollTop:t,scrollHeight:n,clientHeight:l}=e.currentTarget;n-(t+100)<l&&o(e=>e+1)}},l.a.createElement(bl.a,{size:"small"},l.a.createElement(vl.a,null,l.a.createElement(xl.a,null,l.a.createElement(hl.a,{align:"center"},"Id"),l.a.createElement(hl.a,{align:"center"},"Detalhes"),l.a.createElement(hl.a,{align:"center"},"Valor"),l.a.createElement(hl.a,{align:"center"},"Data Venc."),l.a.createElement(hl.a,{align:"center"},"Status"),l.a.createElement(hl.a,{align:"center"},"A\xe7\xe3o"))),l.a.createElement(fl.a,null,l.a.createElement(l.a.Fragment,null,m.map(e=>l.a.createElement(xl.a,{style:y(e),key:e.id},l.a.createElement(hl.a,{align:"center"},e.id),l.a.createElement(hl.a,{align:"center"},e.detail),l.a.createElement(hl.a,{style:{fontWeight:"bold"},align:"center"},e.value.toLocaleString("pt-br",{style:"currency",currency:"BRL"})),l.a.createElement(hl.a,{align:"center"},w()(e.dueDate).format("DD/MM/YYYY")),l.a.createElement(hl.a,{style:{fontWeight:"bold"},align:"center"},v(e)),l.a.createElement(hl.a,{align:"center"},"Pago"!==v(e)?l.a.createElement(ra.a,{size:"small",variant:"outlined",color:"secondary",onClick:()=>(e=>{g(e),b(null),h(!0)})(e)},"PAGAR"):l.a.createElement(ra.a,{size:"small",variant:"outlined"},"PAGO")))),a&&l.a.createElement(hi,{columns:4}))))))},us=t(1389);const ps=(e,a)=>{if("LOAD_USERS"===a.type){const t=a.payload,n=[];return t.forEach(a=>{const t=e.findIndex(e=>e.id===a.id);-1!==t?e[t]=a:n.push(a)}),[...e,...n]}if("UPDATE_USERS"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n?(e[n]=t,[...e]):[t,...e]}if("DELETE_USER"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t);return-1!==n&&e.splice(n,1),[...e]}if("RESET"===a.type)return[]},gs=Object(A.a)(e=>({mainPaper:{flex:1,padding:e.spacing(1),overflowY:"scroll",...e.scrollbarStyles}}));var Es=()=>{const e=gs(),[a,t]=Object(n.useState)(!1),[r,o]=Object(n.useState)(1),[i,c]=Object(n.useState)(!1),[s,d]=Object(n.useState)(null),[m,u]=Object(n.useState)(null),[p,g]=Object(n.useState)(!1),[E,b]=Object(n.useState)(!1),[f,h]=Object(n.useState)(""),[v,x]=Object(n.useReducer)(ps,[]),O=Object(n.useContext)(y);Object(n.useEffect)(()=>{x({type:"RESET"}),o(1)},[f]),Object(n.useEffect)(()=>{t(!0);const e=setTimeout(()=>{(async()=>{try{const{data:e}=await _e.get("/users/",{params:{searchParam:f,pageNumber:r}});x({type:"LOAD_USERS",payload:e.users}),c(e.hasMore),t(!1)}catch(e){We(e)}})()},500);return()=>clearTimeout(e)},[f,r]),Object(n.useEffect)(()=>{const e=localStorage.getItem("companyId"),a=O.getSocket(e);return a.on("company-".concat(e,"-user"),e=>{"update"!==e.action&&"create"!==e.action||x({type:"UPDATE_USERS",payload:e.user}),"delete"===e.action&&x({type:"DELETE_USER",payload:+e.userId})}),()=>{a.disconnect()}},[O]);return l.a.createElement(mi,null,l.a.createElement(Et,{title:m&&"".concat(De.a.t("users.confirmationModal.deleteTitle")," ").concat(m.name,"?"),open:E,onClose:b,onConfirm:()=>(async e=>{try{await _e.delete("/users/".concat(e)),C.b.success(De.a.t("users.toasts.deleted"))}catch(a){We(a)}u(null),h(""),o(1)})(m.id)},De.a.t("users.confirmationModal.deleteMessage")),l.a.createElement(Tn,{open:p,onClose:()=>{d(null),g(!1)},"aria-labelledby":"form-dialog-title",userId:s&&s.id}),l.a.createElement(pi,null,l.a.createElement(bi,null,De.a.t("users.title")),l.a.createElement(Ei,null,l.a.createElement(la.a,{placeholder:De.a.t("contacts.searchPlaceholder"),type:"search",value:f,onChange:e=>{h(e.target.value.toLowerCase())},InputProps:{startAdornment:l.a.createElement(us.a,{position:"start"},l.a.createElement(Ql.a,{style:{color:"gray"}}))}}),l.a.createElement(ra.a,{variant:"contained",color:"primary",onClick:()=>{d(null),g(!0)}},De.a.t("users.buttons.add")))),l.a.createElement(ht.a,{className:e.mainPaper,variant:"outlined",onScroll:e=>{if(!i||a)return;const{scrollTop:t,scrollHeight:n,clientHeight:l}=e.currentTarget;n-(t+100)<l&&o(e=>e+1)}},l.a.createElement(bl.a,{size:"small"},l.a.createElement(vl.a,null,l.a.createElement(xl.a,null,l.a.createElement(hl.a,{align:"center"},De.a.t("users.table.id")),l.a.createElement(hl.a,{align:"center"},De.a.t("users.table.name")),l.a.createElement(hl.a,{align:"center"},De.a.t("users.table.email")),l.a.createElement(hl.a,{align:"center"},De.a.t("users.table.profile")),l.a.createElement(hl.a,{align:"center"},De.a.t("users.table.actions")))),l.a.createElement(fl.a,null,l.a.createElement(l.a.Fragment,null,v.map(e=>l.a.createElement(xl.a,{key:e.id},l.a.createElement(hl.a,{align:"center"},e.id),l.a.createElement(hl.a,{align:"center"},e.name),l.a.createElement(hl.a,{align:"center"},e.email),l.a.createElement(hl.a,{align:"center"},e.profile),l.a.createElement(hl.a,{align:"center"},l.a.createElement(T.a,{size:"small",onClick:()=>(e=>{d(e),g(!0)})(e)},l.a.createElement(da.a,null)),l.a.createElement(T.a,{size:"small",onClick:a=>{b(!0),u(e)}},l.a.createElement(Wt.a,null))))),a&&l.a.createElement(hi,{columns:4}))))))},bs=t(908);const fs=(e,a)=>{if("LOAD_CONTACTS"===a.type){const t=a.payload,n=[];return t.forEach(a=>{const t=e.findIndex(e=>e.id===a.id);-1!==t?e[t]=a:n.push(a)}),[...e,...n]}if("UPDATE_CONTACTS"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n?(e[n]=t,[...e]):[t,...e]}if("DELETE_CONTACT"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t);return-1!==n&&e.splice(n,1),[...e]}if("RESET"===a.type)return[]},hs=Object(A.a)(e=>({mainPaper:{flex:1,padding:e.spacing(1),overflowY:"scroll",...e.scrollbarStyles}}));var ys=()=>{const e=hs(),a=Object(x.useHistory)(),{user:t}=Object(n.useContext)(Xe),[r,o]=Object(n.useState)(!1),[i,c]=Object(n.useState)(1),[s,d]=Object(n.useState)(""),[m,u]=Object(n.useReducer)(fs,[]),[p,g]=Object(n.useState)(null),[E,b]=Object(n.useState)(!1),[f,h]=Object(n.useState)(!1),[v,O]=Object(n.useState)({}),[S,w]=Object(n.useState)(null),[A,j]=Object(n.useState)(!1),[k,I]=Object(n.useState)(!1),N=Object(n.useRef)(null),M=Object(n.useContext)(y);Object(n.useEffect)(()=>{u({type:"RESET"}),c(1)},[s]),Object(n.useEffect)(()=>{o(!0);const e=setTimeout(()=>{(async()=>{try{const{data:e}=await _e.get("/contacts/",{params:{searchParam:s,pageNumber:i}});u({type:"LOAD_CONTACTS",payload:e.contacts}),I(e.hasMore),o(!1)}catch(e){We(e)}})()},500);return()=>clearTimeout(e)},[s,i]),Object(n.useEffect)(()=>{const e=localStorage.getItem("companyId"),a=M.getSocket(e);return a.on("company-".concat(e,"-contact"),e=>{"update"!==e.action&&"create"!==e.action||u({type:"UPDATE_CONTACTS",payload:e.contact}),"delete"===e.action&&u({type:"DELETE_CONTACT",payload:+e.contactId})}),()=>{a.disconnect()}},[M]);return l.a.createElement(mi,{className:e.mainContainer},l.a.createElement(Gt,{modalOpen:f,initialContact:v,onClose:e=>{(e=>{h(!1),void 0!==e&&void 0!==e.uuid&&a.push("/tickets/".concat(e.uuid))})(e)}}),l.a.createElement(Ut,{open:E,onClose:()=>{g(null),b(!1)},"aria-labelledby":"form-dialog-title",contactId:p}),l.a.createElement(Et,{title:S?"".concat(De.a.t("contacts.confirmationModal.deleteTitle")," ").concat(S.name,"?"):"".concat(De.a.t("contacts.confirmationModal.importTitlte")),open:A,onClose:j,onConfirm:e=>S?(async e=>{try{await _e.delete("/contacts/".concat(e)),C.b.success(De.a.t("contacts.toasts.deleted"))}catch(a){We(a)}w(null),d(""),c(1)})(S.id):(async()=>{try{if(N.current.files[0]){const e=new FormData;e.append("file",N.current.files[0]),await _e.request({url:"/contacts/upload",method:"POST",data:e})}else await _e.post("/contacts/import");a.go(0)}catch(e){We(e)}})()},"".concat(S?De.a.t("contacts.confirmationModal.deleteMessage"):De.a.t("contacts.confirmationModal.importMessage"))),l.a.createElement(pi,null,l.a.createElement(bi,null,De.a.t("contacts.title")),l.a.createElement(Ei,null,l.a.createElement(la.a,{placeholder:De.a.t("contacts.searchPlaceholder"),type:"search",value:s,onChange:e=>{d(e.target.value.toLowerCase())},InputProps:{startAdornment:l.a.createElement(us.a,{position:"start"},l.a.createElement(Ql.a,{style:{color:"gray"}}))}}),l.a.createElement(ra.a,{variant:"contained",color:"primary",onClick:e=>j(!0)},De.a.t("contacts.buttons.import")),l.a.createElement(ra.a,{variant:"contained",color:"primary",onClick:()=>{N.current.value=null,N.current.click()}},De.a.t("contacts.buttons.importSheet")),l.a.createElement(ra.a,{variant:"contained",color:"primary",onClick:()=>{g(null),b(!0)}},De.a.t("contacts.buttons.add")),l.a.createElement(bs.CSVLink,{style:{textDecoration:"none"},separator:";",filename:"whaticket.csv",data:m.map(e=>({name:e.name,number:e.number,email:e.email}))},l.a.createElement(ra.a,{variant:"contained",color:"primary"},"EXPORTAR CONTACTOS")))),l.a.createElement(ht.a,{className:e.mainPaper,variant:"outlined",onScroll:e=>{if(!k||r)return;const{scrollTop:a,scrollHeight:t,clientHeight:n}=e.currentTarget;t-(a+100)<n&&c(e=>e+1)}},l.a.createElement(l.a.Fragment,null,l.a.createElement("input",{style:{display:"none"},id:"upload",name:"file",type:"file",accept:".xls,.xlsx",onChange:()=>{j(!0)},ref:N})),l.a.createElement(bl.a,{size:"small"},l.a.createElement(vl.a,null,l.a.createElement(xl.a,null,l.a.createElement(hl.a,{padding:"checkbox"}),l.a.createElement(hl.a,null,De.a.t("contacts.table.name")),l.a.createElement(hl.a,{align:"center"},De.a.t("contacts.table.whatsapp")),l.a.createElement(hl.a,{align:"center"},De.a.t("contacts.table.email")),l.a.createElement(hl.a,{align:"center"},"\xdaltima Interacci\xf3n"),l.a.createElement(hl.a,{align:"center"},"Status"),l.a.createElement(hl.a,{align:"center"},De.a.t("contacts.table.actions")))),l.a.createElement(fl.a,null,l.a.createElement(l.a.Fragment,null,m.map(e=>l.a.createElement(xl.a,{key:e.id},l.a.createElement(hl.a,{style:{paddingRight:0}},l.a.createElement(Na.a,{src:e.profilePicUrl})),l.a.createElement(hl.a,null,e.name),l.a.createElement(hl.a,{align:"center"},e.number),l.a.createElement(hl.a,{align:"center"},e.email),l.a.createElement(hl.a,{align:"center"},function(e){if(!e)return null;if(!e.tickets)return null;if(e.tickets.length>0){const a=new Date(e.tickets[e.tickets.length-1].updatedAt),t=a.getDate()>9?a.getDate():"0".concat(a.getDate()),n=a.getMonth()+1>9?a.getMonth()+1:"0".concat(a.getMonth()+1),l=a.getFullYear().toString().slice(-2),r=a.getHours()>9?a.getHours():"0".concat(a.getHours()),o=a.getMinutes()>9?a.getMinutes():"0".concat(a.getMinutes());return"".concat(t,"/").concat(n,"/").concat(l," ").concat(r,":").concat(o)}return null}(e)),l.a.createElement(hl.a,{align:"center"},e.active?l.a.createElement(Ot.a,{style:{color:"green"},fontSize:"small"}):l.a.createElement(Br.a,{style:{color:"red"},fontSize:"small"})),l.a.createElement(hl.a,{align:"center"},l.a.createElement(T.a,{size:"small",onClick:()=>{O(e),h(!0)}},l.a.createElement(ee.a,null)),l.a.createElement(T.a,{size:"small",onClick:()=>{return a=e.id,g(a),void b(!0);var a}},l.a.createElement(da.a,null)),l.a.createElement($e,{role:t.profile,perform:"contacts-page:deleteContact",yes:()=>l.a.createElement(T.a,{size:"small",onClick:a=>{j(!0),w(e)}},l.a.createElement(Wt.a,null))})))),r&&l.a.createElement(hi,{avatar:!0,columns:3}))))))},vs=t(943);var xs=e=>{let{onChange:a,currentColor:t,handleClose:r,open:o}=e;const[i,c]=Object(n.useState)(t);return l.a.createElement(tt.a,{onClose:r,"aria-labelledby":"simple-dialog-title",open:o},l.a.createElement(vs.a,{width:"100%",triangle:"hide",color:i,colors:["#B80000","#DB3E00","#FCCB00","#008B02","#006B76","#1273DE","#004DCF","#5300EB","#EB9694","#FAD0C3","#FEF3BD","#C1E1C5","#BEDADC","#C4DEF6","#BED3F3","#D4C4FB","#4D4D4D","#999999","#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF","#333333","#808080","#cccccc","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"],onChange:e=>{c(e.hex),r()},onChangeComplete:e=>a(e.hex)}))},Cs=t(1581),Os=t(1580),Ss=t(546),ws=t.n(Ss),As=t(911),js=t.n(As);const ks=Object(A.a)(e=>({root:{width:"100%",[e.breakpoints.down("sm")]:{maxHeight:"20vh"}},button:{marginRight:e.spacing(1)},input:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},addButton:{marginTop:e.spacing(2),marginBottom:e.spacing(2)}}));function Ts(e){let{queueId:a,options:t,updateOptions:r}=e;const o=ks(),[i,c]=Object(n.useState)(-1),[s,d]=Object(n.useState)(null),m=Object(n.useRef)(null),[u,p]=Object(n.useState)(!1),g=e=>async()=>{c(e);const n=t[e];if(void 0!==n&&void 0!==n.id)try{const{data:e}=await _e.request({url:"/queue-options",method:"GET",params:{queueId:a,parentId:n.id}}),t=e.map(e=>({...e,children:[],edition:!1}));n.children=t,r()}catch(l){We(l)}},E=async e=>{try{if(e.id){if(await _e.request({url:"/queue-options/".concat(e.id),method:"PUT",data:e}),null!=s){const a=new FormData;a.append("file",s),await _e.post("/queue-options/".concat(e.id,"/media-upload"),a)}}else{const{data:a}=await _e.request({url:"/queue-options",method:"POST",data:e});if(null!=s){const a=new FormData;a.append("file",s),await _e.post("/queue-options/".concat(e.id,"/media-upload"),a)}e.id=a.id}e.edition=!1,r()}catch(a){We(a)}},b=e=>{t[e].edition=!t[e].edition,r()},f=e=>{const a=t[e];return a.edition?l.a.createElement(l.a.Fragment,null,l.a.createElement(la.a,{value:a.title,onChange:a=>((e,a)=>{t[a].title=e.target.value,r()})(a,e),size:"small",className:o.input,placeholder:"T\xedtulo de la opci\xf3n"}),l.a.createElement("div",{style:{display:"none"}},l.a.createElement("input",{type:"file",ref:m,onChange:e=>(e=>{const a=Object(qe.head)(e.target.files);a&&d(a)})(e)})),a.edition&&l.a.createElement(l.a.Fragment,null,l.a.createElement(T.a,{color:"primary",variant:"outlined",size:"small",className:o.button,onClick:()=>E(a)},l.a.createElement(js.a,null)),l.a.createElement(T.a,{variant:"outlined",color:"secondary",size:"small",className:o.button,onClick:()=>(async e=>{const a=t[e];if(void 0!==a&&void 0!==a.id)try{await _e.request({url:"/queue-options/".concat(a.id),method:"DELETE"})}catch(n){We(n)}t.splice(e,1),t.forEach(async(e,a)=>{e.option=a+1,await E(e)}),r()})(e)},l.a.createElement(Wt.a,null)),!s&&!a.mediaPath&&l.a.createElement(T.a,{variant:"outlined",color:"primary",size:"small",className:o.button,onClick:()=>m.current.click()},l.a.createElement(Ea.a,null)),(a.mediaPath||s)&&l.a.createElement(Mt.a,{xs:12,item:!0},l.a.createElement(ra.a,{startIcon:l.a.createElement(Ea.a,null)},null!=s?s.name:a.mediaName),l.a.createElement(T.a,{onClick:()=>p(!0),color:"secondary"},l.a.createElement(ii.a,null))))):l.a.createElement(l.a.Fragment,null,l.a.createElement(R.a,null,""!==a.title?a.title:"T\xedtulo no definido",l.a.createElement(T.a,{variant:"outlined",size:"small",className:o.button,onClick:()=>b(e)},l.a.createElement(da.a,null))))},h=e=>{const a=t[e];return a.edition?l.a.createElement(l.a.Fragment,null,l.a.createElement(la.a,{style:{width:"100%"},multiline:!0,value:a.message,onChange:a=>((e,a)=>{t[a].message=e.target.value,r()})(a,e),size:"small",className:o.input,placeholder:"Escribe el texto de la opci\xf3n"})):l.a.createElement(l.a.Fragment,null,l.a.createElement(R.a,{onClick:()=>b(e)},a.message))},y=(e,n)=>l.a.createElement(dc.a,{key:n},l.a.createElement(mc.a,{style:{cursor:"pointer"},onClick:g(n)},f(n)),l.a.createElement(Os.a,null,h(n),void 0!==e.id&&l.a.createElement(l.a.Fragment,null,l.a.createElement(ra.a,{color:"primary",size:"small",onClick:()=>(e=>{const n=t[e].children.length+1;t[e].children.push({title:"",message:"",edition:!1,option:n,queueId:a,parentId:t[e].id,children:[]}),r()})(n),startIcon:l.a.createElement(ws.a,null),variant:"outlined",className:o.addButton},"Agregar")),l.a.createElement(Ts,{queueId:a,options:e.children,updateOptions:r})));return l.a.createElement(sc.a,{style:{marginBottom:0,paddingBottom:0},nonLinear:!0,activeStep:i,orientation:"vertical"},t.map((e,a)=>y(e,a)))}function Is(e){let{queueId:a}=e;const t=ks(),[r,o]=Object(n.useState)([]);Object(n.useEffect)(()=>{if(a){(async()=>{try{const{data:e}=await _e.request({url:"/queue-options",method:"GET",params:{queueId:a,parentId:-1}}),t=e.map(e=>({...e,children:[],edition:!1}));o(t)}catch(e){We(e)}})()}},[]);const i=()=>{o([...r])};return l.a.createElement("div",{className:t.root},l.a.createElement("br",null),l.a.createElement(R.a,null,"Opciones",l.a.createElement(ra.a,{color:"primary",size:"small",onClick:()=>{const e={title:"",message:"",edition:!1,option:r.length+1,queueId:a,parentId:null,children:[]};o([...r,e])},startIcon:l.a.createElement(ws.a,null),style:{marginLeft:10},variant:"outlined"},"Agregar")),(()=>{if(r.length>0)return l.a.createElement(Ts,{queueId:a,updateOptions:i,options:r})})())}const Ns=Object(A.a)(e=>({root:{display:"flex",flexWrap:"wrap"},textField:{marginRight:e.spacing(1),flex:1},btnWrapper:{position:"relative"},buttonProgress:{color:Ra.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},formControl:{margin:e.spacing(1),minWidth:120},colorAdorment:{width:20,height:20}})),Ms=Lt.b().shape({name:Lt.d().min(2,"Too Short!").max(50,"Too Long!").required("Required"),color:Lt.d().min(3,"Too Short!").max(9,"Too Long!").required(),greetingMessage:Lt.d()});var Ps=e=>{let{open:a,onClose:t,queueId:r}=e;const o=Ns(),i={name:"",color:"",greetingMessage:"",outOfHoursMessage:"",orderQueue:"",integrationId:"",promptId:""},[c,s]=Object(n.useState)(!1),[d,m]=Object(n.useState)(i),[u,p]=Object(n.useState)(0),[g,E]=Object(n.useState)(!1),[b,f]=Object(n.useState)(null),h=Object(n.useRef)(null),y=Object(n.useRef)(),[v,x]=Object(n.useState)([]),[O,S]=Object(n.useState)(!0),[w,A]=Object(n.useState)(!1),[j,k]=Object(n.useState)([{weekday:"Lunes",weekdayEn:"monday",startTime:"08:00",endTime:"18:00"},{weekday:"Martes",weekdayEn:"tuesday",startTime:"08:00",endTime:"18:00"},{weekday:"Mi\xe9rcoles",weekdayEn:"wednesday",startTime:"08:00",endTime:"18:00"},{weekday:"Jueves",weekdayEn:"thursday",startTime:"08:00",endTime:"18:00"},{weekday:"Viernes",weekdayEn:"friday",startTime:"08:00",endTime:"18:00"},{weekday:"S\xe1bado",weekdayEn:"saturday",startTime:"08:00",endTime:"12:00"},{weekday:"Domingo",weekdayEn:"sunday",startTime:"00:00",endTime:"00:00"}]),[I,N]=Object(n.useState)(null),[M,P]=Object(n.useState)([]);Object(n.useEffect)(()=>{(async()=>{try{const{data:e}=await _e.get("/prompt");P(e.prompts)}catch(e){We(e)}})()},[]),Object(n.useEffect)(()=>{_e.get("/settings").then(e=>{let{data:a}=e;if(Array.isArray(a)){const e=a.find(e=>"scheduleType"===e.key);e&&E("queue"===e.value)}})},[]),Object(n.useEffect)(()=>{(async()=>{try{const{data:e}=await _e.get("/queueIntegration");x(e.queueIntegrations)}catch(e){We(e)}})()},[]),Object(n.useEffect)(()=>((async()=>{if(r)try{const{data:e}=await _e.get("/queue/".concat(r));m(a=>({...a,...e})),e.promptId?N(e.promptId):N(null),k(e.schedules)}catch(e){We(e)}})(),()=>{m({name:"",color:"",greetingMessage:"",outOfHoursMessage:"",orderQueue:"",integrationId:""})}),[r,a]);const R=()=>{t(),m(i)},D=e=>{N(e.target.value)};return l.a.createElement("div",{className:o.root},l.a.createElement(Et,{title:De.a.t("queueModal.confirmationModal.deleteTitle"),open:w,onClose:()=>A(!1),onConfirm:async()=>{b&&(f(null),h.current.value=null),d.mediaPath&&(await _e.delete("/queue/".concat(d.id,"/media-upload")),m(e=>({...e,mediaPath:null,mediaName:null})),C.b.success(De.a.t("queueModal.toasts.deleted")))}}),l.a.createElement(tt.a,{maxWidth:"md",fullWidth:!0,open:a,onClose:R,scroll:"paper"},l.a.createElement(gt.a,null,"".concat(r?De.a.t("queueModal.title.edit"):De.a.t("queueModal.title.add")),l.a.createElement("div",{style:{display:"none"}},l.a.createElement("input",{type:"file",ref:h,onChange:e=>(e=>{const a=Object(qe.head)(e.target.files);a&&f(a)})(e)}))),l.a.createElement(Xl.a,{value:u,indicatorColor:"primary",textColor:"primary",onChange:(e,a)=>p(a),"aria-label":"disabled tabs example"},l.a.createElement(Jl.a,{label:"Datos de la cola"}),g&&l.a.createElement(Jl.a,{label:"Horarios de Atenci\xf3n"})),0===u&&l.a.createElement(ht.a,null,l.a.createElement(Ft.e,{initialValues:d,enableReinitialize:!0,validationSchema:Ms,onSubmit:(e,a)=>{setTimeout(()=>{(async e=>{try{if(r){if(await _e.put("/queue/".concat(r),{...e,schedules:j,promptId:I||null}),null!=b){const e=new FormData;e.append("file",b),await _e.post("/queue/".concat(r,"/media-upload"),e)}}else if(await _e.post("/queue",{...e,schedules:j,promptId:I||null}),null!=b){const e=new FormData;e.append("file",b),await _e.post("/queue/".concat(r,"/media-upload"),e)}C.b.success("Queue saved successfully"),R()}catch(a){We(a)}})(e),a.setSubmitting(!1)},400)}},e=>{let{touched:a,errors:t,isSubmitting:n,values:i}=e;return l.a.createElement(Ft.d,null,l.a.createElement(pt.a,{dividers:!0},l.a.createElement(Ft.b,{as:la.a,label:De.a.t("queueModal.form.name"),autoFocus:!0,name:"name",error:a.name&&Boolean(t.name),helperText:a.name&&t.name,variant:"outlined",margin:"dense",className:o.textField}),l.a.createElement(Ft.b,{as:la.a,label:De.a.t("queueModal.form.color"),name:"color",id:"color",onFocus:()=>{s(!0),y.current.focus()},error:a.color&&Boolean(t.color),helperText:a.color&&t.color,InputProps:{startAdornment:l.a.createElement(us.a,{position:"start"},l.a.createElement("div",{style:{backgroundColor:i.color},className:o.colorAdorment})),endAdornment:l.a.createElement(T.a,{size:"small",color:"default",onClick:()=>s(!0)},l.a.createElement(Cs.a,null))},variant:"outlined",margin:"dense",className:o.textField}),l.a.createElement(xs,{open:c,handleClose:()=>s(!1),onChange:e=>{i.color=e,m(()=>({...i,color:e}))}}),l.a.createElement(Ft.b,{as:la.a,label:De.a.t("queueModal.form.orderQueue"),name:"orderQueue",type:"orderQueue",error:a.orderQueue&&Boolean(t.orderQueue),helperText:a.orderQueue&&t.orderQueue,variant:"outlined",margin:"dense",className:o.textField1}),l.a.createElement("div",null,l.a.createElement(On.a,{variant:"outlined",margin:"dense",className:o.FormControl,fullWidth:!0},l.a.createElement(Cn.a,{id:"integrationId-selection-label"},De.a.t("queueModal.form.integrationId")),l.a.createElement(Ft.b,{as:Ht.a,label:De.a.t("queueModal.form.integrationId"),name:"integrationId",id:"integrationId",placeholder:De.a.t("queueModal.form.integrationId"),labelId:"integrationId-selection-label",value:i.integrationId||""},l.a.createElement(L.a,{value:""},"Nenhum"),v.map(e=>l.a.createElement(L.a,{key:e.id,value:e.id},e.name)))),l.a.createElement(On.a,{margin:"dense",variant:"outlined",fullWidth:!0},l.a.createElement(Cn.a,null,De.a.t("whatsappModal.form.prompt")),l.a.createElement(Ht.a,{labelId:"dialog-select-prompt-label",id:"dialog-select-prompt",name:"promptId",value:I||"",onChange:D,label:De.a.t("whatsappModal.form.prompt"),fullWidth:!0,MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},getContentAnchorEl:null}},M.map(e=>l.a.createElement(L.a,{key:e.id,value:e.id},e.name))))),l.a.createElement("div",{style:{marginTop:5}},l.a.createElement(Ft.b,{as:la.a,label:De.a.t("queueModal.form.greetingMessage"),type:"greetingMessage",multiline:!0,inputRef:y,rows:5,fullWidth:!0,name:"greetingMessage",error:a.greetingMessage&&Boolean(t.greetingMessage),helperText:a.greetingMessage&&t.greetingMessage,variant:"outlined",margin:"dense"}),g&&l.a.createElement(Ft.b,{as:la.a,label:De.a.t("queueModal.form.outOfHoursMessage"),type:"outOfHoursMessage",multiline:!0,inputRef:y,rows:5,fullWidth:!0,name:"outOfHoursMessage",error:a.outOfHoursMessage&&Boolean(t.outOfHoursMessage),helperText:a.outOfHoursMessage&&t.outOfHoursMessage,variant:"outlined",margin:"dense"})),l.a.createElement(Is,{queueId:r}),(d.mediaPath||b)&&l.a.createElement(Mt.a,{xs:12,item:!0},l.a.createElement(ra.a,{startIcon:l.a.createElement(Ea.a,null)},null!=b?b.name:d.mediaName),O&&l.a.createElement(T.a,{onClick:()=>A(!0),color:"secondary"},l.a.createElement(ii.a,null)))),l.a.createElement(nt.a,null,!b&&!d.mediaPath&&O&&l.a.createElement(ra.a,{color:"primary",onClick:()=>h.current.click(),disabled:n,variant:"outlined"},De.a.t("queueModal.buttons.attach")),l.a.createElement(ra.a,{onClick:R,color:"secondary",disabled:n,variant:"outlined"},De.a.t("queueModal.buttons.cancel")),l.a.createElement(ra.a,{type:"submit",color:"primary",disabled:n,variant:"contained",className:o.btnWrapper},"".concat(r?De.a.t("queueModal.buttons.okEdit"):De.a.t("queueModal.buttons.okAdd")),n&&l.a.createElement(za.a,{size:24,className:o.buttonProgress}))))})),1===u&&l.a.createElement(ht.a,{style:{padding:20}},l.a.createElement(Ii,{loading:!1,onSubmit:async e=>{C.b.success("Clique em salvar para registar as altera\xe7\xf5es"),k(e),p(0)},initialValues:j,labelSaveButton:"Agregar"}))))};const Rs=Object(A.a)(e=>({mainPaper:{flex:1,padding:e.spacing(1),overflowY:"scroll",...e.scrollbarStyles},customTableCell:{display:"flex",alignItems:"center",justifyContent:"center"}})),Ds=(e,a)=>{if("LOAD_QUEUES"===a.type){const t=a.payload,n=[];return t.forEach(a=>{const t=e.findIndex(e=>e.id===a.id);-1!==t?e[t]=a:n.push(a)}),[...e,...n]}if("UPDATE_QUEUES"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n?(e[n]=t,[...e]):[t,...e]}if("DELETE_QUEUE"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t);return-1!==n&&e.splice(n,1),[...e]}if("RESET"===a.type)return[]};var Ls=()=>{const e=Rs(),[a,t]=Object(n.useReducer)(Ds,[]),[r,o]=Object(n.useState)(!1),[i,c]=Object(n.useState)(!1),[s,d]=Object(n.useState)(null),[m,u]=Object(n.useState)(!1),p=Object(n.useContext)(y);Object(n.useEffect)(()=>{(async()=>{o(!0);try{const{data:e}=await _e.get("/queue");t({type:"LOAD_QUEUES",payload:e}),o(!1)}catch(e){We(e),o(!1)}})()},[]),Object(n.useEffect)(()=>{const e=localStorage.getItem("companyId"),a=p.getSocket(e);return a.on("company-".concat(e,"-queue"),e=>{"update"!==e.action&&"create"!==e.action||t({type:"UPDATE_QUEUES",payload:e.queue}),"delete"===e.action&&t({type:"DELETE_QUEUE",payload:e.queueId})}),()=>{a.disconnect()}},[p]);return l.a.createElement(mi,null,l.a.createElement(Et,{title:s&&"".concat(De.a.t("queues.confirmationModal.deleteTitle")," ").concat(s.name,"?"),open:m,onClose:()=>{u(!1),d(null)},onConfirm:()=>(async e=>{try{await _e.delete("/queue/".concat(e)),C.b.success(De.a.t("Queue deleted successfully!"))}catch(a){We(a)}d(null)})(s.id)},De.a.t("queues.confirmationModal.deleteMessage")),l.a.createElement(Ps,{open:i,onClose:()=>{c(!1),d(null)},queueId:null===s||void 0===s?void 0:s.id}),l.a.createElement(pi,null,l.a.createElement(bi,null,De.a.t("queues.title")),l.a.createElement(Ei,null,l.a.createElement(ra.a,{variant:"contained",color:"primary",onClick:()=>{c(!0),d(null)}},De.a.t("queues.buttons.add")))),l.a.createElement(ht.a,{className:e.mainPaper,variant:"outlined"},l.a.createElement(bl.a,{size:"small"},l.a.createElement(vl.a,null,l.a.createElement(xl.a,null,l.a.createElement(hl.a,{align:"center"},De.a.t("queues.table.id")),l.a.createElement(hl.a,{align:"center"},De.a.t("queues.table.name")),l.a.createElement(hl.a,{align:"center"},De.a.t("queues.table.color")),l.a.createElement(hl.a,{align:"center"},De.a.t("queues.table.orderQueue")),l.a.createElement(hl.a,{align:"center"},De.a.t("queues.table.greeting")),l.a.createElement(hl.a,{align:"center"},De.a.t("queues.table.actions")))),l.a.createElement(fl.a,null,l.a.createElement(l.a.Fragment,null,a.map(a=>l.a.createElement(xl.a,{key:a.id},l.a.createElement(hl.a,{align:"center"},a.id),l.a.createElement(hl.a,{align:"center"},a.name),l.a.createElement(hl.a,{align:"center"},l.a.createElement("div",{className:e.customTableCell},l.a.createElement("span",{style:{backgroundColor:a.color,width:60,height:20,alignSelf:"center"}}))),l.a.createElement(hl.a,{align:"center"},l.a.createElement("div",{className:e.customTableCell},l.a.createElement(R.a,{style:{width:300,align:"center"},noWrap:!0,variant:"body2"},a.orderQueue))),l.a.createElement(hl.a,{align:"center"},l.a.createElement("div",{className:e.customTableCell},l.a.createElement(R.a,{style:{width:300,align:"center"},noWrap:!0,variant:"body2"},a.greetingMessage))),l.a.createElement(hl.a,{align:"center"},l.a.createElement(T.a,{size:"small",onClick:()=>(e=>{d(e),c(!0)})(a)},l.a.createElement(oi.a,null)),l.a.createElement(T.a,{size:"small",onClick:()=>{d(a),u(!0)}},l.a.createElement(ii.a,null))))),r&&l.a.createElement(hi,{columns:4}))))))},Fs=t(912);const qs=Object(A.a)(e=>({root:{display:"flex",flexWrap:"wrap"},multFieldLine:{display:"flex","& > *:not(:last-child)":{marginRight:e.spacing(1)}},btnWrapper:{position:"relative"},buttonProgress:{color:Ra.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},formControl:{margin:e.spacing(1),minWidth:120},colorAdorment:{width:20,height:20}})),Ws=Lt.b().shape({name:Lt.d().min(3,"Mensagem muito curta").required("Obrigat\xf3rio")});var Bs=e=>{let{open:a,onClose:t,tagId:r,reload:o}=e;const i=qs(),{user:c}=Object(n.useContext)(Xe),[s,d]=Object(n.useState)(!1),m={name:"",color:"",kanban:0},[u,p]=Object(n.useState)(m),[g,E]=Object(n.useState)(0);Object(n.useEffect)(()=>{try{(async()=>{if(!r)return;const{data:e}=await _e.get("/tags/".concat(r));E(e.kanban),p(a=>({...a,...e}))})()}catch(e){We(e)}},[r,a]);const b=()=>{p(m),d(!1),t()},f=e=>{E(e.target.checked?1:0)};return l.a.createElement("div",{className:i.root},l.a.createElement(tt.a,{open:a,onClose:b,maxWidth:"xs",fullWidth:!0,scroll:"paper"},l.a.createElement(gt.a,{id:"form-dialog-title"},"".concat(r?De.a.t("tagModal.title.edit"):De.a.t("tagModal.title.add"))),l.a.createElement(Ft.e,{initialValues:u,enableReinitialize:!0,validationSchema:Ws,onSubmit:(e,a)=>{setTimeout(()=>{(async e=>{const a={...e,userId:c.id,kanban:g};try{r?await _e.put("/tags/".concat(r),a):await _e.post("/tags",a),C.b.success(De.a.t("tagModal.success")),"function"==typeof o&&o()}catch(t){We(t)}b()})(e),a.setSubmitting(!1)},400)}},e=>{let{touched:a,errors:t,isSubmitting:n,values:o}=e;return l.a.createElement(Ft.d,null,l.a.createElement(pt.a,{dividers:!0},l.a.createElement("div",{className:i.multFieldLine},l.a.createElement(Ft.b,{as:la.a,label:De.a.t("tagModal.form.name"),name:"name",error:a.name&&Boolean(t.name),helperText:a.name&&t.name,variant:"outlined",margin:"dense",onChange:e=>p(a=>({...a,name:e.target.value})),fullWidth:!0})),l.a.createElement("br",null),l.a.createElement("div",{className:i.multFieldLine},l.a.createElement(Ft.b,{as:la.a,fullWidth:!0,label:De.a.t("tagModal.form.color"),name:"color",id:"color",error:a.color&&Boolean(t.color),helperText:a.color&&t.color,InputProps:{startAdornment:l.a.createElement(us.a,{position:"start"},l.a.createElement("div",{style:{backgroundColor:o.color},className:i.colorAdorment})),endAdornment:l.a.createElement(T.a,{size:"small",color:"default",onClick:()=>d(!s)},l.a.createElement(Cs.a,null))},variant:"outlined",margin:"dense"})),("admin"===c.profile||"supervisor"===c.profile)&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:i.multFieldLine},l.a.createElement(tr.a,{control:l.a.createElement(sr.a,{checked:1===g,onChange:f,value:g,color:"primary"}),label:"Kanban",labelPlacement:"start"})),l.a.createElement("br",null)),s&&l.a.createElement("div",null,l.a.createElement(Fs.a,{disableAlpha:!0,hslGradient:!1,style:{margin:"20px auto 0"},value:u.color,onChange:e=>{p(a=>({...a,color:"#".concat(e.hex)}))}}))),l.a.createElement(nt.a,null,l.a.createElement(ra.a,{onClick:b,color:"secondary",disabled:n,variant:"outlined"},De.a.t("tagModal.buttons.cancel")),l.a.createElement(ra.a,{type:"submit",color:"primary",disabled:n,variant:"contained",className:i.btnWrapper},"".concat(r?De.a.t("tagModal.buttons.okEdit"):De.a.t("tagModal.buttons.okAdd")),n&&l.a.createElement(za.a,{size:24,className:i.buttonProgress}))))})))};const zs=(e,a)=>{if("LOAD_TAGS"===a.type){const t=a.payload,n=[];return t.forEach(a=>{const t=e.findIndex(e=>e.id===a.id);-1!==t?e[t]=a:n.push(a)}),[...e,...n]}if("UPDATE_TAGS"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n?(e[n]=t,[...e]):[t,...e]}if("DELETE_TAG"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t);return-1!==n&&e.splice(n,1),[...e]}if("RESET"===a.type)return[]},Us=Object(A.a)(e=>({mainPaper:{flex:1,padding:e.spacing(1),overflowY:"scroll",...e.scrollbarStyles}}));var Hs=()=>{const e=Us(),{user:a}=Object(n.useContext)(Xe),[t,r]=Object(n.useState)(!1),[o,i]=Object(n.useState)(1),[c,s]=Object(n.useState)(!1),[d,m]=Object(n.useState)(null),[u,p]=Object(n.useState)(null),[g,E]=Object(n.useState)(!1),[b,f]=Object(n.useState)(""),[h,v]=Object(n.useReducer)(zs,[]),[x,O]=Object(n.useState)(!1),S=Object(n.useCallback)(async()=>{try{const{data:e}=await _e.get("/tags/",{params:{searchParam:b,pageNumber:o}});v({type:"LOAD_TAGS",payload:e.tags}),s(e.hasMore),r(!1)}catch(e){We(e)}},[b,o]),w=Object(n.useContext)(y);Object(n.useEffect)(()=>{v({type:"RESET"}),i(1)},[b]),Object(n.useEffect)(()=>{r(!0);const e=setTimeout(()=>{S()},500);return()=>clearTimeout(e)},[b,o,S]),Object(n.useEffect)(()=>{const e=w.getSocket(a.companyId);return e.on("user",e=>{"update"!==e.action&&"create"!==e.action||v({type:"UPDATE_TAGS",payload:e.tags}),"delete"===e.action&&v({type:"DELETE_USER",payload:+e.tagId})}),()=>{e.disconnect()}},[w,a]);return l.a.createElement(mi,null,l.a.createElement(Et,{title:u&&"".concat(De.a.t("tags.confirmationModal.deleteTitle")),open:g,onClose:E,onConfirm:()=>(async e=>{try{await _e.delete("/tags/".concat(e)),C.b.success(De.a.t("tags.toasts.deleted"))}catch(a){We(a)}p(null),f(""),i(1),v({type:"RESET"}),i(1),await S()})(u.id)},De.a.t("tags.confirmationModal.deleteMessage")),l.a.createElement(Bs,{open:x,onClose:()=>{m(null),O(!1)},reload:S,"aria-labelledby":"form-dialog-title",tagId:d&&d.id}),l.a.createElement(pi,null,l.a.createElement(bi,null,De.a.t("tags.title")),l.a.createElement(Ei,null,l.a.createElement(la.a,{placeholder:De.a.t("contacts.searchPlaceholder"),type:"search",value:b,onChange:e=>{f(e.target.value.toLowerCase())},InputProps:{startAdornment:l.a.createElement(us.a,{position:"start"},l.a.createElement(Ql.a,{style:{color:"gray"}}))}}),l.a.createElement(ra.a,{variant:"contained",color:"primary",onClick:()=>{m(null),O(!0)}},De.a.t("tags.buttons.add")))),l.a.createElement(ht.a,{className:e.mainPaper,variant:"outlined",onScroll:e=>{if(!c||t)return;const{scrollTop:a,scrollHeight:n,clientHeight:l}=e.currentTarget;n-(a+100)<l&&i(e=>e+1)}},l.a.createElement(bl.a,{size:"small"},l.a.createElement(vl.a,null,l.a.createElement(xl.a,null,l.a.createElement(hl.a,{align:"center"},De.a.t("tags.table.name")),l.a.createElement(hl.a,{align:"center"},De.a.t("tags.table.tickets")),l.a.createElement(hl.a,{align:"center"},De.a.t("tags.table.actions")))),l.a.createElement(fl.a,null,l.a.createElement(l.a.Fragment,null,h.map(e=>l.a.createElement(xl.a,{key:e.id},l.a.createElement(hl.a,{align:"center"},l.a.createElement(Sn.a,{variant:"outlined",style:{backgroundColor:e.color,textShadow:"1px 1px 1px #000",color:"white"},label:e.name,size:"small"})),l.a.createElement(hl.a,{align:"center"},e.ticketsCount),l.a.createElement(hl.a,{align:"center"},l.a.createElement(T.a,{size:"small",onClick:()=>(e=>{m(e),O(!0)})(e)},l.a.createElement(da.a,null)),l.a.createElement(T.a,{size:"small",onClick:a=>{E(!0),p(e)}},l.a.createElement(Wt.a,null))))),t&&l.a.createElement(hi,{columns:4}))))))};const _s=Object(A.a)(e=>({mainPaper:{flex:1,padding:e.spacing(2),paddingBottom:100},mainHeader:{marginTop:e.spacing(1)},elementMargin:{padding:e.spacing(2)},formContainer:{maxWidth:500},textRight:{textAlign:"right"}}));var Vs=()=>{const e=_s(),a=Object(x.useHistory)(),[t]=Object(n.useState)({token:"",number:"",body:""}),[r]=Object(n.useState)({token:"",number:"",medias:""}),[o,i]=Object(n.useState)({}),{getPlanCompany:c}=ba();Object(n.useEffect)(()=>{!async function(){const e=localStorage.getItem("companyId");(await c(void 0,e)).plan.useExternalApi||(C.b.error("Esta empresa n\xe3o possui permiss\xe3o para acessar essa p\xe1gina! Estamos lhe redirecionando."),setTimeout(()=>{a.push("/")},1e3))}()},[]);return l.a.createElement(ht.a,{className:e.mainPaper,style:{marginLeft:"5px"},variant:"outlined"},l.a.createElement(R.a,{variant:"h5"},"Documentaci\xf3n para el env\xedo de mensajes"),l.a.createElement(R.a,{variant:"h6",color:"primary",className:e.elementMargin},"M\xe9todos de env\xedo"),l.a.createElement(R.a,{component:"div"},l.a.createElement("ol",null,l.a.createElement("li",null,"Mensajes de texto"),l.a.createElement("li",null,"Mensajes multimedia"))),l.a.createElement(R.a,{variant:"h6",color:"primary",className:e.elementMargin},"Instrucciones"),l.a.createElement(R.a,{className:e.elementMargin,component:"div"},l.a.createElement("b",null,"Observaciones importantes"),l.a.createElement("br",null),l.a.createElement("ul",null,l.a.createElement("li",null,"Antes de enviar mensajes, es necesario registrar el token vinculado a la conexi\xf3n que enviar\xe1 los mensajes. ",l.a.createElement("br",null),'Para realizar el registro, accede al men\xfa "Conexiones", haz clic en el bot\xf3n de editar de la conexi\xf3n y inserta el token en el campo correspondiente.'),l.a.createElement("li",null,"El n\xfamero para el env\xedo no debe tener m\xe1scara ni caracteres especiales y debe estar compuesto por:",l.a.createElement("ul",null,l.a.createElement("li",null,"C\xf3digo del pa\xeds"),l.a.createElement("li",null,"DDD"),l.a.createElement("li",null,"N\xfamero"))))),l.a.createElement(R.a,{variant:"h6",color:"primary",className:e.elementMargin},"1. Mensajes de texto"),l.a.createElement(Mt.a,{container:!0},l.a.createElement(Mt.a,{item:!0,xs:12,sm:6},l.a.createElement(R.a,{className:e.elementMargin,component:"div"},l.a.createElement("p",null,"A continuaci\xf3n se muestra la lista de informaci\xf3n necesaria para el env\xedo de mensajes de texto:"),l.a.createElement("b",null,"Endpoint: ")," ","https://boostybackend-production.up.railway.app/api/messages/send"," ",l.a.createElement("br",null),l.a.createElement("b",null,"M\xe9todo: ")," POST ",l.a.createElement("br",null),l.a.createElement("b",null,"Headers: ")," Authorization (Bearer token) e Content-Type (application/json) ",l.a.createElement("br",null),l.a.createElement("b",null,"Body: ")," ",'{ "number": "52123456789", "body": "Tu mensaje" }')),l.a.createElement(Mt.a,{item:!0,xs:12,sm:6},l.a.createElement(R.a,{className:e.elementMargin},l.a.createElement("b",null,"Prueba de Env\xedo")),l.a.createElement(Ft.e,{initialValues:t,enableReinitialize:!0,onSubmit:(e,a)=>{setTimeout(async()=>{await(async e=>{const{number:a,body:t}=e,n={number:a,body:t};try{await ze.a.request({url:"https://boostybackend-production.up.railway.app/api/messages/send",method:"POST",data:n,headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(e.token)}}),C.b.success("Mensagem enviada com sucesso")}catch(l){We(l)}})(e),a.setSubmitting(!1),a.resetForm()},400)},className:e.elementMargin},a=>{let{isSubmitting:t}=a;return l.a.createElement(Ft.d,{className:e.formContainer},l.a.createElement(Mt.a,{container:!0,spacing:2},l.a.createElement(Mt.a,{item:!0,xs:12,md:6},l.a.createElement(Ft.b,{as:la.a,label:De.a.t("messagesAPI.textMessage.token"),name:"token",autoFocus:!0,variant:"outlined",margin:"dense",fullWidth:!0,className:e.textField,required:!0})),l.a.createElement(Mt.a,{item:!0,xs:12,md:6},l.a.createElement(Ft.b,{as:la.a,label:De.a.t("messagesAPI.textMessage.number"),name:"number",autoFocus:!0,variant:"outlined",margin:"dense",fullWidth:!0,className:e.textField,required:!0})),l.a.createElement(Mt.a,{item:!0,xs:12},l.a.createElement(Ft.b,{as:la.a,label:De.a.t("messagesAPI.textMessage.body"),name:"body",autoFocus:!0,variant:"outlined",margin:"dense",fullWidth:!0,className:e.textField,required:!0})),l.a.createElement(Mt.a,{item:!0,xs:12,className:e.textRight},l.a.createElement(ra.a,{type:"submit",color:"primary",variant:"contained",className:e.btnWrapper},t?l.a.createElement(za.a,{size:24,className:e.buttonProgress}):"Enviar"))))}))),l.a.createElement(R.a,{variant:"h6",color:"primary",className:e.elementMargin},"2. Mensajes multimedia"),l.a.createElement(Mt.a,{container:!0},l.a.createElement(Mt.a,{item:!0,xs:12,sm:6},l.a.createElement(R.a,{className:e.elementMargin,component:"div"},l.a.createElement("p",null,"A continuaci\xf3n se muestra la lista de informaci\xf3n necesaria para el env\xedo de mensajes de imagen:"),l.a.createElement("b",null,"Endpoint: ")," ","https://boostybackend-production.up.railway.app/api/messages/send"," ",l.a.createElement("br",null),l.a.createElement("b",null,"M\xe9todo: ")," POST ",l.a.createElement("br",null),l.a.createElement("b",null,"Headers: ")," Authorization (Bearer token) e Content-Type (multipart/form-data) ",l.a.createElement("br",null),l.a.createElement("b",null,"FormData: ")," ",l.a.createElement("br",null),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("b",null,"number: ")," 5599999999999"),l.a.createElement("li",null,l.a.createElement("b",null,"medias: ")," arquivo")))),l.a.createElement(Mt.a,{item:!0,xs:12,sm:6},l.a.createElement(R.a,{className:e.elementMargin},l.a.createElement("b",null,"Prueba de Env\xedo")),l.a.createElement(Ft.e,{initialValues:r,enableReinitialize:!0,onSubmit:(e,a)=>{setTimeout(async()=>{await(async e=>{try{const a=o[0],t=new FormData;t.append("number",e.number),t.append("body",a.name),t.append("medias",a),await ze.a.request({url:"https://boostybackend-production.up.railway.app/api/messages/send",method:"POST",data:t,headers:{"Content-type":"multipart/form-data",Authorization:"Bearer ".concat(e.token)}}),C.b.success("Mensagem enviada com sucesso")}catch(a){We(a)}})(e),a.setSubmitting(!1),a.resetForm(),document.getElementById("medias").files=null,document.getElementById("medias").value=null},400)},className:e.elementMargin},a=>{let{isSubmitting:t}=a;return l.a.createElement(Ft.d,{className:e.formContainer},l.a.createElement(Mt.a,{container:!0,spacing:2},l.a.createElement(Mt.a,{item:!0,xs:12,md:6},l.a.createElement(Ft.b,{as:la.a,label:De.a.t("messagesAPI.mediaMessage.token"),name:"token",autoFocus:!0,variant:"outlined",margin:"dense",fullWidth:!0,className:e.textField,required:!0})),l.a.createElement(Mt.a,{item:!0,xs:12,md:6},l.a.createElement(Ft.b,{as:la.a,label:De.a.t("messagesAPI.mediaMessage.number"),name:"number",autoFocus:!0,variant:"outlined",margin:"dense",fullWidth:!0,className:e.textField,required:!0})),l.a.createElement(Mt.a,{item:!0,xs:12},l.a.createElement("input",{type:"file",name:"medias",id:"medias",required:!0,onChange:e=>i(e.target.files)})),l.a.createElement(Mt.a,{item:!0,xs:12,className:e.textRight},l.a.createElement(ra.a,{type:"submit",color:"primary",variant:"contained",className:e.btnWrapper},t?l.a.createElement(za.a,{size:24,className:e.buttonProgress}):"Enviar"))))}))))};const Gs=Object(A.a)(e=>({mainPaperContainer:{overflowY:"auto",maxHeight:"calc(100vh - 200px)"},mainPaper:{width:"100%",display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(320px, 1fr))",gap:e.spacing(3),padding:e.spacing(2),marginBottom:e.spacing(3)},helpPaper:{position:"relative",width:"100%",minHeight:"340px",padding:e.spacing(2),boxShadow:e.shadows[3],borderRadius:e.spacing(1),cursor:"pointer",display:"flex",flexDirection:"column",justifyContent:"space-between",maxWidth:"340px"},paperHover:{transition:"transform 0.3s, box-shadow 0.3s","&:hover":{transform:"scale(1.03)",boxShadow:"0 0 8px",color:e.palette.primary.main}},videoThumbnail:{width:"100%",height:"calc(100% - 56px)",objectFit:"cover",borderRadius:"".concat(e.spacing(1),"px ").concat(e.spacing(1),"px 0 0")},videoTitle:{marginTop:e.spacing(1),flex:1},videoDescription:{maxHeight:"100px",overflow:"hidden"},videoModal:{display:"flex",alignItems:"center",justifyContent:"center"},videoModalContent:{outline:"none",width:"90%",maxWidth:1024,aspectRatio:"16/9",position:"relative",backgroundColor:"white",borderRadius:e.spacing(1),overflow:"hidden"}}));var Ks=()=>{const e=Gs(),[a,t]=Object(n.useState)([]),{list:r}=Vi(),[o,i]=Object(n.useState)(null);Object(n.useEffect)(()=>{!async function(){const e=await r();t(e)}()},[]);const c=()=>{i(null)},s=Object(n.useCallback)(e=>{"Escape"===e.key&&c()},[]);Object(n.useEffect)(()=>(document.addEventListener("keydown",s),()=>{document.removeEventListener("keydown",s)}),[s]);return l.a.createElement(mi,null,l.a.createElement(pi,null,l.a.createElement(bi,null,De.a.t("helps.title")," (",a.length,")"),l.a.createElement(Ei,null)),l.a.createElement("div",{className:e.mainPaper},l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"".concat(e.mainPaper," ").concat(e.mainPaperContainer)},a.length?a.map((a,t)=>l.a.createElement(ht.a,{key:t,className:"".concat(e.helpPaper," ").concat(e.paperHover),onClick:()=>{return e=a.video,void i(e);var e}},l.a.createElement("img",{src:"https://img.youtube.com/vi/".concat(a.video,"/mqdefault.jpg"),alt:"Thumbnail",className:e.videoThumbnail}),l.a.createElement(R.a,{variant:"button",className:e.videoTitle},a.title),l.a.createElement(R.a,{variant:"caption",className:e.videoDescription},a.description))):null))),l.a.createElement(Pt.a,{open:Boolean(o),onClose:c,className:e.videoModal},l.a.createElement("div",{className:e.videoModalContent},o&&l.a.createElement("iframe",{style:{width:"100%",height:"100%",position:"absolute",top:0,left:0},src:"https://www.youtube.com/embed/".concat(o),title:"YouTube video player",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}))))},Ys=t(913),Qs=t.n(Ys);const Xs=Object(A.a)(e=>({root:{display:"flex",flexWrap:"wrap"},multFieldLine:{display:"flex","& > *:not(:last-child)":{marginRight:e.spacing(1)}},btnWrapper:{position:"relative"},buttonProgress:{color:Ra.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},formControl:{margin:e.spacing(1),minWidth:120}})),Js=Lt.b().shape({name:Lt.d().min(2,"Too Short!").max(50,"Too Long!").required("Required")});var Zs=e=>{let{open:a,onClose:t,contactListId:r}=e;const o=Xs(),i={name:""},[c,s]=Object(n.useState)(i);Object(n.useEffect)(()=>{(async()=>{if(r)try{const{data:e}=await _e.get("/contact-lists/".concat(r));s(a=>({...a,...e}))}catch(e){We(e)}})()},[r,a]);const d=()=>{t(),s(i)};return l.a.createElement("div",{className:o.root},l.a.createElement(tt.a,{open:a,onClose:d,maxWidth:"xs",fullWidth:!0,scroll:"paper"},l.a.createElement(gt.a,{id:"form-dialog-title"},"".concat(r?De.a.t("contactLists.dialog.edit"):De.a.t("contactLists.dialog.add"))),l.a.createElement(Ft.e,{initialValues:c,enableReinitialize:!0,validationSchema:Js,onSubmit:(e,a)=>{setTimeout(()=>{(async e=>{const a={...e};try{r?await _e.put("/contact-lists/".concat(r),a):await _e.post("/contact-lists",a),C.b.success(De.a.t("contactList.dialog"))}catch(t){We(t)}d()})(e),a.setSubmitting(!1)},400)}},e=>{let{touched:a,errors:t,isSubmitting:n}=e;return l.a.createElement(Ft.d,null,l.a.createElement(pt.a,{dividers:!0},l.a.createElement("div",{className:o.multFieldLine},l.a.createElement(Ft.b,{as:la.a,label:De.a.t("contactLists.dialog.name"),autoFocus:!0,name:"name",error:a.name&&Boolean(t.name),helperText:a.name&&t.name,variant:"outlined",margin:"dense",fullWidth:!0}))),l.a.createElement(nt.a,null,l.a.createElement(ra.a,{onClick:d,color:"secondary",disabled:n,variant:"outlined"},De.a.t("contactLists.dialog.cancel")),l.a.createElement(ra.a,{type:"submit",color:"primary",disabled:n,variant:"contained",className:o.btnWrapper},"".concat(r?De.a.t("contactLists.dialog.okEdit"):De.a.t("contactLists.dialog.okAdd")),n&&l.a.createElement(za.a,{size:24,className:o.buttonProgress}))))})))},$s=t(547),ed=t.n($s);const ad=(e,a)=>{if("LOAD_CONTACTLISTS"===a.type){const t=a.payload,n=[];return t.forEach(a=>{const t=e.findIndex(e=>e.id===a.id);-1!==t?e[t]=a:n.push(a)}),[...e,...n]}if("UPDATE_CONTACTLIST"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n?(e[n]=t,[...e]):[t,...e]}if("DELETE_CONTACTLIST"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t);return-1!==n&&e.splice(n,1),[...e]}if("RESET"===a.type)return[]},td=Object(A.a)(e=>({mainPaper:{flex:1,padding:e.spacing(1),overflowY:"scroll",...e.scrollbarStyles}}));var nd=()=>{const e=td(),a=Object(x.useHistory)(),[t,r]=Object(n.useState)(!1),[o,i]=Object(n.useState)(1),[c,s]=Object(n.useState)(!1),[d,m]=Object(n.useState)(null),[u,p]=Object(n.useState)(null),[g,E]=Object(n.useState)(!1),[b,f]=Object(n.useState)(!1),[h,v]=Object(n.useState)(""),[O,S]=Object(n.useReducer)(ad,[]),w=Object(n.useContext)(y);Object(n.useEffect)(()=>{S({type:"RESET"}),i(1)},[h]),Object(n.useEffect)(()=>{r(!0);const e=setTimeout(()=>{(async()=>{try{const{data:e}=await _e.get("/contact-lists/",{params:{searchParam:h,pageNumber:o}});S({type:"LOAD_CONTACTLISTS",payload:e.records}),s(e.hasMore),r(!1)}catch(e){We(e)}})()},500);return()=>clearTimeout(e)},[h,o]),Object(n.useEffect)(()=>{const e=localStorage.getItem("companyId"),a=w.getSocket(e);return a.on("company-".concat(e,"-ContactList"),e=>{"update"!==e.action&&"create"!==e.action||S({type:"UPDATE_CONTACTLIST",payload:e.record}),"delete"===e.action&&S({type:"DELETE_CONTACTLIST",payload:+e.id})}),()=>{a.disconnect()}},[w]);return l.a.createElement(mi,null,l.a.createElement(Et,{title:u&&"".concat(De.a.t("contactLists.confirmationModal.deleteTitle")," ").concat(u.name,"?"),open:b,onClose:f,onConfirm:()=>(async e=>{try{await _e.delete("/contact-lists/".concat(e)),C.b.success(De.a.t("contactLists.toasts.deleted"))}catch(a){We(a)}p(null),v(""),i(1)})(u.id)},De.a.t("contactLists.confirmationModal.deleteMessage")),l.a.createElement(Zs,{open:g,onClose:()=>{m(null),E(!1)},"aria-labelledby":"form-dialog-title",contactListId:d&&d.id}),l.a.createElement(pi,null,l.a.createElement(Mt.a,{style:{width:"99.6%"},container:!0},l.a.createElement(Mt.a,{xs:12,sm:8,item:!0},l.a.createElement(bi,null,De.a.t("contactLists.title"))),l.a.createElement(Mt.a,{xs:12,sm:4,item:!0},l.a.createElement(Mt.a,{spacing:2,container:!0},l.a.createElement(Mt.a,{xs:7,sm:6,item:!0},l.a.createElement(la.a,{fullWidth:!0,placeholder:De.a.t("contacts.searchPlaceholder"),type:"search",value:h,onChange:e=>{v(e.target.value.toLowerCase())},InputProps:{startAdornment:l.a.createElement(us.a,{position:"start"},l.a.createElement(Ql.a,{style:{color:"gray"}}))}})),l.a.createElement(Mt.a,{xs:5,sm:6,item:!0},l.a.createElement(ra.a,{fullWidth:!0,variant:"contained",color:"primary",onClick:()=>{m(null),E(!0)}},De.a.t("contactLists.buttons.add"))))))),l.a.createElement(ht.a,{className:e.mainPaper,variant:"outlined",onScroll:e=>{if(!c||t)return;const{scrollTop:a,scrollHeight:n,clientHeight:l}=e.currentTarget;n-(a+100)<l&&i(e=>e+1)}},l.a.createElement(bl.a,{size:"small"},l.a.createElement(vl.a,null,l.a.createElement(xl.a,null,l.a.createElement(hl.a,{align:"center"},De.a.t("contactLists.table.name")),l.a.createElement(hl.a,{align:"center"},De.a.t("contactLists.table.contacts")),l.a.createElement(hl.a,{align:"center"},De.a.t("contactLists.table.actions")))),l.a.createElement(fl.a,null,l.a.createElement(l.a.Fragment,null,O.map(e=>l.a.createElement(xl.a,{key:e.id},l.a.createElement(hl.a,{align:"center"},e.name),l.a.createElement(hl.a,{align:"center"},e.contactsCount||0),l.a.createElement(hl.a,{align:"center"},l.a.createElement("a",{href:ed.a,download:"planilha.xlsx"},l.a.createElement(T.a,{size:"small",title:"Baixar Planilha Exemplo"},l.a.createElement(Qs.a,null))),l.a.createElement(T.a,{size:"small",onClick:()=>{return t=e.id,void a.push("/contact-lists/".concat(t,"/contacts"));var t}},l.a.createElement(ke.a,null)),l.a.createElement(T.a,{size:"small",onClick:()=>(e=>{m(e),E(!0)})(e)},l.a.createElement(da.a,null)),l.a.createElement(T.a,{size:"small",onClick:a=>{f(!0),p(e)}},l.a.createElement(Wt.a,null))))),t&&l.a.createElement(hi,{columns:3}))))))},ld=t(914),rd=t.n(ld);const od=Object(A.a)(e=>({root:{display:"flex",flexWrap:"wrap"},textField:{marginRight:e.spacing(1),flex:1},extraAttr:{display:"flex",justifyContent:"center",alignItems:"center"},btnWrapper:{position:"relative"},buttonProgress:{color:Ra.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}})),id=Lt.b().shape({name:Lt.d().min(2,"Too Short!").max(50,"Too Long!").required("Required"),number:Lt.d().min(8,"Too Short!").max(50,"Too Long!"),email:Lt.d().email("Invalid email")});var cd=e=>{let{open:a,onClose:t,contactId:r,initialValues:o,onSave:i}=e;const c=od(),s=Object(n.useRef)(!0),{user:{companyId:d}}=Object(n.useContext)(Xe),{contactListId:m}=Object(x.useParams)(),u={name:"",number:"",email:""},[p,g]=Object(n.useState)(u);Object(n.useEffect)(()=>()=>{s.current=!1},[]),Object(n.useEffect)(()=>{(async()=>{if(o&&g(e=>({...e,...o})),r)try{const{data:e}=await _e.get("/contact-list-items/".concat(r));s.current&&g(e)}catch(e){We(e)}})()},[r,a,o]);const E=()=>{t(),g(u)};return l.a.createElement("div",{className:c.root},l.a.createElement(tt.a,{open:a,onClose:E,maxWidth:"lg",scroll:"paper"},l.a.createElement(gt.a,{id:"form-dialog-title"},"".concat(r?De.a.t("contactModal.title.edit"):De.a.t("contactModal.title.add"))),l.a.createElement(Ft.e,{initialValues:p,enableReinitialize:!0,validationSchema:id,onSubmit:(e,a)=>{setTimeout(()=>{(async e=>{try{if(r)await _e.put("/contact-list-items/".concat(r),{...e,companyId:d,contactListId:m}),E();else{const{data:a}=await _e.post("/contact-list-items",{...e,companyId:d,contactListId:m});i&&i(a),E()}C.b.success(De.a.t("contactModal.success"))}catch(a){We(a)}})(e),a.setSubmitting(!1)},400)}},e=>{let{values:a,errors:t,touched:n,isSubmitting:o}=e;return l.a.createElement(Ft.d,null,l.a.createElement(pt.a,{dividers:!0},l.a.createElement(R.a,{variant:"subtitle1",gutterBottom:!0},De.a.t("contactModal.form.mainInfo")),l.a.createElement(Ft.b,{as:la.a,label:De.a.t("contactModal.form.name"),name:"name",autoFocus:!0,error:n.name&&Boolean(t.name),helperText:n.name&&t.name,variant:"outlined",margin:"dense",className:c.textField}),l.a.createElement(Ft.b,{as:la.a,label:De.a.t("contactModal.form.number"),name:"number",error:n.number&&Boolean(t.number),helperText:n.number&&t.number,placeholder:"5513912344321",variant:"outlined",margin:"dense"}),l.a.createElement("div",null,l.a.createElement(Ft.b,{as:la.a,label:De.a.t("contactModal.form.email"),name:"email",error:n.email&&Boolean(t.email),helperText:n.email&&t.email,placeholder:"Email address",fullWidth:!0,margin:"dense",variant:"outlined"}))),l.a.createElement(nt.a,null,l.a.createElement(ra.a,{onClick:E,color:"secondary",disabled:o,variant:"outlined"},De.a.t("contactModal.buttons.cancel")),l.a.createElement(ra.a,{type:"submit",color:"primary",disabled:o,variant:"contained",className:c.btnWrapper},"".concat(r?De.a.t("contactModal.buttons.okEdit"):De.a.t("contactModal.buttons.okAdd")),o&&l.a.createElement(za.a,{size:24,className:c.buttonProgress}))))})))};var sd=()=>({findById:async e=>{const{data:a}=await _e.request({url:"/contact-lists/".concat(e),method:"GET"});return a},save:async e=>{const{data:a}=await _e.request({url:"/contact-lists",method:"POST",data:e});return a},update:async e=>{const{data:a}=await _e.request({url:"/contact-lists/".concat(e.id),method:"PUT",data:e});return a},deleteRecord:async e=>{const{data:a}=await _e.request({url:"/contact-lists/".concat(e),method:"DELETE"});return a},list:async e=>{const{data:a}=await _e.request({url:"/contact-lists/list",method:"GET",params:e});return a}});const dd=(e,a)=>{if("LOAD_CONTACTS"===a.type){const t=a.payload,n=[];return t.forEach(a=>{const t=e.findIndex(e=>e.id===a.id);-1!==t?e[t]=a:n.push(a)}),[...e,...n]}if("UPDATE_CONTACTS"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n?(e[n]=t,[...e]):[t,...e]}if("DELETE_CONTACT"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t);return-1!==n&&e.splice(n,1),[...e]}if("RESET"===a.type)return[]},md=Object(A.a)(e=>({mainPaper:{flex:1,padding:e.spacing(1),overflowY:"scroll",...e.scrollbarStyles}}));var ud=()=>{const e=md(),{user:a}=Object(n.useContext)(Xe),{contactListId:t}=Object(x.useParams)(),r=Object(x.useHistory)(),[o,i]=Object(n.useState)(!1),[c,s]=Object(n.useState)(1),[d,m]=Object(n.useState)(""),[u,p]=Object(n.useReducer)(dd,[]),[g,E]=Object(n.useState)(null),[b,f]=Object(n.useState)(!1),[h,v]=Object(n.useState)(null),[O,S]=Object(n.useState)(!1),[w,A]=Object(n.useState)(!1),[j,k]=Object(n.useState)({}),I=Object(n.useRef)(null),{findById:N}=sd(),M=Object(n.useContext)(y);Object(n.useEffect)(()=>{N(t).then(e=>{k(e)})},[t]),Object(n.useEffect)(()=>{p({type:"RESET"}),s(1)},[d]),Object(n.useEffect)(()=>{i(!0);const e=setTimeout(()=>{(async()=>{try{const{data:e}=await _e.get("contact-list-items",{params:{searchParam:d,pageNumber:c,contactListId:t}});p({type:"LOAD_CONTACTS",payload:e.contacts}),A(e.hasMore),i(!1)}catch(e){We(e)}})()},500);return()=>clearTimeout(e)},[d,c,t]),Object(n.useEffect)(()=>{const e=localStorage.getItem("companyId"),a=M.getSocket(e);return a.on("company-".concat(e,"-ContactListItem"),e=>{"update"!==e.action&&"create"!==e.action||p({type:"UPDATE_CONTACTS",payload:e.record}),"delete"===e.action&&p({type:"DELETE_CONTACT",payload:+e.id}),"reload"===e.action&&p({type:"LOAD_CONTACTS",payload:e.records})}),a.on("company-".concat(e,"-ContactListItem-").concat(t),e=>{"reload"===e.action&&p({type:"LOAD_CONTACTS",payload:e.records})}),()=>{a.disconnect()}},[t,M]);return l.a.createElement(mi,{className:e.mainContainer},l.a.createElement(cd,{open:b,onClose:()=>{E(null),f(!1)},"aria-labelledby":"form-dialog-title",contactId:g}),l.a.createElement(Et,{title:h?"".concat(De.a.t("contactListItems.confirmationModal.deleteTitle")," ").concat(h.name,"?"):"".concat(De.a.t("contactListItems.confirmationModal.importTitlte")),open:O,onClose:S,onConfirm:()=>h?(async e=>{try{await _e.delete("/contact-list-items/".concat(e)),C.b.success(De.a.t("contacts.toasts.deleted"))}catch(a){We(a)}v(null),m(""),s(1)})(h.id):(async()=>{try{const e=new FormData;e.append("file",I.current.files[0]),await _e.request({url:"contact-lists/".concat(t,"/upload"),method:"POST",data:e})}catch(e){We(e)}})()},h?"".concat(De.a.t("contactListItems.confirmationModal.deleteMessage")):l.a.createElement(l.a.Fragment,null,De.a.t("contactListItems.confirmationModal.importMessage"),l.a.createElement("a",{href:ed.a,download:"planilha.xlsx"},"Clique aqui para baixar planilha exemplo."))),l.a.createElement(pi,null,l.a.createElement(Mt.a,{style:{width:"99.6%"},container:!0},l.a.createElement(Mt.a,{xs:12,sm:5,item:!0},l.a.createElement(bi,null,j.name)),l.a.createElement(Mt.a,{xs:12,sm:7,item:!0},l.a.createElement(Mt.a,{spacing:2,container:!0},l.a.createElement(Mt.a,{xs:12,sm:6,item:!0},l.a.createElement(la.a,{fullWidth:!0,placeholder:De.a.t("contactListItems.searchPlaceholder"),type:"search",value:d,onChange:e=>{m(e.target.value.toLowerCase())},InputProps:{startAdornment:l.a.createElement(us.a,{position:"start"},l.a.createElement(Ql.a,{style:{color:"gray"}}))}})),l.a.createElement(Mt.a,{xs:4,sm:2,item:!0},l.a.createElement(ra.a,{fullWidth:!0,variant:"contained",color:"primary",onClick:()=>{r.push("/contact-lists")}},De.a.t("contactListItems.buttons.lists"))),l.a.createElement(Mt.a,{xs:4,sm:2,item:!0},l.a.createElement(ra.a,{fullWidth:!0,variant:"contained",color:"primary",onClick:()=>{I.current.value=null,I.current.click()}},De.a.t("contactListItems.buttons.import"))),l.a.createElement(Mt.a,{xs:4,sm:2,item:!0},l.a.createElement(ra.a,{fullWidth:!0,variant:"contained",color:"primary",onClick:()=>{E(null),f(!0)}},De.a.t("contactListItems.buttons.add"))))))),l.a.createElement(ht.a,{className:e.mainPaper,variant:"outlined",onScroll:e=>{if(!w||o)return;const{scrollTop:a,scrollHeight:t,clientHeight:n}=e.currentTarget;t-(a+100)<n&&s(e=>e+1)}},l.a.createElement(l.a.Fragment,null,l.a.createElement("input",{style:{display:"none"},id:"upload",name:"file",type:"file",accept:".xls,.xlsx",onChange:()=>{S(!0)},ref:I})),l.a.createElement(bl.a,{size:"small"},l.a.createElement(vl.a,null,l.a.createElement(xl.a,null,l.a.createElement(hl.a,{align:"center",style:{width:"0%"}},"#"),l.a.createElement(hl.a,null,De.a.t("contactListItems.table.name")),l.a.createElement(hl.a,{align:"center"},De.a.t("contactListItems.table.number")),l.a.createElement(hl.a,{align:"center"},De.a.t("contactListItems.table.email")),l.a.createElement(hl.a,{align:"center"},De.a.t("contactListItems.table.actions")))),l.a.createElement(fl.a,null,l.a.createElement(l.a.Fragment,null,u.map(e=>l.a.createElement(xl.a,{key:e.id},l.a.createElement(hl.a,{align:"center",style:{width:"0%"}},l.a.createElement(T.a,null,e.isWhatsappValid?l.a.createElement(Ot.a,{titleAccess:"Whatsapp V\xe1lido",htmlColor:"green"}):l.a.createElement(rd.a,{titleAccess:"Whatsapp Inv\xe1lido",htmlColor:"grey"}))),l.a.createElement(hl.a,null,e.name),l.a.createElement(hl.a,{align:"center"},e.number),l.a.createElement(hl.a,{align:"center"},e.email),l.a.createElement(hl.a,{align:"center"},l.a.createElement(T.a,{size:"small",onClick:()=>{return a=e.id,E(a),void f(!0);var a}},l.a.createElement(da.a,null)),l.a.createElement($e,{role:a.profile,perform:"contacts-page:deleteContact",yes:()=>l.a.createElement(T.a,{size:"small",onClick:()=>{S(!0),v(e)}},l.a.createElement(Wt.a,null))})))),o&&l.a.createElement(hi,{columns:4}))))))};const pd=t(1313),gd=Object(A.a)(e=>({root:{display:"flex",flexWrap:"wrap"},multFieldLine:{display:"flex","& > *:not(:last-child)":{marginRight:e.spacing(1)}},btnWrapper:{position:"relative"},buttonProgress:{color:Ra.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},formControl:{margin:e.spacing(1),minWidth:120},colorAdorment:{width:20,height:20}})),Ed=Lt.b().shape({shortcode:Lt.d().required("Obrigat\xf3rio")});var bd=e=>{let{open:a,onClose:t,quickemessageId:r,reload:o}=e;const i=gd(),{user:c}=Object(n.useContext)(Xe),{profile:s}=c,d=Object(n.useRef)(),m={shortcode:"",message:"",geral:!1,status:!0},[u,p]=Object(n.useState)(!1),[g,E]=Object(n.useState)(m),[b,f]=Object(n.useState)(null),h=Object(n.useRef)(null);Object(n.useEffect)(()=>{try{(async()=>{if(!r)return;const{data:e}=await _e.get("/quick-messages/".concat(r));E(a=>({...a,...e}))})()}catch(e){We(e)}},[r,a]);const y=()=>{E(m),f(null),t()};return l.a.createElement("div",{className:i.root},l.a.createElement(Et,{title:De.a.t("quickMessages.confirmationModal.deleteTitle"),open:u,onClose:()=>p(!1),onConfirm:async()=>{b&&(f(null),h.current.value=null),g.mediaPath&&(await _e.delete("/quick-messages/".concat(g.id,"/media-upload")),E(e=>({...e,mediaPath:null})),C.b.success(De.a.t("quickMessages.toasts.deleted")),"function"==typeof o&&o())}},De.a.t("quickMessages.confirmationModal.deleteMessage")),l.a.createElement(tt.a,{open:a,onClose:y,maxWidth:"xs",fullWidth:!0,scroll:"paper"},l.a.createElement(gt.a,{id:"form-dialog-title"},"".concat(r?De.a.t("quickMessages.dialog.edit"):De.a.t("quickMessages.dialog.add"))),l.a.createElement("div",{style:{display:"none"}},l.a.createElement("input",{type:"file",ref:h,onChange:e=>(e=>{const a=Object(qe.head)(e.target.files);a&&f(a)})(e)})),l.a.createElement(Ft.e,{initialValues:g,enableReinitialize:!0,validationSchema:Ed,onSubmit:(e,a)=>{setTimeout(()=>{(async e=>{const a={...e,isMedia:!0,mediaPath:b?String(b.name).replace(/ /g,"_"):e.mediaPath?pd.basename(e.mediaPath).replace(/ /g,"_"):null};try{if(r){if(await _e.put("/quick-messages/".concat(r),a),null!=b){const e=new FormData;e.append("typeArch","quickMessage"),e.append("file",b),await _e.post("/quick-messages/".concat(r,"/media-upload"),e)}}else{const{data:e}=await _e.post("/quick-messages",a);if(null!=b){const a=new FormData;a.append("typeArch","quickMessage"),a.append("file",b),await _e.post("/quick-messages/".concat(e.id,"/media-upload"),a)}}C.b.success(De.a.t("quickMessages.toasts.success")),"function"==typeof o&&o()}catch(t){We(t)}y()})(e),a.setSubmitting(!1)},400)}},e=>{let{touched:a,errors:t,isSubmitting:n,setFieldValue:o,values:c}=e;return l.a.createElement(Ft.d,null,l.a.createElement(pt.a,{dividers:!0},l.a.createElement(Mt.a,{spacing:2,container:!0},l.a.createElement(Mt.a,{xs:12,item:!0},l.a.createElement(Ft.b,{as:la.a,autoFocus:!0,label:De.a.t("quickMessages.dialog.shortcode"),name:"shortcode",error:a.shortcode&&Boolean(t.shortcode),helperText:a.shortcode&&t.shortcode,variant:"outlined",margin:"dense",fullWidth:!0})),"admin"===s&&l.a.createElement(Mt.a,{xs:12,item:!0},l.a.createElement(On.a,{variant:"outlined",margin:"dense",fullWidth:!0},l.a.createElement(Cn.a,{id:"geral-selection-label"},De.a.t("quickMessages.dialog.geral")),l.a.createElement(Ft.b,{as:Ht.a,label:De.a.t("quickMessages.dialog.geral"),placeholder:De.a.t("quickMessages.dialog.geral"),labelId:"geral-selection-label",id:"geral",name:"geral",error:a.geral&&Boolean(t.geral)},l.a.createElement(L.a,{value:!0},"Ativo"),l.a.createElement(L.a,{value:!1},"Inativo")))),l.a.createElement(Mt.a,{xs:12,item:!0},l.a.createElement(Ft.b,{as:la.a,label:De.a.t("quickMessages.dialog.message"),name:"message",inputRef:d,error:a.message&&Boolean(t.message),helperText:a.message&&t.message,variant:"outlined",margin:"dense",multiline:!0,rows:7,fullWidth:!0})),l.a.createElement(Mt.a,{item:!0},l.a.createElement(fo,{disabled:n,onClick:e=>(async(e,a)=>{const t=d.current,n=t.value.substring(0,t.selectionStart),l=t.value.substring(t.selectionEnd),r=t.selectionStart+e.length;a("message","".concat(n).concat(e).concat(l)),await new Promise(e=>setTimeout(e,100)),d.current.setSelectionRange(r,r)})(e,o)})),(g.mediaPath||b)&&l.a.createElement(Mt.a,{xs:12,item:!0},l.a.createElement(ra.a,{startIcon:l.a.createElement(Rr.a,null)},b?b.name:g.mediaName),l.a.createElement(T.a,{onClick:()=>p(!0),color:"secondary"},l.a.createElement(Wt.a,{color:"secondary"}))))),l.a.createElement(nt.a,null,!b&&!g.mediaPath&&l.a.createElement(ra.a,{color:"primary",onClick:()=>h.current.click(),disabled:n,variant:"outlined"},De.a.t("quickMessages.buttons.attach")),l.a.createElement(ra.a,{onClick:y,color:"secondary",disabled:n,variant:"outlined"},De.a.t("quickMessages.buttons.cancel")),l.a.createElement(ra.a,{type:"submit",color:"primary",disabled:n,variant:"contained",className:i.btnWrapper},"".concat(r?De.a.t("quickMessages.buttons.edit"):De.a.t("quickMessages.buttons.add")),n&&l.a.createElement(za.a,{size:24,className:i.buttonProgress}))))})))};const fd=(e,a)=>{if("LOAD_QUICKMESSAGES"===a.type){const t=a.payload,n=[];return Object(qe.isArray)(t)&&t.forEach(a=>{const t=e.findIndex(e=>e.id===a.id);-1!==t?e[t]=a:n.push(a)}),[...e,...n]}if("UPDATE_QUICKMESSAGES"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n?(e[n]=t,[...e]):[t,...e]}if("DELETE_QUICKMESSAGE"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t);return-1!==n&&e.splice(n,1),[...e]}if("RESET"===a.type)return[]},hd=Object(A.a)(e=>({mainPaper:{flex:1,padding:e.spacing(1),overflowY:"scroll",...e.scrollbarStyles}}));var yd=()=>{const e=hd(),[a,t]=Object(n.useState)(!1),[r,o]=Object(n.useState)(1),[i,c]=Object(n.useState)(!1),[s,d]=Object(n.useState)(null),[m,u]=Object(n.useState)(null),[p,g]=Object(n.useState)(!1),[E,b]=Object(n.useState)(!1),[f,h]=Object(n.useState)(""),[v,x]=Object(n.useReducer)(fd,[]),{user:O}=Object(n.useContext)(Xe),{profile:S}=O,w=Object(n.useContext)(y);Object(n.useEffect)(()=>{x({type:"RESET"}),o(1)},[f]),Object(n.useEffect)(()=>{t(!0);const e=setTimeout(()=>{A()},500);return()=>clearTimeout(e)},[f,r]),Object(n.useEffect)(()=>{const e=O.companyId,a=w.getSocket(e);return a.on("company".concat(e,"-quickemessage"),e=>{"update"!==e.action&&"create"!==e.action||x({type:"UPDATE_QUICKMESSAGES",payload:e.record}),"delete"===e.action&&x({type:"DELETE_QUICKMESSAGE",payload:+e.id})}),()=>{a.disconnect()}},[w,O.companyId]);const A=async()=>{try{const e=localStorage.getItem("companyId"),{data:a}=await _e.get("/quick-messages/list",{params:{companyId:e,userId:O.id}});x({type:"LOAD_QUICKMESSAGES",payload:a}),c(a.hasMore),t(!1)}catch(e){We(e)}};return l.a.createElement(mi,null,l.a.createElement(Et,{title:m&&"".concat(De.a.t("quickMessages.confirmationModal.deleteTitle")," ").concat(m.shortcode,"?"),open:E,onClose:b,onConfirm:()=>(async e=>{try{await _e.delete("/quick-messages/".concat(e)),C.b.success(De.a.t("quickemessages.toasts.deleted"))}catch(a){We(a)}u(null),h(""),o(1),A(),x({type:"RESET"})})(m.id)},De.a.t("quickMessages.confirmationModal.deleteMessage")),l.a.createElement(bd,{resetPagination:()=>{o(1),A()},open:p,onClose:()=>{d(null),g(!1),A()},"aria-labelledby":"form-dialog-title",quickemessageId:s&&s.id}),l.a.createElement(pi,null,l.a.createElement(Mt.a,{style:{width:"99.6%"},container:!0},l.a.createElement(Mt.a,{xs:12,sm:8,item:!0},l.a.createElement(bi,null,De.a.t("quickMessages.title"))),l.a.createElement(Mt.a,{xs:12,sm:4,item:!0},l.a.createElement(Mt.a,{spacing:2,container:!0},l.a.createElement(Mt.a,{xs:6,sm:6,item:!0},l.a.createElement(la.a,{fullWidth:!0,placeholder:De.a.t("quickMessages.searchPlaceholder"),type:"search",value:f,onChange:e=>{h(e.target.value.toLowerCase())},InputProps:{startAdornment:l.a.createElement(us.a,{position:"start"},l.a.createElement(Ql.a,{style:{color:"gray"}}))}})),l.a.createElement(Mt.a,{xs:6,sm:6,item:!0},l.a.createElement(ra.a,{fullWidth:!0,variant:"contained",onClick:()=>{d(null),g(!0)},color:"primary"},De.a.t("quickMessages.buttons.add"))))))),l.a.createElement(ht.a,{className:e.mainPaper,variant:"outlined",onScroll:e=>{if(!i||a)return;const{scrollTop:t,scrollHeight:n,clientHeight:l}=e.currentTarget;n-(t+100)<l&&o(e=>e+1)}},l.a.createElement(bl.a,{size:"small"},l.a.createElement(vl.a,null,l.a.createElement(xl.a,null,l.a.createElement(hl.a,{align:"center"},De.a.t("quickMessages.table.shortcode")),l.a.createElement(hl.a,{align:"center"},De.a.t("quickMessages.table.mediaName")),l.a.createElement(hl.a,{align:"center"},De.a.t("quickMessages.table.status")),l.a.createElement(hl.a,{align:"center"},De.a.t("quickMessages.table.actions")))),l.a.createElement(fl.a,null,l.a.createElement(l.a.Fragment,null,v.map(e=>{var a;return l.a.createElement(xl.a,{key:e.id},l.a.createElement(hl.a,{align:"center"},e.shortcode),l.a.createElement(hl.a,{align:"center"},null!==(a=e.mediaName)&&void 0!==a?a:"Sem anexo"),l.a.createElement(hl.a,{align:"center"},!0===e.geral?l.a.createElement(Ot.a,{style:{color:"green"}}):""),l.a.createElement(hl.a,{align:"center"},("admin"===S||"supervisor"===S||"user"===S&&!e.geral)&&l.a.createElement(T.a,{size:"small",onClick:()=>(e=>{d(e),g(!0)})(e)},l.a.createElement(da.a,null)),("admin"===S||"supervisor"===S||"user"===S&&!e.geral)&&l.a.createElement(T.a,{size:"small",onClick:a=>{b(!0),u(e)}},l.a.createElement(Wt.a,null))))}),a&&l.a.createElement(hi,{columns:5}))))))},vd=t(915),xd=t.n(vd);const Cd=Object(A.a)(e=>({root:{display:"flex",alignItems:"center",padding:e.spacing(1)},button:{background:"#10a110",border:"none",padding:"10px",color:"white",fontWeight:"bold",borderRadius:"5px"}}));var Od=()=>{const e=Cd(),a=Object(x.useHistory)(),[t,r]=Object(n.useState)([]),[o,i]=Object(n.useState)(!1),[c,s]=Object(n.useState)(!1);Object(n.useEffect)(()=>{(async()=>{try{const e=(await _e.get("/tags/kanban")).data.lista||[];r(e),await h(f)}catch(e){console.log(e)}})()},[]);const[d,m]=Object(n.useState)({lanes:[]}),[u,p]=Object(n.useState)([]),{user:g}=Object(n.useContext)(Xe),{profile:E,queues:b}=g,f=g.queues.map(e=>e.UserQueue.queueId),h=async e=>{try{const{data:a}=await _e.get("/ticket/kanban",{params:{queueIds:JSON.stringify(e),teste:!0}});p(a.tickets)}catch(a){console.log(a),p([])}},y=e=>{a.push("/tickets/"+e)};Object(n.useEffect)(()=>{(a=>{const n=u.filter(e=>0===e.tags.length),r=[{id:"lane0",title:De.a.t("En abierto"),label:"0",cards:n.map(a=>({id:a.id.toString(),label:"Ticket n\xba "+a.id.toString(),description:l.a.createElement("div",null,l.a.createElement("p",null,a.contact.number,l.a.createElement("br",null),a.lastMessage),l.a.createElement("button",{className:e.button,onClick:()=>{y(a.uuid)}},"Ver Conversaci\xf3n")),title:a.contact.name,draggable:!0,href:"/tickets/"+a.uuid}))},...t.map(a=>{const t=u.filter(e=>e.tags.map(e=>e.id).includes(a.id));return{id:a.id.toString(),title:a.name,label:a.id.toString(),cards:t.map(a=>({id:a.id.toString(),label:"Ticket n\xba "+a.id.toString(),description:l.a.createElement("div",null,l.a.createElement("p",null,a.contact.number,l.a.createElement("br",null),a.lastMessage),l.a.createElement("button",{className:e.button,onClick:()=>{y(a.uuid)}},"Ver Conversaci\xf3n")),title:a.contact.name,draggable:!0,href:"/tickets/"+a.uuid})),style:{backgroundColor:a.color,color:"white"}}})];m({lanes:r})})()},[t,u,o]);return l.a.createElement("div",{className:e.root},l.a.createElement(xd.a,{data:d,onCardMoveAcrossLanes:async(e,a,t)=>{try{await _e.delete("/ticket-tags/".concat(t)),C.b.success("Ticket Tag Removido!"),await _e.put("/ticket-tags/".concat(t,"/").concat(a)),C.b.success("Ticket Tag Adicionado com Sucesso!")}catch(n){console.log(n)}},style:{backgroundColor:"rgba(252, 252, 252, 0.03)"}}))};var Sd=e=>{let{component:a,isPrivate:t=!1,...r}=e;const{isAuth:o,loading:i}=Object(n.useContext)(Xe);return!o&&t?l.a.createElement(l.a.Fragment,null,i&&l.a.createElement(Mn,null),l.a.createElement(x.Redirect,{to:{pathname:"/login",state:{from:r.location}}})):o&&!t?l.a.createElement(l.a.Fragment,null,i&&l.a.createElement(Mn,null),l.a.createElement(x.Redirect,{to:{pathname:"/",state:{from:r.location}}}),";"):l.a.createElement(l.a.Fragment,null,i&&l.a.createElement(Mn,null),l.a.createElement(x.Route,Object.assign({},r,{component:a})))},wd=t(662);t(1353),t(1354),t(1355);const Ad={fontSize:"14px",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},jd=Object(wd.b)(w.a);var kd={date:"Fecha",time:"Hora",event:"Evento",allDay:"Todo el d\xeda",week:"Semana",work_week:"Agendamientos",day:"D\xeda",month:"Mes",previous:"Anterior",next:"Siguiente",yesterday:"Ayer",tomorrow:"Ma\xf1ana",today:"Hoy",agenda:"Agenda",noEventsInRange:"No hay eventos en el per\xedodo.",showMore:function(e){return"+"+e+" M\xe1s"}};const Td=(e,a)=>{if("LOAD_SCHEDULES"===a.type)return[...e,...a.payload];if("UPDATE_SCHEDULES"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n?(e[n]=t,[...e]):[t,...e]}if("DELETE_SCHEDULE"===a.type){const t=a.payload;return e.filter(e=>e.id!==t)}return"RESET"===a.type?[]:e},Id=Object(A.a)(e=>({mainPaper:{flex:1,padding:e.spacing(1),overflowY:"scroll",...e.scrollbarStyles}}));var Nd=()=>{const e=Id(),{user:a}=(Object(x.useHistory)(),Object(n.useContext)(Xe)),[t,r]=Object(n.useState)(!1),[o,i]=Object(n.useState)(1),[c,s]=Object(n.useState)(!1),[d,m]=Object(n.useState)(null),[u,p]=Object(n.useState)(null),[g,E]=Object(n.useState)(!1),[b,f]=Object(n.useState)(""),[h,v]=Object(n.useReducer)(Td,[]),[O,S]=Object(n.useState)(!1),[w,A]=Object(n.useState)((j="contactId",+new URLSearchParams(window.location.search).get(j)));var j;const k=Object(n.useCallback)(async()=>{try{const{data:e}=await _e.get("/schedules/",{params:{searchParam:b,pageNumber:o}});v({type:"LOAD_SCHEDULES",payload:e.schedules}),s(e.hasMore),r(!1)}catch(e){We(e)}},[b,o]),T=Object(n.useCallback)(()=>{w&&N()},[w]),I=Object(n.useContext)(y);Object(n.useEffect)(()=>{v({type:"RESET"}),i(1)},[b]),Object(n.useEffect)(()=>{r(!0);const e=setTimeout(()=>{k()},500);return()=>clearTimeout(e)},[b,o,w,k,T]),Object(n.useEffect)(()=>{T();const e=I.getSocket(a.companyId);return e.on("company".concat(a.companyId,"-schedule"),e=>{"update"!==e.action&&"create"!==e.action||v({type:"UPDATE_SCHEDULES",payload:e.schedule}),"delete"===e.action&&v({type:"DELETE_SCHEDULE",payload:+e.scheduleId})}),()=>{e.disconnect()}},[T,I,a]);const N=()=>{m(null),S(!0)},M=async e=>{try{await _e.delete("/schedules/".concat(e)),C.b.success(De.a.t("schedules.toasts.deleted"))}catch(a){We(a)}p(null),f(""),i(1),v({type:"RESET"}),i(1),await k()};return l.a.createElement(mi,null,l.a.createElement(Et,{title:u&&"".concat(De.a.t("schedules.confirmationModal.deleteTitle")),open:g,onClose:()=>E(!1),onConfirm:()=>M(u.id)},De.a.t("schedules.confirmationModal.deleteMessage")),l.a.createElement(vo,{open:O,onClose:()=>{m(null),S(!1)},reload:k,"aria-labelledby":"form-dialog-title",scheduleId:d&&d.id,contactId:w,cleanContact:()=>{A("")}}),l.a.createElement(pi,null,l.a.createElement(bi,null,De.a.t("schedules.title")," (",h.length,")"),l.a.createElement(Ei,null,l.a.createElement(la.a,{placeholder:De.a.t("contacts.searchPlaceholder"),type:"search",value:b,onChange:e=>{f(e.target.value.toLowerCase())},InputProps:{startAdornment:l.a.createElement(us.a,{position:"start"},l.a.createElement(Ql.a,{style:{color:"gray"}}))}}),l.a.createElement(ra.a,{variant:"contained",color:"primary",onClick:N},De.a.t("schedules.buttons.add")))),l.a.createElement(ht.a,{className:e.mainPaper,variant:"outlined",onScroll:e=>{if(!c||t)return;const{scrollTop:a,scrollHeight:n,clientHeight:l}=e.currentTarget;n-(a+100)<l&&i(e=>e+1)}},l.a.createElement(wd.a,{messages:kd,formats:{agendaDateFormat:"DD/MM ddd",weekdayFormat:"dddd"},localizer:jd,events:h.map(e=>({title:l.a.createElement("div",{className:"event-container"},l.a.createElement("div",{style:Ad},e.contact.name),l.a.createElement(Wt.a,{onClick:()=>M(e.id),className:"delete-icon"}),l.a.createElement(da.a,{onClick:()=>{(e=>{m(e),S(!0)})(e),S(!0)},className:"edit-icon"})),start:new Date(e.sendAt),end:new Date(e.sendAt)})),startAccessor:"start",endAccessor:"end",style:{height:500}})))},Md=t(646),Pd=t.n(Md),Rd=t(644),Dd=t.n(Rd),Ld=t(645),Fd=t.n(Ld);const qd=Object(A.a)(e=>({root:{display:"flex",flexWrap:"wrap",backgroundColor:"#fff"},tabmsg:{backgroundColor:e.palette.campaigntab},textField:{marginRight:e.spacing(1),flex:1},extraAttr:{display:"flex",justifyContent:"center",alignItems:"center"},btnWrapper:{position:"relative"},buttonProgress:{color:Ra.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}})),Wd=Lt.b().shape({name:Lt.d().min(2,"Too Short!").max(50,"Too Long!").required("Required")});var Bd=e=>{let{open:a,onClose:t,campaignId:r,initialValues:o,onSave:i,resetPagination:c}=e;const s=qd(),d=Object(n.useRef)(!0),{user:m}=Object(n.useContext)(Xe),{companyId:u}=m,[p,g]=Object(n.useState)(null),E={name:"",message1:"",message2:"",message3:"",message4:"",message5:"",confirmationMessage1:"",confirmationMessage2:"",confirmationMessage3:"",confirmationMessage4:"",confirmationMessage5:"",status:"INATIVA",confirmation:!1,scheduledAt:"",whatsappId:"",contactListId:"",tagListId:"Nenhuma",companyId:u},[b,f]=Object(n.useState)(E),[h,y]=Object(n.useState)([]),[v,x]=Object(n.useState)([]),[O,S]=Object(n.useState)(0),[A,j]=Object(n.useState)(null),[k,I]=Object(n.useState)(!1),[N,M]=Object(n.useState)(!0),P=Object(n.useRef)(null),[R,D]=Object(n.useState)([]);Object(n.useEffect)(()=>()=>{d.current=!1},[]),Object(n.useEffect)(()=>{(async()=>{try{const{data:e}=await _e.get("/files/",{params:{companyId:u}});g(e.files)}catch(e){We(e)}})()},[]),Object(n.useEffect)(()=>{if(d.current){if(o&&f(e=>({...e,...o})),_e.get("/contact-lists/list",{params:{companyId:u}}).then(e=>{let{data:a}=e;return x(a)}),_e.get("/whatsapp",{params:{companyId:u,session:0}}).then(e=>{let{data:a}=e;return y(a)}),_e.get("/tags",{params:{companyId:u}}).then(e=>{let{data:a}=e;const t=a.tags.map(e=>({id:e.id,name:e.name}));D(t)}).catch(e=>{console.error("Error retrieving tags:",e)}),!r)return;_e.get("/campaigns/".concat(r)).then(e=>{let{data:a}=e;f(e=>{let t=Object.assign({},e);return Object.entries(a).forEach(e=>{let[a,n]=e;t[a]="scheduledAt"===a&&""!==n&&null!==n?w()(n).format("YYYY-MM-DDTHH:mm"):null===n?"":n}),t})})}},[r,a,o]),Object(n.useEffect)(()=>{const e=w()(),a=w()(b.scheduledAt),t=!Number.isNaN(a.diff(e))&&a.diff(e,"hour")>1,n="INATIVA"===b.status||"PROGRAMADA"===b.status&&t;M(n)},[b.status,b.scheduledAt]);const F=()=>{t(),f(E)},q=e=>l.a.createElement(Ft.b,{as:la.a,id:e,name:e,fullWidth:!0,rows:5,label:De.a.t("campaigns.dialog.form.".concat(e)),placeholder:De.a.t("campaigns.dialog.form.messagePlaceholder"),multiline:!0,variant:"outlined",helperText:"Utiliza variables como {nome}, {numero}, {email} o define variables personalizadas.",disabled:!N&&"CANCELADA"!==b.status}),W=e=>l.a.createElement(Ft.b,{as:la.a,id:e,name:e,fullWidth:!0,rows:5,label:De.a.t("campaigns.dialog.form.".concat(e)),placeholder:De.a.t("campaigns.dialog.form.messagePlaceholder"),multiline:!0,variant:"outlined",disabled:!N&&"CANCELADA"!==b.status});return l.a.createElement("div",{className:s.root},l.a.createElement(Et,{title:De.a.t("campaigns.confirmationModal.deleteTitle"),open:k,onClose:()=>I(!1),onConfirm:async()=>{A&&(j(null),P.current.value=null),b.mediaPath&&(await _e.delete("/campaigns/".concat(b.id,"/media-upload")),f(e=>({...e,mediaPath:null,mediaName:null})),C.b.success(De.a.t("campaigns.toasts.deleted")))}},De.a.t("campaigns.confirmationModal.deleteMessage")),l.a.createElement(tt.a,{open:a,onClose:F,fullWidth:!0,maxWidth:"md",scroll:"paper"},l.a.createElement(gt.a,{id:"form-dialog-title"},N?l.a.createElement(l.a.Fragment,null,"".concat(r?De.a.t("campaigns.dialog.update"):De.a.t("campaigns.dialog.new"))):l.a.createElement(l.a.Fragment,null,"".concat(De.a.t("campaigns.dialog.readonly")))),l.a.createElement("div",{style:{display:"none"}},l.a.createElement("input",{type:"file",ref:P,onChange:e=>(e=>{const a=Object(qe.head)(e.target.files);a&&j(a)})(e)})),l.a.createElement(Ft.e,{initialValues:b,enableReinitialize:!0,validationSchema:Wd,onSubmit:(e,a)=>{setTimeout(()=>{(async e=>{try{const a={};if(Object.entries(e).forEach(e=>{let[t,n]=e;a[t]="scheduledAt"===t&&""!==n&&null!==n?w()(n).format("YYYY-MM-DD HH:mm:ss"):""===n?null:n}),r){if(await _e.put("/campaigns/".concat(r),a),null!=A){const e=new FormData;e.append("file",A),await _e.post("/campaigns/".concat(r,"/media-upload"),e)}F()}else{const{data:e}=await _e.post("/campaigns",a);if(null!=A){const a=new FormData;a.append("file",A),await _e.post("/campaigns/".concat(e.id,"/media-upload"),a)}i&&i(e),F()}C.b.success(De.a.t("campaigns.toasts.success"))}catch(a){console.log(a),We(a)}})(e),a.setSubmitting(!1)},400)}},e=>{let{values:a,errors:t,touched:n,isSubmitting:o}=e;return l.a.createElement(Ft.d,null,l.a.createElement(pt.a,{dividers:!0},l.a.createElement(Mt.a,{spacing:2,container:!0},l.a.createElement(Mt.a,{xs:12,item:!0},l.a.createElement(Ft.b,{as:la.a,label:De.a.t("campaigns.dialog.form.name"),name:"name",error:n.name&&Boolean(t.name),helperText:n.name&&t.name,variant:"outlined",margin:"dense",fullWidth:!0,className:s.textField,disabled:!N})),l.a.createElement(Mt.a,{xs:12,md:4,item:!0},l.a.createElement(On.a,{variant:"outlined",margin:"dense",fullWidth:!0,className:s.formControl},l.a.createElement(Cn.a,{id:"contactList-selection-label"},De.a.t("campaigns.dialog.form.contactList")),l.a.createElement(Ft.b,{as:Ht.a,label:De.a.t("campaigns.dialog.form.contactList"),placeholder:De.a.t("campaigns.dialog.form.contactList"),labelId:"contactList-selection-label",id:"contactListId",name:"contactListId",error:n.contactListId&&Boolean(t.contactListId),disabled:!N},l.a.createElement(L.a,{value:""},"Nenhuma"),v&&v.map(e=>l.a.createElement(L.a,{key:e.id,value:e.id},e.name))))),l.a.createElement(Mt.a,{xs:12,md:4,item:!0},l.a.createElement(On.a,{variant:"outlined",margin:"dense",fullWidth:!0,className:s.formControl},l.a.createElement(Cn.a,{id:"tagList-selection-label"},De.a.t("campaigns.dialog.form.tagList")),l.a.createElement(Ft.b,{as:Ht.a,label:De.a.t("campaigns.dialog.form.tagList"),placeholder:De.a.t("campaigns.dialog.form.tagList"),labelId:"tagList-selection-label",id:"tagListId",name:"tagListId",error:n.tagListId&&Boolean(t.tagListId),disabled:!N},l.a.createElement(L.a,{value:""},"Nenhuma"),Array.isArray(R)&&R.map(e=>l.a.createElement(L.a,{key:e.id,value:e.id},e.name))))),l.a.createElement(Mt.a,{xs:12,md:4,item:!0},l.a.createElement(On.a,{variant:"outlined",margin:"dense",fullWidth:!0,className:s.formControl},l.a.createElement(Cn.a,{id:"whatsapp-selection-label"},De.a.t("campaigns.dialog.form.whatsapp")),l.a.createElement(Ft.b,{as:Ht.a,label:De.a.t("campaigns.dialog.form.whatsapp"),placeholder:De.a.t("campaigns.dialog.form.whatsapp"),labelId:"whatsapp-selection-label",id:"whatsappId",name:"whatsappId",error:n.whatsappId&&Boolean(t.whatsappId),disabled:!N},l.a.createElement(L.a,{value:""},"Nenhuma"),h&&h.map(e=>l.a.createElement(L.a,{key:e.id,value:e.id},e.name))))),l.a.createElement(Mt.a,{xs:12,md:4,item:!0},l.a.createElement(Ft.b,{as:la.a,label:De.a.t("campaigns.dialog.form.scheduledAt"),name:"scheduledAt",error:n.scheduledAt&&Boolean(t.scheduledAt),helperText:n.scheduledAt&&t.scheduledAt,variant:"outlined",margin:"dense",type:"datetime-local",InputLabelProps:{shrink:!0},fullWidth:!0,className:s.textField,disabled:!N})),l.a.createElement(Mt.a,{xs:12,md:4,item:!0},l.a.createElement(On.a,{variant:"outlined",margin:"dense",className:s.FormControl,fullWidth:!0},l.a.createElement(Cn.a,{id:"fileListId-selection-label"},De.a.t("campaigns.dialog.form.fileList")),l.a.createElement(Ft.b,{as:Ht.a,label:De.a.t("campaigns.dialog.form.fileList"),name:"fileListId",id:"fileListId",placeholder:De.a.t("campaigns.dialog.form.fileList"),labelId:"fileListId-selection-label",value:a.fileListId||""},l.a.createElement(L.a,{value:""},"Nenhum"),p.map(e=>l.a.createElement(L.a,{key:e.id,value:e.id},e.name))))),l.a.createElement(Mt.a,{xs:12,item:!0},l.a.createElement(Xl.a,{value:O,indicatorColor:"primary",textColor:"primary",className:s.tabmsg,onChange:(e,a)=>S(a),variant:"fullWidth",centered:!0,style:{borderRadius:2}},l.a.createElement(Jl.a,{label:"Msg. 1",index:0}),l.a.createElement(Jl.a,{label:"Msg. 2",index:1}),l.a.createElement(Jl.a,{label:"Msg. 3",index:2}),l.a.createElement(Jl.a,{label:"Msg. 4",index:3}),l.a.createElement(Jl.a,{label:"Msg. 5",index:4})),l.a.createElement(Ma.a,{style:{paddingTop:20,border:"none"}},0===O&&l.a.createElement(l.a.Fragment,null,a.confirmation?l.a.createElement(Mt.a,{spacing:2,container:!0},l.a.createElement(Mt.a,{xs:12,md:8,item:!0},l.a.createElement(l.a.Fragment,null,q("message1"))),l.a.createElement(Mt.a,{xs:12,md:4,item:!0},l.a.createElement(l.a.Fragment,null,W("confirmationMessage1")))):l.a.createElement(l.a.Fragment,null,q("message1"))),1===O&&l.a.createElement(l.a.Fragment,null,a.confirmation?l.a.createElement(Mt.a,{spacing:2,container:!0},l.a.createElement(Mt.a,{xs:12,md:8,item:!0},l.a.createElement(l.a.Fragment,null,q("message2"))),l.a.createElement(Mt.a,{xs:12,md:4,item:!0},l.a.createElement(l.a.Fragment,null,W("confirmationMessage2")))):l.a.createElement(l.a.Fragment,null,q("message2"))),2===O&&l.a.createElement(l.a.Fragment,null,a.confirmation?l.a.createElement(Mt.a,{spacing:2,container:!0},l.a.createElement(Mt.a,{xs:12,md:8,item:!0},l.a.createElement(l.a.Fragment,null,q("message3"))),l.a.createElement(Mt.a,{xs:12,md:4,item:!0},l.a.createElement(l.a.Fragment,null,W("confirmationMessage3")))):l.a.createElement(l.a.Fragment,null,q("message3"))),3===O&&l.a.createElement(l.a.Fragment,null,a.confirmation?l.a.createElement(Mt.a,{spacing:2,container:!0},l.a.createElement(Mt.a,{xs:12,md:8,item:!0},l.a.createElement(l.a.Fragment,null,q("message4"))),l.a.createElement(Mt.a,{xs:12,md:4,item:!0},l.a.createElement(l.a.Fragment,null,W("confirmationMessage4")))):l.a.createElement(l.a.Fragment,null,q("message4"))),4===O&&l.a.createElement(l.a.Fragment,null,a.confirmation?l.a.createElement(Mt.a,{spacing:2,container:!0},l.a.createElement(Mt.a,{xs:12,md:8,item:!0},l.a.createElement(l.a.Fragment,null,q("message5"))),l.a.createElement(Mt.a,{xs:12,md:4,item:!0},l.a.createElement(l.a.Fragment,null,W("confirmationMessage5")))):l.a.createElement(l.a.Fragment,null,q("message5"))))),(b.mediaPath||A)&&l.a.createElement(Mt.a,{xs:12,item:!0},l.a.createElement(ra.a,{startIcon:l.a.createElement(Rr.a,null)},null!=A?A.name:b.mediaName),N&&l.a.createElement(T.a,{onClick:()=>I(!0),color:"secondary"},l.a.createElement(Wt.a,null))))),l.a.createElement(nt.a,null,"CANCELADA"===b.status&&l.a.createElement(ra.a,{color:"primary",onClick:()=>(async()=>{try{await _e.post("/campaigns/".concat(b.id,"/restart")),C.b.success(De.a.t("campaigns.toasts.restart")),f(e=>({...e,status:"EM_ANDAMENTO"})),c()}catch(e){C.b.error(e.message)}})(),variant:"outlined"},De.a.t("campaigns.dialog.buttons.restart")),"EM_ANDAMENTO"===b.status&&l.a.createElement(ra.a,{color:"primary",onClick:()=>(async()=>{try{await _e.post("/campaigns/".concat(b.id,"/cancel")),C.b.success(De.a.t("campaigns.toasts.cancel")),f(e=>({...e,status:"CANCELADA"})),c()}catch(e){C.b.error(e.message)}})(),variant:"outlined"},De.a.t("campaigns.dialog.buttons.cancel")),!A&&!b.mediaPath&&N&&l.a.createElement(ra.a,{color:"primary",onClick:()=>P.current.click(),disabled:o,variant:"outlined"},De.a.t("campaigns.dialog.buttons.attach")),l.a.createElement(ra.a,{onClick:F,color:"secondary",disabled:o,variant:"outlined"},De.a.t("campaigns.dialog.buttons.close")),(N||"CANCELADA"===b.status)&&l.a.createElement(ra.a,{type:"submit",color:"primary",disabled:o,variant:"contained",className:s.btnWrapper},"".concat(r?De.a.t("campaigns.dialog.buttons.edit"):De.a.t("campaigns.dialog.buttons.add")),o&&l.a.createElement(za.a,{size:24,className:s.buttonProgress}))))})))};const zd=(e,a)=>{if("LOAD_CAMPAIGNS"===a.type){const t=a.payload,n=[];return Object(qe.isArray)(t)&&t.forEach(a=>{const t=e.findIndex(e=>e.id===a.id);-1!==t?e[t]=a:n.push(a)}),[...e,...n]}if("UPDATE_CAMPAIGNS"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n?(e[n]=t,[...e]):[t,...e]}if("DELETE_CAMPAIGN"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t);return-1!==n&&e.splice(n,1),[...e]}if("RESET"===a.type)return[]},Ud=Object(A.a)(e=>({mainPaper:{flex:1,padding:e.spacing(1),overflowY:"scroll",...e.scrollbarStyles}}));var Hd=()=>{const e=Ud(),a=Object(x.useHistory)(),[t,r]=Object(n.useState)(!1),[o,i]=Object(n.useState)(1),[c,s]=Object(n.useState)(!1),[d,m]=Object(n.useState)(null),[u,p]=Object(n.useState)(null),[g,E]=Object(n.useState)(!1),[b,f]=Object(n.useState)(!1),[h,v]=Object(n.useState)(""),[O,S]=Object(n.useReducer)(zd,[]),{datetimeToClient:w}=_n(),A=Object(n.useContext)(y);Object(n.useEffect)(()=>{S({type:"RESET"}),i(1)},[h]),Object(n.useEffect)(()=>{r(!0);const e=setTimeout(()=>{j()},500);return()=>clearTimeout(e)},[h,o]),Object(n.useEffect)(()=>{const e=localStorage.getItem("companyId"),a=A.getSocket(e);return a.on("company-".concat(e,"-campaign"),e=>{"update"!==e.action&&"create"!==e.action||S({type:"UPDATE_CAMPAIGNS",payload:e.record}),"delete"===e.action&&S({type:"DELETE_CAMPAIGN",payload:+e.id})}),()=>{a.disconnect()}},[A]);const j=async()=>{try{const{data:e}=await _e.get("/campaigns/",{params:{searchParam:h,pageNumber:o}});S({type:"LOAD_CAMPAIGNS",payload:e.records}),s(e.hasMore),r(!1)}catch(e){We(e)}};return l.a.createElement(mi,null,l.a.createElement(Et,{title:u&&"".concat(De.a.t("campaigns.confirmationModal.deleteTitle")," ").concat(u.name,"?"),open:b,onClose:f,onConfirm:()=>(async e=>{try{await _e.delete("/campaigns/".concat(e)),C.b.success(De.a.t("campaigns.toasts.deleted"))}catch(a){We(a)}p(null),v(""),i(1)})(u.id)},De.a.t("campaigns.confirmationModal.deleteMessage")),l.a.createElement(Bd,{resetPagination:()=>{i(1),j()},open:g,onClose:()=>{m(null),E(!1)},"aria-labelledby":"form-dialog-title",campaignId:d&&d.id}),l.a.createElement(pi,null,l.a.createElement(Mt.a,{style:{width:"99.6%"},container:!0},l.a.createElement(Mt.a,{xs:12,sm:8,item:!0},l.a.createElement(bi,null,De.a.t("campaigns.title"))),l.a.createElement(Mt.a,{xs:12,sm:4,item:!0},l.a.createElement(Mt.a,{spacing:2,container:!0},l.a.createElement(Mt.a,{xs:6,sm:6,item:!0},l.a.createElement(la.a,{fullWidth:!0,placeholder:De.a.t("campaigns.searchPlaceholder"),type:"search",value:h,onChange:e=>{v(e.target.value.toLowerCase())},InputProps:{startAdornment:l.a.createElement(us.a,{position:"start"},l.a.createElement(Ql.a,{style:{color:"gray"}}))}})),l.a.createElement(Mt.a,{xs:6,sm:6,item:!0},l.a.createElement(ra.a,{fullWidth:!0,variant:"contained",onClick:()=>{m(null),E(!0)},color:"primary"},De.a.t("campaigns.buttons.add"))))))),l.a.createElement(ht.a,{className:e.mainPaper,variant:"outlined",onScroll:e=>{if(!c||t)return;const{scrollTop:a,scrollHeight:n,clientHeight:l}=e.currentTarget;n-(a+100)<l&&i(e=>e+1)}},l.a.createElement(bl.a,{size:"small"},l.a.createElement(vl.a,null,l.a.createElement(xl.a,null,l.a.createElement(hl.a,{align:"center"},De.a.t("campaigns.table.name")),l.a.createElement(hl.a,{align:"center"},De.a.t("campaigns.table.status")),l.a.createElement(hl.a,{align:"center"},De.a.t("campaigns.table.contactList")),l.a.createElement(hl.a,{align:"center"},De.a.t("campaigns.table.whatsapp")),l.a.createElement(hl.a,{align:"center"},De.a.t("campaigns.table.scheduledAt")),l.a.createElement(hl.a,{align:"center"},De.a.t("campaigns.table.completedAt")),l.a.createElement(hl.a,{align:"center"},De.a.t("campaigns.table.actions")))),l.a.createElement(fl.a,null,l.a.createElement(l.a.Fragment,null,O.map(e=>l.a.createElement(xl.a,{key:e.id},l.a.createElement(hl.a,{align:"center"},e.name),l.a.createElement(hl.a,{align:"center"},(e=>{switch(e){case"INATIVA":return"Inativa";case"PROGRAMADA":return"Programada";case"EM_ANDAMENTO":return"Em Andamento";case"CANCELADA":return"Cancelada";case"FINALIZADA":return"Finalizada";default:return e}})(e.status)),l.a.createElement(hl.a,{align:"center"},e.contactListId?e.contactList.name:"N\xe3o definida"),l.a.createElement(hl.a,{align:"center"},e.whatsappId?e.whatsapp.name:"N\xe3o definido"),l.a.createElement(hl.a,{align:"center"},e.scheduledAt?w(e.scheduledAt):"Sem agendamento"),l.a.createElement(hl.a,{align:"center"},e.completedAt?w(e.completedAt):"N\xe3o conclu\xedda"),l.a.createElement(hl.a,{align:"center"},"EM_ANDAMENTO"===e.status&&l.a.createElement(T.a,{onClick:()=>(async e=>{try{await _e.post("/campaigns/".concat(e.id,"/cancel")),C.b.success(De.a.t("campaigns.toasts.cancel")),i(1),j()}catch(a){C.b.error(a.message)}})(e),title:"Parar Campanha",size:"small"},l.a.createElement(Dd.a,null)),"CANCELADA"===e.status&&l.a.createElement(T.a,{onClick:()=>(async e=>{try{await _e.post("/campaigns/".concat(e.id,"/restart")),C.b.success(De.a.t("campaigns.toasts.restart")),i(1),j()}catch(a){C.b.error(a.message)}})(e),title:"Parar Campanha",size:"small"},l.a.createElement(Fd.a,null)),l.a.createElement(T.a,{onClick:()=>a.push("/campaign/".concat(e.id,"/report")),size:"small"},l.a.createElement(Pd.a,null)),l.a.createElement(T.a,{size:"small",onClick:()=>(e=>{m(e),E(!0)})(e)},l.a.createElement(da.a,null)),l.a.createElement(T.a,{size:"small",onClick:a=>{f(!0),p(e)}},l.a.createElement(Wt.a,null))))),t&&l.a.createElement(hi,{columns:8}))))))};const _d=Object(A.a)(e=>({mainPaper:{flex:1,padding:e.spacing(1),overflowY:"scroll",...e.scrollbarStyles},textRight:{textAlign:"right"},tabPanelsContainer:{padding:e.spacing(2)}})),Vd={messageInterval:20,longerIntervalAfter:20,greaterInterval:60,variables:[]};var Gd=()=>{const e=_d(),[a,t]=Object(n.useState)(Vd),[r,o]=Object(n.useState)(!1),[i,c]=Object(n.useState)(!1),[s,d]=Object(n.useState)(null),[m,u]=Object(n.useState)({key:"",value:""});Object(n.useEffect)(()=>{_e.get("/campaign-settings").then(e=>{let{data:a}=e;const n=[];Array.isArray(a)&&a.length>0&&(a.forEach(e=>{n.push([e.key,JSON.parse(e.value)])}),t(Object.fromEntries(n)))})},[]);const p=e=>{if(null!==e.target.value){const a={};a[e.target.name]=e.target.value,u(e=>({...e,...a}))}},g=e=>{const a={};a[e.target.name]=e.target.value,t(e=>({...e,...a}))};return l.a.createElement(mi,null,l.a.createElement(Et,{title:De.a.t("campaigns.confirmationModal.deleteTitle"),open:i,onClose:()=>c(!1),onConfirm:()=>{const e=a.variables.filter(e=>e.key!==s);t(a=>({...a,variables:e})),d(null)}},De.a.t("campaigns.confirmationModal.deleteMessage")),l.a.createElement(pi,null,l.a.createElement(Mt.a,{style:{width:"99.6%"},container:!0},l.a.createElement(Mt.a,{xs:12,item:!0},l.a.createElement(bi,null,De.a.t("campaignsConfig.title"))))),l.a.createElement(ht.a,{className:e.mainPaper,variant:"outlined"},l.a.createElement(Ma.a,{className:e.tabPanelsContainer},l.a.createElement(Mt.a,{spacing:2,container:!0},l.a.createElement(Mt.a,{xs:12,item:!0},l.a.createElement(R.a,{component:"h3"},"Intervalos")),l.a.createElement(Mt.a,{xs:12,md:4,item:!0},l.a.createElement(On.a,{variant:"outlined",className:e.formControl,fullWidth:!0},l.a.createElement(Cn.a,{id:"messageInterval-label"},"Intervalo Aleatorio de Disparo"),l.a.createElement(Ht.a,{name:"messageInterval",id:"messageInterval",labelId:"messageInterval-label",label:"Intervalo Aleatorio de Disparo",value:a.messageInterval,onChange:e=>g(e)},l.a.createElement(L.a,{value:0},"Sin Intervalo"),l.a.createElement(L.a,{value:5},"5 segundos"),l.a.createElement(L.a,{value:10},"10 segundos"),l.a.createElement(L.a,{value:15},"15 segundos"),l.a.createElement(L.a,{value:20},"20 segundos")))),l.a.createElement(Mt.a,{xs:12,md:4,item:!0},l.a.createElement(On.a,{variant:"outlined",className:e.formControl,fullWidth:!0},l.a.createElement(Cn.a,{id:"longerIntervalAfter-label"},"Intervalo Mayor Despu\xe9s"),l.a.createElement(Ht.a,{name:"longerIntervalAfter",id:"longerIntervalAfter",labelId:"longerIntervalAfter-label",label:"Intervalo Mayor Despu\xe9s",value:a.longerIntervalAfter,onChange:e=>g(e)},l.a.createElement(L.a,{value:0},"No definido"),l.a.createElement(L.a,{value:1},"1 segundo"),l.a.createElement(L.a,{value:5},"5 segundos"),l.a.createElement(L.a,{value:10},"10 segundos"),l.a.createElement(L.a,{value:15},"15 segundos"),l.a.createElement(L.a,{value:20},"20 segundos"),l.a.createElement(L.a,{value:30},"30 segundos"),l.a.createElement(L.a,{value:40},"40 segundos"),l.a.createElement(L.a,{value:60},"60 segundos"),l.a.createElement(L.a,{value:80},"80 segundos"),l.a.createElement(L.a,{value:100},"100 segundos"),l.a.createElement(L.a,{value:120},"120 segundos")))),l.a.createElement(Mt.a,{xs:12,md:4,item:!0},l.a.createElement(On.a,{variant:"outlined",className:e.formControl,fullWidth:!0},l.a.createElement(Cn.a,{id:"greaterInterval-label"},"Intervalo de Disparo Mayor"),l.a.createElement(Ht.a,{name:"greaterInterval",id:"greaterInterval",labelId:"greaterInterval-label",label:"Intervalo de Disparo Mayor",value:a.greaterInterval,onChange:e=>g(e)},l.a.createElement(L.a,{value:0},"Sin Intervalo"),l.a.createElement(L.a,{value:1},"1 segundo"),l.a.createElement(L.a,{value:5},"5 segundos"),l.a.createElement(L.a,{value:10},"10 segundos"),l.a.createElement(L.a,{value:15},"15 segundos"),l.a.createElement(L.a,{value:20},"20 segundos"),l.a.createElement(L.a,{value:30},"30 segundos"),l.a.createElement(L.a,{value:40},"40 segundos"),l.a.createElement(L.a,{value:60},"60 segundos"),l.a.createElement(L.a,{value:80},"80 segundos"),l.a.createElement(L.a,{value:100},"100 segundos"),l.a.createElement(L.a,{value:120},"120 segundos")))),l.a.createElement(Mt.a,{xs:12,className:e.textRight,item:!0},l.a.createElement(ra.a,{onClick:()=>o(!r),color:"primary",style:{marginRight:10}},"Agregar variable"),l.a.createElement(ra.a,{onClick:async()=>{await _e.post("/campaign-settings",{settings:a}),C.b.success("Configura\xe7\xf5es salvas")},color:"primary",variant:"contained"},"Guardar configuraciones")),r&&l.a.createElement(l.a.Fragment,null,l.a.createElement(Mt.a,{xs:12,md:6,item:!0},l.a.createElement(la.a,{label:"Atajo",variant:"outlined",value:m.key,name:"key",onChange:p,fullWidth:!0})),l.a.createElement(Mt.a,{xs:12,md:6,item:!0},l.a.createElement(la.a,{label:"Contenido",variant:"outlined",value:m.value,name:"value",onChange:p,fullWidth:!0})),l.a.createElement(Mt.a,{xs:12,className:e.textRight,item:!0},l.a.createElement(ra.a,{onClick:()=>o(!r),color:"primary",style:{marginRight:10}},"Cerrar"),l.a.createElement(ra.a,{onClick:()=>{t(e=>{const t=a.variables.filter(e=>e.key===m.key),n=e.variables;return 0===t.length&&(n.push(Object.assign({},m)),u({key:"",value:""})),{...e,variables:n}})},color:"primary",variant:"contained"},"Agregar"))),a.variables.length>0&&l.a.createElement(Mt.a,{xs:12,className:e.textRight,item:!0},l.a.createElement(bl.a,{size:"small"},l.a.createElement(vl.a,null,l.a.createElement(xl.a,null,l.a.createElement(hl.a,{style:{width:"1%"}}),l.a.createElement(hl.a,null,"Atajo"),l.a.createElement(hl.a,null,"Contenido"))),l.a.createElement(fl.a,null,Array.isArray(a.variables)&&a.variables.map((e,a)=>l.a.createElement(xl.a,{key:a},l.a.createElement(hl.a,null,l.a.createElement(T.a,{size:"small",onClick:()=>{d(e.key),c(!0)}},l.a.createElement(Wt.a,null))),l.a.createElement(hl.a,null,"{"+e.key+"}"),l.a.createElement(hl.a,null,e.value))))))))))},Kd=t(1582),Yd=t(647),Qd=t.n(Yd),Xd=t(932),Jd=t.n(Xd),Zd=t(930),$d=t.n(Zd),em=t(931),am=t.n(em);const tm=Object(A.a)(e=>({mainPaper:{flex:1,padding:e.spacing(2),overflowY:"scroll",...e.scrollbarStyles},textRight:{textAlign:"right"},tabPanelsContainer:{padding:e.spacing(2)}}));var nm=()=>{const e=tm(),{campaignId:a}=Object(x.useParams)(),[t,r]=Object(n.useState)({}),[o,i]=Object(n.useState)(0),[c,s]=Object(n.useState)(0),[d,m]=Object(n.useState)(0),[u,p]=Object(n.useState)(0),[g,E]=Object(n.useState)(0),[b,f]=Object(n.useState)(!1),h=Object(n.useRef)(!0),{datetimeToClient:v}=_n(),C=Object(n.useContext)(y);Object(n.useEffect)(()=>(h.current&&O(),()=>{h.current=!1}),[]),Object(n.useEffect)(()=>{if(h.current&&Object(qe.has)(t,"shipping")){if(Object(qe.has)(t,"contactList")){const e=Object(qe.get)(t,"contactList").contacts.filter(e=>e.isWhatsappValid);i(e.length)}if(Object(qe.has)(t,"shipping")){const e=Object(qe.get)(t,"shipping"),a=e.filter(e=>!Object(qe.isNull)(e.deliveredAt)),n=e.filter(e=>!Object(qe.isNull)(e.confirmationRequestedAt)),l=e.filter(e=>!Object(qe.isNull)(e.deliveredAt)&&!Object(qe.isNull)(e.confirmationRequestedAt));s(a.length),m(n.length),p(l.length),s(a.length)}}},[t]),Object(n.useEffect)(()=>{E(c/o*100)},[c,o]),Object(n.useEffect)(()=>{const e=localStorage.getItem("companyId"),t=C.getSocket(e);return t.on("company-".concat(e,"-campaign"),e=>{e.record.id===+a&&(r(e.record),"FINALIZADA"===e.record.status&&setTimeout(()=>{O()},5e3))}),()=>{t.disconnect()}},[a,C]);const O=async()=>{f(!0);const{data:e}=await _e.get("/campaigns/".concat(a));r(e),f(!1)};return l.a.createElement(mi,null,l.a.createElement(pi,null,l.a.createElement(Mt.a,{style:{width:"99.6%"},container:!0},l.a.createElement(Mt.a,{xs:12,item:!0},l.a.createElement(bi,null,"Relat\xf3rio da ",t.name||"Campanha")))),l.a.createElement(ht.a,{className:e.mainPaper,variant:"outlined"},l.a.createElement(R.a,{variant:"h6",component:"h2"},"Status: ",(e=>{switch(e){case"INATIVA":return"Inativa";case"PROGRAMADA":return"Programada";case"EM_ANDAMENTO":return"Em Andamento";case"CANCELADA":return"Cancelada";case"FINALIZADA":return"Finalizada";default:return e}})(t.status)," ",c," de ",o),l.a.createElement(Mt.a,{spacing:2,container:!0},l.a.createElement(Mt.a,{xs:12,item:!0},l.a.createElement(Kd.a,{variant:"determinate",style:{height:15,borderRadius:3,margin:"20px 0"},value:g})),l.a.createElement(Mt.a,{xs:12,md:4,item:!0},l.a.createElement(El,{icon:l.a.createElement(Qd.a,{fontSize:"inherit"}),title:"Contatos V\xe1lidos",value:o,loading:b})),t.confirmation&&l.a.createElement(l.a.Fragment,null,l.a.createElement(Mt.a,{xs:12,md:4,item:!0},l.a.createElement(El,{icon:l.a.createElement($d.a,{fontSize:"inherit"}),title:"Confirma\xe7\xf5es Solicitadas",value:d,loading:b})),l.a.createElement(Mt.a,{xs:12,md:4,item:!0},l.a.createElement(El,{icon:l.a.createElement(am.a,{fontSize:"inherit"}),title:"Confirma\xe7\xf5es",value:u,loading:b}))),l.a.createElement(Mt.a,{xs:12,md:4,item:!0},l.a.createElement(El,{icon:l.a.createElement(Ot.a,{fontSize:"inherit"}),title:"Entregues",value:c,loading:b})),t.whatsappId&&l.a.createElement(Mt.a,{xs:12,md:4,item:!0},l.a.createElement(El,{icon:l.a.createElement(ee.a,{fontSize:"inherit"}),title:"Conex\xe3o",value:t.whatsapp.name,loading:b})),t.contactListId&&l.a.createElement(Mt.a,{xs:12,md:4,item:!0},l.a.createElement(El,{icon:l.a.createElement(Ie.a,{fontSize:"inherit"}),title:"Lista de Contatos",value:t.contactList.name,loading:b})),l.a.createElement(Mt.a,{xs:12,md:4,item:!0},l.a.createElement(El,{icon:l.a.createElement(Jd.a,{fontSize:"inherit"}),title:"Agendamento",value:v(t.scheduledAt),loading:b})),l.a.createElement(Mt.a,{xs:12,md:4,item:!0},l.a.createElement(El,{icon:l.a.createElement(Ce.a,{fontSize:"inherit"}),title:"Conclus\xe3o",value:v(t.completedAt),loading:b})))))};const lm=Object(A.a)(e=>({root:{display:"flex",flexWrap:"wrap"},multFieldLine:{display:"flex","& > *:not(:last-child)":{marginRight:e.spacing(1)}},btnWrapper:{position:"relative"},buttonProgress:{color:Ra.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},formControl:{margin:e.spacing(1),minWidth:120},colorAdorment:{width:20,height:20}})),rm=Lt.b().shape({title:Lt.d().required("Obrigat\xf3rio"),text:Lt.d().required("Obrigat\xf3rio")});var om=e=>{let{open:a,onClose:t,announcementId:r,reload:o}=e;const i=lm(),c={title:"",text:"",priority:3,status:!0},[s,d]=Object(n.useState)(!1),[m,u]=Object(n.useState)(c),[p,g]=Object(n.useState)(null),E=Object(n.useRef)(null);Object(n.useEffect)(()=>{try{(async()=>{if(!r)return;const{data:e}=await _e.get("/announcements/".concat(r));u(a=>({...a,...e}))})()}catch(e){We(e)}},[r,a]);const b=()=>{u(c),g(null),t()};return l.a.createElement("div",{className:i.root},l.a.createElement(Et,{title:De.a.t("announcements.confirmationModal.deleteTitle"),open:s,onClose:()=>d(!1),onConfirm:async()=>{p&&(g(null),E.current.value=null),m.mediaPath&&(await _e.delete("/announcements/".concat(m.id,"/media-upload")),u(e=>({...e,mediaPath:null})),C.b.success(De.a.t("announcements.toasts.deleted")),"function"==typeof o&&o())}},De.a.t("announcements.confirmationModal.deleteMessage")),l.a.createElement(tt.a,{open:a,onClose:b,maxWidth:"xs",fullWidth:!0,scroll:"paper"},l.a.createElement(gt.a,{id:"form-dialog-title"},"".concat(r?De.a.t("announcements.dialog.edit"):De.a.t("announcements.dialog.add"))),l.a.createElement("div",{style:{display:"none"}},l.a.createElement("input",{type:"file",accept:".png,.jpg,.jpeg",ref:E,onChange:e=>(e=>{const a=Object(qe.head)(e.target.files);a&&g(a)})(e)})),l.a.createElement(Ft.e,{initialValues:m,enableReinitialize:!0,validationSchema:rm,onSubmit:(e,a)=>{setTimeout(()=>{(async e=>{const a={...e};try{if(r){if(await _e.put("/announcements/".concat(r),a),null!=p){const e=new FormData;e.append("file",p),await _e.post("/announcements/".concat(r,"/media-upload"),e)}}else{const{data:e}=await _e.post("/announcements",a);if(null!=p){const a=new FormData;a.append("file",p),await _e.post("/announcements/".concat(e.id,"/media-upload"),a)}}C.b.success(De.a.t("announcements.toasts.success")),"function"==typeof o&&o()}catch(t){We(t)}b()})(e),a.setSubmitting(!1)},400)}},e=>{let{touched:a,errors:t,isSubmitting:n,values:o}=e;return l.a.createElement(Ft.d,null,l.a.createElement(pt.a,{dividers:!0},l.a.createElement(Mt.a,{spacing:2,container:!0},l.a.createElement(Mt.a,{xs:12,item:!0},l.a.createElement(Ft.b,{as:la.a,label:De.a.t("announcements.dialog.form.title"),name:"title",error:a.title&&Boolean(t.title),helperText:a.title&&t.title,variant:"outlined",margin:"dense",fullWidth:!0})),l.a.createElement(Mt.a,{xs:12,item:!0},l.a.createElement(Ft.b,{as:la.a,label:De.a.t("announcements.dialog.form.text"),name:"text",error:a.text&&Boolean(t.text),helperText:a.text&&t.text,variant:"outlined",margin:"dense",multiline:!0,rows:7,fullWidth:!0})),l.a.createElement(Mt.a,{xs:12,item:!0},l.a.createElement(On.a,{variant:"outlined",margin:"dense",fullWidth:!0},l.a.createElement(Cn.a,{id:"status-selection-label"},De.a.t("announcements.dialog.form.status")),l.a.createElement(Ft.b,{as:Ht.a,label:De.a.t("announcements.dialog.form.status"),placeholder:De.a.t("announcements.dialog.form.status"),labelId:"status-selection-label",id:"status",name:"status",error:a.status&&Boolean(t.status)},l.a.createElement(L.a,{value:!0},"Ativo"),l.a.createElement(L.a,{value:!1},"Inativo")))),l.a.createElement(Mt.a,{xs:12,item:!0},l.a.createElement(On.a,{variant:"outlined",margin:"dense",fullWidth:!0},l.a.createElement(Cn.a,{id:"priority-selection-label"},De.a.t("announcements.dialog.form.priority")),l.a.createElement(Ft.b,{as:Ht.a,label:De.a.t("announcements.dialog.form.priority"),placeholder:De.a.t("announcements.dialog.form.priority"),labelId:"priority-selection-label",id:"priority",name:"priority",error:a.priority&&Boolean(t.priority)},l.a.createElement(L.a,{value:1},"Alta"),l.a.createElement(L.a,{value:2},"M\xe9dia"),l.a.createElement(L.a,{value:3},"Baixa")))),(m.mediaPath||p)&&l.a.createElement(Mt.a,{xs:12,item:!0},l.a.createElement(ra.a,{startIcon:l.a.createElement(Rr.a,null)},p?p.name:m.mediaName),l.a.createElement(T.a,{onClick:()=>d(!0),color:"secondary"},l.a.createElement(Wt.a,null))))),l.a.createElement(nt.a,null,!p&&!m.mediaPath&&l.a.createElement(ra.a,{color:"primary",onClick:()=>E.current.click(),disabled:n,variant:"outlined"},De.a.t("announcements.dialog.buttons.attach")),l.a.createElement(ra.a,{onClick:b,color:"secondary",disabled:n,variant:"outlined"},De.a.t("announcements.dialog.buttons.cancel")),l.a.createElement(ra.a,{type:"submit",color:"primary",disabled:n,variant:"contained",className:i.btnWrapper},"".concat(r?De.a.t("announcements.dialog.buttons.add"):De.a.t("announcements.dialog.buttons.edit")),n&&l.a.createElement(za.a,{size:24,className:i.buttonProgress}))))})))};const im=(e,a)=>{if("LOAD_ANNOUNCEMENTS"===a.type){const t=a.payload,n=[];return Object(qe.isArray)(t)&&t.forEach(a=>{const t=e.findIndex(e=>e.id===a.id);-1!==t?e[t]=a:n.push(a)}),[...e,...n]}if("UPDATE_ANNOUNCEMENTS"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n?(e[n]=t,[...e]):[t,...e]}if("DELETE_ANNOUNCEMENT"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t);return-1!==n&&e.splice(n,1),[...e]}if("RESET"===a.type)return[]},cm=Object(A.a)(e=>({mainPaper:{flex:1,padding:e.padding,overflowY:"scroll",...e.scrollbarStyles}}));var sm=()=>{const e=cm(),a=Object(x.useHistory)(),{user:t}=Object(n.useContext)(Xe),[r,o]=Object(n.useState)(!1),[i,c]=Object(n.useState)(1),[s,d]=Object(n.useState)(!1),[m,u]=Object(n.useState)(null),[p,g]=Object(n.useState)(null),[E,b]=Object(n.useState)(!1),[f,h]=Object(n.useState)(!1),[v,O]=Object(n.useState)(""),[S,w]=Object(n.useReducer)(im,[]),A=Object(n.useContext)(y);Object(n.useEffect)(()=>{!async function(){t.super||(C.b.error("Esta empresa n\xe3o possui permiss\xe3o para acessar essa p\xe1gina! Estamos lhe redirecionando."),setTimeout(()=>{a.push("/")},1e3))}()},[]),Object(n.useEffect)(()=>{w({type:"RESET"}),c(1)},[v]),Object(n.useEffect)(()=>{o(!0);const e=setTimeout(()=>{j()},500);return()=>clearTimeout(e)},[v,i]),Object(n.useEffect)(()=>{const e=t.companyId,a=A.getSocket(e);return a.on("company-announcement",e=>{"update"!==e.action&&"create"!==e.action||w({type:"UPDATE_ANNOUNCEMENTS",payload:e.record}),"delete"===e.action&&w({type:"DELETE_ANNOUNCEMENT",payload:+e.id})}),()=>{a.disconnect()}},[A,t.companyId]);const j=async()=>{try{const{data:e}=await _e.get("/announcements/",{params:{searchParam:v,pageNumber:i}});w({type:"LOAD_ANNOUNCEMENTS",payload:e.records}),d(e.hasMore),o(!1)}catch(e){We(e)}};return l.a.createElement(mi,null,l.a.createElement(Et,{title:p&&"".concat(De.a.t("announcements.confirmationModal.deleteTitle")," ").concat(p.name,"?"),open:f,onClose:h,onConfirm:()=>(async e=>{try{e.mediaName&&await _e.delete("/announcements/".concat(e.id,"/media-upload")),await _e.delete("/announcements/".concat(e.id)),C.b.success(De.a.t("announcements.toasts.deleted"))}catch(a){We(a)}g(null),O(""),c(1)})(p)},De.a.t("announcements.confirmationModal.deleteMessage")),l.a.createElement(om,{resetPagination:()=>{c(1),j()},open:E,onClose:()=>{u(null),b(!1)},"aria-labelledby":"form-dialog-title",announcementId:m&&m.id}),l.a.createElement(pi,null,l.a.createElement(Mt.a,{style:{width:"99.6%"},container:!0},l.a.createElement(Mt.a,{xs:12,sm:8,item:!0},l.a.createElement(bi,null,De.a.t("announcements.title")," (",S.length,")")),l.a.createElement(Mt.a,{xs:12,sm:4,item:!0},l.a.createElement(Mt.a,{spacing:2,container:!0},l.a.createElement(Mt.a,{xs:6,sm:6,item:!0},l.a.createElement(la.a,{fullWidth:!0,placeholder:De.a.t("announcements.searchPlaceholder"),type:"search",value:v,onChange:e=>{O(e.target.value.toLowerCase())},InputProps:{startAdornment:l.a.createElement(us.a,{position:"start"},l.a.createElement(Ql.a,{style:{color:"gray"}}))}})),l.a.createElement(Mt.a,{xs:6,sm:6,item:!0},l.a.createElement(ra.a,{fullWidth:!0,variant:"contained",onClick:()=>{u(null),b(!0)},color:"primary"},De.a.t("announcements.buttons.add"))))))),l.a.createElement(ht.a,{className:e.mainPaper,variant:"outlined",onScroll:e=>{if(!s||r)return;const{scrollTop:a,scrollHeight:t,clientHeight:n}=e.currentTarget;t-(a+100)<n&&c(e=>e+1)}},l.a.createElement(bl.a,{size:"small"},l.a.createElement(vl.a,null,l.a.createElement(xl.a,null,l.a.createElement(hl.a,{align:"center"},De.a.t("announcements.table.title")),l.a.createElement(hl.a,{align:"center"},De.a.t("announcements.table.priority")),l.a.createElement(hl.a,{align:"center"},De.a.t("announcements.table.mediaName")),l.a.createElement(hl.a,{align:"center"},De.a.t("announcements.table.status")),l.a.createElement(hl.a,{align:"center"},De.a.t("announcements.table.actions")))),l.a.createElement(fl.a,null,l.a.createElement(l.a.Fragment,null,S.map(e=>{var a,t;return l.a.createElement(xl.a,{key:e.id},l.a.createElement(hl.a,{align:"center"},e.title),l.a.createElement(hl.a,{align:"center"},1===(t=e.priority)?"Alta":2===t?"M\xe9dia":3===t?"Baixa":void 0),l.a.createElement(hl.a,{align:"center"},null!==(a=e.mediaName)&&void 0!==a?a:De.a.t("quickMessages.noAttachment")),l.a.createElement(hl.a,{align:"center"},e.status?De.a.t("announcements.active"):De.a.t("announcements.inactive")),l.a.createElement(hl.a,{align:"center"},l.a.createElement(T.a,{size:"small",onClick:()=>(e=>{u(e),b(!0)})(e)},l.a.createElement(da.a,null)),l.a.createElement(T.a,{size:"small",onClick:a=>{h(!0),g(e)}},l.a.createElement(Wt.a,null))))}),r&&l.a.createElement(hi,{columns:5}))))))};const dm=Object(A.a)(e=>({mainContainer:{display:"flex",flexDirection:"column",position:"relative",flex:1,height:"calc(100% - 58px)",overflow:"hidden",borderRadius:0,backgroundColor:e.palette.boxlist},chatList:{display:"flex",flexDirection:"column",position:"relative",flex:1,overflowY:"scroll",...e.scrollbarStyles},listItem:{cursor:"pointer"}}));function mm(e){let{chats:a,handleSelectChat:t,handleDeleteChat:r,handleEditChat:o,pageInfo:i,loading:c}=e;const s=dm(),d=Object(x.useHistory)(),{user:m}=Object(n.useContext)(Xe),{datetimeToClient:u}=_n(),[p,g]=Object(n.useState)(!1),[E,b]=Object(n.useState)({}),{id:f}=Object(x.useParams)(),h=async e=>{if(y(e)>0)try{await _e.post("/chats/".concat(e.id,"/read"),{userId:m.id})}catch(a){}f!==e.uuid&&(d.push("/chats/".concat(e.uuid)),t(e))},y=e=>e.users.find(e=>e.userId===m.id).unreads,v=e=>{const a=e.title,t=y(e);return l.a.createElement(l.a.Fragment,null,a,t>0&&l.a.createElement(Sn.a,{size:"small",style:{marginLeft:5},label:t,color:"secondary"}))},C=e=>""!==e.lastMessage?"".concat(u(e.updatedAt),": ").concat(e.lastMessage):"",O=e=>({borderLeft:e.uuid===f?"6px solid #002d6e":null,backgroundColor:e.uuid===f?"theme.palette.chatlist":null});return l.a.createElement(l.a.Fragment,null,l.a.createElement(Et,{title:"Eliminar conversaci\xf3n",open:p,onClose:g,onConfirm:()=>{r(E)}},"Esta acci\xf3n no se puede deshacer, \xbfconfirmar?"),l.a.createElement("div",{className:s.mainContainer},l.a.createElement("div",{className:s.chatList},l.a.createElement(N.a,null,Array.isArray(a)&&a.length>0&&a.map((e,a)=>l.a.createElement(V.a,{onClick:()=>h(e),key:a,className:s.listItem,style:O(e),button:!0},l.a.createElement(K.a,{primary:v(e),secondary:C(e)}),e.ownerId===m.id&&l.a.createElement(oa.a,null,l.a.createElement(T.a,{onClick:()=>{h(e).then(()=>{o(e)})},edge:"end","aria-label":"delete",size:"small",style:{marginRight:5}},l.a.createElement(da.a,null)),l.a.createElement(T.a,{onClick:()=>{b(e),g(!0)},edge:"end","aria-label":"delete",size:"small"},l.a.createElement(ca.a,null)))))))))}var um=t(955);const pm=Object(A.a)(e=>({mainContainer:{display:"flex",flexDirection:"column",position:"relative",flex:1,overflow:"hidden",borderRadius:0,height:"100%",borderLeft:"1px solid rgba(0, 0, 0, 0.12)"},messageList:{position:"relative",overflowY:"auto",height:"100%",...e.scrollbarStyles,backgroundColor:e.palette.chatlist},inputArea:{position:"relative",height:"auto"},input:{padding:"20px"},buttonSend:{margin:e.spacing(1)},boxLeft:{padding:"10px 10px 5px",margin:"10px",position:"relative",backgroundColor:"blue",maxWidth:300,borderRadius:10,borderBottomLeftRadius:0,border:"1px solid rgba(0, 0, 0, 0.12)"},boxRight:{padding:"10px 10px 5px",margin:"10px 10px 10px auto",position:"relative",backgroundColor:"green",textAlign:"right",maxWidth:300,borderRadius:10,borderBottomRightRadius:0,border:"1px solid rgba(0, 0, 0, 0.12)"}}));function gm(e){let{chat:a,messages:t,handleSendMessage:r,handleLoadMore:o,scrollToBottomRef:i,pageInfo:c,loading:s}=e;const d=pm(),{user:m}=Object(n.useContext)(Xe),{datetimeToClient:u}=_n(),p=Object(n.useRef)(),[g,E]=Object(n.useState)(""),b=()=>{p.current&&p.current.scrollIntoView({})};Object(n.useEffect)(()=>{if((e=>{if(void 0!==e){return e.users.find(e=>e.userId===m.id).unreads>0}return 0})(a)>0)try{_e.post("/chats/".concat(a.id,"/read"),{userId:m.id})}catch(e){}i.current=b},[]);return l.a.createElement(ht.a,{className:d.mainContainer},l.a.createElement("div",{onScroll:e=>{const{scrollTop:a}=e.currentTarget;c.hasMore&&!s&&a<600&&o()},className:d.messageList},Array.isArray(t)&&t.map((e,a)=>e.senderId===m.id?l.a.createElement(Ma.a,{key:a,className:d.boxRight},l.a.createElement(R.a,{variant:"subtitle2"},e.sender.name),e.message,l.a.createElement(R.a,{variant:"caption",display:"block"},u(e.createdAt))):l.a.createElement(Ma.a,{key:a,className:d.boxLeft},l.a.createElement(R.a,{variant:"subtitle2"},e.sender.name),e.message,l.a.createElement(R.a,{variant:"caption",display:"block"},u(e.createdAt)))),l.a.createElement("div",{ref:p})),l.a.createElement("div",{className:d.inputArea},l.a.createElement(On.a,{variant:"outlined",fullWidth:!0},l.a.createElement(um.a,{multiline:!0,value:g,onKeyUp:e=>{"Enter"===e.key&&""!==g.trim()&&(r(g),E(""))},onChange:e=>E(e.target.value),className:d.input,endAdornment:l.a.createElement(us.a,{position:"end"},l.a.createElement(T.a,{onClick:()=>{""!==g.trim()&&(r(g),E(""))},className:d.buttonSend},l.a.createElement(qr.a,null)))}))))}const Em=Object(A.a)(e=>({mainContainer:{display:"flex",flexDirection:"column",position:"relative",flex:1,padding:e.spacing(2),height:"calc(100% - 48px)",overflowY:"hidden",border:"1px solid rgba(0, 0, 0, 0.12)"},gridContainer:{flex:1,height:"100%",border:"1px solid rgba(0, 0, 0, 0.12)",backgroundColor:e.palette.dark},gridItem:{height:"100%"},gridItemTab:{height:"92%",width:"100%"},btnContainer:{textAlign:"right",padding:10}}));function bm(e){let{open:a,chat:t,type:r,handleClose:o,handleLoadNewChat:i}=e;const[c,s]=Object(n.useState)([]),[d,m]=Object(n.useState)("");Object(n.useEffect)(()=>{if(m(""),s([]),"edit"===r){const e=t.users.map(e=>({id:e.user.id,name:e.user.name}));s(e),m(t.title)}},[t,a,r]);return l.a.createElement(tt.a,{open:a,onClose:o,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},l.a.createElement(gt.a,{id:"alert-dialog-title"},"Conversa"),l.a.createElement(pt.a,null,l.a.createElement(Mt.a,{spacing:2,container:!0},l.a.createElement(Mt.a,{xs:12,style:{padding:18},item:!0},l.a.createElement(la.a,{label:"T\xedtulo",placeholder:"T\xedtulo",value:d,onChange:e=>m(e.target.value),variant:"outlined",size:"small",fullWidth:!0})),l.a.createElement(Mt.a,{xs:12,item:!0},l.a.createElement(ur,{onFiltered:e=>s(e),initialUsers:c})))),l.a.createElement(nt.a,null,l.a.createElement(ra.a,{onClick:o,color:"primary"},"Cerrar"),l.a.createElement(ra.a,{onClick:async()=>{try{if(!d)return void alert("Por favor, preencha o t\xedtulo da conversa.");if(!c||0===c.length)return void alert("Por favor, selecione pelo menos um usu\xe1rio.");if("edit"===r)await _e.put("/chats/".concat(t.id),{users:c,title:d});else{const{data:e}=await _e.post("/chats",{users:c,title:d});i(e)}o()}catch(e){}},color:"primary",variant:"contained"},"Guardar")))}var fm=Object(Kl.a)()((function(e){const a=Em(),{user:t}=Object(n.useContext)(Xe),r=Object(x.useHistory)(),[o,i]=Object(n.useState)(!1),[c,s]=Object(n.useState)("new"),[d,m]=Object(n.useState)({}),[u,p]=Object(n.useState)([]),[g,E]=Object(n.useState)({hasMore:!1}),[b,f]=Object(n.useState)([]),[h,v]=Object(n.useState)({hasMore:!1}),[C,O]=Object(n.useState)(1),[S,w]=Object(n.useState)(!1),[A,j]=Object(n.useState)(0),k=Object(n.useRef)(!0),T=Object(n.useRef)(),{id:I}=Object(x.useParams)(),N=Object(n.useContext)(y);Object(n.useEffect)(()=>()=>{k.current=!1},[]),Object(n.useEffect)(()=>{k.current&&F().then(e=>{const{records:a}=e;if(a.length>0&&(p(a),E(e),I&&a.length)){const e=a.find(e=>e.uuid===I);M(e)}})},[]),Object(n.useEffect)(()=>{Object(qe.isObject)(d)&&Object(qe.has)(d,"id")&&D(d.id).then(()=>{"function"===typeof T.current&&setTimeout(()=>{T.current()},300)})},[d]),Object(n.useEffect)(()=>{const e=localStorage.getItem("companyId"),a=N.getSocket(e);return a.on("company-".concat(e,"-chat-user-").concat(t.id),e=>{if("create"===e.action&&p(a=>[e.record,...a]),"update"===e.action){const a=u.map(a=>a.id===e.record.id?(m(e.record),{...e.record}):a);p(a)}}),a.on("company-".concat(e,"-chat"),e=>{if("delete"===e.action){const a=u.filter(a=>a.id!==+e.id);p(a),f([]),O(1),v({hasMore:!1}),m({}),r.push("/chats")}}),Object(qe.isObject)(d)&&Object(qe.has)(d,"id")&&a.on("company-".concat(e,"-chat-").concat(d.id),e=>{if("new-message"===e.action){f(a=>[...a,e.newMessage]);const a=u.map(a=>a.id===e.newMessage.chatId?{...e.chat}:a);p(a),T.current()}if("update"===e.action){const a=u.map(a=>a.id===e.chat.id?{...e.chat}:a);p(a),T.current()}}),()=>{a.disconnect()}},[d,N]);const M=e=>{try{f([]),O(1),m(e),j(1)}catch(a){}},P=async e=>{w(!0);try{await _e.post("/chats/".concat(d.id,"/messages"),{message:e})}catch(a){}w(!1)},R=async e=>{try{await _e.delete("/chats/".concat(e.id))}catch(a){}},D=async e=>{w(!0);try{const{data:a}=await _e.get("/chats/".concat(e,"/messages?pageNumber=").concat(C));O(e=>e+1),v(a),f(e=>[...a.records,...e])}catch(a){}w(!1)},L=async()=>{S||D(d.id)},F=async()=>{try{const{data:e}=await _e.get("/chats");return e}catch(e){console.log(e)}};return l.a.createElement(l.a.Fragment,null,l.a.createElement(bm,{type:c,open:o,chat:d,handleLoadNewChat:e=>{f([]),O(1),m(e),j(1),r.push("/chats/".concat(e.uuid))},handleClose:()=>i(!1)}),l.a.createElement(ht.a,{className:a.mainContainer},Object(Kl.b)("md",e.width)?l.a.createElement(Mt.a,{className:a.gridContainer,container:!0},l.a.createElement(Mt.a,{className:a.gridItem,md:3,item:!0},l.a.createElement("div",{className:a.btnContainer},l.a.createElement(ra.a,{onClick:()=>{s("new"),i(!0)},color:"primary",variant:"contained"},"Nuevo")),l.a.createElement(mm,{chats:u,pageInfo:g,loading:S,handleSelectChat:e=>M(e),handleDeleteChat:e=>R(e),handleEditChat:()=>{s("edit"),i(!0)}})),l.a.createElement(Mt.a,{className:a.gridItem,md:9,item:!0},Object(qe.isObject)(d)&&Object(qe.has)(d,"id")&&l.a.createElement(gm,{chat:d,scrollToBottomRef:T,pageInfo:h,messages:b,loading:S,handleSendMessage:P,handleLoadMore:L}))):l.a.createElement(Mt.a,{className:a.gridContainer,container:!0},l.a.createElement(Mt.a,{md:12,item:!0},l.a.createElement(Xl.a,{value:A,indicatorColor:"primary",textColor:"primary",onChange:(e,a)=>j(a),"aria-label":"disabled tabs example"},l.a.createElement(Jl.a,{label:"Chats"}),l.a.createElement(Jl.a,{label:"Mensagens"}))),0===A&&l.a.createElement(Mt.a,{className:a.gridItemTab,md:12,item:!0},l.a.createElement("div",{className:a.btnContainer},l.a.createElement(ra.a,{onClick:()=>i(!0),color:"primary",variant:"contained"},"Novo")),l.a.createElement(mm,{chats:u,pageInfo:g,loading:S,handleSelectChat:e=>M(e),handleDeleteChat:e=>R(e)})),1===A&&l.a.createElement(Mt.a,{className:a.gridItemTab,md:12,item:!0},Object(qe.isObject)(d)&&Object(qe.has)(d,"id")&&l.a.createElement(gm,{scrollToBottomRef:T,pageInfo:h,messages:b,loading:S,handleSendMessage:P,handleLoadMore:L})))))}));const hm=Object(A.a)(e=>({mainPaper:{flex:1,padding:e.spacing(1),overflowY:"scroll",...e.scrollbarStyles}})),ym=e=>{const a=new Date,t=new Date(e),n=Math.abs(a.getTime()-t.getTime());return Math.ceil(n/864e5)};var vm=()=>{var e,a;const t=hm(),{user:r}=Object(n.useContext)(Xe),[o]=Object(n.useState)(!1),[,i]=Object(n.useState)(1),[c,s]=Object(n.useState)(null),[d,m]=Object(n.useState)(!1),[u]=Object(n.useState)(!1);return l.a.createElement(mi,{className:t.mainContainer},l.a.createElement(cs,{open:d,onClose:()=>{s(null),m(!1)},"aria-labelledby":"form-dialog-title",contactId:c}),l.a.createElement(pi,null,l.a.createElement(bi,null,"Assinatura")),l.a.createElement(Mt.a,{item:!0,xs:12,sm:4},l.a.createElement(ht.a,{className:t.mainPaper,variant:"outlined",onScroll:e=>{if(!u||o)return;const{scrollTop:a,scrollHeight:t,clientHeight:n}=e.currentTarget;t-(a+100)<n&&i(e=>e+1)}},l.a.createElement("div",null,l.a.createElement(la.a,{id:"outlined-full-width",label:"Per\xedodo de teste",defaultValue:"Seu per\xedodo de teste termina em ".concat(ym(null===r||void 0===r||null===(e=r.company)||void 0===e?void 0:e.trialExpiration)," dias!"),fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0},InputProps:{readOnly:!0},variant:"outlined"})),l.a.createElement("div",null,l.a.createElement(la.a,{id:"outlined-full-width",label:"Email de cobran\xe7a",defaultValue:null===r||void 0===r||null===(a=r.company)||void 0===a?void 0:a.email,fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0},InputProps:{readOnly:!0},variant:"outlined"})),l.a.createElement("div",null,l.a.createElement(ra.a,{variant:"contained",color:"primary",onClick:()=>{s(null),m(!0)},fullWidth:!0},"Assine Agora!")))))};const xm=Object(A.a)(e=>({root:{display:"flex",flexWrap:"wrap",gap:4},multFieldLine:{display:"flex","& > *:not(:last-child)":{marginRight:e.spacing(1)}},textField:{marginRight:e.spacing(1),flex:1},extraAttr:{display:"flex",justifyContent:"center",alignItems:"center"},btnWrapper:{position:"relative"},buttonProgress:{color:Ra.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},formControl:{margin:e.spacing(1),minWidth:2e3},colorAdorment:{width:20,height:20}})),Cm=Lt.b().shape({name:Lt.d().min(3,"nome muito curto").required("Obrigat\xf3rio"),message:Lt.d().required("Obrigat\xf3rio")});var Om=e=>{let{open:a,onClose:t,fileListId:r,reload:o}=e;const i=xm(),{user:c}=Object(n.useContext)(Xe),[s,d]=Object(n.useState)([]),[m,u]=Object(n.useState)([]),p={name:"",message:"",options:[{name:"",path:"",mediaType:""}]},[g,E]=Object(n.useState)(p);Object(n.useEffect)(()=>{try{(async()=>{if(!r)return;const{data:e}=await _e.get("/files/".concat(r));E(e)})()}catch(e){We(e)}},[r,a]);const b=()=>{E(p),d([]),t()};return l.a.createElement("div",{className:i.root},l.a.createElement(tt.a,{open:a,onClose:b,maxWidth:"md",fullWidth:!0,scroll:"paper"},l.a.createElement(gt.a,{id:"form-dialog-title"},"".concat(r?De.a.t("fileModal.title.edit"):De.a.t("fileModal.title.add"))),l.a.createElement(Ft.e,{initialValues:g,enableReinitialize:!0,validationSchema:Cm,onSubmit:(e,a)=>{setTimeout(()=>{(async e=>{const a=async(e,a,t)=>{const n=new FormData;n.append("fileId",t),n.append("typeArch","fileList"),a.forEach((a,t)=>{a.file&&(n.append("files",a.file),n.append("mediaType",a.file.type),n.append("name",e[t].name),n.append("id",e[t].id))});try{const{data:e}=await _e.post("/files/uploadList/".concat(t),n);return d([]),e}catch(l){We(l)}return null},t={...e,userId:c.id};try{if(r){const{data:n}=await _e.put("/files/".concat(r),t);n.options.length>0&&a(n.options,e.options,r)}else{const{data:n}=await _e.post("/files",t);n.options.length>0&&a(n.options,e.options,n.id)}C.b.success(De.a.t("fileModal.success")),"function"==typeof o&&o()}catch(n){We(n)}b()})(e),a.setSubmitting(!1)},400)}},e=>{let{touched:a,errors:t,isSubmitting:n,values:o}=e;return l.a.createElement(Ft.d,null,l.a.createElement(pt.a,{dividers:!0},l.a.createElement("div",{className:i.multFieldLine},l.a.createElement(Ft.b,{as:la.a,label:De.a.t("fileModal.form.name"),name:"name",error:a.name&&Boolean(t.name),helperText:a.name&&t.name,variant:"outlined",margin:"dense",fullWidth:!0})),l.a.createElement("br",null),l.a.createElement("div",{className:i.multFieldLine},l.a.createElement(Ft.b,{as:la.a,label:De.a.t("fileModal.form.message"),type:"message",multiline:!0,minRows:5,fullWidth:!0,name:"message",error:a.message&&Boolean(t.message),helperText:a.message&&t.message,variant:"outlined",margin:"dense"})),l.a.createElement(R.a,{style:{marginBottom:8,marginTop:12},variant:"subtitle1"},De.a.t("fileModal.form.fileOptions")),l.a.createElement(Ft.c,{name:"options"},e=>{let{push:a,remove:t}=e;return l.a.createElement(l.a.Fragment,null,o.options&&o.options.length>0&&o.options.map((e,a)=>l.a.createElement("div",{className:i.extraAttr,key:"".concat(a,"-info")},l.a.createElement(Mt.a,{container:!0,spacing:0},l.a.createElement(Mt.a,{xs:6,md:10,item:!0},l.a.createElement(Ft.b,{as:la.a,label:De.a.t("fileModal.form.extraName"),name:"options[".concat(a,"].name"),variant:"outlined",margin:"dense",multiline:!0,fullWidth:!0,minRows:2,className:i.textField})),l.a.createElement(Mt.a,{xs:2,md:2,item:!0,style:{display:"flex",alignItems:"center",justifyContent:"flex-end"}},l.a.createElement("input",{type:"file",onChange:e=>{const t=e.target.files[0],n=[...o.options];n[a].file=t,d("options",n);const l=[...m];l[a]=t?t.name:"",u(l)},style:{display:"none"},name:"options[".concat(a,"].file"),id:"file-upload-".concat(a)}),l.a.createElement("label",{htmlFor:"file-upload-".concat(a)},l.a.createElement(T.a,{component:"span"},l.a.createElement(Rr.a,null))),l.a.createElement(T.a,{size:"small",onClick:()=>t(a)},l.a.createElement(Wt.a,null))),l.a.createElement(Mt.a,{xs:12,md:12,item:!0},e.path?e.path:m[a])))),l.a.createElement("div",{className:i.extraAttr},l.a.createElement(ra.a,{style:{flex:1,marginTop:8},variant:"outlined",color:"primary",onClick:()=>{a({name:"",path:""}),u([...m,""])}},"+ ".concat(De.a.t("fileModal.buttons.fileOptions")))))})),l.a.createElement(nt.a,null,l.a.createElement(ra.a,{onClick:b,color:"secondary",disabled:n,variant:"outlined"},De.a.t("fileModal.buttons.cancel")),l.a.createElement(ra.a,{type:"submit",color:"primary",disabled:n,variant:"contained",className:i.btnWrapper},"".concat(r?De.a.t("fileModal.buttons.okEdit"):De.a.t("fileModal.buttons.okAdd")),n&&l.a.createElement(za.a,{size:24,className:i.buttonProgress}))))})))};const Sm=(e,a)=>{if("LOAD_FILES"===a.type){const t=a.payload,n=[];return t.forEach(a=>{const t=e.findIndex(e=>e.id===a.id);-1!==t?e[t]=a:n.push(a)}),[...e,...n]}if("UPDATE_FILES"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n?(e[n]=t,[...e]):[t,...e]}if("DELETE_TAG"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t);return-1!==n&&e.splice(n,1),[...e]}if("RESET"===a.type)return[]},wm=Object(A.a)(e=>({mainPaper:{flex:1,padding:e.spacing(1),overflowY:"scroll",...e.scrollbarStyles}}));var Am=()=>{const e=wm(),{user:a}=Object(n.useContext)(Xe),[t,r]=Object(n.useState)(!1),[o,i]=Object(n.useState)(1),[c,s]=Object(n.useState)(!1),[d,m]=Object(n.useState)(null),[u,p]=Object(n.useState)(null),[g,E]=Object(n.useState)(!1),[b,f]=Object(n.useState)(""),[h,v]=Object(n.useReducer)(Sm,[]),[x,O]=Object(n.useState)(!1),S=Object(n.useCallback)(async()=>{try{const{data:e}=await _e.get("/files/",{params:{searchParam:b,pageNumber:o}});v({type:"LOAD_FILES",payload:e.files}),s(e.hasMore),r(!1)}catch(e){We(e)}},[b,o]),w=Object(n.useContext)(y);Object(n.useEffect)(()=>{v({type:"RESET"}),i(1)},[b]),Object(n.useEffect)(()=>{r(!0);const e=setTimeout(()=>{S()},500);return()=>clearTimeout(e)},[b,o,S]),Object(n.useEffect)(()=>{const e=w.getSocket(a.companyId);return e.on("company-".concat(a.companyId,"-file"),e=>{"update"!==e.action&&"create"!==e.action||v({type:"UPDATE_FILES",payload:e.files}),"delete"===e.action&&v({type:"DELETE_USER",payload:+e.fileId})}),()=>{e.disconnect()}},[w,a]);return l.a.createElement(mi,null,l.a.createElement(Et,{title:u&&"".concat(De.a.t("files.confirmationModal.deleteTitle")),open:g,onClose:E,onConfirm:()=>(async e=>{try{await _e.delete("/files/".concat(e)),C.b.success(De.a.t("files.toasts.deleted"))}catch(a){We(a)}p(null),f(""),i(1),v({type:"RESET"}),i(1),await S()})(u.id)},De.a.t("files.confirmationModal.deleteMessage")),l.a.createElement(Om,{open:x,onClose:()=>{m(null),O(!1)},reload:S,"aria-labelledby":"form-dialog-title",fileListId:d&&d.id}),l.a.createElement(pi,null,l.a.createElement(bi,null,De.a.t("files.title")," (",h.length,")"),l.a.createElement(Ei,null,l.a.createElement(la.a,{placeholder:De.a.t("contacts.searchPlaceholder"),type:"search",value:b,onChange:e=>{f(e.target.value.toLowerCase())},InputProps:{startAdornment:l.a.createElement(us.a,{position:"start"},l.a.createElement(Ql.a,{style:{color:"gray"}}))}}),l.a.createElement(ra.a,{variant:"contained",color:"primary",onClick:()=>{m(null),O(!0)}},De.a.t("files.buttons.add")))),l.a.createElement(ht.a,{className:e.mainPaper,variant:"outlined",onScroll:e=>{if(!c||t)return;const{scrollTop:a,scrollHeight:n,clientHeight:l}=e.currentTarget;n-(a+100)<l&&i(e=>e+1)}},l.a.createElement(bl.a,{size:"small"},l.a.createElement(vl.a,null,l.a.createElement(xl.a,null,l.a.createElement(hl.a,{align:"center"},De.a.t("files.table.name")),l.a.createElement(hl.a,{align:"center"},De.a.t("files.table.actions")))),l.a.createElement(fl.a,null,l.a.createElement(l.a.Fragment,null,h.map(e=>l.a.createElement(xl.a,{key:e.id},l.a.createElement(hl.a,{align:"center"},e.name),l.a.createElement(hl.a,{align:"center"},l.a.createElement(T.a,{size:"small",onClick:()=>(e=>{m(e),O(!0)})(e)},l.a.createElement(da.a,null)),l.a.createElement(T.a,{size:"small",onClick:a=>{E(!0),p(e)}},l.a.createElement(Wt.a,null))))),t&&l.a.createElement(hi,{columns:4}))))))},jm=t(1583),km=t(1584);const Tm=Object(A.a)(e=>({formControl:{margin:e.spacing(1),minWidth:120}}));var Im=()=>{const e=Tm(),[a,t]=Object(n.useState)([]);return Object(n.useEffect)(()=>{(async()=>{try{const{data:e}=await _e.get("/queue");t(e)}catch(e){We("QUEUESELETSINGLE >>> ".concat(e))}})()},[]),l.a.createElement("div",{style:{marginTop:6}},l.a.createElement(On.a,{variant:"outlined",className:e.FormControl,margin:"dense",fullWidth:!0},l.a.createElement("div",null,l.a.createElement(R.a,null,De.a.t("queueSelect.inputLabel")),l.a.createElement(Ft.b,{as:Ht.a,label:De.a.t("queueSelect.inputLabel"),name:"queueId",labelId:"queue-selection-label",id:"queue-selection",fullWidth:!0},a.map(e=>l.a.createElement(L.a,{key:e.id,value:e.id},e.name))))))};const Nm=Object(A.a)(e=>({root:{display:"flex",flexWrap:"wrap"},multFieldLine:{display:"flex","& > *:not(:last-child)":{marginRight:e.spacing(1)}},btnWrapper:{position:"relative"},buttonProgress:{color:Ra.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},formControl:{margin:e.spacing(1),minWidth:120},colorAdorment:{width:20,height:20}}));Lt.b().shape({name:Lt.d().min(5,"Muito curto!").max(100,"Muito longo!").required("Obrigat\xf3rio"),prompt:Lt.d().min(50,"Muito curto!").required("Descreva o treinamento para Intelig\xeancia Artificial"),voice:Lt.d().required("Informe o modo para Voz"),max_tokens:Lt.a().required("Informe o n\xfamero m\xe1ximo de tokens"),temperature:Lt.a().required("Informe a temperatura"),apikey:Lt.d().required("Informe a API Key"),queueId:Lt.a().required("Informe a fila"),max_messages:Lt.a().required("Informe o n\xfamero m\xe1ximo de mensagens")});var Mm=e=>{let{open:a,onClose:t,promptId:r}=e;const o=Nm(),[i,c]=Object(n.useState)("texto"),[s,d]=Object(n.useState)(!1),m=()=>{d(!s)},u={name:"",prompt:"",voice:"texto",voiceKey:"",voiceRegion:"",maxTokens:100,temperature:1,apiKey:"",queueId:null,maxMessages:10},[p,g]=Object(n.useState)(u);Object(n.useEffect)(()=>{(async()=>{if(r)try{const{data:e}=await _e.get("/prompt/".concat(r));g(a=>({...a,...e})),c(e.voice)}catch(e){We(e)}else g(u)})()},[r,a]);const E=()=>{g(u),c("texto"),t()},b=e=>{c(e.target.value)};return l.a.createElement("div",{className:o.root},l.a.createElement(tt.a,{open:a,onClose:E,maxWidth:"md",scroll:"paper",fullWidth:!0},l.a.createElement(gt.a,{id:"form-dialog-title"},"".concat(r?De.a.t("promptModal.title.edit"):De.a.t("promptModal.title.add"))),l.a.createElement(Ft.e,{initialValues:p,enableReinitialize:!0,onSubmit:(e,a)=>{setTimeout(()=>{(async e=>{const a={...e,voice:i};if(e.queueId){try{r?await _e.put("/prompt/".concat(r),a):await _e.post("/prompt",a),C.b.success(De.a.t("promptModal.success"))}catch(t){We(t)}E()}else We("Informe o setor")})(e),a.setSubmitting(!1)},400)}},e=>{let{touched:a,errors:t,isSubmitting:n,values:c}=e;return l.a.createElement(Ft.d,{style:{width:"100%"}},l.a.createElement(pt.a,{dividers:!0},l.a.createElement(Ft.b,{as:la.a,label:De.a.t("promptModal.form.name"),name:"name",error:a.name&&Boolean(t.name),helperText:a.name&&t.name,variant:"outlined",margin:"dense",fullWidth:!0}),l.a.createElement(On.a,{fullWidth:!0,margin:"dense",variant:"outlined"},l.a.createElement(Ft.b,{as:la.a,label:De.a.t("promptModal.form.apikey"),name:"apiKey",type:s?"text":"password",error:a.apiKey&&Boolean(t.apiKey),helperText:a.apiKey&&t.apiKey,variant:"outlined",margin:"dense",fullWidth:!0,InputProps:{endAdornment:l.a.createElement(us.a,{position:"end"},l.a.createElement(T.a,{onClick:m},s?l.a.createElement(jm.a,null):l.a.createElement(km.a,null)))}})),l.a.createElement(Ft.b,{as:la.a,label:De.a.t("promptModal.form.prompt"),name:"prompt",error:a.prompt&&Boolean(t.prompt),helperText:a.prompt&&t.prompt,variant:"outlined",margin:"dense",fullWidth:!0,rows:10,multiline:!0}),l.a.createElement(Im,null),l.a.createElement("div",{className:o.multFieldLine},l.a.createElement(On.a,{fullWidth:!0,margin:"dense",variant:"outlined"},l.a.createElement(Cn.a,null,De.a.t("promptModal.form.voice")),l.a.createElement(Ht.a,{id:"type-select",labelWidth:60,name:"voice",value:i,onChange:b,multiple:!1},l.a.createElement(L.a,{key:"texto",value:"texto"},"Texto"),l.a.createElement(L.a,{key:"pt-BR-FranciscaNeural",value:"pt-BR-FranciscaNeural"},"Francisa"),l.a.createElement(L.a,{key:"pt-BR-AntonioNeural",value:"pt-BR-AntonioNeural"},"Ant\xf4nio"),l.a.createElement(L.a,{key:"pt-BR-BrendaNeural",value:"pt-BR-BrendaNeural"},"Brenda"),l.a.createElement(L.a,{key:"pt-BR-DonatoNeural",value:"pt-BR-DonatoNeural"},"Donato"),l.a.createElement(L.a,{key:"pt-BR-ElzaNeural",value:"pt-BR-ElzaNeural"},"Elza"),l.a.createElement(L.a,{key:"pt-BR-FabioNeural",value:"pt-BR-FabioNeural"},"F\xe1bio"),l.a.createElement(L.a,{key:"pt-BR-GiovannaNeural",value:"pt-BR-GiovannaNeural"},"Giovanna"),l.a.createElement(L.a,{key:"pt-BR-HumbertoNeural",value:"pt-BR-HumbertoNeural"},"Humberto"),l.a.createElement(L.a,{key:"pt-BR-JulioNeural",value:"pt-BR-JulioNeural"},"Julio"),l.a.createElement(L.a,{key:"pt-BR-LeilaNeural",value:"pt-BR-LeilaNeural"},"Leila"),l.a.createElement(L.a,{key:"pt-BR-LeticiaNeural",value:"pt-BR-LeticiaNeural"},"Let\xedcia"),l.a.createElement(L.a,{key:"pt-BR-ManuelaNeural",value:"pt-BR-ManuelaNeural"},"Manuela"),l.a.createElement(L.a,{key:"pt-BR-NicolauNeural",value:"pt-BR-NicolauNeural"},"Nicolau"),l.a.createElement(L.a,{key:"pt-BR-ValerioNeural",value:"pt-BR-ValerioNeural"},"Val\xe9rio"),l.a.createElement(L.a,{key:"pt-BR-YaraNeural",value:"pt-BR-YaraNeural"},"Yara"))),l.a.createElement(Ft.b,{as:la.a,label:De.a.t("promptModal.form.voiceKey"),name:"voiceKey",error:a.voiceKey&&Boolean(t.voiceKey),helperText:a.voiceKey&&t.voiceKey,variant:"outlined",margin:"dense",fullWidth:!0}),l.a.createElement(Ft.b,{as:la.a,label:De.a.t("promptModal.form.voiceRegion"),name:"voiceRegion",error:a.voiceRegion&&Boolean(t.voiceRegion),helperText:a.voiceRegion&&t.voiceRegion,variant:"outlined",margin:"dense",fullWidth:!0})),l.a.createElement("div",{className:o.multFieldLine},l.a.createElement(Ft.b,{as:la.a,label:De.a.t("promptModal.form.temperature"),name:"temperature",error:a.temperature&&Boolean(t.temperature),helperText:a.temperature&&t.temperature,variant:"outlined",margin:"dense",fullWidth:!0}),l.a.createElement(Ft.b,{as:la.a,label:De.a.t("promptModal.form.max_tokens"),name:"maxTokens",error:a.maxTokens&&Boolean(t.maxTokens),helperText:a.maxTokens&&t.maxTokens,variant:"outlined",margin:"dense",fullWidth:!0}),l.a.createElement(Ft.b,{as:la.a,label:De.a.t("promptModal.form.max_messages"),name:"maxMessages",error:a.maxMessages&&Boolean(t.maxMessages),helperText:a.maxMessages&&t.maxMessages,variant:"outlined",margin:"dense",fullWidth:!0}))),l.a.createElement(nt.a,null,l.a.createElement(ra.a,{onClick:E,color:"secondary",disabled:n,variant:"outlined"},De.a.t("promptModal.buttons.cancel")),l.a.createElement(ra.a,{type:"submit",color:"primary",disabled:n,variant:"contained",className:o.btnWrapper},"".concat(r?De.a.t("promptModal.buttons.okEdit"):De.a.t("promptModal.buttons.okAdd")),n&&l.a.createElement(za.a,{size:24,className:o.buttonProgress}))))})))},Pm=t(356);const Rm=Object(A.a)(e=>({mainPaper:{flex:1,padding:e.spacing(1),overflowY:"scroll",...e.scrollbarStyles},customTableCell:{display:"flex",alignItems:"center",justifyContent:"center"},redBox:{backgroundColor:"#ffcccc",padding:e.spacing(2),marginBottom:e.spacing(2)}})),Dm=(e,a)=>{if("LOAD_PROMPTS"===a.type){const t=a.payload,n=[];return t.forEach(a=>{const t=e.findIndex(e=>e.id===a.id);-1!==t?e[t]=a:n.push(a)}),[...e,...n]}if("UPDATE_PROMPTS"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n?(e[n]=t,[...e]):[t,...e]}if("DELETE_PROMPT"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t);return-1!==n&&e.splice(n,1),[...e]}if("RESET"===a.type)return[]};var Lm=()=>{const e=Rm(),[a,t]=Object(n.useReducer)(Dm,[]),[r,o]=Object(n.useState)(!1),[i,c]=Object(n.useState)(!1),[s,d]=Object(n.useState)(null),[m,u]=Object(n.useState)(!1),{user:p}=Object(n.useContext)(Xe),{getPlanCompany:g}=ba(),E=Object(Pm.useHistory)(),b=p.companyId,f=Object(n.useContext)(y);Object(n.useEffect)(()=>{!async function(){(await g(void 0,b)).plan.useOpenAi||(C.b.error("Esta empresa n\xe3o possui permiss\xe3o para acessar essa p\xe1gina! Estamos lhe redirecionando."),setTimeout(()=>{E.push("/")},1e3))}()},[]),Object(n.useEffect)(()=>{(async()=>{o(!0);try{const{data:e}=await _e.get("/prompt");t({type:"LOAD_PROMPTS",payload:e.prompts}),o(!1)}catch(e){We(e),o(!1)}})()},[]),Object(n.useEffect)(()=>{const e=f.getSocket(b);return e.on("company-".concat(b,"-prompt"),e=>{"update"!==e.action&&"create"!==e.action||t({type:"UPDATE_PROMPTS",payload:e.prompt}),"delete"===e.action&&t({type:"DELETE_PROMPT",payload:e.promptId})}),()=>{e.disconnect()}},[b,f]);return l.a.createElement(mi,null,l.a.createElement(ht.a,{className:e.redBox,variant:"outlined"},l.a.createElement(R.a,{variant:"body1"},l.a.createElement("strong",null,"Aviso Importante:")," Para todos los usuarios que hayan notado una interrupci\xf3n en el funcionamiento de OpenAI, nos gustar\xeda aclarar que esto no se trata de un error del sistema. OpenAI ofrece un cr\xe9dito gratuito de $5 USD para nuevos registros; sin embargo, este beneficio tambi\xe9n est\xe1 sujeto a un l\xedmite de tiempo, generalmente de alrededor de tres meses. Cuando el cr\xe9dito disponible se agota, es necesario recargar la cuenta para continuar utilizando el servicio. Es importante estar al tanto de esta pol\xedtica para garantizar una experiencia continua y sin interrupciones en el uso de OpenAI con el sistema. Si ha notado que el servicio dej\xf3 de funcionar, verifique si su cr\xe9dito gratuito ha expirado y considere recargar la cuenta, si es necesario. Estamos a su disposici\xf3n para ayudar y aclarar cualquier duda adicional que pueda surgir. Gracias por su comprensi\xf3n y continuaremos trabajando para ofrecer el mejor servicio posible a nuestros usuarios."),l.a.createElement(R.a,{variant:"body1"},l.a.createElement("strong",null,"Enlaces \xdatiles:"),l.a.createElement("br",null),"Uso: ",l.a.createElement("a",{href:"https://platform.openai.com/usage"},"https://platform.openai.com/usage"),l.a.createElement("br",null),"Factura: ",l.a.createElement("a",{href:"https://platform.openai.com/account/billing/overview"},"https://platform.openai.com/account/billing/overview"),l.a.createElement("br",null),"API: ",l.a.createElement("a",{href:"https://platform.openai.com/api-keys"},"https://platform.openai.com/api-keys"))),l.a.createElement(Et,{title:s&&"".concat(De.a.t("prompts.confirmationModal.deleteTitle")," ").concat(s.name,"?"),open:m,onClose:()=>{u(!1),d(null)},onConfirm:()=>(async e=>{try{const{data:a}=await _e.delete("/prompt/".concat(e));C.b.info(De.a.t(a.message))}catch(a){We(a)}d(null)})(s.id)},De.a.t("prompts.confirmationModal.deleteMessage")),l.a.createElement(Mm,{open:i,onClose:()=>{c(!1),d(null)},promptId:null===s||void 0===s?void 0:s.id}),l.a.createElement(pi,null,l.a.createElement(bi,null,De.a.t("prompts.title")),l.a.createElement(Ei,null,l.a.createElement(ra.a,{variant:"contained",color:"primary",onClick:()=>{c(!0),d(null)}},De.a.t("prompts.buttons.add")))),l.a.createElement(ht.a,{className:e.mainPaper,variant:"outlined"},l.a.createElement(bl.a,{size:"small"},l.a.createElement(vl.a,null,l.a.createElement(xl.a,null,l.a.createElement(hl.a,{align:"left"},De.a.t("prompts.table.name")),l.a.createElement(hl.a,{align:"left"},De.a.t("prompts.table.queue")),l.a.createElement(hl.a,{align:"left"},De.a.t("prompts.table.max_tokens")),l.a.createElement(hl.a,{align:"center"},De.a.t("prompts.table.actions")))),l.a.createElement(fl.a,null,l.a.createElement(l.a.Fragment,null,a.map(e=>l.a.createElement(xl.a,{key:e.id},l.a.createElement(hl.a,{align:"left"},e.name),l.a.createElement(hl.a,{align:"left"},e.queue.name),l.a.createElement(hl.a,{align:"left"},e.maxTokens),l.a.createElement(hl.a,{align:"center"},l.a.createElement(T.a,{size:"small",onClick:()=>(e=>{d(e),c(!0)})(e)},l.a.createElement(oi.a,null)),l.a.createElement(T.a,{size:"small",onClick:()=>{d(e),u(!0)}},l.a.createElement(ii.a,null))))),r&&l.a.createElement(hi,{columns:4}))))))},Fm=t(933),qm=t.n(Fm),Wm=t(934),Bm=t.n(Wm),zm=t(935),Um=t.n(zm),Hm=t(936),_m=t.n(Hm),Vm=t(937),Gm=t.n(Vm);const Km=Object(A.a)(e=>({root:{display:"flex",flexWrap:"wrap",gap:4},textField:{marginRight:e.spacing(1),flex:1},btnWrapper:{position:"relative"},buttonProgress:{color:Ra.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},btnLeft:{display:"flex",marginRight:"auto",marginLeft:12},colorAdorment:{width:20,height:20}})),Ym=Lt.b().shape({name:Lt.d().min(2,"Too Short!").max(50,"Too Long!").required("Required")});var Qm=e=>{let{open:a,onClose:t,integrationId:r}=e;const o=Km(),i={type:"typebot",name:"",projectName:"",jsonContent:"",language:"",urlN8N:"",typebotDelayMessage:1e3,typebotExpires:1,typebotKeywordFinish:"",typebotKeywordRestart:"",typebotRestartMessage:"",typebotSlug:"",typebotUnknownMessage:""},[c,s]=Object(n.useState)(i);Object(n.useEffect)(()=>((async()=>{if(r)try{const{data:e}=await _e.get("/queueIntegration/".concat(r));s(a=>({...a,...e}))}catch(e){We(e)}})(),()=>{s({type:"dialogflow",name:"",projectName:"",jsonContent:"",language:"",urlN8N:"",typebotDelayMessage:1e3})}),[r,a]);const d=()=>{t(),s(i)};return l.a.createElement("div",{className:o.root},l.a.createElement(tt.a,{open:a,onClose:d,fullWidth:!0,maxWidth:"md",scroll:"paper"},l.a.createElement(gt.a,null,"".concat(r?De.a.t("queueIntegrationModal.title.edit"):De.a.t("queueIntegrationModal.title.add"))),l.a.createElement(Ft.e,{initialValues:c,enableReinitialize:!0,validationSchema:Ym,onSubmit:(e,a,t)=>{setTimeout(()=>{(async e=>{try{"n8n"!==e.type&&"webhook"!==e.type&&"typebot"!==e.type&&"flowbuilder"!==e.type||(e.projectName=e.name),r?(await _e.put("/queueIntegration/".concat(r),e),C.b.success(De.a.t("queueIntegrationModal.messages.editSuccess"))):(await _e.post("/queueIntegration",e),C.b.success(De.a.t("queueIntegrationModal.messages.addSuccess"))),d()}catch(a){We(a)}})(e),a.setSubmitting(!1)},400)}},e=>{let{touched:a,errors:t,isSubmitting:n,values:i}=e;return l.a.createElement(Ft.d,null,l.a.createElement(ht.a,{square:!0,className:o.mainPaper,elevation:1},l.a.createElement(pt.a,{dividers:!0},l.a.createElement(Mt.a,{container:!0,spacing:1},l.a.createElement(Mt.a,{item:!0,xs:12,md:6,xl:6},l.a.createElement(On.a,{variant:"outlined",className:o.formControl,margin:"dense",fullWidth:!0},l.a.createElement(Cn.a,{id:"type-selection-input-label"},De.a.t("queueIntegrationModal.form.type")),l.a.createElement(Ft.b,{as:Ht.a,label:De.a.t("queueIntegrationModal.form.type"),name:"type",labelId:"profile-selection-label",error:a.type&&Boolean(t.type),helpertext:a.type&&t.type,id:"type",required:!0},l.a.createElement(L.a,{value:"dialogflow"},"DialogFlow"),l.a.createElement(L.a,{value:"n8n"},"N8N"),l.a.createElement(L.a,{value:"webhook"},"WebHooks"),l.a.createElement(L.a,{value:"typebot"},"Typebot"),l.a.createElement(L.a,{value:"flowbuilder"},"Flowbuilder")))),"dialogflow"===i.type&&l.a.createElement(l.a.Fragment,null,l.a.createElement(Mt.a,{item:!0,xs:12,md:6,xl:6},l.a.createElement(Ft.b,{as:la.a,label:De.a.t("queueIntegrationModal.form.name"),autoFocus:!0,name:"name",fullWidth:!0,error:a.name&&Boolean(t.name),helpertext:a.name&&t.name,variant:"outlined",margin:"dense",className:o.textField})),l.a.createElement(Mt.a,{item:!0,xs:12,md:6,xl:6},l.a.createElement(On.a,{variant:"outlined",className:o.formControl,margin:"dense",fullWidth:!0},l.a.createElement(Cn.a,{id:"language-selection-input-label"},De.a.t("queueIntegrationModal.form.language")),l.a.createElement(Ft.b,{as:Ht.a,label:De.a.t("queueIntegrationModal.form.language"),name:"language",labelId:"profile-selection-label",fullWidth:!0,error:a.language&&Boolean(t.language),helpertext:a.language&&t.language,id:"language-selection",required:!0},l.a.createElement(L.a,{value:"pt-BR"},"Portugues"),l.a.createElement(L.a,{value:"en"},"Ingl\xeas"),l.a.createElement(L.a,{value:"es"},"Espa\xf1ol")))),l.a.createElement(Mt.a,{item:!0,xs:12,md:6,xl:6},l.a.createElement(Ft.b,{as:la.a,label:De.a.t("queueIntegrationModal.form.projectName"),name:"projectName",error:a.projectName&&Boolean(t.projectName),helpertext:a.projectName&&t.projectName,fullWidth:!0,variant:"outlined",margin:"dense"})),l.a.createElement(Mt.a,{item:!0,xs:12,md:12,xl:12},l.a.createElement(Ft.b,{as:la.a,label:De.a.t("queueIntegrationModal.form.jsonContent"),type:"jsonContent",multiline:!0,maxRows:5,minRows:5,fullWidth:!0,name:"jsonContent",error:a.jsonContent&&Boolean(t.jsonContent),helpertext:a.jsonContent&&t.jsonContent,variant:"outlined",margin:"dense"}))),"flowbuilder"===i.type&&l.a.createElement(Mt.a,{item:!0,xs:12,md:6,xl:6},l.a.createElement(Ft.b,{as:la.a,label:De.a.t("queueIntegrationModal.form.name"),autoFocus:!0,name:"name",fullWidth:!0,error:a.name&&Boolean(t.name),helpertext:a.name&&t.name,variant:"outlined",margin:"dense",className:o.textField})),("n8n"===i.type||"webhook"===i.type)&&l.a.createElement(l.a.Fragment,null,l.a.createElement(Mt.a,{item:!0,xs:12,md:6,xl:6},l.a.createElement(Ft.b,{as:la.a,label:De.a.t("queueIntegrationModal.form.name"),autoFocus:!0,required:!0,name:"name",error:a.name&&Boolean(t.name),helpertext:a.name&&t.name,variant:"outlined",margin:"dense",fullWidth:!0,className:o.textField})),l.a.createElement(Mt.a,{item:!0,xs:12,md:12,xl:12},l.a.createElement(Ft.b,{as:la.a,label:De.a.t("queueIntegrationModal.form.urlN8N"),name:"urlN8N",error:a.urlN8N&&Boolean(t.urlN8N),helpertext:a.urlN8N&&t.urlN8N,variant:"outlined",margin:"dense",required:!0,fullWidth:!0,className:o.textField}))),"typebot"===i.type&&l.a.createElement(l.a.Fragment,null,l.a.createElement(Mt.a,{item:!0,xs:12,md:6,xl:6},l.a.createElement(Ft.b,{as:la.a,label:De.a.t("queueIntegrationModal.form.name"),autoFocus:!0,name:"name",error:a.name&&Boolean(t.name),helpertext:a.name&&t.name,variant:"outlined",margin:"dense",required:!0,fullWidth:!0,className:o.textField})),l.a.createElement(Mt.a,{item:!0,xs:12,md:12,xl:12},l.a.createElement(Ft.b,{as:la.a,label:De.a.t("queueIntegrationModal.form.urlN8N"),name:"urlN8N",error:a.urlN8N&&Boolean(t.urlN8N),helpertext:a.urlN8N&&t.urlN8N,variant:"outlined",margin:"dense",required:!0,fullWidth:!0,className:o.textField})),l.a.createElement(Mt.a,{item:!0,xs:12,md:6,xl:6},l.a.createElement(Ft.b,{as:la.a,label:De.a.t("queueIntegrationModal.form.typebotSlug"),name:"typebotSlug",error:a.typebotSlug&&Boolean(t.typebotSlug),helpertext:a.typebotSlug&&t.typebotSlug,required:!0,variant:"outlined",margin:"dense",fullWidth:!0,className:o.textField})),l.a.createElement(Mt.a,{item:!0,xs:12,md:6,xl:6},l.a.createElement(Ft.b,{as:la.a,label:De.a.t("queueIntegrationModal.form.typebotExpires"),name:"typebotExpires",error:a.typebotExpires&&Boolean(t.typebotExpires),helpertext:a.typebotExpires&&t.typebotExpires,variant:"outlined",margin:"dense",fullWidth:!0,className:o.textField})),l.a.createElement(Mt.a,{item:!0,xs:12,md:6,xl:6},l.a.createElement(Ft.b,{as:la.a,label:De.a.t("queueIntegrationModal.form.typebotDelayMessage"),name:"typebotDelayMessage",error:a.typebotDelayMessage&&Boolean(t.typebotDelayMessage),helpertext:a.typebotDelayMessage&&t.typebotDelayMessage,variant:"outlined",margin:"dense",fullWidth:!0,className:o.textField})),l.a.createElement(Mt.a,{item:!0,xs:12,md:6,xl:6},l.a.createElement(Ft.b,{as:la.a,label:De.a.t("queueIntegrationModal.form.typebotKeywordFinish"),name:"typebotKeywordFinish",error:a.typebotKeywordFinish&&Boolean(t.typebotKeywordFinish),helpertext:a.typebotKeywordFinish&&t.typebotKeywordFinish,variant:"outlined",margin:"dense",fullWidth:!0,className:o.textField})),l.a.createElement(Mt.a,{item:!0,xs:12,md:6,xl:6},l.a.createElement(Ft.b,{as:la.a,label:De.a.t("queueIntegrationModal.form.typebotKeywordRestart"),name:"typebotKeywordRestart",error:a.typebotKeywordRestart&&Boolean(t.typebotKeywordRestart),helpertext:a.typebotKeywordRestart&&t.typebotKeywordRestart,variant:"outlined",margin:"dense",fullWidth:!0,className:o.textField})),l.a.createElement(Mt.a,{item:!0,xs:12,md:6,xl:6},l.a.createElement(Ft.b,{as:la.a,label:De.a.t("queueIntegrationModal.form.typebotUnknownMessage"),name:"typebotUnknownMessage",error:a.typebotUnknownMessage&&Boolean(t.typebotUnknownMessage),helpertext:a.typebotUnknownMessage&&t.typebotUnknownMessage,variant:"outlined",margin:"dense",fullWidth:!0,className:o.textField})),l.a.createElement(Mt.a,{item:!0,xs:12,md:12,xl:12},l.a.createElement(Ft.b,{as:la.a,label:De.a.t("queueIntegrationModal.form.typebotRestartMessage"),name:"typebotRestartMessage",error:a.typebotRestartMessage&&Boolean(t.typebotRestartMessage),helpertext:a.typebotRestartMessage&&t.typebotRestartMessage,variant:"outlined",margin:"dense",fullWidth:!0,className:o.textField})))))),l.a.createElement(nt.a,null,"dialogflow"===i.type&&l.a.createElement(ra.a,{onClick:e=>(async(e,a)=>{try{const{projectName:e,jsonContent:t,language:n}=a;await _e.post("/queueIntegration/testSession",{projectName:e,jsonContent:t,language:n}),C.b.success(De.a.t("queueIntegrationModal.messages.testSuccess"))}catch(t){We(t)}})(0,i),color:"inherit",disabled:n,name:"testSession",variant:"outlined",className:o.btnLeft},De.a.t("queueIntegrationModal.buttons.test")),l.a.createElement(ra.a,{onClick:d,color:"secondary",disabled:n,variant:"outlined"},De.a.t("queueIntegrationModal.buttons.cancel")),l.a.createElement(ra.a,{type:"submit",color:"primary",disabled:n,variant:"contained",className:o.btnWrapper},"".concat(r?De.a.t("queueIntegrationModal.buttons.okEdit"):De.a.t("queueIntegrationModal.buttons.okAdd")),n&&l.a.createElement(za.a,{size:24,className:o.buttonProgress}))))})))};const Xm=(e,a)=>{if("LOAD_INTEGRATIONS"===a.type){const t=a.payload,n=[];return t.forEach(a=>{const t=e.findIndex(e=>e.id===a.id);-1!==t?e[t]=a:n.push(a)}),[...e,...n]}if("UPDATE_INTEGRATIONS"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n?(e[n]=t,[...e]):[t,...e]}if("DELETE_INTEGRATION"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t);return-1!==n&&e.splice(n,1),[...e]}if("RESET"===a.type)return[]},Jm=Object(A.a)(e=>({mainPaper:{flex:1,padding:e.spacing(2),margin:e.spacing(1),overflowY:"scroll",...e.scrollbarStyles},avatar:{width:"140px",height:"40px",borderRadius:4}}));var Zm=()=>{const e=Jm(),[a,t]=Object(n.useState)(!1),[r,o]=Object(n.useState)(1),[i,c]=Object(n.useState)(!1),[s,d]=Object(n.useState)(null),[m,u]=Object(n.useState)(null),[p,g]=Object(n.useState)(!1),[E,b]=Object(n.useState)(!1),[f,h]=Object(n.useState)(""),[v,x]=Object(n.useReducer)(Xm,[]),{user:O}=Object(n.useContext)(Xe),{getPlanCompany:S}=ba(),w=O.companyId,A=Object(Pm.useHistory)(),j=Object(n.useContext)(y);Object(n.useEffect)(()=>{!async function(){(await S(void 0,w)).plan.useIntegrations||(C.b.error("Esta empresa n\xe3o possui permiss\xe3o para acessar essa p\xe1gina! Estamos lhe redirecionando."),setTimeout(()=>{A.push("/")},1e3))}()},[]),Object(n.useEffect)(()=>{x({type:"RESET"}),o(1)},[f]),Object(n.useEffect)(()=>{t(!0);const e=setTimeout(()=>{(async()=>{try{const{data:e}=await _e.get("/queueIntegration/",{params:{searchParam:f,pageNumber:r}});x({type:"LOAD_INTEGRATIONS",payload:e.queueIntegrations}),c(e.hasMore),t(!1)}catch(e){We(e)}})()},500);return()=>clearTimeout(e)},[f,r]),Object(n.useEffect)(()=>{const e=localStorage.getItem("companyId"),a=j.getSocket(e);return a.on("company-".concat(e,"-queueIntegration"),e=>{"update"!==e.action&&"create"!==e.action||x({type:"UPDATE_INTEGRATIONS",payload:e.queueIntegration}),"delete"===e.action&&x({type:"DELETE_INTEGRATION",payload:+e.integrationId})}),()=>{a.disconnect()}},[j]);return l.a.createElement(mi,null,l.a.createElement(Et,{title:m&&"".concat(De.a.t("queueIntegration.confirmationModal.deleteTitle")," ").concat(m.name,"?"),open:E,onClose:b,onConfirm:()=>(async e=>{try{await _e.delete("/queueIntegration/".concat(e)),C.b.success(De.a.t("queueIntegration.toasts.deleted"))}catch(a){We(a)}u(null),h(""),o(1)})(m.id)},De.a.t("queueIntegration.confirmationModal.deleteMessage")),l.a.createElement(Qm,{open:p,onClose:()=>{d(null),g(!1)},"aria-labelledby":"form-dialog-title",integrationId:s&&s.id}),l.a.createElement(pi,null,l.a.createElement(bi,null,De.a.t("queueIntegration.title")," (",v.length,")"),l.a.createElement(Ei,null,l.a.createElement(la.a,{placeholder:De.a.t("queueIntegration.searchPlaceholder"),type:"search",value:f,onChange:e=>{h(e.target.value.toLowerCase())},InputProps:{startAdornment:l.a.createElement(us.a,{position:"start"},l.a.createElement(Ql.a,{color:"secondary"}))}}),l.a.createElement(ra.a,{variant:"contained",color:"primary",onClick:()=>{d(null),g(!0)}},De.a.t("queueIntegration.buttons.add")))),l.a.createElement(ht.a,{className:e.mainPaper,variant:"outlined",onScroll:e=>{if(!i||a)return;const{scrollTop:t,scrollHeight:n,clientHeight:l}=e.currentTarget;n-(t+100)<l&&o(e=>e+1)}},l.a.createElement(bl.a,{size:"small"},l.a.createElement(vl.a,null,l.a.createElement(xl.a,null,l.a.createElement(hl.a,{padding:"checkbox"}),l.a.createElement(hl.a,{align:"center"},De.a.t("queueIntegration.table.id")),l.a.createElement(hl.a,{align:"center"},De.a.t("queueIntegration.table.name")))),l.a.createElement(fl.a,null,l.a.createElement(l.a.Fragment,null,v.map(a=>l.a.createElement(xl.a,{key:a.id},l.a.createElement(hl.a,null,"dialogflow"===a.type&&l.a.createElement(Na.a,{src:Bm.a,className:e.avatar}),"n8n"===a.type&&l.a.createElement(Na.a,{src:qm.a,className:e.avatar}),"webhook"===a.type&&l.a.createElement(Na.a,{src:Um.a,className:e.avatar}),"typebot"===a.type&&l.a.createElement(Na.a,{src:_m.a,className:e.avatar}),"flowbuilder"===a.type&&l.a.createElement(Na.a,{src:Gm.a,className:e.avatar})),l.a.createElement(hl.a,{align:"center"},a.id),l.a.createElement(hl.a,{align:"center"},a.name),l.a.createElement(hl.a,{align:"center"},l.a.createElement(T.a,{size:"small",onClick:()=>(e=>{d(e),g(!0)})(a)},l.a.createElement(oi.a,{color:"secondary"})),l.a.createElement(T.a,{size:"small",onClick:e=>{b(!0),u(a)}},l.a.createElement(ii.a,{color:"secondary"}))))),a&&l.a.createElement(hi,{columns:7}))))))},$m=t(660),eu=t.n($m);const au="".concat("https://boostybackend-production.up.railway.app","/public/logotipos/login.png"),tu=Object(A.a)(e=>({root:{width:"100vw",height:"100vh",background:"black",backgroundRepeat:"no-repeat",backgroundSize:"100% 100%",backgroundPosition:"center",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center"},paper:{backgroundColor:"white",display:"flex",flexDirection:"column",alignItems:"center",padding:"55px 30px",borderRadius:"12.5px"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)},powered:{color:"white"}})),nu=/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}$/;var lu=()=>{const e=tu(),a=Object(x.useHistory)();let t=null;const[r,o]=Object(n.useState)(!1),[c,s]=Object(n.useState)(!1),[d,m]=Object(n.useState)(!1),[u,p]=Object(n.useState)(!1),[g,E]=Object(n.useState)(""),b=()=>{m(!d)},f=()=>{p(!u)},h=Ho.a.parse(window.location.search);void 0!==h.companyId&&(t=h.companyId);const[y]=Object(n.useState)({email:""}),O=(w()().add(3,"day").format(),c),S=Lt.b().shape({email:Lt.d().email("Invalid email").required("Required"),newPassword:O?Lt.d().required("Campo obrigat\xf3rio").matches(nu,"Sua senha precisa ter no m\xednimo 8 caracteres, sendo uma letra mai\xfascula, uma min\xfascula e um n\xfamero."):Lt.d(),confirmPassword:Lt.d().when("newPassword",{is:e=>O&&e,then:Lt.d().oneOf([Lt.c("newPassword"),null],"As senhas n\xe3o correspondem").required("Campo obrigat\xf3rio"),otherwise:Lt.d()})});return l.a.createElement("div",{className:e.root},l.a.createElement(Zn.a,{component:"main",maxWidth:"xs"},l.a.createElement(i.a,null),l.a.createElement("div",{className:e.paper},l.a.createElement("div",null,l.a.createElement("img",{style:{margin:"0 auto",height:"80px",width:"100%"},src:au,alt:"Whats"})),l.a.createElement(R.a,{component:"h1",variant:"h5"},De.a.t("Restablecer contrase\xf1a")),l.a.createElement(Ft.e,{initialValues:{email:"",token:"",newPassword:"",confirmPassword:""},enableReinitialize:!0,validationSchema:S,onSubmit:(e,t)=>{setTimeout(()=>{c?(async e=>{const t=e.email,n=e.token,l=e.newPassword;if(l===e.confirmPassword)try{await _e.post("".concat("https://boostybackend-production.up.railway.app","/resetpasswords/").concat(t,"/").concat(n,"/").concat(l)),E(""),C.b.success(De.a.t("Senha redefinida com sucesso.")),a.push("/login")}catch(r){console.log(r)}})(e):(async e=>{const a=e.email;try{const e=await _e.post("".concat("https://boostybackend-production.up.railway.app","/forgetpassword/").concat(a));console.log("API Response:",e.data),404===e.data.status?C.b.error("Email n\xe3o encontrado"):C.b.success(De.a.t("Email enviado com sucesso!"))}catch(t){console.log("API Error:",t),We(t)}})(e),t.setSubmitting(!1),o(!r),s(!r)},400)}},a=>{let{touched:t,errors:n,isSubmitting:o}=a;return l.a.createElement(Ft.d,{className:e.form},l.a.createElement(Mt.a,{container:!0,spacing:2},l.a.createElement(Mt.a,{item:!0,xs:12},l.a.createElement(Ft.b,{as:la.a,variant:"outlined",fullWidth:!0,id:"email",label:De.a.t("signup.form.email"),name:"email",error:t.email&&Boolean(n.email),helperText:t.email&&n.email,autoComplete:"email",required:!0})),r&&l.a.createElement(l.a.Fragment,null,l.a.createElement(Mt.a,{item:!0,xs:12},l.a.createElement(Ft.b,{as:la.a,variant:"outlined",fullWidth:!0,id:"token",label:"C\xf3digo de Verifica\xe7\xe3o",name:"token",error:t.token&&Boolean(n.token),helperText:t.token&&n.token,autoComplete:"off",required:!0})),l.a.createElement(Mt.a,{item:!0,xs:12},l.a.createElement(Ft.b,{as:la.a,variant:"outlined",fullWidth:!0,type:d?"text":"password",id:"newPassword",label:"Nova senha",name:"newPassword",error:t.newPassword&&Boolean(n.newPassword),helperText:t.newPassword&&n.newPassword,autoComplete:"off",required:!0,InputProps:{endAdornment:l.a.createElement(us.a,{position:"end"},l.a.createElement(T.a,{onClick:b},d?l.a.createElement(Za.a,null):l.a.createElement(eu.a,null)))}})),l.a.createElement(Mt.a,{item:!0,xs:12},l.a.createElement(Ft.b,{as:la.a,variant:"outlined",fullWidth:!0,type:u?"text":"password",id:"confirmPassword",label:"Confirme a senha",name:"confirmPassword",error:t.confirmPassword&&Boolean(n.confirmPassword),helperText:t.confirmPassword&&n.confirmPassword,autoComplete:"off",required:!0,InputProps:{endAdornment:l.a.createElement(us.a,{position:"end"},l.a.createElement(T.a,{onClick:f},u?l.a.createElement(Za.a,null):l.a.createElement(eu.a,null)))}})))),c?l.a.createElement(ra.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit},"Restablecer contrase\xf1a"):l.a.createElement(ra.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit},"Enviar Email"),l.a.createElement(Mt.a,{container:!0,justifyContent:"flex-end"},l.a.createElement(Mt.a,{item:!0},l.a.createElement(Er.a,{href:"#",variant:"body2",component:v.b,to:"/signup"},De.a.t("\xbfNo tienes una cuenta? \xa1Reg\xedstrate!")))),g&&l.a.createElement(R.a,{variant:"body2",color:"error"},g))})),l.a.createElement(Ma.a,{mt:5})))},ru=t(1585),ou=t(1586),iu=t(1587),cu=t(1627),su=t(947),du=t(1616),mu=t(1644);const uu=Object(A.a)(e=>({root:{display:"flex",flexWrap:"wrap"},textField:{marginRight:e.spacing(1),flex:1},extraAttr:{display:"flex",justifyContent:"center",alignItems:"center"},btnWrapper:{position:"relative"},buttonProgress:{color:Ra.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}})),pu=Lt.b().shape({name:Lt.d().min(2,"Muito curto!").max(50,"Muito longo!").required("Digite um nome!")});var gu=e=>{let{open:a,onClose:t,flowId:r,nameWebhook:o="",initialValues:i,onSave:c}=e;const s=uu(),d=Object(n.useRef)(!0),[m,u]=Object(n.useState)({name:o});Object(n.useEffect)(()=>()=>{d.current=!1},[]);const p=()=>{t(),u({name:""})};return l.a.createElement("div",{className:s.root},l.a.createElement(tt.a,{open:a,onClose:p,fullWidth:"md",scroll:"paper"},l.a.createElement(gt.a,{id:"form-dialog-title"},r?"Editar Fluxo":"Agregar Flujo"),l.a.createElement(Ft.e,{initialValues:m,enableReinitialize:!0,validationSchema:pu,onSubmit:(e,a)=>{setTimeout(()=>{(async e=>{if(r)try{const a=await _e.put("/flowbuilder",{name:e.name,flowId:r});console.log("[FLOWSAVE][POST]",a),c(e.name),p(),C.b.success(De.a.t("webhookModal.toasts.update"))}catch(a){We(a)}else try{const a=await _e.post("/flowbuilder",{name:e.name});console.log("[FLOWSAVE][POST]",a),c(e.name),p(),C.b.success(De.a.t("webhookModal.saveSuccess"))}catch(a){We(a)}})(e),a.setSubmitting(!1)},400)}},e=>{let{values:a,errors:t,touched:n,isSubmitting:o}=e;return l.a.createElement(Ft.d,null,l.a.createElement(pt.a,{dividers:!0},l.a.createElement(Ft.b,{as:la.a,label:De.a.t("contactModal.form.name"),name:"name",autoFocus:!0,defaultValue:m.name,error:Boolean(t.name),helperText:t.name,variant:"outlined",margin:"dense",className:s.textField,style:{width:"95%"}})),l.a.createElement(nt.a,null,l.a.createElement(ra.a,{onClick:p,color:"secondary",disabled:o,variant:"outlined"},De.a.t("contactModal.buttons.cancel")),l.a.createElement(ra.a,{type:"submit",color:"primary",disabled:o,variant:"contained",className:s.btnWrapper},"".concat(r?De.a.t("contactModal.buttons.okEdit"):De.a.t("contactModal.buttons.okAdd")),o&&l.a.createElement(za.a,{size:24,className:s.buttonProgress}))))})))};const Eu=(e,a)=>{if("LOAD_CONTACTS"===a.type){const t=a.payload,n=[];return t.forEach(a=>{const t=e.findIndex(e=>e.id===a.id);-1!==t?e[t]=a:n.push(a)}),[...e,...n]}if("UPDATE_CONTACTS"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n?(e[n]=t,[...e]):[t,...e]}if("DELETE_CONTACT"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t);return-1!==n&&e.splice(n,1),[...e]}if("RESET"===a.type)return[]},bu=Object(A.a)(e=>({mainPaper:{flex:1,backgroundColor:"#2a273b",borderRadius:12,padding:e.spacing(1),overflowY:"scroll",...e.scrollbarStyles}}));var fu=()=>{const e=bu(),a=Object(x.useHistory)(),[t,r]=Object(n.useState)(!1),[o,i]=Object(n.useState)(1),[c,s]=Object(n.useState)(""),[d,m]=Object(n.useReducer)(Eu,[]),[u,p]=Object(n.useState)([]),[g,E]=Object(n.useState)(null),[b,f]=Object(n.useState)(null),[h,v]=Object(n.useState)(!1),[O,S]=Object(n.useState)(!1),[w,A]=Object(n.useState)({}),[j,k]=Object(n.useState)(null),[T,I]=Object(n.useState)(!1),[N,M]=Object(n.useState)(!1),[P,R]=Object(n.useState)(!1),[D,L]=Object(n.useState)(!1),F=Object(n.useContext)(y);Object(n.useEffect)(()=>{m({type:"RESET"}),i(1)},[c]),Object(n.useEffect)(()=>{r(!0);const e=setTimeout(()=>{(async()=>{try{const{data:e}=await _e.get("/flowbuilder");p(e.flows),m({type:"LOAD_CONTACTS",payload:e.flows}),R(e.hasMore),r(!1)}catch(e){We(e)}})()},500);return()=>clearTimeout(e)},[c,o,D]),Object(n.useEffect)(()=>{const e=localStorage.getItem("companyId"),a=F.getSocket(e);return a.on("company-".concat(e,"-contact"),e=>{"update"!==e.action&&"create"!==e.action||m({type:"UPDATE_CONTACTS",payload:e.contact}),"delete"===e.action&&m({type:"DELETE_CONTACT",payload:+e.contactId})}),()=>{a.disconnect()}},[]);const[q,W]=Object(n.useState)(null),B=Boolean(q),z=()=>{W(null)};return l.a.createElement(mi,{className:e.mainContainer},l.a.createElement(Gt,{modalOpen:O,initialContact:w,onClose:e=>{(e=>{S(!1),void 0!==e&&void 0!==e.uuid&&a.push("/tickets/".concat(e.uuid))})(e)}}),l.a.createElement(gu,{open:h,onClose:()=>{E(null),v(!1)},"aria-labelledby":"form-dialog-title",flowId:g,nameWebhook:b,onSave:()=>L(e=>!e)}),l.a.createElement(Et,{title:j?"".concat(De.a.t("contacts.confirmationModal.deleteTitle")," ").concat(j.name,"?"):"".concat(De.a.t("contacts.confirmationModal.importTitlte")),open:T,onClose:I,onConfirm:e=>j?(async e=>{try{await _e.delete("/flowbuilder/".concat(e)).then(e=>{k(null),L(e=>!e)}),C.b.success("Flujo eliminado con \xe9xito")}catch(a){We(a)}})(j.id):()=>{}},j?"Est\xe1 seguro de que desea eliminar este flujo? Todas las integraciones relacionadas se perder\xe1n.":"".concat(De.a.t("contacts.confirmationModal.importMessage"))),l.a.createElement(Et,{title:j?"Desea duplicar el flujo ".concat(j.name,"?"):"".concat(De.a.t("contacts.confirmationModal.importTitlte")),open:N,onClose:M,onConfirm:e=>j?(async e=>{try{await _e.post("/flowbuilder/duplicate",{flowId:e}).then(e=>{k(null),L(e=>!e)}),C.b.success("Flujo duplicado con \xe9xito")}catch(a){We(a)}})(j.id):()=>{}},j?"\xbfEst\xe1 seguro de que desea duplicar este flujo?":"".concat(De.a.t("contacts.confirmationModal.importMessage"))),l.a.createElement(pi,null,l.a.createElement(bi,null,"Flujos de conversaci\xf3n"),l.a.createElement(Ei,null,l.a.createElement(la.a,{placeholder:De.a.t("contacts.searchPlaceholder"),type:"search",value:c,onChange:e=>{s(e.target.value.toLowerCase())},InputProps:{style:{color:"#e5e5e5"},startAdornment:l.a.createElement(us.a,{position:"start"},l.a.createElement(Ql.a,{style:{color:"gray"}}))}}),l.a.createElement(Bl.a,{variant:"contained",onClick:()=>{E(null),v(!0)},style:{textTransform:"none",backgroundColor:"#9a00ed"}},l.a.createElement(ql.a,{direction:"row",gap:1},l.a.createElement(ru.a,null),"Agregar Flujo")))),l.a.createElement(ht.a,{className:e.mainPaper,variant:"outlined",onScroll:e=>{if(!P||t)return;const{scrollTop:a,scrollHeight:n,clientHeight:l}=e.currentTarget;n-(a+100)<l&&i(e=>e+1)}},l.a.createElement(ql.a,null,l.a.createElement(cu.a,{container:!0,style:{padding:"8px"}},l.a.createElement(cu.a,{item:!0,xs:4,style:{color:"#ededed"}},De.a.t("contacts.table.name")),l.a.createElement(cu.a,{item:!0,xs:4,style:{color:"#ededed"},align:"center"},"Estado"),l.a.createElement(cu.a,{item:!0,xs:4,align:"end",style:{color:"#ededed"}},De.a.t("contacts.table.actions"))),l.a.createElement(l.a.Fragment,null,u.map(e=>l.a.createElement(cu.a,{container:!0,key:e.id,sx:{padding:"8px",backgroundColor:"#13111C",borderRadius:2,marginTop:.5,"&:hover":{backgroundColor:"#320849"}}},l.a.createElement(cu.a,{item:!0,xs:4,onClick:()=>a.push("/flowbuilder/".concat(e.id))},l.a.createElement(ql.a,{justifyContent:"center",height:"100%",style:{color:"#ededed"}},l.a.createElement(ql.a,{direction:"row"},l.a.createElement(ou.a,null),l.a.createElement(ql.a,{justifyContent:"center",marginLeft:1},e.name)))),l.a.createElement(cu.a,{item:!0,xs:4,align:"center",style:{color:"#ededed"},onClick:()=>a.push("/flowbuilder/".concat(e.id))},l.a.createElement(ql.a,{justifyContent:"center",height:"100%"},e.active?"Activo":"Desativado")),l.a.createElement(cu.a,{item:!0,xs:4,align:"end"},l.a.createElement(Bl.a,{id:"basic-button","aria-controls":B?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":B?"true":void 0,onClick:a=>{W(a.currentTarget),k(e)},sx:{borderRadius:"36px",minWidth:"24px"}},l.a.createElement(iu.a,{sx:{color:"#ededed",width:"21px",height:"21px"}}))))),l.a.createElement(su.a,{id:"basic-menu",anchorEl:q,open:B,sx:{borderRadius:"40px"},onClose:z,MenuListProps:{"aria-labelledby":"basic-button"}},l.a.createElement(du.a,{onClick:()=>{z(),E(j.id),f(j.name),v(!0)}},"Editar nombre"),l.a.createElement(du.a,{onClick:()=>{z(),a.push("/flowbuilder/".concat(j.id))}},"Editar flujo"),l.a.createElement(du.a,{onClick:()=>{z(),M(!0)}},"Duplicar"),l.a.createElement(du.a,{onClick:()=>{z(),I(!0)}},"Eliminar")),t&&l.a.createElement(ql.a,{justifyContent:"center",alignItems:"center",minHeight:"50vh"},l.a.createElement(mu.a,null))))))},hu=t(1637),yu=t(1612),vu=t(1626),xu=t(1638),Cu=t(938),Ou=t.n(Cu);var Su=e=>{let{flowsData:a,fields:t,setFields:n}=e;const r=(e,a,l)=>{const r=t.map((t,n)=>n===e?{...t,[a]:l}:t);n(r)};return l.a.createElement(ql.a,{gap:"12px",marginTop:4},l.a.createElement(hu.a,{fontSize:18,fontWeight:700},"Palabras Claves y Flujo"),l.a.createElement(hu.a,{fontSize:12},"Elija las palabras claves que espera recibir de sus contactos, y el flujo que desea corresponder."),l.a.createElement(ql.a,{gap:2},t.map((e,o)=>l.a.createElement(ql.a,{direction:"row",spacing:2,key:o,alignItems:"center"},l.a.createElement(ql.a,{direction:"row",gap:1},e.text.map((e,a)=>l.a.createElement(vu.a,{key:a,label:e,onDelete:()=>((e,a)=>{const l=t.map((t,n)=>n===e?{...t,text:t.text.filter((e,t)=>t!==a)}:t);n(l)})(o,a),style:{borderRadius:"8px"}}))),l.a.createElement(Wl.a,{label:"Palabras claves",value:e.inputText,onChange:e=>r(o,"inputText",e.target.value),onKeyDown:e=>((e,a)=>{if("Backspace"===e.key&&""===t[a].inputText){const e=t[a].text.slice(0,-1),l=t.map((t,n)=>n===a?{...t,text:e}:t);n(l)}})(e,o),onKeyPress:e=>((e,a)=>{if(" "===e.key||"Enter"===e.key){e.preventDefault();const l=t[a].inputText.trim();if(l&&!t[a].text.includes(l)){const e=t.map((e,t)=>t===a?{...e,text:[...e.text,l],inputText:""}:e);n(e)}}})(e,o),fullWidth:!0}),l.a.createElement(yu.a,{disablePortal:!0,id:"combo-box-demo",value:e.flujo,options:a,onChange:(e,a)=>{r(o,"flujo",a)},sx:{width:"100%"},renderInput:e=>l.a.createElement(Wl.a,Object.assign({},e,{variant:"outlined",placeholder:"Elige un flujo"}))}),l.a.createElement(xu.a,{color:"secondary",onClick:()=>(e=>{const a=t.filter((a,t)=>t!==e);n(a)})(o)},l.a.createElement(Ou.a,null)))),l.a.createElement(Bl.a,{variant:"contained",onClick:()=>{console.log(t),n([...t,{text:[],inputText:"",flujo:""}])}},"Agregar Nuevo Flujo")))};const wu=(e,a)=>{if("LOAD_CONTACTS"===a.type){const t=a.payload,n=[];return t.forEach(a=>{const t=e.findIndex(e=>e.id===a.id);-1!==t?e[t]=a:n.push(a)}),[...e,...n]}if("UPDATE_CONTACTS"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n?(e[n]=t,[...e]):[t,...e]}if("DELETE_CONTACT"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t);return-1!==n&&e.splice(n,1),[...e]}if("RESET"===a.type)return[]},Au=Object(A.a)(e=>({mainPaper:{flex:1,backgroundColor:"#ffff",borderRadius:12,padding:e.spacing(1),overflowY:"scroll",...e.scrollbarStyles},online:{fontSize:11,color:"#25d366"},offline:{fontSize:11,color:"#e1306c"}}));var ju=()=>{const e=Au(),a=Object(x.useHistory)(),{user:t}=Object(n.useContext)(Xe),[r,o]=Object(n.useState)(!0),[i,c]=Object(n.useState)(1),[s,d]=Object(n.useState)(""),[m,u]=Object(n.useReducer)(wu,[]),[p,g]=Object(n.useState)([]),[E,b]=Object(n.useState)(null),[f,h]=Object(n.useState)(null),[v,O]=Object(n.useState)(!1),[S,w]=Object(n.useState)(!1),[A,j]=Object(n.useState)({}),[k,T]=Object(n.useState)(null),[I,N]=Object(n.useState)(!1),[M,P]=Object(n.useState)(!1),[R,D]=Object(n.useState)(!1),[L,F]=Object(n.useState)([]),[q,W]=Object(n.useState)([]),[B,z]=Object(n.useState)(null),[U,H]=Object(n.useState)(null),[_,V]=Object(n.useState)(!1),[G,K]=Object(n.useState)(!1),[Y,Q]=Object(n.useState)(""),[X,J]=Object(n.useState)([]),[Z,$]=Object(n.useState)([]),[ee,ae]=Object(n.useState)({}),{companyId:te,whatsAppId:ne}=t,le=Object(n.useContext)(y),[re,oe]=Object(n.useState)([{text:[],inputText:"",flujo:null,id:""}]);Object(n.useEffect)(()=>{u({type:"RESET"}),c(1)},[s]);Object(n.useEffect)(()=>{o(!0);const e=setTimeout(()=>{(async()=>{_e.get("/whatsapp",{params:{companyId:te,session:0}}).then(e=>{let{data:a}=e;$(a)})})(),o(!1)},500);return()=>clearTimeout(e)},[]),Object(n.useEffect)(()=>{const e=localStorage.getItem("companyId"),a=le.getSocket(e);return a.on("company-".concat(e,"-contact"),e=>{"update"!==e.action&&"create"!==e.action||u({type:"UPDATE_CONTACTS",payload:e.contact}),"delete"===e.action&&u({type:"DELETE_CONTACT",payload:+e.contactId})}),o(!0),(async()=>{const e=await _e.get("/flowbuilder").then(e=>(F(e.data.flows.map(e=>e.name)),W(e.data.flows),e.data.flows));return console.log(e),e})().then(e=>{(async e=>{await _e.get("/flowdefault").then(a=>{var t,n,l;if((null===(t=a.data.flow)||void 0===t?void 0:t.companyId)&&D(!0),a.data.flowPhrase){const t=a.data.flowPhrase.map(a=>{const t=e.filter(e=>e.id===Number(a.phraseId));return{text:a.phrase.split(","),flujo:t[0].name,id:a.id,inputText:""}});console.log(t),oe([...t,...re])}if(null===(n=a.data.flow)||void 0===n?void 0:n.flowIdWelcome){const t=e.filter(e=>e.id===a.data.flow.flowIdWelcome);t.length>0?z(t[0].name):z()}if(null===(l=a.data.flow)||void 0===l?void 0:l.flowIdNotPhrase){const t=e.filter(e=>e.id===a.data.flow.flowIdNotPhrase);t.length>0?H(t[0].name):H()}o(!1)})})(e)}),()=>{a.disconnect()}},[le]);return l.a.createElement(mi,{className:e.mainContainer},l.a.createElement(Gt,{modalOpen:S,initialContact:A,onClose:e=>{(e=>{w(!1),void 0!==e&&void 0!==e.uuid&&a.push("/tickets/".concat(e.uuid))})(e)}}),l.a.createElement(gu,{open:v,onClose:()=>{b(null),O(!1)},"aria-labelledby":"form-dialog-title",flowId:E,nameWebhook:f,onSave:()=>K(e=>!e)}),l.a.createElement(Et,{title:k?"".concat(De.a.t("contacts.confirmationModal.deleteTitle")," ").concat(k.name,"?"):"".concat(De.a.t("contacts.confirmationModal.importTitlte")),open:I,onClose:N,onConfirm:e=>k?(async e=>{try{await _e.delete("/flowbuilder/".concat(e)).then(e=>{T(null),K(e=>!e)}),C.b.success("Fluxo exclu\xeddo com sucesso")}catch(a){We(a)}})(k.id):()=>{}},k?"Tem certeza que deseja deletar este fluxo? Todas as integra\xe7\xf5es relacionados ser\xe3o perdidos.":"".concat(De.a.t("contacts.confirmationModal.importMessage"))),l.a.createElement(pi,null,l.a.createElement(bi,null,"Flujo predeterminado")),l.a.createElement(ht.a,{className:e.mainPaper,variant:"outlined"},l.a.createElement(ql.a,{sx:{padding:"12px",position:"relative"}},l.a.createElement(ql.a,{sx:{position:"absolute",right:0}},l.a.createElement(Bl.a,{onClick:()=>(async()=>{console.log(R);let e=q.filter(e=>e.name===B),a=q.filter(e=>e.name===U),t=re.filter(e=>!(null===e.flujo|0===e.text.length)).map(e=>{const a=q.filter(a=>a.name===e.flujo)[0].id;return{phrase:e.text.join(","),phraseId:a,id:e.id?e.id:null}});if(e=0===e.length?null:e[0].id,a=0===a.length?null:a[0].id,R)try{await _e.put("/flowdefault",{flowIdWelcome:e,flowIdPhrase:a,flowPhrase:t}).then(e=>{T(null),K(e=>!e)}),C.b.success("Fluxos padr\xf5es atualizados")}catch(n){We(n)}else try{await _e.post("/flowdefault",{flowIdWelcome:e,flowIdPhrase:a}).then(e=>{T(null),K(e=>!e)}),C.b.success("Fluxos padr\xf5es atualizados")}catch(n){We(n)}})(),variant:"contained",sx:{backgroundColor:"#9a00ed","&:hover":{backgroundColor:"".concat("#9a00ed"," 90")}}},"Guardar")),l.a.createElement(ql.a,{gap:"12px"},l.a.createElement(hu.a,{fontSize:18,fontWeight:700},"Flujo de bienvenida"),l.a.createElement(hu.a,{fontSize:12},"Este flujo se activa solo para nuevos contactos, personas que no tienes en tu lista de contactos y que han enviado un mensaje"),!r&&l.a.createElement(yu.a,{disablePortal:!0,id:"combo-box-demo",value:B,options:L,onChange:(e,a)=>{z(a)},sx:{width:"100%"},renderInput:e=>l.a.createElement(la.a,Object.assign({},e,{variant:"outlined",placeholder:"Elige un flujo"})),renderTags:(e,a)=>e.map((e,t)=>l.a.createElement(vu.a,Object.assign({variant:"outlined",label:e},a({index:t}),{style:{borderRadius:"8px"}})))}),r&&l.a.createElement(ql.a,{alignSelf:"center"},l.a.createElement(mu.a,{sx:{color:"#9a00ed"}}))),l.a.createElement(ql.a,{gap:"12px",marginTop:4},l.a.createElement(hu.a,{fontSize:18,fontWeight:700},"Flujo de respuesta predeterminada"),l.a.createElement(hu.a,{fontSize:12},"La Respuesta Predeterminada se env\xeda con cualquier car\xe1cter diferente de una palabra clave."),!r&&l.a.createElement(yu.a,{disablePortal:!0,id:"combo-box-demo",value:U,options:L,onChange:(e,a)=>{H(a)},sx:{width:"100%"},renderInput:e=>l.a.createElement(la.a,Object.assign({},e,{variant:"outlined",placeholder:"Elige un flujo"})),renderTags:(e,a)=>e.map((e,t)=>l.a.createElement(vu.a,Object.assign({variant:"outlined",label:e},a({index:t}),{style:{borderRadius:"8px"}})))}),r&&l.a.createElement(ql.a,{alignSelf:"center"},l.a.createElement(mu.a,{sx:{color:"#9a00ed"}}))),l.a.createElement(Su,{flowsData:L,setFields:oe,fields:re}))))},ku=t(1588),Tu=t(1610);const Iu=Object(A.a)(e=>({root:{display:"flex",flexWrap:"wrap"},textField:{marginRight:e.spacing(1),flex:1},extraAttr:{display:"flex",justifyContent:"center",alignItems:"center"},btnWrapper:{position:"relative"},buttonProgress:{color:Ra.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}}));var Nu=e=>{let{open:a,onClose:t,FlowCampaignId:r,onSave:o}=e;const i=Iu(),{user:c}=(Object(n.useRef)(!0),Object(n.useContext)(Xe)),{companyId:s}=c,[d,m]=Object(n.useState)(!0),u=Object(n.useRef)(null),[p,g]=Object(n.useState)({name:"",phrase:""}),[E,b]=Object(n.useState)({name:!1,flowId:!1,phrase:!1}),[f,h]=Object(n.useState)(),[y,v]=Object(n.useState)([]),[x,O]=Object(n.useState)([]),[S,w]=Object(n.useState)(""),[A,j]=Object(n.useState)([]),[k,T]=Object(n.useState)([]),[I,N]=Object(n.useState)({}),[M,P]=Object(n.useState)(!0),[D,F]=Object(n.useState)(!0),q=async()=>{const e=await(async()=>{const e=await _e.get("/flowbuilder");return O(e.data.flows),v(e.data.flows.map(e=>e.name)),e.data.flows})();r?await(async e=>{F(!0),await _e.get("/flowcampaign/".concat(r)).then(a=>{console.log("dete",a.data),g({name:a.data.details.name,phrase:a.data.details.phrase}),P(a.data.details.status);const t=e.filter(e=>e.id===a.data.details.flowId);t.length>0&&h(t[0].name),F(!1)})})(e):(W(),F(!1))};Object(n.useEffect)(()=>{F(!0);const e=setTimeout(()=>{(async()=>{_e.get("/whatsapp",{params:{companyId:s,session:0}}).then(e=>{let{data:a}=e;T(a)})})(),F(!1)},500);return()=>clearTimeout(e)},[]),Object(n.useEffect)(()=>{F(!0),!0===a&&q()},[a]);const W=()=>{h(),g({name:"",phrase:""})},B=()=>{let e=0;if(""!==p.name&&0!==p.name.length||(b(e=>({...e,name:!0})),e++),f||(b(e=>({...e,flowId:!0})),e++),""!==p.phrase&&0!==p.phrase.length||(b(e=>({...e,phrase:!0})),e++),S||b(e=>({...e,whatsappId:!0})),0!==e)return;const a=x.filter(e=>e.name===f)[0].id,n=""!==S?S:null;r?(_e.put("/flowcampaign",{id:r,name:p.name,flowId:a,whatsappId:n,phrase:p.phrase,status:M}),t(),o("ok"),C.b.success("Frase alterada com sucesso!"),W()):(_e.post("/flowcampaign",{name:p.name,flowId:a,whatsappId:n,phrase:p.phrase}),t(),o("ok"),C.b.success("Frase criada com sucesso!"),W())};return l.a.createElement("div",{className:i.root},l.a.createElement(tt.a,{open:a,onClose:()=>{t()},fullWidth:!0,maxWidth:"md",scroll:"paper"},l.a.createElement(gt.a,{id:"form-dialog-title"},d?l.a.createElement(l.a.Fragment,null,r?"Editar campanha com fluxo por frase":"Nova campanha com fluxo por frase"):l.a.createElement(l.a.Fragment,null,"".concat(De.a.t("campaigns.dialog.readonly")))),l.a.createElement("div",{style:{display:"none"}},l.a.createElement("input",{type:"file",ref:u})),!D&&l.a.createElement(ql.a,{sx:{padding:"52px"}},l.a.createElement(ql.a,{sx:{gap:"14px"}},l.a.createElement(ql.a,{gap:1},l.a.createElement(R.a,null,"Nome do disparo por frase"),l.a.createElement(la.a,{label:"",name:"text",variant:"outlined",error:E.name,defaultValue:p.name,margin:"dense",onChange:e=>{g(a=>{let t=a;return t.name=e.target.value,t})},className:i.textField,style:{width:"100%"}})),l.a.createElement(ql.a,{gap:1},l.a.createElement(R.a,null,"Escolha um fluxo"),l.a.createElement(yu.a,{disablePortal:!0,id:"combo-box-demo",value:f,error:E.flowId,defaultValue:f,options:y,onChange:(e,a)=>{h(a)},sx:{width:"100%"},renderInput:e=>l.a.createElement(la.a,Object.assign({},e,{error:E.flowId,variant:"outlined",style:{width:"100%"},placeholder:"Escolha um fluxo"})),renderTags:(e,a)=>e.map((e,t)=>l.a.createElement(vu.a,Object.assign({variant:"outlined",label:e},a({index:t}),{style:{borderRadius:"8px"}})))})),l.a.createElement(ql.a,{gap:1},l.a.createElement(Ht.a,{required:!0,fullWidth:!0,displayEmpty:!0,variant:"outlined",value:S,onChange:e=>{w(e.target.value)},MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},getContentAnchorEl:null},renderValue:()=>{if(""===S)return"Selecione uma Conex\xe3o";return k.find(e=>e.id===S).name}},(null===k||void 0===k?void 0:k.length)>0&&k.map((e,a)=>l.a.createElement(L.a,{dense:!0,key:a,value:e.id},l.a.createElement(K.a,{primary:l.a.createElement(l.a.Fragment,null,l.a.createElement(R.a,{component:"span",style:{fontSize:14,marginLeft:"10px",display:"inline-flex",alignItems:"center",lineHeight:"2"}},e.name," \xa0 ",l.a.createElement("p",{className:"CONNECTED"===e.status?i.online:i.offline},"(",e.status,")")))}))))),l.a.createElement(ql.a,{gap:1},l.a.createElement(R.a,null,"Qual frase dispara o fluxo?"),l.a.createElement(la.a,{label:"",name:"text",variant:"outlined",error:E.phrase,defaultValue:p.phrase,margin:"dense",onChange:e=>{g(a=>{let t=a;return t.phrase=e.target.value,t})},className:i.textField,style:{width:"100%"}})),l.a.createElement(ql.a,{direction:"row",gap:2},l.a.createElement(ql.a,{justifyContent:"center"},l.a.createElement(R.a,null,"Status")),l.a.createElement(Tu.a,{checked:M,onChange:()=>P(e=>!e)}))),l.a.createElement(ql.a,{direction:"row",spacing:2,alignSelf:"end",marginTop:"16px"},l.a.createElement(ra.a,{variant:"outlined",onClick:()=>{t(),b({name:!1,flowId:!1,whatsappId:!1,phrase:!1})}},"Cancelar"),r?l.a.createElement(ra.a,{variant:"contained",color:"primary",onClick:()=>B()},"Salvar campanha"):l.a.createElement(ra.a,{variant:"contained",color:"primary",onClick:()=>B()},"Criar campanha"))),D&&l.a.createElement(ql.a,{justifyContent:"center",alignItems:"center",minHeight:"10vh",sx:{padding:"52px"}},l.a.createElement(za.a,null))))};const Mu=Object(A.a)(e=>({mainPaper:{flex:1,backgroundColor:"#2a273b",borderRadius:12,padding:e.spacing(1),overflowY:"scroll",...e.scrollbarStyles}}));var Pu=()=>{const e=Mu(),{user:a}=(Object(x.useHistory)(),Object(n.useContext)(Xe)),[t,r]=Object(n.useState)(!0),[o,i]=Object(n.useState)(1),[c,s]=Object(n.useState)(!1),[d,m]=Object(n.useState)(null),[u,p]=Object(n.useState)(null),[g,E]=Object(n.useState)(!1),[b,f]=Object(n.useState)(!1),[h,y]=Object(n.useState)(""),[v,O]=Object(n.useState)(!1),[S,w]=Object(n.useState)(null),[A,j]=Object(n.useState)([]),[k,I]=Object(n.useState)(!1),[N,M]=Object(n.useState)(),P=async()=>{r(!0),await _e.get("/flowcampaign").then(e=>{j(e.data.flow),r(!1)})};return Object(n.useEffect)(()=>{P()},[]),l.a.createElement(mi,null,l.a.createElement(Et,{title:u&&"".concat(De.a.t("campaigns.confirmationModal.deleteTitle")," ").concat(u.name,"?"),open:b,onClose:f,onConfirm:()=>(async e=>{try{await _e.delete("/flowcampaign/".concat(e)),C.b.success("Frase deletada"),P()}catch(a){We(a)}})(S.id)},De.a.t("campaigns.confirmationModal.deleteMessage")),l.a.createElement(Nu,{open:k,onClose:()=>I(!1),FlowCampaignId:N,onSave:()=>{P()}}),l.a.createElement(pi,null,l.a.createElement(cu.a,{style:{width:"99.6%"},container:!0},l.a.createElement(cu.a,{xs:12,sm:8,item:!0},l.a.createElement(bi,null,"Campanhas")),l.a.createElement(cu.a,{xs:12,sm:4,item:!0},l.a.createElement(cu.a,{spacing:2,container:!0},l.a.createElement(cu.a,{xs:6,sm:6,item:!0}),l.a.createElement(cu.a,{xs:6,sm:6,item:!0},l.a.createElement(ra.a,{fullWidth:!0,variant:"contained",onClick:()=>{M(),I(!0)},color:"primary",style:{textTransform:"none"}},l.a.createElement(ql.a,{direction:"row",gap:1},l.a.createElement(ru.a,null),"Campanha"))))))),l.a.createElement(ht.a,{className:e.mainPaper,variant:"outlined",onScroll:e=>{if(!c||t)return;const{scrollTop:a,scrollHeight:n,clientHeight:l}=e.currentTarget}},l.a.createElement(ql.a,null,l.a.createElement(cu.a,{container:!0,style:{padding:"8px"}},l.a.createElement(cu.a,{item:!0,xs:4,style:{color:"#ededed"}},"Nome"),l.a.createElement(cu.a,{item:!0,xs:4,style:{color:"#ededed"},align:"center"},"Status"),l.a.createElement(cu.a,{item:!0,xs:4,align:"end",style:{color:"#ededed"}},De.a.t("contacts.table.actions"))),l.a.createElement(l.a.Fragment,null,!t&&A.map(e=>l.a.createElement(cu.a,{container:!0,key:e.id,sx:{padding:"8px",backgroundColor:"#13111C",borderRadius:4,marginTop:.5,"&:hover":{backgroundColor:"#320849"}}},l.a.createElement(cu.a,{item:!0,xs:4},l.a.createElement(ql.a,{justifyContent:"center",height:"100%",style:{color:"#ededed"}},l.a.createElement(ql.a,{direction:"row"},l.a.createElement(ku.a,null),l.a.createElement(ql.a,{justifyContent:"center",marginLeft:1},e.name)))),l.a.createElement(cu.a,{item:!0,xs:4,align:"center",style:{color:"#ededed"}},l.a.createElement(ql.a,{justifyContent:"center",height:"100%"},e.status?"Ativo":"Desativado")),l.a.createElement(cu.a,{item:!0,xs:4,align:"end"},l.a.createElement(T.a,{size:"small",onClick:()=>{M(e.id),I(!0)}},l.a.createElement(da.a,{style:{color:"#ededed"}})),l.a.createElement($e,{role:a.profile,perform:"contacts-page:deleteContact",yes:()=>l.a.createElement(T.a,{size:"small",onClick:a=>{f(!0),w(e)}},l.a.createElement(Wt.a,{style:{color:"#ededed"}}))})))),t&&l.a.createElement(ql.a,{justifyContent:"center",alignItems:"center",minHeight:"50vh"},l.a.createElement(mu.a,null))))))},Ru=t(1628),Du=t(1629),Lu=t(1623),Fu=t(1590),qu=t(1591),Wu=t(1592),Bu=t(1593),zu=t(56),Uu=t(939);const Hu=Object(Uu.create)(e=>({node:"",connect:"",action:"idle",setNodesStorage:a=>e(e=>({...e,node:a})),setConnectsStorage:a=>e(e=>({...e,connect:a})),setAct:a=>e(e=>({...e,action:a}))}));var _u=Object(n.memo)(e=>{let{data:a,isConnectable:t,id:n}=e;const r=Hu();return l.a.createElement("div",{style:{backgroundColor:"#555",padding:"8px",borderRadius:"8px"}},l.a.createElement(zu.a,{type:"target",position:"left",style:{background:"#9a00ed",width:"18px",height:"18px",top:"20px",left:"-12px",cursor:"pointer"},onConnect:e=>console.log("handle onConnect",e),isConnectable:t},l.a.createElement(Fu.a,{sx:{color:"#ffff",width:"10px",height:"10px",marginLeft:"3.5px",marginBottom:"1px",pointerEvents:"none"}})),l.a.createElement("div",{style:{display:"flex",position:"absolute",right:5,top:5,cursor:"pointer",gap:6}},l.a.createElement(qu.a,{onClick:()=>{r.setNodesStorage(n),r.setAct("duplicate")},sx:{width:"12px",height:"12px",color:"#ffff"}}),l.a.createElement(Wu.a,{onClick:()=>{r.setNodesStorage(n),r.setAct("delete")},sx:{width:"12px",height:"12px",color:"#ffff"}})),l.a.createElement("div",{style:{color:"#ededed",fontSize:"16px",flexDirection:"row",display:"flex"}},l.a.createElement(Bu.a,{sx:{width:"16px",height:"16px",marginRight:"4px",marginTop:"4px"}}),l.a.createElement("div",{style:{color:"#ededed",fontSize:"16px"}},"Mensagem")),l.a.createElement("div",{style:{color:"#ededed",fontSize:"12px",width:180}},a.label),l.a.createElement(zu.a,{type:"source",position:"right",id:"a",style:{background:"#9a00ed",width:"18px",height:"18px",top:"70%",right:"-11px",cursor:"pointer"},isConnectable:t},l.a.createElement(Fu.a,{sx:{color:"#ffff",width:"10px",height:"10px",marginLeft:"2.9px",marginBottom:"1px",pointerEvents:"none"}})))}),Vu=(t(1362),t(6)),Gu=t(298),Ku=t(831),Yu=t(832);const Qu=Object(A.a)(e=>({root:{display:"flex",flexWrap:"wrap"},textField:{marginRight:e.spacing(1),flex:1},extraAttr:{display:"flex",justifyContent:"center",alignItems:"center"},btnWrapper:{position:"relative"},buttonProgress:{color:Ra.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}}));Lt.b().shape({name:Lt.d().min(2,"Muito curto!").max(50,"Muito longo!").required("Digite um nome!"),text:Lt.d().min(2,"Muito curto!").max(50,"Muito longo!").required("Digite uma mensagem!")});var Xu=e=>{let{open:a,onSave:t,onUpdate:r,data:o,close:i}=e;const c=Qu(),s=Object(n.useRef)(!0),[d,m]=Object(n.useState)(!1),[u,p]=Object(n.useState)({title:"Adicionar mensagem ao fluxo",btn:"Adicionar"}),[g,E]=Object(n.useState)();Object(n.useEffect)(()=>{"edit"===a?(p({title:"Editar mensagem ao fluxo",btn:"Salvar"}),E(o.data.label),m(!0)):"create"===a?(p({title:"Adicionar mensagem ao fluxo",btn:"Adicionar"}),E(""),m(!0)):m(!1)},[a]),Object(n.useEffect)(()=>()=>{s.current=!1},[]);const b=()=>{i(null),m(!1)};return l.a.createElement("div",{className:c.root},l.a.createElement(tt.a,{open:d,onClose:b,fullWidth:"md",scroll:"paper"},l.a.createElement(gt.a,{id:"form-dialog-title"},u.title),l.a.createElement(ql.a,null,l.a.createElement(pt.a,{dividers:!0},l.a.createElement(la.a,{label:"Mensagem",multiline:!0,rows:7,name:"text",variant:"outlined",value:g,margin:"dense",onChange:e=>E(e.target.value),className:c.textField,style:{width:"95%"}})),l.a.createElement(nt.a,null,l.a.createElement(ra.a,{onClick:b,color:"secondary",variant:"outlined"},De.a.t("contactModal.buttons.cancel")),l.a.createElement(ra.a,{type:"submit",color:"primary",variant:"contained",className:c.btnWrapper,onClick:()=>(async()=>{if("edit"===a)return b(),void r({...o,data:{label:g}});"create"===a&&(b(),t({text:g}))})()},"".concat(u.btn))))))};const Ju=Object(A.a)(e=>({root:{display:"flex",flexWrap:"wrap"},textField:{marginRight:e.spacing(1),flex:1},extraAttr:{display:"flex",justifyContent:"center",alignItems:"center"},btnWrapper:{position:"relative"},buttonProgress:{color:Ra.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}}));var Zu=e=>{let{open:a,onSave:t,data:r,onUpdate:o,close:i}=e;const c=Ju(),s=Object(n.useRef)(!0),[d,m]=Object(n.useState)(0),[u,p]=Object(n.useState)(!1);Object(n.useEffect)(()=>("edit"===a?(m(r.data.sec),p(!0)):"create"===a&&(m(0),p(!0)),()=>{s.current=!1}),[a]);const g=()=>{i(null),p(!1)};return l.a.createElement("div",{className:c.root},l.a.createElement(tt.a,{open:u,onClose:g,fullWidth:"md",scroll:"paper"},l.a.createElement(gt.a,{id:"form-dialog-title"},"create"===a?"Agregar un intervalo al flujo":"Editar intervalo"),l.a.createElement(ql.a,null,l.a.createElement(pt.a,{dividers:!0},l.a.createElement(la.a,{label:"Tiempo en segundos",name:"timer",type:"number",value:d,onChange:e=>m(e.target.value),autoFocus:!0,variant:"outlined",InputProps:{inputProps:{min:0}},margin:"dense",className:c.textField,style:{width:"95%"}})),l.a.createElement(nt.a,null,l.a.createElement(ra.a,{onClick:g,color:"secondary",variant:"outlined"},De.a.t("contactModal.buttons.cancel")),l.a.createElement(ra.a,{type:"submit",color:"primary",variant:"contained",className:c.btnWrapper,onClick:()=>(async e=>!d||parseInt(d)<=0?C.b.error("A\xf1adir el valor del intervalo"):parseInt(d)>120?C.b.error("M\xe1ximo de tiempo alcanzado: 120 segundos"):("edit"===a?o({...r,data:{sec:d}}):"create"===a&&t({sec:d}),void g()))()},"create"===a?"Agregar":"Editar")))))},$u=t(1594),ep=Object(n.memo)(e=>{let{data:a,isConnectable:t}=e;return l.a.createElement("div",{style:{backgroundColor:"#F9FDF9",padding:"8px",borderRadius:"8px",boxShadow:"rgba(0, 0, 0, 0.05) 0px 3px 5px",border:"1px solid rgba(58, 186, 56, 0.25)"}},l.a.createElement("div",{style:{color:"#ededed",fontSize:"16px",flexDirection:"row",display:"flex"}},l.a.createElement($u.a,{sx:{width:"16px",height:"16px",marginRight:"4px",marginTop:"4px",color:"#3aba38"}}),l.a.createElement("div",{style:{color:"#232323",fontSize:"16px"}},"Inicio del flujo")),l.a.createElement("div",{style:{color:"#727272",fontSize:"12px"}},"Este bloque marca el inicio de tu flujo!"),l.a.createElement(zu.a,{type:"source",position:"right",id:"a",style:{background:"#9a00ed",width:"18px",height:"18px",top:"70%",right:"-11px",cursor:"pointer"},isConnectable:t},l.a.createElement(Fu.a,{sx:{color:"#ffff",width:"10px",height:"10px",marginLeft:"2.9px",marginBottom:"1px",pointerEvents:"none"}})))}),ap=t(1595),tp=Object(n.memo)(e=>{let{data:a,isConnectable:t}=e;return l.a.createElement("div",{style:{backgroundColor:"#555",padding:"8px",borderRadius:"8px"}},l.a.createElement(zu.a,{type:"target",position:"left",style:{background:"#9a00ed"},onConnect:e=>console.log("handle onConnect",e),isConnectable:t}),l.a.createElement("div",{style:{color:"#ededed",fontSize:"16px",flexDirection:"row",display:"flex"}},l.a.createElement(ap.a,{sx:{width:"16px",height:"16px",marginRight:"4px",marginTop:"4px"}}),l.a.createElement("div",{style:{color:"#ededed",fontSize:"16px"}},"Condi\xe7\xe3o")),l.a.createElement("div",{style:{color:"#ededed",fontSize:"12px"}},a.key),l.a.createElement("div",{style:{color:"#ededed",fontSize:"12px"}},1===(n=a.condition)?"==":2===n?">=":3===n?"<=":4===n?"<":5===n?">":void 0),l.a.createElement("div",{style:{color:"#ededed",fontSize:"12px"}},a.value),l.a.createElement(zu.a,{type:"source",position:"right",id:"a",style:{top:10,background:"#9a00ed"},isConnectable:t}),l.a.createElement(zu.a,{type:"source",position:"right",id:"b",style:{bottom:10,top:"auto",background:"#9a00ed"},isConnectable:t}));var n}),np=t(1596),lp=Object(n.memo)(e=>{let{data:a,isConnectable:t,id:n}=e;const r=Hu();return l.a.createElement("div",{style:{backgroundColor:"#FAFBFF",padding:"8px",borderRadius:"8px",maxWidth:"155px",boxShadow:"0px 3px 5px rgba(0,0,0,.05)",border:"1px solid rgba(104, 58, 200, 0.25)",width:180}},l.a.createElement(zu.a,{type:"target",position:"left",style:{background:"#9a00ed",width:"18px",height:"18px",top:"20px",left:"-12px",cursor:"pointer"},onConnect:e=>console.log("handle onConnect",e),isConnectable:t},l.a.createElement(Fu.a,{sx:{color:"#ffff",width:"10px",height:"10px",marginLeft:"3.5px",marginBottom:"1px",pointerEvents:"none"}})),l.a.createElement("div",{style:{display:"flex",position:"absolute",right:5,top:5,cursor:"pointer",gap:6}},l.a.createElement(qu.a,{onClick:()=>{r.setNodesStorage(n),r.setAct("duplicate")},sx:{width:"12px",height:"12px",color:"#683AC8"}}),l.a.createElement(Wu.a,{onClick:()=>{r.setNodesStorage(n),r.setAct("delete")},sx:{width:"12px",height:"12px",color:"#683AC8"}})),l.a.createElement("div",{style:{color:"#ededed",fontSize:"16px",flexDirection:"row",display:"flex"}},l.a.createElement(np.a,{sx:{width:"16px",height:"16px",marginRight:"4px",marginTop:"4px",color:"#683AC8"}}),l.a.createElement("div",{style:{color:"#232323",fontSize:"16px"}},"Menu")),l.a.createElement("div",null,l.a.createElement("div",{style:{color:"#232323",fontSize:"12px",height:"50px",overflow:"hidden",marginBottom:"8px"}},a.message)),a.arrayOption.map(e=>l.a.createElement("div",{style:{marginBottom:"9px",justifyContent:"end",display:"flex"}},l.a.createElement("div",{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontSize:"10px",position:"relative",display:"flex",color:"#232323",justifyContent:"center",flexDirection:"column",alignSelf:"end"}},"[".concat(e.number,"] ").concat(e.value)),l.a.createElement(zu.a,{type:"source",position:"right",id:"a"+e.number,style:{top:74+23*e.number,background:"#9a00ed",width:"18px",height:"18px",right:"-11px",cursor:"pointer"},isConnectable:t},l.a.createElement(Fu.a,{sx:{color:"#ffff",width:"10px",height:"10px",marginLeft:"2.9px",marginBottom:"1px",pointerEvents:"none"}})))))}),rp=t(1597),op=Object(n.memo)(e=>{let{data:a,isConnectable:t,id:n}=e;const r=Hu();return l.a.createElement("div",{style:{backgroundColor:"#FFFBFA",padding:"8px",borderRadius:"8px",minWidth:"155px",border:"1px solid rgba(240, 135, 90, 0.25)",boxShadow:"rgba(0, 0, 0, 0.05) 0px 3px 5px"}},l.a.createElement(zu.a,{type:"target",position:"left",style:{background:"#9a00ed",width:"18px",height:"18px",top:"20px",left:"-12px",cursor:"pointer"},onConnect:e=>console.log("handle onConnect",e),isConnectable:t},l.a.createElement(Fu.a,{sx:{color:"#ffff",width:"10px",height:"10px",marginLeft:"3.5px",marginBottom:"1px",pointerEvents:"none"}})),l.a.createElement("div",{style:{display:"flex",position:"absolute",right:5,top:5,cursor:"pointer",gap:6}},l.a.createElement(qu.a,{onClick:()=>{r.setNodesStorage(n),r.setAct("duplicate")},sx:{width:"12px",height:"12px",color:"#F7953B"}}),l.a.createElement(Wu.a,{onClick:()=>{r.setNodesStorage(n),r.setAct("delete")},sx:{width:"12px",height:"12px",color:"#F7953B"}})),l.a.createElement("div",{style:{color:"#ededed",fontSize:"16px",flexDirection:"row",display:"flex"}},l.a.createElement(rp.a,{sx:{width:"16px",height:"16px",marginRight:"4px",marginTop:"4px",color:"#F7953B"}}),l.a.createElement("div",{style:{color:"#232323",fontSize:"16px"}},"Intervalo")),l.a.createElement("div",{style:{color:"#232323",fontSize:"12px"}},a.sec," segundos"),l.a.createElement(zu.a,{type:"source",position:"right",id:"a",style:{background:"#9a00ed",width:"18px",height:"18px",top:"70%",right:"-11px",cursor:"pointer"},isConnectable:t},l.a.createElement(Fu.a,{sx:{color:"#ffff",width:"10px",height:"10px",marginLeft:"2.9px",marginBottom:"1px",pointerEvents:"none"}})))}),ip=t(1598),cp=Object(n.memo)(e=>{let{data:a,isConnectable:t,id:n}=e;const r=Hu();return l.a.createElement("div",{style:{backgroundColor:"#555",padding:"8px",borderRadius:"8px"}},l.a.createElement(zu.a,{type:"target",position:"left",style:{background:"#9a00ed"},onConnect:e=>console.log("handle onConnect",e),isConnectable:t}),l.a.createElement("div",{style:{display:"flex",position:"absolute",right:5,top:5,cursor:"pointer",gap:6}},l.a.createElement(qu.a,{onClick:()=>{r.setNodesStorage(n),r.setAct("duplicate")},sx:{width:"12px",height:"12px",color:"#ffff"}}),l.a.createElement(Wu.a,{onClick:()=>{r.setNodesStorage(n),r.setAct("delete")},sx:{width:"12px",height:"12px",color:"#ffff"}})),l.a.createElement("div",{style:{color:"#ededed",fontSize:"16px",flexDirection:"row",display:"flex"}},l.a.createElement(ip.a,{sx:{width:"16px",height:"16px",marginRight:"4px",marginTop:"4px"}}),l.a.createElement("div",{style:{color:"#ededed",fontSize:"16px"}},"Imagem")),l.a.createElement("div",{style:{color:"#ededed",fontSize:"12px",width:180}},l.a.createElement("img",{src:"".concat("https://boostybackend-production.up.railway.app","/public/").concat(a.url),style:{width:"180px"}})),l.a.createElement(zu.a,{type:"source",position:"right",id:"a",style:{background:"#9a00ed"},isConnectable:t}))}),sp=t(1599),dp=Object(n.memo)(e=>{let{data:a,isConnectable:t,id:n}=e;const r=Hu();return l.a.createElement("div",{style:{backgroundColor:"#F8FCFD",padding:"8px",borderRadius:"8px",width:"185px",border:"1px solid rgba(31, 186, 220, 0.25)"}},l.a.createElement(zu.a,{type:"target",position:"left",style:{background:"#9a00ed",width:"18px",height:"18px",top:"20px",left:"-12px",cursor:"pointer"},onConnect:e=>console.log("handle onConnect",e),isConnectable:t},l.a.createElement(Fu.a,{sx:{color:"#ffff",width:"10px",height:"10px",marginLeft:"3.5px",marginBottom:"1px",pointerEvents:"none"}})),l.a.createElement("div",{style:{display:"flex",position:"absolute",right:5,top:5,cursor:"pointer",gap:6}},l.a.createElement(qu.a,{onClick:()=>{r.setNodesStorage(n),r.setAct("duplicate")},sx:{width:"12px",height:"12px",color:"#1FBADC"}}),l.a.createElement(Wu.a,{onClick:()=>{r.setNodesStorage(n),r.setAct("delete")},sx:{width:"12px",height:"12px",color:"#1FBADC"}})),l.a.createElement("div",{style:{color:"#ededed",fontSize:"16px",flexDirection:"row",display:"flex"}},l.a.createElement(sp.a,{sx:{width:"16px",height:"16px",marginRight:"4px",marginTop:"4px",color:"#1FBADC"}}),l.a.createElement("div",{style:{color:"#232323",fontSize:"16px"}},"Aleatorizador")),l.a.createElement("div",{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontSize:"16px",justifyContent:"end",position:"relative",display:"flex",color:"#232323"}},"".concat(a.percent,"%")),l.a.createElement(zu.a,{type:"source",position:"right",id:"a",style:{background:"#9a00ed",width:"18px",height:"18px",right:"-11px",marginTop:"-5px",cursor:"pointer"},isConnectable:t},l.a.createElement(Fu.a,{sx:{color:"#ffff",width:"10px",height:"10px",marginLeft:"2.9px",marginBottom:"1px",pointerEvents:"none"}})),l.a.createElement("div",{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontSize:"16px",justifyContent:"end",position:"relative",display:"flex",marginTop:"8px",color:"#232323"}},"".concat(100-a.percent,"%")),l.a.createElement(zu.a,{type:"source",position:"right",id:"b",style:{background:"#9a00ed",width:"18px",height:"18px",right:"-11px",top:73,cursor:"pointer"},isConnectable:t},l.a.createElement(Fu.a,{sx:{color:"#ffff",width:"10px",height:"10px",marginLeft:"2.9px",marginBottom:"1px",pointerEvents:"none"}})))}),mp=t(1600),up=Object(n.memo)(e=>{let{data:a,isConnectable:t,id:n}=e;const r=Hu();return l.a.createElement("div",{style:{backgroundColor:"#555",padding:"8px",borderRadius:"8px"}},l.a.createElement(zu.a,{type:"target",position:"left",style:{background:"#9a00ed"},onConnect:e=>console.log("handle onConnect",e),isConnectable:t}),l.a.createElement("div",{style:{display:"flex",position:"absolute",right:5,top:5,cursor:"pointer",gap:6}},l.a.createElement(qu.a,{onClick:()=>{r.setNodesStorage(n),r.setAct("duplicate")},sx:{width:"12px",height:"12px",color:"#ffff"}}),l.a.createElement(Wu.a,{onClick:()=>{r.setNodesStorage(n),r.setAct("delete")},sx:{width:"12px",height:"12px",color:"#ffff"}})),l.a.createElement("div",{style:{color:"#ededed",fontSize:"16px",flexDirection:"row",display:"flex"}},l.a.createElement(mp.a,{sx:{width:"16px",height:"16px",marginRight:"4px",marginTop:"4px"}}),l.a.createElement("div",{style:{color:"#ededed",fontSize:"16px"}},"Video")),l.a.createElement("div",{style:{color:"#ededed",fontSize:"12px",width:180}},l.a.createElement("video",{controls:"controls",width:"180px"},l.a.createElement("source",{src:"".concat("https://boostybackend-production.up.railway.app","/public/").concat(a.url),type:"video/mp4"}),"seu navegador n\xe3o suporta HTML5")),l.a.createElement(zu.a,{type:"source",position:"right",id:"a",style:{background:"#9a00ed"},isConnectable:t}))}),pp=t(1640),gp=t(1621),Ep=t(1614);const bp=Object(A.a)(e=>({root:{display:"flex",flexWrap:"wrap"},textField:{marginRight:e.spacing(1),flex:1},extraAttr:{display:"flex",justifyContent:"center",alignItems:"center"},btnWrapper:{position:"relative"},buttonProgress:{color:Ra.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}})),fp={".MuiOutlinedInput-notchedOutline":{borderColor:"#909090"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"#000000",borderWidth:"thin"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"#0872b9",borderWidth:"thin"}};Lt.b().shape({name:Lt.d().min(2,"Muito curto!").max(50,"Muito longo!").required("Digite um nome!"),text:Lt.d().min(2,"Muito curto!").max(50,"Muito longo!").required("Digite uma mensagem!")});var hp=e=>{let{open:a,onSave:t,onUpdate:r,data:o,close:i}=e;const c=bp(),s=Object(n.useRef)(!0),[d,m]=Object(n.useState)(!1),[u,p]=Object(n.useState)(),[g,E]=Object(n.useState)(),[b,f]=Object(n.useState)(),[h,y]=Object(n.useState)({title:"Adicionar condi\xe7\xe3o ao fluxo",btn:"Adicionar"});Object(n.useEffect)(()=>{"edit"===a?(y({title:"Editar condi\xe7\xe3o",btn:"Salvar"}),E(o.data.key),p(o.data.condition),f(o.data.value),m(!0)):"create"===a?(y({title:"Adicionar condi\xe7\xe3o ao fluxo",btn:"Adicionar"}),E(),p(),f(),m(!0)):m(!1)},[a]),Object(n.useEffect)(()=>()=>{s.current=!1},[]);const v=()=>{i(null),m(!1)};return l.a.createElement("div",{className:c.root},l.a.createElement(tt.a,{open:d,onClose:v,fullWidth:"md",scroll:"paper"},l.a.createElement(gt.a,{id:"form-dialog-title"},h.title),l.a.createElement(ql.a,null,l.a.createElement(ql.a,{dividers:!0,style:{height:"250px",gap:"8px",padding:"16px"}},l.a.createElement(la.a,{label:"Campo da condi\xe7\xe3o (Digiter apenas 1 chave)",rows:7,name:"text",variant:"outlined",value:g,onChange:e=>E(e.target.value),className:c.textField,style:{width:"95%"}}),l.a.createElement(pp.a,{sx:{width:"95%"},size:"medium"},l.a.createElement(gp.a,{sx:fp,id:"demo-simple-select-label"},"Regra de valida\xe7\xe3o"),l.a.createElement(Ep.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:u,label:"Regra de valida\xe7\xe3o",onChange:e=>p(e.target.value),variant:"outlined",color:"primary",sx:fp},l.a.createElement(du.a,{value:1}," ","=="," "),l.a.createElement(du.a,{value:2}," ",">="," "),l.a.createElement(du.a,{value:3}," ","<="," "),l.a.createElement(du.a,{value:4}," "," < "," "),l.a.createElement(du.a,{value:5}," "," > "," "))),l.a.createElement(la.a,{label:"Valor da condi\xe7\xe3o a ser analisada",rows:7,name:"text",variant:"outlined",value:b,onChange:e=>f(e.target.value),className:c.textField,style:{width:"95%",marginTop:"11px"}})),l.a.createElement(nt.a,null,l.a.createElement(ra.a,{onClick:v,color:"secondary",variant:"outlined"},De.a.t("contactModal.buttons.cancel")),l.a.createElement(ra.a,{type:"submit",color:"primary",variant:"contained",className:c.btnWrapper,onClick:()=>(async()=>{if("edit"===a)return v(),void r({...o,data:{key:g,condition:u,value:b}});"create"===a&&(v(),t({key:g,condition:u,value:b}))})()},"".concat(h.btn))))))};const yp=Object(A.a)(e=>({root:{display:"flex",flexWrap:"wrap"},textField:{marginRight:e.spacing(1),flex:1},extraAttr:{display:"flex",justifyContent:"center",alignItems:"center"},btnWrapper:{position:"relative"},buttonProgress:{color:Ra.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}}));Lt.b().shape({name:Lt.d().min(2,"Muito curto!").max(50,"Muito longo!").required("Digite um nome!"),text:Lt.d().min(2,"Muito curto!").max(50,"Muito longo!").required("Digite uma mensagem!")});var vp=e=>{let{open:a,onSave:t,onUpdate:r,data:o,close:i}=e;const c=yp(),s=Object(n.useRef)(!0),[d,m]=Object(n.useState)(!1),[u,p]=Object(n.useState)(),[g,E]=Object(n.useState)(),[b,f]=Object(n.useState)([]),[h,y]=Object(n.useState)({title:"Agregar men\xfa al flujo",btn:"Agregar"});Object(n.useEffect)(()=>{"edit"===a?(y({title:"Editar men\xfa",btn:"Guardar"}),E(o.data.message),f(o.data.arrayOption),m(!0)):"create"===a?(y({title:"Agregar men\xfa al flujo",btn:"Agregar"}),E(),f([]),m(!0)):m(!1)},[a]),Object(n.useEffect)(()=>()=>{s.current=!1},[]);const v=()=>{i(null),m(!1)};return l.a.createElement("div",{className:c.root},l.a.createElement(tt.a,{open:d,onClose:v,fullWidth:"md",scroll:"paper"},l.a.createElement(gt.a,{id:"form-dialog-title"},h.title),l.a.createElement(ql.a,null,l.a.createElement(ql.a,{dividers:!0,style:{gap:"8px",padding:"16px"}},l.a.createElement(la.a,{label:"Mensaje de explicaci\xf3n del men\xfa",rows:4,name:"text",multiline:!0,variant:"outlined",value:g,onChange:e=>E(e.target.value),className:c.textField,style:{width:"100%"}}),l.a.createElement(ql.a,{direction:"row",justifyContent:"space-between"},l.a.createElement(R.a,null,"Agregar Opci\xf3n"),l.a.createElement(ra.a,{onClick:()=>f(e=>[...e,{number:e.length+1,value:""}]),color:"primary",variant:"contained"},l.a.createElement(ru.a,null))),b.map((e,a)=>l.a.createElement(ql.a,{width:"100%",key:e.number},l.a.createElement(R.a,null,"Escriba ",e.number),l.a.createElement(ql.a,{direction:"row",width:"100%",style:{gap:"8px"}},l.a.createElement(la.a,{placeholder:"Escriba opci\xf3n",variant:"outlined",defaultValue:e.value,style:{width:"100%"},onChange:e=>f(t=>{let n=t;return n[a].value=e.target.value,n})}),b.length===e.number&&l.a.createElement(T.a,{onClick:()=>{return a=e.number,void f(e=>e.filter(e=>e.number!==a));var a}},l.a.createElement(Wu.a,null)))))),l.a.createElement(nt.a,null,l.a.createElement(ra.a,{onClick:v,color:"secondary",variant:"outlined"},De.a.t("contactModal.buttons.cancel")),l.a.createElement(ra.a,{type:"submit",color:"primary",variant:"contained",className:c.btnWrapper,onClick:()=>(async()=>{if("edit"===a)return v(),void r({...o,data:{message:g,arrayOption:b}});"create"===a&&(v(),t({message:g,arrayOption:b}))})()},"".concat(h.btn))))))},xp=t(1602);t(1363);var Cp=t(244),Op=t.n(Cp);const Sp=Object(A.a)(e=>({root:{display:"flex",flexWrap:"wrap"},textField:{marginRight:e.spacing(1),flex:1},extraAttr:{display:"flex",justifyContent:"center",alignItems:"center"},btnWrapper:{position:"relative"},buttonProgress:{color:Ra.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}}));var wp=e=>{let{open:a,onSave:t,onUpdate:r,data:o,close:i}=e;const c=Sp(),s=Object(n.useRef)(!0),[d,m]=Object(n.useState)(!1),[u,p]=Object(n.useState)(!1),[g,E]=Object(n.useState)(!1),[b,f]=Object(n.useState)(),[h,y]=Object(n.useState)(),[v,x]=Object(n.useState)({title:"Adicionar imagem ao fluxo",btn:"Adicionar"}),[O,S]=Object(n.useState)([]);Object(n.useEffect)(()=>{"edit"===a?(x({title:"Editar imagem",btn:"Salvar"}),y(o.data.url),f("https://boostybackend-production.up.railway.app/public/"+o.data.url),m(!0)):"create"===a?(x({title:"Adicionar imagem ao fluxo",btn:"Adicionar"}),m(!0)):m(!1)},[a]),Object(n.useEffect)(()=>()=>{s.current=!1},[]);const w=()=>{i(null),m(!1)},A=function(e){e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?(console.log("Drag"),E(!0)):"dragleave"===e.type&&E(!1)};return l.a.createElement("div",{className:c.root},l.a.createElement(tt.a,{open:d,onClose:w,fullWidth:"md",scroll:"paper"},l.a.createElement(gt.a,{id:"form-dialog-title"},v.title),l.a.createElement(ql.a,null,l.a.createElement(pt.a,{dividers:!0},l.a.createElement(ql.a,{gap:"16px"},b&&l.a.createElement("img",{src:b,style:{width:"552px"}}),!u&&"edit"!==a&&!g&&l.a.createElement(ra.a,{variant:"contained",component:"label"},"Escolha uma imagem e solte aqui",l.a.createElement("input",{type:"file",accept:"image/png, image/jpg, image/jpeg",disabled:u,hidden:!0,onChange:e=>{if(e.target.files||!e.dataTransfer.files||!e.dataTransfer.files[0])if(e.dataTransfer.files[0].size>2e6)C.b.error("Arquivo \xe9 muito grande! 2MB m\xe1ximo");else if(e.target.files[0].size>2e6)C.b.error("Arquivo \xe9 muito grande! 2MB m\xe1ximo");else{if(e.target.files){const a=Array.from(e.target.files);f(URL.createObjectURL(e.target.files[0])),S(a)}if(e.dataTransfer.files){const a=Array.from(e.dataTransfer.files);f(URL.createObjectURL(e.dataTransfer.files[0])),S(a)}}}})),g&&l.a.createElement("div",{style:{width:"552px",color:"#ffffff"},id:"drag-file-element",onDragEnter:A,onDragLeave:A,onDragOver:A,onDrop:function(e){if(e.preventDefault(),e.stopPropagation(),E(!1),e.dataTransfer.files&&e.dataTransfer.files[0]){const a=Array.from(e.target.files);f(URL.createObjectURL(e.dataTransfer.files[0])),S(a)}}},"Uploading..."),u&&l.a.createElement(l.a.Fragment,null,l.a.createElement(ql.a,{justifyContent:"center",alignSelf:"center"},l.a.createElement(za.a,null))))),l.a.createElement(nt.a,null,!u&&l.a.createElement(l.a.Fragment,null,l.a.createElement(ra.a,{onClick:()=>{w(),S([]),f()},color:"secondary",variant:"outlined"},De.a.t("contactModal.buttons.cancel")),"edit"!==a&&l.a.createElement(ra.a,{type:"submit",disabled:u,color:"primary",variant:"contained",className:c.btnWrapper,onClick:()=>(async()=>{if("edit"===a)return w(),void r({...o,data:{url:""}});if("create"===a){p(!0);const e=new FormData;e.append("fromMe",!0),O.forEach(async(a,t)=>{const n=a;n&&("image"==(null===a||void 0===a?void 0:a.type.split("/")[0])?new Op.a(n,{quality:.7,async success(a){e.append("medias",a),e.append("body",a.name)},error(e){alert("erro"),console.log(e.message)}}):(e.append("medias",a),e.append("body",a.name)))}),setTimeout(async()=>{console.log(e),await _e.post("/flowbuilder/img",e).then(e=>{w(),t({url:e.data.name}),C.b.success("Imagem adicionada com sucesso!"),p(!1),S([]),f()})},1e3)}})()},"".concat(v.btn)))))))};const Ap=Object(A.a)(e=>({root:{display:"flex",flexWrap:"wrap"},textField:{marginRight:e.spacing(1),flex:1},extraAttr:{display:"flex",justifyContent:"center",alignItems:"center"},btnWrapper:{position:"relative"},buttonProgress:{color:Ra.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}}));var jp=e=>{let{open:a,onSave:t,data:r,onUpdate:o,close:i}=e;const c=Ap(),s=Object(n.useRef)(!0),[d,m]=Object(n.useState)(!1),[u,p]=Object(n.useState)([]),[g,E]=Object(n.useState)();Object(n.useEffect)(()=>("edit"===a?(async()=>{try{const{data:e}=await _e.get("/queue");p(e);const a=e.find(e=>e.id===r.data.id);a&&E(a.id),m(!0)}catch(e){console.log(e)}})():"create"===a&&(async()=>{try{const{data:e}=await _e.get("/queue");p(e),m(!0)}catch(e){console.log(e)}})(),()=>{s.current=!1}),[a]);const b=()=>{i(null),m(!1)};return l.a.createElement("div",{className:c.root},l.a.createElement(tt.a,{open:d,onClose:b,fullWidth:"md",scroll:"paper"},l.a.createElement(gt.a,{id:"form-dialog-title"},"create"===a?"Agregar una cola":"Editar cola"),l.a.createElement(ql.a,null,l.a.createElement(pt.a,{dividers:!0},l.a.createElement(Ht.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:g,style:{width:"95%"},onChange:e=>{E(e.target.value)},MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},getContentAnchorEl:null},renderValue:()=>{if(""===g)return"Selecione uma Conex\xe3o";return u.find(e=>e.id===g).name}},u.length>0&&u.map((e,a)=>l.a.createElement(L.a,{dense:!0,key:a,value:e.id},e.name)))),l.a.createElement(nt.a,null,l.a.createElement(ra.a,{onClick:b,color:"secondary",variant:"outlined"},De.a.t("contactModal.buttons.cancel")),l.a.createElement(ra.a,{type:"submit",color:"primary",variant:"contained",className:c.btnWrapper,onClick:()=>{if(!g)return C.b.error("A\xf1adir una cola");if("edit"===a){const e=u.find(e=>e.id===g);o({...r,data:e})}else if("create"===a){const e=u.find(e=>e.id===g);t({data:e})}b()}},"create"===a?"Agregar":"Editar")))))};const kp=Object(A.a)(e=>({root:{display:"flex",flexWrap:"wrap"},textField:{marginRight:e.spacing(1),flex:1},extraAttr:{display:"flex",justifyContent:"center",alignItems:"center"},btnWrapper:{position:"relative"},buttonProgress:{color:Ra.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}}));var Tp=e=>{let{open:a,onSave:t,onUpdate:r,data:o,close:i}=e;const c=kp(),s=Object(n.useRef)(!0),[d,m]=Object(n.useState)(!1),[u,p]=Object(n.useState)(!1),[g,E]=Object(n.useState)(!1),[b,f]=Object(n.useState)(),[h,y]=Object(n.useState)({title:"Adicionar audio ao fluxo",btn:"Adicionar"}),[v,x]=Object(n.useState)(),[O,S]=Object(n.useState)([]);Object(n.useEffect)(()=>{"edit"===a?(y({title:"Editar audio",btn:"Salvar"}),f("https://boostybackend-production.up.railway.app/public/"+o.data.url),E(o.data.record),m(!0)):"create"===a?(y({title:"Adicionar audio ao fluxo",btn:"Adicionar"}),x(""),m(!0)):m(!1)},[a]),Object(n.useEffect)(()=>()=>{s.current=!1},[]);const w=()=>{i(null),m(!1)};return l.a.createElement("div",{className:c.root},l.a.createElement(tt.a,{open:d,onClose:w,fullWidth:"md",scroll:"paper"},l.a.createElement(gt.a,{id:"form-dialog-title"},h.title),l.a.createElement(ql.a,null,l.a.createElement(pt.a,{dividers:!0},l.a.createElement(ql.a,{gap:"16px"},b&&l.a.createElement(ql.a,{direction:"row",justifyContent:"center"},l.a.createElement("audio",{controls:"controls"},l.a.createElement("source",{src:b,type:"audio/mp3"}),"seu navegador n\xe3o suporta HTML5")),b&&l.a.createElement(ql.a,{direction:"row",justifyContent:"center"},l.a.createElement(Tu.a,{checked:g,onChange:e=>E(e=>!e)}),l.a.createElement(ql.a,{justifyContent:"center"},l.a.createElement(R.a,null,"Enviar como audio gravado na hora"))),!u&&"edit"!==a&&l.a.createElement(ra.a,{variant:"contained",component:"label"},"Enviar audio",l.a.createElement("input",{type:"file",accept:"audio/ogg, audio/mp3",disabled:u,hidden:!0,onChange:e=>{if(!e.target.files)return;if(e.target.files[0].size>5e6)return void C.b.error("Arquivo \xe9 muito grande! 5MB m\xe1ximo");const a=Array.from(e.target.files);f(URL.createObjectURL(e.target.files[0])),S(a)}})),u&&l.a.createElement(l.a.Fragment,null,l.a.createElement(ql.a,{justifyContent:"center",alignSelf:"center"},l.a.createElement(za.a,null))))),l.a.createElement(nt.a,null,!u&&l.a.createElement(l.a.Fragment,null,l.a.createElement(ra.a,{onClick:()=>{w(),S([]),f()},color:"secondary",variant:"outlined"},De.a.t("contactModal.buttons.cancel")),l.a.createElement(ra.a,{type:"submit",disabled:u,color:"primary",variant:"contained",className:c.btnWrapper,onClick:()=>(async()=>{if("edit"===a)return w(),void r({...o,data:{url:o.data.url,record:g}});if("create"===a){p(!0);const e=new FormData;e.append("fromMe",!0),O.forEach(async(a,t)=>{const n=a;n&&("image"==(null===a||void 0===a?void 0:a.type.split("/")[0])?new Op.a(n,{quality:.7,async success(a){e.append("medias",a),e.append("body",a.name)},error(e){alert("erro"),console.log(e.message)}}):(e.append("medias",a),e.append("body",a.name)))}),setTimeout(async()=>{console.log(e),await _e.post("/flowbuilder/audio",e).then(e=>{w(),t({url:e.data.name,record:g}),C.b.success("Audio adicionada com sucesso!"),p(!1),S([]),f()})},1e3)}})()},"".concat(h.btn)))))))},Ip=t(1601),Np=Object(n.memo)(e=>{let{data:a,isConnectable:t,id:n}=e;const r=Hu();return l.a.createElement("div",{style:{backgroundColor:"#555",padding:"8px",borderRadius:"8px"}},l.a.createElement(zu.a,{type:"target",position:"left",style:{background:"#9a00ed"},onConnect:e=>console.log("handle onConnect",e),isConnectable:t}),l.a.createElement("div",{style:{display:"flex",position:"absolute",right:5,top:5,cursor:"pointer",gap:6}},l.a.createElement(qu.a,{onClick:()=>{r.setNodesStorage(n),r.setAct("duplicate")},sx:{width:"12px",height:"12px",color:"#ffff"}}),l.a.createElement(Wu.a,{onClick:()=>{r.setNodesStorage(n),r.setAct("delete")},sx:{width:"12px",height:"12px",color:"#ffff"}})),l.a.createElement("div",{style:{color:"#ededed",fontSize:"16px",flexDirection:"row",display:"flex"}},l.a.createElement(Ip.a,{sx:{width:"16px",height:"16px",marginRight:"4px",marginTop:"4px"}}),l.a.createElement("div",{style:{color:"#ededed",fontSize:"16px"}},"Audio")),l.a.createElement("div",{style:{color:"#ededed",fontSize:"12px"}},l.a.createElement("div",{style:{position:"absolute",right:"50px",top:"12px"}},a.record&&a.record?l.a.createElement("div",null,"Gravado na hora"):l.a.createElement("div",null,"Audio enviado")),l.a.createElement("audio",{controls:"controls"},l.a.createElement("source",{src:"".concat("https://boostybackend-production.up.railway.app","/public/").concat(a.url),type:"audio/mp3"}),"seu navegador n\xe3o suporta HTML5")),l.a.createElement(zu.a,{type:"source",position:"right",id:"a",style:{background:"#9a00ed"},isConnectable:t}))}),Mp=t(1611);const Pp=Object(A.a)(e=>({root:{display:"flex",flexWrap:"wrap"},textField:{marginRight:e.spacing(1),flex:1},extraAttr:{display:"flex",justifyContent:"center",alignItems:"center"},btnWrapper:{position:"relative"},buttonProgress:{color:Ra.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}}));var Rp=e=>{let{open:a,onSave:t,data:r,onUpdate:o,close:i}=e;const c=Pp(),s=Object(n.useRef)(!0),[d,m]=Object(n.useState)(0),[u,p]=Object(n.useState)(!1);Object(n.useEffect)(()=>("edit"===a?(m(r.data.percent),p(!0)):"create"===a&&(m(0),p(!0)),()=>{s.current=!1}),[a]);const g=()=>{i(null),p(!1)};return l.a.createElement("div",{className:c.root},l.a.createElement(tt.a,{open:u,onClose:g,fullWidth:"md",scroll:"paper"},l.a.createElement(gt.a,{id:"form-dialog-title"},"create"===a?"A\xf1adir un aleatorizador al flujo":"Editar aleatorizador"),l.a.createElement(ql.a,null,l.a.createElement(pt.a,{dividers:!0},l.a.createElement(ql.a,{direction:"row",minHeight:120,alignItems:"center",gap:4},l.a.createElement(R.a,null,d,"%"),l.a.createElement(Mp.a,{"aria-label":"Temperature",defaultValue:d,valueLabelDisplay:"auto",onChange:(e,a)=>{m(a)},step:10,marks:!0,min:0,max:100}),l.a.createElement(R.a,null,100-d,"%"))),l.a.createElement(nt.a,null,l.a.createElement(ra.a,{onClick:g,color:"secondary",variant:"outlined"},De.a.t("contactModal.buttons.cancel")),l.a.createElement(ra.a,{type:"submit",color:"primary",variant:"contained",className:c.btnWrapper,onClick:()=>(async e=>!d||parseInt(d)<=0?C.b.error("A\xf1adir el valor del intervalo"):parseInt(d)>120?C.b.error("M\xe1ximo de tempo atingido 120 segundos"):("edit"===a?o({...r,data:{percent:d}}):"create"===a&&t({percent:d}),void g()))()},"create"===a?"Adicionar":"Editar")))))};const Dp=Object(A.a)(e=>({root:{display:"flex",flexWrap:"wrap"},textField:{marginRight:e.spacing(1),flex:1},extraAttr:{display:"flex",justifyContent:"center",alignItems:"center"},btnWrapper:{position:"relative"},buttonProgress:{color:Ra.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}}));var Lp=e=>{let{open:a,onSave:t,onUpdate:r,data:o,close:i}=e;const c=Dp(),s=Object(n.useRef)(!0),[d,m]=Object(n.useState)(!1),[u,p]=Object(n.useState)(!1),[g,E]=Object(n.useState)(!1),[b,f]=Object(n.useState)(),[h,y]=Object(n.useState)({title:"Adicionar video ao fluxo",btn:"Adicionar"}),[v,x]=Object(n.useState)([]);Object(n.useEffect)(()=>{"edit"===a?(y({title:"Editar video",btn:"Salvar"}),f("https://boostybackend-production.up.railway.app/public/"+o.data.url),E(o.data.record),m(!0)):"create"===a?(y({title:"Adicionar video ao fluxo",btn:"Adicionar"}),m(!0)):m(!1)},[a]),Object(n.useEffect)(()=>()=>{s.current=!1},[]);const O=()=>{i(null),m(!1)};return l.a.createElement("div",{className:c.root},l.a.createElement(tt.a,{open:d,onClose:O,fullWidth:"md",scroll:"paper"},l.a.createElement(gt.a,{id:"form-dialog-title"},h.title),l.a.createElement(ql.a,null,l.a.createElement(pt.a,{dividers:!0},l.a.createElement(ql.a,{gap:"16px"},b&&l.a.createElement(ql.a,{direction:"row",justifyContent:"center"},l.a.createElement("video",{controls:"controls",width:"552px"},l.a.createElement("source",{src:b,type:"video/mp4"}),"seu navegador n\xe3o suporta HTML5")),!u&&"edit"!==a&&!b&&l.a.createElement(l.a.Fragment,null,l.a.createElement(ra.a,{variant:"contained",component:"label"},"Enviar video",l.a.createElement("input",{type:"file",accept:"video/mp4",disabled:u,hidden:!0,onChange:e=>{if(!e.target.files)return;if(e.target.files[0].size>2e7)return void C.b.error("Arquivo \xe9 muito grande! 20MB m\xe1ximo");const a=Array.from(e.target.files);f(URL.createObjectURL(e.target.files[0])),x(a)}})),l.a.createElement(R.a,null,"ATEN\xc7\xc3O! Apenas videos em MP4!")),u&&l.a.createElement(l.a.Fragment,null,l.a.createElement(ql.a,{justifyContent:"center",alignSelf:"center"},l.a.createElement(za.a,null))))),l.a.createElement(nt.a,null,!u&&l.a.createElement(l.a.Fragment,null,l.a.createElement(ra.a,{onClick:()=>{O(),x([]),f()},color:"secondary",variant:"outlined"},De.a.t("contactModal.buttons.cancel")),l.a.createElement(ra.a,{type:"submit",disabled:u,color:"primary",variant:"contained",className:c.btnWrapper,onClick:()=>(async()=>{if("edit"===a)return O(),void r({...o,data:{url:o.data.url,record:g}});if("create"===a){p(!0);const e=new FormData;e.append("fromMe",!0),v.forEach(async(a,t)=>{const n=a;n&&("image"==(null===a||void 0===a?void 0:a.type.split("/")[0])?new Op.a(n,{quality:.7,async success(a){e.append("medias",a),e.append("body",a.name)},error(e){alert("erro"),console.log(e.message)}}):(e.append("medias",a),e.append("body",a.name)))}),setTimeout(async()=>{await _e.post("/flowbuilder/audio",e).then(e=>{O(),t({url:e.data.name}),C.b.success("Audio adicionada com sucesso!"),p(!1),x([]),f()})},1e3)}})()},"".concat(h.btn)))))))};function Fp(e){return 0===e.length?e:e.charAt(0).toUpperCase()+e.slice(1)}const qp=Object(A.a)(e=>({root:{display:"flex",flexWrap:"wrap"},textField:{marginRight:e.spacing(1),flex:1},extraAttr:{display:"flex",justifyContent:"center",alignItems:"center"},btnWrapper:{position:"relative"},buttonProgress:{color:Ra.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}}));var Wp=e=>{let{open:a,onSave:t,onUpdate:r,data:o,close:i}=e;qp();const c=Object(n.useRef)(!0),[s,d]=Object(n.useState)(!1),[m,u]=Object(n.useState)(),[p,g]=Object(n.useState)([]),[E,b]=Object(n.useState)(),[f,h]=Object(n.useState)([]),[y,v]=Object(n.useState)([]),[x,O]=Object(n.useState)([]),[S,w]=Object(n.useState)([]),[A,j]=Object(n.useState)(0),[k,T]=Object(n.useState)(0),[I,N]=Object(n.useState)(0),[M,P]=Object(n.useState)(0),[R,D]=Object(n.useState)(0),[L,F]=Object(n.useState)(0),[q,W]=Object(n.useState)(0),[B,z]=Object(n.useState)(0),[U,H]=Object(n.useState)(0),[_,V]=Object(n.useState)(0),[G,K]=Object(n.useState)(!1),[Y,Q]=Object(n.useState)([]),[X,J]=Object(n.useState)([]),[Z,$]=Object(n.useState)([]),[ee,ae]=Object(n.useState)([]),[te,ne]=Object(n.useState)({title:"Agregar contenido al flujo",btn:"Agregar"}),le=e=>{let a=[];const t=y.filter(e=>e.includes("message")),n=y.filter(e=>e.includes("interval")),l=y.filter(e=>e.includes("img")),r=y.filter(e=>e.includes("audio")),o=y.filter(e=>e.includes("video"));for(let i=0;i<A;i++){const e=document.querySelector(".".concat(t[i])).querySelector(".MuiInputBase-input").value;if(!e)throw C.b.error("\xa1Campos de mensaje vac\xedos!"),K(!1),"";a.push({type:"message",value:e,number:t[i]}),console.log("text")}for(let i=0;i<I;i++){const e=document.querySelector(".".concat(n[i])).querySelector(".MuiInputBase-input").value;if(0===parseInt(e)||parseInt(e)>120)throw C.b.error("Intervalo n\xe3o pode ser 0 ou maior que 120!"),K(!1),"";a.push({type:"interval",value:e,number:n[i]}),console.log("int")}for(let i=0;i<U;i++){const t=null!==e&&e.filter(e=>e.includes("png")||e.includes("jpg")||e.includes("jpeg")),n=p.filter(e=>e.name.includes("png")||e.name.includes("jpg")||e.name.includes("jpeg"));if(x.includes(l[i])){const e=S.filter(e=>e.number===l[i])[0];a.push({type:"img",value:e.value,original:e.original,number:e.number})}else{let e=0;e=x.filter(e=>e.includes("img")).length>0?x.filter(e=>e.includes("img")).length-i:i,a.push({type:"img",value:t[e],original:n[e].name,number:l[i]})}}for(let i=0;i<R;i++){const t=null!==e&&e.filter(e=>e.includes("mp3")||e.includes("ogg")||e.includes("mpeg")||e.includes("opus")),n=p.filter(e=>e.name.includes("mp3")||e.name.includes("ogg")||e.name.includes("mpeg")||e.name.includes("opus"));if(x.includes(r[i])){const e=S.filter(e=>e.number===r[i])[0];a.push({type:"audio",value:e.value,original:e.original,number:e.number,record:document.querySelector(".check".concat(r[i])).querySelector(".PrivateSwitchBase-input").checked})}else{let e=0;e=x.filter(e=>e.includes("audio")).length>0?x.filter(e=>e.includes("audio")).length-i:i,a.push({type:"audio",value:t[e],original:n[e].name,number:r[i],record:document.querySelector(".check".concat(r[i])).querySelector(".PrivateSwitchBase-input").checked})}}for(let i=0;i<q;i++){const t=null!==e&&e.filter(e=>e.includes("mp4")||e.includes("avi")),n=p.filter(e=>e.name.includes("mp4")||e.name.includes("avi"));if(x.includes(o[i])){const e=S.filter(e=>e.number===o[i])[0];a.push({type:"video",value:e.value,original:e.original,number:e.number})}else{let e=0;e=x.filter(e=>e.includes("video")).length>0?x.filter(e=>e.includes("video")).length-i:i,a.push({type:"video",value:t[e],original:n[e].name,number:o[i]})}}return console.log(a),a},re=(e,a)=>{"message"===a&&(j(e=>e-1),v(a=>a.filter(a=>a!=="message".concat(e))),O(a=>a.filter(a=>a!=="message".concat(e))),document.querySelector(".stackMessage".concat(e)).remove()),"interval"===a&&(N(e=>e-1),v(a=>a.filter(a=>a!=="interval".concat(e))),O(a=>a.filter(a=>a!=="interval".concat(e))),document.querySelector(".stackInterval".concat(e)).remove()),"img"===a&&(H(e=>e-1),Q(a=>(g(t=>{try{return t.filter(t=>t.name!==a.filter(a=>a.number===e)[0].name)}catch(n){return t}}),a.filter(a=>a.number!==e))),v(a=>a.filter(a=>a!=="img".concat(e))),O(a=>a.filter(a=>a!=="img".concat(e))),document.querySelector(".stackImg".concat(e)).remove()),"audio"===a&&(D(e=>e-1),J(a=>(g(t=>{try{return t.filter(t=>t.name!==a.filter(a=>a.number===e)[0].name)}catch(n){return t}}),a.filter(a=>a.number!==e))),v(a=>a.filter(a=>a!=="audio".concat(e))),O(a=>a.filter(a=>a!=="audio".concat(e))),document.querySelector(".stackAudio".concat(e)).remove()),"video"===a&&(W(e=>e-1),$(a=>(g(t=>{try{return t.filter(t=>t.name!==a.filter(a=>a.number===e)[0].name)}catch(n){return t}}),a.filter(a=>a.number!==e))),v(a=>a.filter(a=>a!=="video".concat(e))),O(a=>a.filter(a=>a!=="video".concat(e))),document.querySelector(".stackVideo".concat(e)).remove())};const oe=(e,a)=>{if(!e.target.files)return;if(e.target.files[0].size>2e6)return void C.b.error("Arquivo \xe9 muito grande! 2MB m\xe1ximo");const t=URL.createObjectURL(e.target.files[0]);Q(n=>[...n,{number:a,url:t,name:e.target.files[0].name}]);const n=Array.from(e.target.files);g(e=>[...e,n[0]]),document.querySelector(".img".concat(a)).src=t,document.querySelector(".btnImg".concat(a)).remove()},ie=(e,a)=>{if(!e.target.files)return;if(e.target.files[0].size>5e6)return void C.b.error("Arquivo \xe9 muito grande! 5MB m\xe1ximo");const t=URL.createObjectURL(e.target.files[0]);J(n=>[...n,{number:a,url:t,name:e.target.files[0].name}]);const n=Array.from(e.target.files);g(e=>[...e,n[0]]),document.querySelector(".audio".concat(a)).innerHTML='<audio controls="controls">\n    <source src="'.concat(t,'" type="audio/mp3" />\n    seu navegador n\xe3o suporta HTML5\n  </audio>'),document.querySelector(".btnAudio".concat(a)).remove()},ce=(e,a)=>{if(!e.target.files)return;if(e.target.files[0].size>2e7)return void C.b.error("Arquivo \xe9 muito grande! 20MB m\xe1ximo");const t=URL.createObjectURL(e.target.files[0]);$(n=>[...n,{number:a,url:t,name:e.target.files[0].name}]);var n=document.createElement("div");const l=Array.from(e.target.files);g(e=>[...e,l[0]]),n.innerHTML='<video controls="controls" style="width: 200px;">\n    <source src="'.concat(t,'" type="video/mp4" />\n    seu navegador n\xe3o suporta HTML5\n  </video>'),document.querySelector(".video".concat(a)).appendChild(n),document.querySelector(".btnVideo".concat(a)).remove()},se=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return l.a.createElement(ql.a,{sx:{border:"1px solid #9a00ed",borderRadius:"7px",padding:"6px",position:"relative"},className:"stackImg".concat(e),key:"stackImg".concat(e)},l.a.createElement(ql.a,{sx:{position:"absolute",right:6}},l.a.createElement(Wu.a,{onClick:()=>re(e,"img")})),l.a.createElement(hu.a,{textAlign:"center"},"Imagen"),l.a.createElement(ql.a,{direction:"row",justifyContent:"center"},l.a.createElement("img",{src:a.length>0?"https://boostybackend-production.up.railway.app/public/"+a:"",className:"img".concat(e),style:{width:"200px"}})),0===a.length&&l.a.createElement(ra.a,{variant:"contained",component:"label",className:"btnImg".concat(e)},"Enviar imagen",l.a.createElement("input",{type:"file",accept:"image/png, image/jpg, image/jpeg",hidden:!0,onChange:a=>oe(a,e)})))},de=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return l.a.createElement(ql.a,{sx:{border:"1px solid #9a00ed",borderRadius:"7px",padding:"6px",position:"relative"},className:"stackAudio".concat(e),key:"stackAudio".concat(e)},l.a.createElement(ql.a,{sx:{position:"absolute",right:6},direction:"row",gap:1},l.a.createElement(Wu.a,{sx:{cursor:"pointer"},onClick:()=>re(e,"audio")})),l.a.createElement(hu.a,{textAlign:"center"},"Audio"),l.a.createElement("div",{className:"audio".concat(e),style:{display:"flex",flexDirection:"row",justifyContent:"center"}},a.length>0&&l.a.createElement("audio",{controls:"controls"},l.a.createElement("source",{src:"https://boostybackend-production.up.railway.app/public/"+a,type:"audio/mp3"}),"seu navegador n\xe3o suporta HTML5")),0===a.length&&l.a.createElement(ra.a,{variant:"contained",component:"label",className:"btnAudio".concat(e)},"Enviar audio",l.a.createElement("input",{type:"file",accept:"audio/ogg, audio/mp3, audio/opus",hidden:!0,onChange:a=>ie(a,e)})),l.a.createElement(ql.a,{direction:"row",justifyContent:"center"},l.a.createElement(Tu.a,{className:"checkaudio".concat(e),defaultChecked:"ok"!==t}),l.a.createElement(ql.a,{justifyContent:"center"},l.a.createElement(hu.a,null,"Enviar como audio grabado en el momento"))))},me=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return l.a.createElement(ql.a,{sx:{border:"1px solid #9a00ed",borderRadius:"7px",padding:"6px",position:"relative"},className:"stackVideo".concat(e),key:"stackVideo".concat(e)},l.a.createElement(ql.a,{sx:{position:"absolute",right:6}},l.a.createElement(Wu.a,{onClick:()=>re(e,"video")})),l.a.createElement(hu.a,{textAlign:"center"},"Video"),l.a.createElement("div",{className:"video".concat(e),style:{display:"flex",flexDirection:"row",justifyContent:"center"}},a.length>0&&l.a.createElement("video",{controls:"controls",style:{width:"200px"}},l.a.createElement("source",{src:"https://boostybackend-production.up.railway.app/public/"+a,type:"video/mp4"}),"seu navegador n\xe3o suporta HTML5")),0===a.length&&l.a.createElement(ra.a,{variant:"contained",component:"label",className:"btnVideo".concat(e)},"Enviar video",l.a.createElement("input",{type:"file",accept:"video/mp4",hidden:!0,onChange:a=>ce(a,e)})))},ue=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return l.a.createElement(ql.a,{sx:{border:"1px solid #9a00ed",borderRadius:"7px",padding:"6px",position:"relative"},className:"stackMessage".concat(e),key:"stackMessage".concat(e)},l.a.createElement(ql.a,{sx:{position:"absolute",right:6}},l.a.createElement(Wu.a,{onClick:()=>re(e,"message")})),l.a.createElement(hu.a,{textAlign:"center"},"Texto"),l.a.createElement(la.a,{label:"Mensaje",defaultValue:a,multiline:!0,rows:7,className:"message".concat(e),name:"text",variant:"outlined",margin:"dense",style:{width:"100%"}}))},pe=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return l.a.createElement(ql.a,{sx:{border:"1px solid #9a00ed",borderRadius:"7px",padding:"6px",position:"relative"},className:"stackInterval".concat(e),key:"stackInterval".concat(e)},l.a.createElement(ql.a,{sx:{position:"absolute",right:6}},l.a.createElement(Wu.a,{onClick:()=>re(e,"interval")})),l.a.createElement(hu.a,{textAlign:"center"},"Intervalo"),l.a.createElement(la.a,{label:"Tiempo en segundos",className:"interval".concat(e),defaultValue:a,type:"number",InputProps:{inputProps:{min:0,max:120}},variant:"outlined",margin:"dense",style:{width:"100%"}}))};Object(n.useEffect)(()=>{if("edit"===a){if(ne({title:"Editar conte\xfado",btn:"Salvar"}),v(o.data.seq),O(o.data.seq),w(o.data.elements),o){const e=o.data.elements,a=o.data.seq;a.map(t=>{const n=e.filter(e=>e.number===t)[0];if("message"===n.type){const e=parseInt(t.replace("message",""));h(a=>[...a,ue(e,n.value)]),j(e=>{const t=a.filter(e=>e.includes("message")).map(e=>parseInt(e.replace("message","")));return T(Math.max.apply(null,t)+1),e+1})}if("interval"===n.type){const e=parseInt(t.replace("interval",""));h(a=>[...a,pe(e,n.value)]),N(e=>{const t=a.filter(e=>e.includes("interval")).map(e=>parseInt(e.replace("interval","")));return P(Math.max.apply(null,t)+1),e+1})}if("audio"===n.type){const e=parseInt(t.replace("audio",""));h(a=>[...a,de(e,n.value,n.record?"":"ok")]),D(e=>{const t=a.filter(e=>e.includes("audio")).map(e=>parseInt(e.replace("audio","")));return F(Math.max.apply(null,t)+1),e+1})}if("img"===n.type){const e=parseInt(t.replace("img",""));h(a=>[...a,se(e,n.value)]),H(e=>{const t=a.filter(e=>e.includes("img")).map(e=>parseInt(e.replace("img","")));return V(Math.max.apply(null,t)+1),e+1})}if("video"===n.type){const e=parseInt(t.replace("video",""));h(a=>[...a,me(e,n.value)]),W(e=>{const t=a.filter(e=>e.includes("video")).map(e=>parseInt(e.replace("video","")));return z(Math.max.apply(null,t)+1),e+1})}})}d(!0)}"create"===a&&(ne({title:"Agregar men\xfa al flujo",btn:"Agregar"}),b(),ae([]),d(!0))},[a]),Object(n.useEffect)(()=>()=>{c.current=!1},[]);const ge=async()=>{i(null),d(!1),setTimeout(()=>{g([]),Q([]),J([]),$([]),ae([]),h([]),v([]),w([]),O([]),j(0),T(0),N(0),P(0),D(0),F(0),W(0),z(0),H(0),V(0)},500)},Ee=()=>{const e=y.filter(e=>e.includes("img")),a=y.filter(e=>e.includes("audio")),t=y.filter(e=>e.includes("video"));for(let n=0;n<U;n++){if(document.querySelector(".btn".concat(Fp(e[n]))))return!0}for(let n=0;n<R;n++){if(document.querySelector(".btn".concat(Fp(a[n]))))return!0}for(let n=0;n<q;n++){if(document.querySelector(".btn".concat(Fp(t[n]))))return!0}},be=e=>{const a=document.querySelector(e);a.scrollTop=a.scrollHeight};return l.a.createElement("div",null,l.a.createElement(tt.a,{open:s,fullWidth:"md",scroll:"paper"},!G&&l.a.createElement(gt.a,{id:"form-dialog-title"},"Agregar contenido al flujo"),l.a.createElement(ql.a,null,l.a.createElement(ql.a,{className:"body-card",style:{gap:"8px",padding:"16px",overflow:"auto",height:"70vh",scrollBehavior:"smooth",display:G&&"none"}},f.map(e=>l.a.createElement(l.a.Fragment,null,e)),l.a.createElement(ql.a,{direction:"row",gap:1},l.a.createElement(ra.a,{variant:"contained",color:"primary",onClick:()=>{h(e=>[...e,ue(k)]),j(e=>(v(e=>[...e,"message".concat(k)]),e+1)),T(e=>e+1),setTimeout(()=>{be(".body-card")},100)}},l.a.createElement(Bu.a,{sx:{width:"16px",height:"16px",marginRight:"4px"}}),"Texto"),l.a.createElement(ra.a,{variant:"contained",color:"primary",onClick:()=>{h(e=>[...e,pe(M)]),N(e=>(v(e=>[...e,"interval".concat(M)]),e+1)),P(e=>e+1),setTimeout(()=>{be(".body-card")},100)}},l.a.createElement(rp.a,{sx:{width:"16px",height:"16px",marginRight:"4px"}}),"Intervalo"),l.a.createElement(ra.a,{variant:"contained",color:"primary",onClick:()=>{h(e=>[...e,se(_)]),H(e=>(v(e=>[...e,"img".concat(_)]),e+1)),V(e=>e+1),setTimeout(()=>{be(".body-card")},100)}},l.a.createElement(ip.a,{sx:{width:"16px",height:"16px",marginRight:"4px"}}),"Imagen"),l.a.createElement(ra.a,{variant:"contained",color:"primary",onClick:()=>{h(e=>[...e,de(L)]),D(e=>(v(e=>[...e,"audio".concat(L)]),e+1)),F(e=>e+1),setTimeout(()=>{be(".body-card")},100)}},l.a.createElement(Ip.a,{sx:{width:"16px",height:"16px",marginRight:"4px"}}),"Audio"),l.a.createElement(ra.a,{variant:"contained",color:"primary",onClick:()=>{h(e=>[...e,me(B)]),W(e=>(v(e=>[...e,"video".concat(B)]),e+1)),z(e=>e+1),setTimeout(()=>{be(".body-card")},100)}},l.a.createElement(mp.a,{sx:{width:"16px",height:"16px",marginRight:"4px"}}),"Video"))),l.a.createElement(nt.a,null,l.a.createElement(ra.a,{onClick:ge,color:"secondary",variant:"outlined",style:{display:G&&"none"}},De.a.t("contactModal.buttons.cancel")),l.a.createElement(ra.a,{type:"submit",color:"primary",variant:"contained",onClick:()=>(async()=>{if("edit"===a){K(!0);const e=new FormData;p.forEach(async(a,t)=>{const n=a;n&&("image"==(null===a||void 0===a?void 0:a.type.split("/")[0])?new Op.a(n,{quality:.7,async success(a){e.append("medias",a),e.append("body",a.name)},error(e){alert("erro"),console.log(e.message)}}):(e.append("medias",a),e.append("body",a.name)))}),setTimeout(async()=>{if(0===R&&0===q&&0===U||0===p.length){try{const e={seq:y,elements:le(null)};return console.log("QUI",e),r({...o,data:e}),C.b.success("\xa1Contenido agregado con \xe9xito!"),ge(),void K(!1)}catch(a){console.log(a),K(!1)}return}if(Ee())return K(!1),C.b.error("Elimina las tarjetas vac\xedas (Imagen, Audio y Video)");await _e.post("/flowbuilder/content",e).then(async e=>{const a={seq:y,elements:le(e.data)};r({...o,data:a}),C.b.success("\xa1Contenido agregado con \xe9xito!"),await ge(),K(!1)}).catch(e=>{console.log(e)})},1500)}else if("create"===a){K(!0);const e=new FormData;p.forEach(async(a,t)=>{const n=a;n&&("image"==(null===a||void 0===a?void 0:a.type.split("/")[0])?new Op.a(n,{quality:.7,async success(a){e.append("medias",a),e.append("body",a.name)},error(e){alert("erro"),console.log(e.message)}}):(e.append("medias",a),e.append("body",a.name)))}),setTimeout(async()=>{if(0===R&&0===q&&0===U)try{const e={seq:y,elements:le(null)};return t({...e}),C.b.success("\xa1Contenido agregado con \xe9xito!"),ge(),void K(!1)}catch(a){K(!1)}if(Ee())return K(!1),C.b.error("Elimina las tarjetas vac\xedas (Imagen, Audio y Video)");await _e.post("/flowbuilder/content",e).then(e=>{const a={seq:y,elements:le(e.data)};t({...a}),C.b.success("\xa1Contenido agregado con \xe9xito!"),ge(),K(!1)}).catch(e=>{console.log(e)})},1500)}})(),style:{display:G&&"none"}},"".concat(te.btn)))),G&&l.a.createElement(ql.a,{style:{gap:"8px",padding:"16px",height:"70vh",alignSelf:"center",justifyContent:"center"}},l.a.createElement(ql.a,null,l.a.createElement(hu.a,null,"Subiendo los archivos y creando el contenido..."),l.a.createElement(ql.a,{style:{alignSelf:"center",marginTop:"12px"}},l.a.createElement(za.a,null))))))},Bp=Object(n.memo)(e=>{let{data:a,isConnectable:t,id:n}=e;const r=Hu();return l.a.createElement("div",{style:{backgroundColor:"#FEFAFA",padding:"8px",borderRadius:"8px",border:"1px solid rgba(236, 88, 88, 0.25)",boxShadow:"rgba(0, 0, 0, 0.05) 0px 3px 5px"}},l.a.createElement(zu.a,{type:"target",position:"left",style:{background:"#9a00ed",width:"18px",height:"18px",top:"20px",left:"-12px",cursor:"pointer"},onConnect:e=>console.log("handle onConnect",e),isConnectable:t},l.a.createElement(Fu.a,{sx:{color:"#ffff",width:"10px",height:"10px",marginLeft:"3.5px",marginBottom:"1px",pointerEvents:"none"}})),l.a.createElement("div",{style:{display:"flex",position:"absolute",right:5,top:5,cursor:"pointer",gap:6}},l.a.createElement(qu.a,{onClick:()=>{r.setNodesStorage(n),r.setAct("duplicate")},sx:{width:"12px",height:"12px",color:"#EC5858"}}),l.a.createElement(Wu.a,{onClick:()=>{r.setNodesStorage(n),r.setAct("delete")},sx:{width:"12px",height:"12px",color:"#EC5858"}})),l.a.createElement("div",{style:{color:"#ededed",fontSize:"16px",flexDirection:"row",display:"flex"}},l.a.createElement(xp.a,{sx:{width:"16px",height:"16px",marginRight:"4px",marginTop:"4px",color:"#EC5858"}}),l.a.createElement("div",{style:{color:"#232323",fontSize:"16px"}},"Contenido")),l.a.createElement("div",{style:{color:"#232323",fontSize:"12px",width:180}},a.seq.map(e=>l.a.createElement("div",{style:{backgroundColor:"#F6EEEE",marginBottom:"3px",borderRadius:"5px"}},e.includes("message")&&l.a.createElement("div",{style:{gap:"5px",padding:"6px"}},l.a.createElement("div",{style:{display:"flex",position:"relative",flexDirection:"row",justifyContent:"center"}},l.a.createElement(Bu.a,{sx:{color:"#EC5858"}})),l.a.createElement(hu.a,{textAlign:"center",sx:{textOverflow:"ellipsis",fontSize:"10px",whiteSpace:"nowrap",overflow:"hidden"}},a.elements.filter(a=>a.number===e)[0].value)),e.includes("interval")&&l.a.createElement("div",{style:{gap:"5px",padding:"6px"}},l.a.createElement("div",{style:{display:"flex",position:"relative",flexDirection:"row",justifyContent:"center"}},l.a.createElement(rp.a,{sx:{color:"#EC5858"}})),l.a.createElement(hu.a,{textAlign:"center",sx:{textOverflow:"ellipsis",fontSize:"10px",whiteSpace:"nowrap",overflow:"hidden"}},a.elements.filter(a=>a.number===e)[0].value," ","segundos")),e.includes("img")&&l.a.createElement("div",{style:{gap:"5px",padding:"6px"}},l.a.createElement("div",{style:{display:"flex",position:"relative",flexDirection:"row",justifyContent:"center"}},l.a.createElement(ip.a,{sx:{color:"#EC5858"}})),l.a.createElement(hu.a,{textAlign:"center",sx:{textOverflow:"ellipsis",fontSize:"10px",whiteSpace:"nowrap",overflow:"hidden"}},a.elements.filter(a=>a.number===e)[0].original)),e.includes("audio")&&l.a.createElement("div",{style:{gap:"5px",padding:"6px"}},l.a.createElement("div",{style:{display:"flex",position:"relative",flexDirection:"row",justifyContent:"center"}},l.a.createElement(Ip.a,{sx:{color:"#EC5858"}})),l.a.createElement(hu.a,{textAlign:"center",sx:{textOverflow:"ellipsis",fontSize:"10px",whiteSpace:"nowrap",overflow:"hidden"}},a.elements.filter(a=>a.number===e)[0].original)),e.includes("video")&&l.a.createElement("div",{style:{gap:"5px",padding:"6px"}},l.a.createElement("div",{style:{display:"flex",position:"relative",flexDirection:"row",justifyContent:"center"}},l.a.createElement(mp.a,{sx:{color:"#EC5858"}})),l.a.createElement(hu.a,{textAlign:"center",sx:{textOverflow:"ellipsis",fontSize:"10px",whiteSpace:"nowrap",overflow:"hidden"}},a.elements.filter(a=>a.number===e)[0].original))))),l.a.createElement(zu.a,{type:"source",position:"right",id:"a",style:{background:"#9a00ed",width:"18px",height:"18px",top:"90%",right:"-11px",cursor:"pointer"},isConnectable:t},l.a.createElement(Fu.a,{sx:{color:"#ffff",width:"10px",height:"10px",marginLeft:"2.9px",marginBottom:"1px",pointerEvents:"none"}})))}),zp=t(1603),Up=Object(n.memo)(e=>{let{data:a,isConnectable:t,id:n}=e;const r=Hu();return console.log(12,"ticketNode",a),l.a.createElement("div",{style:{backgroundColor:"#ffffff",padding:"8px",borderRadius:"8px",boxShadow:"rgba(0, 0, 0, 0.05) 0px 3px 5px",border:"1px solid rgba(33, 94, 151, 0.25)"}},l.a.createElement(zu.a,{type:"target",position:"left",style:{background:"#0872b9",width:"18px",height:"18px",top:"20px",left:"-12px",cursor:"pointer"},onConnect:e=>console.log("handle onConnect",e),isConnectable:t},l.a.createElement(Fu.a,{sx:{color:"#ffff",width:"10px",height:"10px",marginLeft:"2.9px",marginBottom:"1px",pointerEvents:"none"}})),l.a.createElement("div",{style:{display:"flex",position:"absolute",right:5,top:5,cursor:"pointer",gap:6}},l.a.createElement(qu.a,{onClick:()=>{r.setNodesStorage(n),r.setAct("duplicate")},sx:{width:"12px",height:"12px",color:"#F7953B"}}),l.a.createElement(Wu.a,{onClick:()=>{r.setNodesStorage(n),r.setAct("delete")},sx:{width:"12px",height:"12px",color:"#F7953B"}})),l.a.createElement("div",{style:{color:"#ededed",fontSize:"16px",flexDirection:"row",display:"flex"}},l.a.createElement(zp.a,{sx:{width:"16px",height:"16px",marginRight:"4px",marginTop:"4px",color:"#3aba38"}}),l.a.createElement("div",{style:{color:"#232323",fontSize:"16px"}},"Ticket")),l.a.createElement("div",{style:{color:"#232323",fontSize:"12px",width:180}},l.a.createElement("div",{style:{backgroundColor:"#F6EEEE",marginBottom:"3px",borderRadius:"5px"}},l.a.createElement("div",{style:{gap:"5px",padding:"6px"}},l.a.createElement("div",{style:{textAlign:"center"}},"data"===Object.keys(a)[0]?a.data.name:a.name)))),l.a.createElement(zu.a,{type:"source",position:"right",id:"a",style:{background:"#0872b9",width:"18px",height:"18px",top:"70%",right:"-11px",cursor:"pointer"},isConnectable:t},l.a.createElement(Fu.a,{sx:{color:"#ffff",width:"10px",height:"10px",marginLeft:"2.9px",marginBottom:"1px",pointerEvents:"none"}})))}),Hp=t(1604);const _p=Object(A.a)(e=>({mainPaper:{flex:1,padding:e.spacing(1),position:"relative",backgroundColor:"#F8F9FA",overflowY:"scroll",...e.scrollbarStyles},speeddial:{backgroundColor:"red"}}));function Vp(e){for(var a="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<e;n++)a+=t.charAt(Math.floor(Math.random()*t.length));return a}const Gp={message:_u,start:ep,condition:tp,menu:lp,interval:op,img:cp,audio:Np,randomizer:dp,video:up,singleBlock:Bp,ticket:Up},Kp={buttonedge:function(e){let{id:a,sourceX:t,sourceY:n,targetX:r,targetY:o,sourcePosition:i,targetPosition:c,style:s={},data:d,arrowHeadType:m,markerEndId:u}=e;const p=Object(zu.c)({sourceX:t,sourceY:n,sourcePosition:i,targetX:r,targetY:o,targetPosition:c}),g=Object(zu.e)(m,u),[E,b]=Object(zu.d)({sourceX:t,sourceY:n,targetX:r,targetY:o});return l.a.createElement(l.a.Fragment,null,l.a.createElement("path",{id:a,style:s,className:"react-flow__edge-path",d:p,markerEnd:g}),l.a.createElement("foreignObject",{width:40,height:40,x:E-20,y:b-20,className:"edgebutton-foreignobject",requiredExtensions:"http://www.w3.org/1999/xhtml"},l.a.createElement("body",null)))}},Yp=[{id:"1",position:{x:250,y:100},data:{label:"Inicio do fluxo"},type:"start"}],Qp=[],Xp=()=>{const e=_p(),{id:a}=(Object(x.useHistory)(),Object(Pm.useParams)()),t=Hu(),{user:r}=Object(n.useContext)(Xe),[o,i]=Object(n.useState)(!1),[c,s]=Object(n.useState)(1),[d,m]=Object(n.useState)(null),[u,p]=Object(n.useState)(!1),[g,E]=Object(n.useState)(null),[b,f]=Object(n.useState)(!1),[h,y]=Object(n.useState)(null),[v,O]=Object(n.useState)(null),[S,w]=Object(n.useState)(null),[A,j]=Object(n.useState)(null),[k,T]=Object(n.useState)(null),[I,N]=Object(n.useState)(null),[M,P]=Object(n.useState)(null),[R,D]=Object(n.useState)(null),L=(e,a)=>{const t=F[F.length-1].position.y,n=F[F.length-1].position.x+F[F.length-1].width+40;return"start"===e?q(e=>[...e.filter(e=>"1"!==e.id),{id:"1",position:{x:n,y:t},data:{label:"Inicio do fluxo"},type:"start"}]):"text"===e?q(e=>[...e,{id:Vp(30),position:{x:n,y:t},data:{label:a.text},type:"message"}]):"interval"===e?q(e=>[...e,{id:Vp(30),position:{x:n,y:t},data:{label:"Intervalo ".concat(a.sec," seg."),sec:a.sec},type:"interval"}]):"condition"===e?q(e=>[...e,{id:Vp(30),position:{x:n,y:t},data:{key:a.key,condition:a.condition,value:a.value},type:"condition"}]):"menu"===e?q(e=>[...e,{id:Vp(30),position:{x:n,y:t},data:{message:a.message,arrayOption:a.arrayOption},type:"menu"}]):"img"===e?q(e=>[...e,{id:Vp(30),position:{x:n,y:t},data:{url:a.url},type:"img"}]):"audio"===e?q(e=>[...e,{id:Vp(30),position:{x:n,y:t},data:{url:a.url,record:a.record},type:"audio"}]):"randomizer"===e?q(e=>[...e,{id:Vp(30),position:{x:n,y:t},data:{percent:a.percent},type:"randomizer"}]):"video"===e?q(e=>[...e,{id:Vp(30),position:{x:n,y:t},data:{url:a.url},type:"video"}]):"singleBlock"===e?q(e=>[...e,{id:Vp(30),position:{x:n,y:t},data:{...a},type:"singleBlock"}]):"ticket"===e?q(e=>[...e,{id:Vp(30),position:{x:n,y:t},data:{...a},type:"ticket"}]):void 0};Object(n.useEffect)(()=>{i(!0);const e=setTimeout(()=>{(async()=>{try{const{data:e}=await _e.get("/flowbuilder/flow/".concat(a));null!==e.flow.flow&&(q(e.flow.flow.nodes),z(e.flow.flow.connections)),i(!1)}catch(e){We(e)}})()},500);return()=>clearTimeout(e)},[a]),Object(n.useEffect)(()=>{if("delete"===t.action&&(q(e=>e.filter(e=>e.id!==t.node)),z(e=>e.filter(e=>e.source!==t.node).filter(e=>e.target!==t.node)),t.setNodesStorage(""),t.setAct("idle")),"duplicate"===t.action){const e=F.filter(e=>e.id===t.node)[0],a=F.map(e=>e.position.x),n=Math.max(...a),l=F[F.length-1].position.y,r={...e,id:Vp(30),position:{x:n+240,y:l},selected:!1,style:{backgroundColor:"#555555",padding:0,borderRadius:8}};q(e=>[...e,r]),t.setNodesStorage(""),t.setAct("idle")}},[t.action]);const[F,q,W]=Object(zu.g)(Yp),[B,z,U]=Object(zu.f)(Qp),H=Object(n.useCallback)(e=>z(a=>Object(Vu.n)(e,a)),[z]),_=e=>{console.log("DATA ALTER",e),q(a=>a.map(a=>a.id===e.id?e:a)),E(null),f(null),O(null)},V=[{icon:l.a.createElement($u.a,{sx:{color:"#3ABA38"}}),name:"Inicio",type:"start"},{icon:l.a.createElement(xp.a,{sx:{color:"#EC5858"}}),name:"Contenido",type:"content"},{icon:l.a.createElement(np.a,{sx:{color:"#683AC8"}}),name:"Men\xfa",type:"menu"},{icon:l.a.createElement(sp.a,{sx:{color:"#1FBADC"}}),name:"Aleatorizador",type:"random"},{icon:l.a.createElement(rp.a,{sx:{color:"#F7953B"}}),name:"Intervalo",type:"interval"},{icon:l.a.createElement(Hp.a,{sx:{color:"#F7953B"}}),name:"Colas",type:"ticket"}];return l.a.createElement(ql.a,{sx:{height:"100vh"}},l.a.createElement(Xu,{open:g,onSave:e=>{L("text",e)},data:d,onUpdate:_,close:E}),l.a.createElement(Zu,{open:b,onSave:e=>{L("interval",e)},data:d,onUpdate:_,close:f}),l.a.createElement(hp,{open:h,onSave:e=>{L("condition",e)},data:d,onUpdate:_,close:y}),l.a.createElement(vp,{open:v,onSave:e=>{L("menu",e)},data:d,onUpdate:_,close:O}),l.a.createElement(wp,{open:S,onSave:e=>{L("img",e)},data:d,onUpdate:_,close:w}),l.a.createElement(Tp,{open:A,onSave:e=>{L("audio",e)},data:d,onUpdate:_,close:j}),l.a.createElement(Rp,{open:k,onSave:e=>{L("randomizer",e)},data:d,onUpdate:_,close:T}),l.a.createElement(Lp,{open:I,onSave:e=>{L("video",e)},data:d,onUpdate:_,close:N}),l.a.createElement(Wp,{open:M,onSave:e=>{L("singleBlock",e)},data:d,onUpdate:_,close:P}),l.a.createElement(jp,{open:R,onSave:e=>{L("ticket",e)},data:d,onUpdate:_,close:D}),l.a.createElement(pi,null,l.a.createElement(bi,null,"Dibuja tu flujo")),!o&&l.a.createElement(ht.a,{className:e.mainPaper,variant:"outlined",onScroll:e=>{if(!u||o)return;const{scrollTop:a,scrollHeight:t,clientHeight:n}=e.currentTarget;t-(a+100)<n&&s(e=>e+1)}},l.a.createElement(ql.a,null,l.a.createElement(Ru.a,{ariaLabel:"SpeedDial basic example",sx:{position:"absolute",top:16,left:16,".MuiSpeedDial-fab":{backgroundColor:"#9a00ed","&:hover":{backgroundColor:"#9a00ed"}}},icon:l.a.createElement(Du.a,null),direction:"down"},V.map(e=>l.a.createElement(Lu.a,{key:e.name,icon:e.icon,tooltipTitle:e.name,tooltipOpen:!0,tooltipPlacement:"right",onClick:()=>(e=>{switch(e){case"start":L("start");break;case"menu":O("create");break;case"content":P("create");break;case"random":T("create");break;case"interval":f("create");break;case"ticket":D("create")}})(e.type)})))),l.a.createElement(ql.a,{sx:{position:"absolute",justifyContent:"center",flexDirection:"row",width:"100%"}},l.a.createElement(hu.a,{style:{color:"#010101",textShadow:"#010101 1px 0 10px"}},"\xa1No olvides guardar tu flujo!")),l.a.createElement(ql.a,{direction:"row",justifyContent:"end"},l.a.createElement(ra.a,{sx:{textTransform:"none"},variant:"contained",color:"primary",onClick:()=>(async()=>{await _e.post("/flowbuilder/flow",{idFlow:a,nodes:F,connections:B}).then(e=>{C.b.success("Flujo guardado con \xe9xito")})})()},"Guardar")),l.a.createElement(ql.a,{direction:"row",style:{width:"100%",height:"90%",position:"relative",display:"flex"}},l.a.createElement(zu.b,{nodes:F,edges:B,deleteKeyCode:["Backspace","Delete"],onNodesChange:W,onEdgesChange:U,onNodeDoubleClick:(e,a)=>{console.log("NODE",a),m(a),"message"===a.type&&E("edit"),"interval"===a.type&&f("edit"),"condition"===a.type&&y("edit"),"menu"===a.type&&O("edit"),"img"===a.type&&w("edit"),"audio"===a.type&&j("edit"),"randomizer"===a.type&&T("edit"),"singleBlock"===a.type&&P("edit"),"ticket"===a.type&&D("edit")},onNodeClick:(e,a)=>{q(e=>e.map(e=>e.id===a.id?{...e,style:{backgroundColor:"#9a00ed",padding:1,borderRadius:8}}:{...e,style:{backgroundColor:"#13111C",padding:0,borderRadius:8}}))},onEdgeClick:(e,a)=>{q(e=>e.map(e=>({...e,style:{backgroundColor:"#13111C",padding:0,borderRadius:8}})))},onConnect:H,nodeTypes:Gp,fitView:!0,connectionLineStyle:{stroke:"#2b2b2b",strokeWidth:"6px"},style:{backgroundColor:"#F8F9FA"},edgeTypes:Kp,variant:"cross",defaultEdgeOptions:{style:{color:"#ff0000",strokeWidth:"6px"},animated:!1}},l.a.createElement(Gu.b,null),l.a.createElement(Ku.a,null),l.a.createElement(Yu.a,{variant:"dots",gap:12,size:-1})),l.a.createElement(ql.a,{style:{backgroundColor:"#FAFAFA",height:"20px",width:"58px",position:"absolute",bottom:0,right:0,zIndex:1111}}))),o&&l.a.createElement(ql.a,{justifyContent:"center",alignItems:"center",height:"70vh"},l.a.createElement(za.a,null)))};var Jp=()=>{const[e,a]=Object(n.useState)(!1);return Object(n.useEffect)(()=>{void 0!==localStorage.getItem("cshow")&&a(!0)},[]),l.a.createElement(v.a,null,l.a.createElement(Je,null,l.a.createElement(Ba,null,l.a.createElement(x.Switch,null,l.a.createElement(Sd,{exact:!0,path:"/login",component:ei}),l.a.createElement(Sd,{exact:!0,path:"/signup",component:Yo}),l.a.createElement(Sd,{exact:!0,path:"/forgetpsw",component:lu}),l.a.createElement(Ye,null,l.a.createElement(Jn,null,l.a.createElement(Sd,{exact:!0,path:"/",component:Gl,isPrivate:!0}),l.a.createElement(Sd,{exact:!0,path:"/tickets/:ticketId?",component:zo,isPrivate:!0}),l.a.createElement(Sd,{exact:!0,path:"/connections",component:ji,isPrivate:!0}),l.a.createElement(Sd,{exact:!0,path:"/quick-messages",component:yd,isPrivate:!0}),l.a.createElement(Sd,{exact:!0,path:"/todolist",component:ua,isPrivate:!0}),l.a.createElement(Sd,{exact:!0,path:"/schedules",component:Nd,isPrivate:!0}),l.a.createElement(Sd,{exact:!0,path:"/tags",component:Hs,isPrivate:!0}),l.a.createElement(Sd,{exact:!0,path:"/contacts",component:ys,isPrivate:!0}),l.a.createElement(Sd,{exact:!0,path:"/helps",component:Ks,isPrivate:!0}),l.a.createElement(Sd,{exact:!0,path:"/users",component:Es,isPrivate:!0}),l.a.createElement(Sd,{exact:!0,path:"/files",component:Am,isPrivate:!0}),l.a.createElement(Sd,{exact:!0,path:"/prompts",component:Lm,isPrivate:!0}),l.a.createElement(Sd,{exact:!0,path:"/queue-integration",component:Zm,isPrivate:!0}),l.a.createElement(Sd,{exact:!0,path:"/messages-api",component:Vs,isPrivate:!0}),l.a.createElement(Sd,{exact:!0,path:"/settings",component:cc,isPrivate:!0}),l.a.createElement(Sd,{exact:!0,path:"/kanban",component:Od,isPrivate:!0}),l.a.createElement(Sd,{exact:!0,path:"/financeiro",component:ms,isPrivate:!0}),l.a.createElement(Sd,{exact:!0,path:"/queues",component:Ls,isPrivate:!0}),l.a.createElement(Sd,{exact:!0,path:"/announcements",component:sm,isPrivate:!0}),l.a.createElement(Sd,{exact:!0,path:"/phrase-lists",component:Pu,isPrivate:!0}),l.a.createElement(Sd,{exact:!0,path:"/flowbuilders",component:fu,isPrivate:!0}),l.a.createElement(Sd,{exact:!0,path:"/flowbuilder/:id?",component:Xp,isPrivate:!0}),l.a.createElement(Sd,{exact:!0,path:"/flowdefault",component:ju,isPrivate:!0}),l.a.createElement(Sd,{exact:!0,path:"/subscription",component:vm,isPrivate:!0}),l.a.createElement(Sd,{exact:!0,path:"/chats/:id?",component:fm,isPrivate:!0}),e&&l.a.createElement(l.a.Fragment,null,l.a.createElement(Sd,{exact:!0,path:"/contact-lists",component:nd,isPrivate:!0}),l.a.createElement(Sd,{exact:!0,path:"/contact-lists/:contactListId/contacts",component:ud,isPrivate:!0}),l.a.createElement(Sd,{exact:!0,path:"/campaigns",component:Hd,isPrivate:!0}),l.a.createElement(Sd,{exact:!0,path:"/campaign/:campaignId/report",component:nm,isPrivate:!0}),l.a.createElement(Sd,{exact:!0,path:"/campaigns-config",component:Gd,isPrivate:!0}))))),l.a.createElement(C.a,{autoClose:3e3}))))};const Zp=new c.QueryClient;var $p=()=>{const[e,a]=Object(n.useState)(),t=Object(u.a)("(prefers-color-scheme: dark)"),r=window.localStorage.getItem("preferredTheme"),[o,i]=Object(n.useState)(r||(t?"dark":"light")),g=l.a.useMemo(()=>({toggleColorMode:()=>{i(e=>"light"===e?"dark":"light")}}),[]),E=Object(d.a)({scrollbarStyles:{"&::-webkit-scrollbar":{width:"8px",height:"8px"},"&::-webkit-scrollbar-thumb":{boxShadow:"inset 0 0 6px rgba(0, 0, 0, 0.3)",backgroundColor:"#47A865"}},scrollbarStylesSoft:{"&::-webkit-scrollbar":{width:"8px"},"&::-webkit-scrollbar-thumb":{backgroundColor:"light"===o?"#F3F3F3":"#333333"}},palette:{type:o,primary:{main:"light"===o?"#47A865":"#FFFFFF"},textPrimary:"light"===o?"#47A865":"#FFFFFF",borderPrimary:"light"===o?"#47A865":"#FFFFFF",dark:{main:"light"===o?"#333333":"#F3F3F3"},light:{main:"light"===o?"#F3F3F3":"#333333"},tabHeaderBackground:"light"===o?"#EEE":"#666",optionsBackground:"light"===o?"#fafafa":"#333",options:"light"===o?"#fafafa":"#666",fontecor:"light"===o?"#128c7e":"#fff",fancyBackground:"light"===o?"#fafafa":"#333",bordabox:"light"===o?"#eee":"#333",newmessagebox:"light"===o?"#eee":"#333",inputdigita:"light"===o?"#fff":"#666",contactdrawer:"light"===o?"#fff":"#666",announcements:"light"===o?"#ededed":"#333",login:"light"===o?"#fff":"#1C1C1C",announcementspopover:"light"===o?"#fff":"#666",chatlist:"light"===o?"#eee":"#666",boxlist:"light"===o?"#ededed":"#666",boxchatlist:"light"===o?"#ededed":"#333",total:"light"===o?"#fff":"#222",messageIcons:"light"===o?"grey":"#F3F3F3",inputBackground:"light"===o?"#FFFFFF":"#333",barraSuperior:"light"===o?"linear-gradient(to right, #47A865, #47A865 , #47A865)":"#666",boxticket:"light"===o?"#EEE":"#666",campaigntab:"light"===o?"#ededed":"#666",mediainput:"light"===o?"#ededed":"#1c1c1c"},mode:o},e);return Object(n.useEffect)(()=>{const e=localStorage.getItem("i18nextLng");"ptBR"===e.substring(0,2)+e.substring(3,5)&&a(s.ptBR)},[]),Object(n.useEffect)(()=>{window.localStorage.setItem("preferredTheme",o)},[o]),l.a.createElement(p.Provider,{value:{colorMode:g}},l.a.createElement(m.a,{theme:E},l.a.createElement(c.QueryClientProvider,{client:Zp},l.a.createElement(y.Provider,{value:h},l.a.createElement(Jp,null)))))};o.a.render(l.a.createElement(i.a,null,l.a.createElement($p,null)),document.getElementById("root"))},547:function(e,a,t){e.exports=t.p+"static/media/planilha.549edeba.xlsx"},805:function(e,a,t){},856:function(e,a,t){e.exports=t.p+"static/media/wa-background.2675a051.png"},857:function(e,a,t){e.exports=t.p+"static/media/wa-background-dark.8244f042.png"},863:function(e,a,t){e.exports=t.p+"static/media/sound.9fd5812c.mp3"},866:function(e,a,t){e.exports=t.p+"static/media/chat_notify.2529c259.mp3"},900:function(e){e.exports=JSON.parse('{"name":"frontend","version":"0.1.0","versionSystem":"5.0.0","nomeEmpresa":"Boosfy","private":true,"dependencies":{"@date-io/date-fns":"^2.14.0","@date-io/moment":"^3.0.0","@emotion/styled":"^11.10.6","@floating-ui/utils":"^0.2.4","@material-ui/core":"4.12.3","@material-ui/icons":"^4.9.1","@material-ui/lab":"^4.0.0-alpha.56","@material-ui/pickers":"^3.3.10","@material-ui/styles":"^4.11.5","@mui/icons-material":"^5.14.1","@mui/material":"^5.10.13","@mui/x-date-pickers":"^6.0.1","@testing-library/jest-dom":"^5.11.4","@testing-library/react":"^11.0.4","@testing-library/user-event":"^12.1.7","axios":"^0.21.1","bootstrap":"^5.2.3","chart.js":"^3.9.1","chartjs-plugin-datalabels":"^2.1.0","compressorjs":"^1.2.1","context":"^4.0.0","date-fns":"^2.16.1","emoji-mart":"^3.0.0","formik":"^2.2.0","formik-material-ui":"^3.0.1","gn-api-sdk-node":"^3.0.2","i18next":"^19.8.2","i18next-browser-languagedetector":"^6.0.1","jsonwebtoken":"^9.0.2","markdown-to-jsx":"^7.1.0","material-ui-color":"^1.2.0","mic-recorder-to-mp3":"^2.2.2","moment":"^2.29.1","qrcode.react":"^1.0.0","query-string":"^7.0.0","react":"^17.0.2","react-big-calendar":"^1.8.7","react-bootstrap":"^2.7.0","react-chartjs-2":"^4.3.1","react-color":"^2.19.3","react-copy-to-clipboard":"^5.1.0","react-csv":"^2.2.2","react-currency-format":"^1.1.0","react-dom":"^17.0.2","react-flow-renderer":"^10.3.17","react-icons":"^4.4.0","react-input-mask":"^2.0.4","react-jwt":"^1.2.1","react-modal-image":"^2.5.0","react-number-format":"^4.6.4","react-qr-code":"^2.0.7","react-query":"^3.39.3","react-router-dom":"^5.2.0","react-scripts":"3.4.3","react-text-mask":"^5.5.0","react-toastify":"9.0.0","react-trello":"^2.2.11","reactflow":"^11.7.4","recharts":"^2.0.2","socket.io-client":"^4.7.5","styled-components":"^5.3.5","text-mask-addons":"^3.8.0","use-debounce":"^7.0.0","use-sound":"^2.0.1","uuid":"^8.3.2","vcard-parser":"^1.0.0","yup":"^0.32.8","zustand":"^4.4.1"},"scripts":{"start":"react-scripts start","build":"NODE_OPTIONS=--openssl-legacy-provider GENERATE_SOURCEMAP=false react-scripts build","builddev":"export NODE_OPTIONS=\\"--max-old-space-size=8192\\" && react-scripts build","test":"export NODE_OPTIONS=\\"--max-old-space-size=8192\\" && react-scripts test","eject":"export NODE_OPTIONS=\\"--max-old-space-size=8192\\" && react-scripts eject","start:test":"react-scripts start"},"eslintConfig":{"extends":"react-app"},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]}}')},933:function(e,a,t){e.exports=t.p+"static/media/n8n.5c788b8d.png"},934:function(e,a){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfQAAADICAMAAAApx+PaAAABrVBMVEUAAAB2dnZ1dXV2dnZ2dnZ2dnZ1dXWYmJh2dnZ7e3t1dXV2dnaHh4d2dnZ2dnb/8fF2dnZ1dXV9fX11dXV3d3d1dXV2dnZ4eHh1dXWFhYV1dXV1dXXvbxB8fHx9fX12dnZ1dXV1dXV2dnZ1dXV3d3d1dXV3d3d3d3d3d3d1dXV9fX12dnZ2dnZ2dnZ4eHh4eHh1dXV1dXV2dnZ7e3t2dnZ1dXV3d3eEhIT0lxp3d3fyjRd2dnZ1dXV2dnZ3d3d2dnZ2dnb/jiD0kxl2dnZ2dnZ2dnZ2dnZ3d3d2dnbtbw52dnZ2dnb0lhp1dXV4eHh3d3d2dnZ2dnZ3d3d4eHj1jBv1hRvEmHj1lxr0lRp4eHh8fHzsbg7zlhn0lxryhxbxgxX0lxrtbg/1lxp3d3fucBDvdA/tcA7wehLtbg7tbg70lhrtbg7vcxDxgRPvdxHtbg/tbQ7zlxv0lhr0lxvubg/tbw/zmBv2mBz2mRzwcA94eHjsbg7zlxvtbg7tbg7tbg72lxrubg/ubg7scBDwfRLzlxrtbQ/1lhv0mBr0lxz2lxz1lhzsbQ51dXXzlhptsIrZAAAAjHRSTlMAy7fZp62fA6Af9qYGzvwB0t4R0GqJcRs/C/qVPhQP/e7qm+KOYzE7NuYY88JUKiXxxoEi1btQCPtH3KqleXZgDQretLCSfFxL/oRY6r9AJ+xtNC4dEgT25DMh9vLv49rQhGxBM/v58u7Tua/x6+jgv6yfh1RGQTUoJCDm2cmhk5JzaV/gxZp6YVlRSVahGaQAAAzRSURBVHja7NcxCoJgGADQ72rdodShQLyBCrq4OojwnbkhgggbW37fu8ULAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP6u6pauCs5kajOznYLTuPb50l+DU7iMdb7V4yUo39bkp2YLCjev+W2dg4Ldhjwy3IJCVd0jj931rVD7kr8te1CcJ3tn2pTIEQbgV10dZREWEBAobrkVwQN0PeOxGm9jLjebc3NU5fqQfMhVSaUqqUoqNa+/OUw3dM9MDwuzUM6oPJ8WxIbh6e73mN7dn7++eTVf/wwD7hVv/Lhy04mVQfl2n3D/e3LTDSf/umHA/eCnT2665ZNB+XYvePuHGzP8MOjM3nne+OfFjTle/DMI7Xeb/3ZuzLPzHwy4s7Qv0wbl2z3lnT9Xbl6XlT8Hndk7yLufndz0wsmgM3vnIEdjemBwsObOQY7G9MDgYM3d48/3bvrDytfQG04JBtwO3+30SfrJ92DI0bCKvZQ/cFAGA1bTiENX0JmAMk4K+s+0f9aTKDwZP5YAYDPSIAP3FPnNj97vg/L3PpZlMGQYBQrjB9ugJR/HBhdF6MgYNhiBfnM2hE0moQF5NAr3FFmWv3j6Ya9b+9M35W6kcxIbIVCzjAS/VdI34thi6kFIl+WvdlZ6cf7+t7JsQjolGZCAk0TCsEXSA8gobT8Q6bLcQ2j/8G9ZNiGds7sNDB8Sxq2R/lYcGSl4MNIbof3k9Xb2RjDvLH1phhJ5tOxzYYuleWixiYRVC6Sz4OKaeRl8Pnf+gKQrof01qrenX8qdpOtX8PbhzAVSEsy6tIaI8QWwRHqQ7utZIDwo6UpoN12mybIJ6YzQZhIJIzFesx09uwZrpGdQ4RIepHRZNlW+vSA7uxnpnOgyEvbcoMIi6X5UiD1U6fKbXZdvK09lhnnpIM0gYdMG0lOkeQAPVnrX5dvOt7J56eJXjYmY9dLXSU/mIUvvqnz7kATz3qQ7q6iwMJB+68gCpHzr2HPtXTpMhDstdcn7vOjsUnrseQxehXOivA3GPO5e+v049y0L0PLtRacyrXfpkOJtTzjPNvgVVOQik2RWXOwFiq+WHqqlPA5EDHvG5gzFus8iaWxQmc2Q7u9irsG5MhOyCsNkyDyl2E56MDPqK7gcnqHIYZ1PJa+CdmKSp0LaT0ieA7sgCwihXey59kn6oot/tZPY4LFKuQ85jlSwvfT6ZgI5lWch0HNdVQ21IAFEsMEjZbNBgSlj6eVd5JT8MaC8hQrPNFeFCmlQM4sNfGAXZDWdy7cXtOfau3T+XSQkUbr7CLVc1NpJz6VRS+ElEPhYcVQzNG9eej0VRw3JA6CQd68CgzUX88CJuejUsAuyCC/fTgx6rv2UvkC/HkG6e7yNDFH6sQP1hLdAhSSMVQialR6tosARDe+k8oxHgTMk3jA8RoUy2AVZpF1ndmXnA7m/0s9oK0yQPsNXVCGMlHjNSHqG79sFBxeny9IopSRSnqyZk170oAFjoDCNCgfqni7FA5xx+pltgywglm+859pn6V5etPlU0l82NY7nQgDOs8cuWtF7RelvNUWPTC0CuINTPiSEc9BiCinDc14AZ27GgRQqPbikUCHv5qMcC9KlUyS41o5/DcWuAkOIfLJKSTqWeJf2CgjsNX6wDXIH6MEaWqb1Xbqb6IzopQ9Rkee6sO0XpMc8dHZMSa0BM1RqIQqUK/o4nWMLcY9Lb/GILP+2JZsfCbPz0GSuoJpaKZaXUGbZ/g8t8qjwFtgGuQPkYA05GtNn6fzsxJp+e8+OORA9MWAskteVnFy6OidIqL/O66QmotKcezIKDCliUvo83Wj2JWAEn9CUEBqsosI0NCnGEZGEpCVt6pIG+yB3wVdPaZnWf+kj2OBUzN6jG+k5EDKhM530WIIE+1VQkwuTxU81Z2nqPwEq3MPmpI8h/zNTS9f6IQA4K5q9e4o8crDEjQ22D/ZBNkFfpfOCZ9eoTpe0ccBDNkyd9IDhubpntHRWCZsDDdGSGelBF1mn20Yp6Cxr4rLfXia6d9UlWrG5F9gHa6WXSBosSBdJkVG4dD50KQpathO8dC6QF7tBy4wZ6VsspxcvyxVTIjwqTAAh6iKfbqvVjGEjJO10qt9S6XW+VEXp+c3RJ+mKp7q2P+ekYXFYK93poFNGzz7zUUaFAOgom5H+mKUTGg5RoQYAIYdqVmToBXnJ9rAIhFF69M5GWCp9HhU2DaRLU0vIuZhJsdXLpedZiaylRhMAtkqzQtGQNCGdRSAtIZI6zDCpu+xqSZ6+3LwwFvRXwUZYKj1DQ64oPe9DA4a4dL7YztsceTtudUTjEuhZNiE9bNBBZTXmOjQ4IJljnaSWyqvT7mY+N8S7DhUn2AhLpa8TKV5Bes2BHaTzKRNtEzQuWxX2BQisdS89xkK60XUtM9N4yPzvtyo3DLIMYh3shJXSnQWqUi/9pQspyeHxyNjokkuUzpN3cQnxxRmh/VCBVPfSn7NtQ8ca/+zDrMW0xyrLKssmRmjwtxNWSedL9UgvPeRBwl4OKKEDn5H0rXYrnS3OI9K76Wmle1Eh0+a6Tvl1eFo5XVJiM3K2NWtKdbATFkqXRmiepZd+iULSLa23jell0DNBMwW2F4gx/bRL6axTvAECQ3wMupeXm9Vbin+IeBHg0oYHr6ySzpTsgl56Fdl2ydjXSecHGLZAAyucc6yRlxey90SX0lmpvyaGphIN37zfvtncQQ5VI0w1r/8YbIV10s9oqL7WS5doleYUj1sMGdXp62LEZtn0r2i4TLNoQjoJ00k3cMRbqgG61ddLqjx9gyR6dMcPx8BWWCb9PEkDN+ilF1FcW8G4gXTYJXaLoMVbYnk1eEi0lUBLxIz0KdaFEQsPLKoCiitWU1cg5+S56CHtKtkLq6TXKjQ/DwrSacdmX1i8ovRLFgfU+FUZwb5RBAg6zEinH2dS0k1ZF3kW1J9+blzT6F8iGSCZYHb7Jy2skR6dQUJ4GgTpXhQWRw0NpYeSBvdTVuMkZd9WHb2szIMKadbcXbY9g9s6dZ+2G7hBBkwgoiOkuaE6nCbrHeyFFdKf+x3CuSYqnadZrhwwDh2idP5do2MVOLkEu8nGd+GRCc2ZOXPSr8UjWPVROqyk6eazcEW5whanYDNuR/roIqU8XcukPNgkvgEE3ckZaqWSB0p9IY5tpIdo0efacALFGQhTHaHW/KJRpHAITRaX0Yx0PnFwfxuazE8ioaY9GKAPJew6L8Fm3Ip0YyqHYCg9h5S91SCEss/Shm1YStmBBM9CNgTO7IYHCY6yqn6jnG4FJfCuphxoWnpoCQmFDSVMOKdTLvG86xFSXF5NckEJgs2wTvpSGQTpXAIljBSPX5ROnbqwBdfpmtPldZR4a7TTlCnpMJ9g7zGSZm+zLAHnuvUkcPJIqYLdsEq6Z4t9Z0LvPTaJWirlgCidslpBPaVVULMgzLZYxJx0OPegwCMnqPGIkd9dQMIm2A1LpLuqGa5cXOkQnUU16RwI0hlXPtTiuwItmRKq2YsCkb7evXSInqKW8ILb6DQOFrVtRMI82I3bll4Zqe7XtkGDeD9dCiT5rvzYC6J0jnTgQU6a7SCc4CP1DtNKFSNdSOfUllDFmiBy2mAnP0M6sO34Q+4Xf4Ah0QkVRSe0oaj8OAqMemY0iegqVDeCZMcnv83GC4IaKb8w6ymhwzN7lJfAiInAaTqMF77xl27WylsAgvGQ2ekGZc2bTPufkHieWA4w5eofK8wbPHcO9uPz3+V+8Pvn0HekmATd44RX4+YvGHndQmp7MWirIzCvjfuv3+Re+e2vu/S39Ytou1Nrt88bn34g98KXn9r5P23KThne0w2H4IHzyzc9OP/mF7AtzuMq4jVoqP/f3h20RBWFYQC+kdEiMVpEmy8wsigUgqBFBBG4CLdKbdxK6MpZOJugRBeu7v3PgiPIMIIz9x7xfPo8f+GDmft+973nfJy0WhgftP0cjJt67by5mO/ytaee0Pw+3W8Xt39S9Z09zyctnM3lmc+e3t6PB7LBfh1vtYvZOqv9dq73k5c1G9vNpb/fuq7GV9x3Z2/ULmK011RvrZvY/Pnh9audd0uX+/dnmdLGbTs6bOd1eNQkcNGjnbHhx71PfNutOqZNHzQ0Y+lHw5TxXDEtzzVsT1+udFPW/Z/PiDliWjSZbH/prqx+rufkxnrEjTHtNN1T0KfvTx6vrqy/eLT29cEv4voM/c9x7TGN0kMfVbxzpbdIH9MoOPTdkyQxjWJD/58nplFm6P8S7FzpK/JXY1hUZKvGMFykqsZQRGSqxlBGZKrGUEakqsZQROSqxlBC2Lk+PJGsGkMBka0aw3CRrxrDUJGxGsMwoRoDAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAQue6vJdUy+5+yQAAAABJRU5ErkJggg=="},935:function(e,a,t){e.exports=t.p+"static/media/webhook.e5374d73.png"},936:function(e,a){e.exports="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QCYRXhpZgAASUkqAAgAAAAFABoBBQABAAAASgAAABsBBQABAAAAUgAAACgBAwABAAAAAgAAADEBAgALAAAAWgAAAGmHBAABAAAAZgAAAAAAAABgAAAAAQAAAGAAAAABAAAAUGhvdG9TY2FwZQAAAwABoAMAAQAAAAEAAAACoAQAAQAAAAMBAAADoAQAAQAAAFcAAAAAAAAA/9sAQwACAQEBAQECAQEBAgICAgIEAwICAgIFBAQDBAYFBgYGBQYGBgcJCAYHCQcGBggLCAkKCgoKCgYICwwLCgwJCgoK/9sAQwECAgICAgIFAwMFCgcGBwoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoK/8AAEQgAVwEDAwEiAAIRAQMRAf/EAB8AAAEFAQEBAQEBAAAAAAAAAAABAgMEBQYHCAkKC//EALUQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+v/EAB8BAAMBAQEBAQEBAQEAAAAAAAABAgMEBQYHCAkKC//EALURAAIBAgQEAwQHBQQEAAECdwABAgMRBAUhMQYSQVEHYXETIjKBCBRCkaGxwQkjM1LwFWJy0QoWJDThJfEXGBkaJicoKSo1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoKDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uLj5OXm5+jp6vLz9PX29/j5+v/aAAwDAQACEQMRAD8A/HOrei+H9e8SXo07w7ol3f3BGRBZWzSuf+AqCaqV/Vp/wQH/AGfPhx8F/wDgl18KtY8J+ErC21Txb4eXXNf1OG1UT31xcu8gaWTG59sZSMZPCxgCv9kvHDxfh4PcO0MesL9YqVqns4x5uRL3XJyb5ZPS1rJat7o/Pcty95hVceaySufy5f8AClPjJ/0SbxL/AOCK4/8AiKT/AIUp8ZP+iTeJv/BFcf8AxFf2v+RH/do8iL+7X8tf8Tw5t/0JIf8Ag+X/AMqPb/1ap/8APx/d/wAE/ig/4Up8ZP8Aok3ib/wRXH/xFH/ClPjJ/wBEm8Tf+CK4/wDiK/tf8iL+7R5EX92j/ieHNv8AoSQ/8Hy/+VB/q1T/AOfj+7/gn8UH/ClPjJ/0SbxN/wCCK4/+Io/4Up8ZP+iTeJv/AARXH/xFf2v+RF/do8iL+7R/xPDm3/Qkh/4Pl/8AKg/1ap/8/H93/BP4oP8AhSnxk/6JN4m/8EVx/wDEVS1z4c/ELwxafb/EngTWdPg/57X2mSxJ+bKBX9tnkRf3ap+IPDmg+JNIuNC8Q6Na39ldwtFdWd5brLFNGwwVdGBDAjggjmqh9OLMlNc+SQ5etq7vby/dCfDULaVPw/4J/ENRXu//AAU/+DvhD4Af8FC/jF8H/h/pkdjoeiePb+PSLCEYS1tnkMkcKjsqK4QeyivCK/vjIs2o59kuGzKimoV6cKiT3SnFSSfnZny1Wm6VRwfR2CiiivVICiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAr+vH/gjZ/yiu+An/ZM9M/9FCv5Dq/rx/4I2f8AKK74Cf8AZM9M/wDRQr+I/puf8kllX/X+f/ps+l4b/jz9P1PpeimtIqnBNBlUDPav837n146im+anrR50f94fnSugHUU3zo/7w/Ojzo/7w/OjmQ7MdSP0/GjzFxnNNZg3AouI/ke/4LZ/8pX/AI6/9j3cf+gR18t19Sf8Fs/+Ur/x1/7Hu4/9Ajrif2G/+Cev7TP/AAUT8d6x8OP2YPDenanquhaSNS1GLUtXis1S3Mqxbg0hAY7nUYHPNf7acG5zlXD/AIVZZmGY1o0aFPC4dynN2jFOnBat7atL5n5viKc6uOnCCu3J/meI0V+h0f8Awa8f8Fbn+98MvCS/73ja1/oaJP8Ag14/4K3J934Z+Em/3fG1r/U1y/8AEb/CK/8AyPMN/wCDY/5lf2Zj/wDn0/uPzxor339uz/gml+1d/wAE4tV8OaL+1L4W0zTLjxXb3M2jLputQ3gkSBo1kLGInbgypjPXPtXgVffZLnmUcR5bDMMsrxrUJ35ZwalF2bTs1o7NNeqOSpTqUZuE1ZroFFFFeqQFFFFABRRRQAUUV+gf/BGb/giBpH/BVzwB4y+IOs/tF3PgqLwjrVvYGytfDC3zXfmwmXfva4j8vGMY2tn1r5bjLjLh/gLIp5xnVV08PBxTkoyk7ydlpFN6t9vU3w+Gq4qr7Omrs/PyitDxZoieGvFWp+HEmMg0/UJrYSMuC3luVzjt0rPr6ShWhiKMakNpJNejMWmnYKKKK1EFFFaPhbwj4r8c61H4c8FeGNR1jUZlZorDS7KS4mcKCzEJGCxAAJPHAFZ1a1KhTdSrJRitW27JLu2xpNuyM6itHxT4Q8WeB9XbQPGvhfUdHv0RWey1Sykt5lUjIJSQBgD2OKzqKValiKaqUpKUXqmndP0aBpp2YUUUVoIK/rx/4I25/wCHVvwEx/0TPTf/AEUK/kOr+vH/AII2f8orvgJ/2TPTP/RQr+I/puf8kllX/X+f/ps+l4b/AI8/T9TqP2pdB+LOra5p0vg231KfTltcPFphYlZ9xyzKvP3duCeBg9O/pPwytPFFj8OtMtPFzu+ppaf6SZm3Pu5wGPOWAwCeeQaj+KXxs+EHwU0yPXPjB8UNA8L2crFYbnX9WhtFkYdVUyMNx9hk1503/BSX9gZCVP7YHw749PFNsf8A2ev82cu4TzKrj6uYYanWqKpZWUZSgrdrLf8AI+4xvEWE+oUsDWdOHs23e6UnfvdnkvjDSvi+3iC5Pimx1uS681tzyJKynk/cIG0r6bePSsgeHPGB+7oGpH1/0WT/AAr3D/h5L+wJnj9sD4eD/uaLf/4qgf8ABSP9gZun7YPw8/8ACptv/i6+WxHg3nNarKp/tOrvrCT/AEPqMP4qYChSjBQoaK2kkjxIeFPG2P8AkWtWx6/Y5P8ACmN4Y8Yr18PaoPUm0k/wr3RP+Cjv7A7/AHP2w/h1+Piy1/8Ai67j4UftCfAv46Rzz/Bn4weGvFK2pH2r+wNagujDnpvEbEr+NcNfwfzHCUnVr1K8Yrq4NL73oddLxTw9eXLTpUpPspJv8D5bttM+JEc6jT7DXBKRhPJhm3H2GBmvqj4IR+MIvhnpqeOmnOo7H8z7USZQm9tgfPO7bjOefXmrPxI+Mnwm+D9raX3xX+JmgeGoL+4EFjNr+rw2i3Ev9xDKyhmxzgc1u6fqNjq1lFqWmXkVxbzxrJBPBIHSRCMhlYcEEc5FetkXCM+Hn9Y9rUnGasub4dGr26Nr8Dx884pWewVF0YQcXd8vxbdfI/kl/wCC2f8Aylf+Ov8A2Pdx/wCgR1xH7Dv/AAUH/aZ/4J3eO9Y+I/7MHibT9L1XXdJGm6jLqOkRXivbiVZdoWUEKdyKcjniu3/4LZ/8pX/jr/2Pdx/6BHXy3X+7fBmT5Xn/AIV5ZgMxoxrUamFw6lCaTjJKnBq6ej1SZ+J4ipOljpzg7NSf5n7hf8ERP+C5X/BQb9uD/goP4a/Z3/aC8d6Df+GdT0fVLi7t7Dwxb2srSQWjyx4kjAI+ZRkd66L/AIL7/wDBan9u/wDYL/bds/gJ+zZ4z0LStAPgix1WVb7w5BdzPcTTXKPl5QcLiJMAAd/Wvh//AINiDj/grz4L/wCxc1z/ANN8tdX/AMHXT+Z/wVKgHZfhlpAH/f68NfzHivDbgOP0n6OSRy2isI8E6jpci5HPmkubl2vtqe1HGYr+xXV53zc1r31toeka1+xp/wAFE/8Ag4P/AGSvD/7a3i79qX4e6xdeDYNYsbDwjB4cksbu2uEZHltXaBGRpJFjgdCeMSrnGTX5EyI8TmORSrKcMCMEGv19/wCDST9sUeAv2hvGX7GHifVdun+O9M/tnw3DI/yjU7RMTIo/vSWxLH2tBXx1/wAFk/2KNc/ZW/4KdeNvgl4S8OStp/irXU1nwTaW8R/f2uoyF44Yh32TtLbgesVfpPhvxFjuEfE/N+AcfyU8LSgsRg1GEKcVRlJynFcqSfK5at63hNtnHjKMMRgqeKjdyektb69P68zov2B/+CJPxX/bi/ZQ8Xftl3Xxp8PeAvBXhGa9W4vNfsp5WuY7S2We5mQR8CNA23OeWVhjitb9lj/ggn8fP2uP2B779u74YfFDSJra3tdWksfBcek3M2p38tk8ieRF5YKmSVo8KPVgK/QX/gr9q2j/APBKb/ghL4B/YB8EX8UHiPxrZ2+iao9u2GmVcXmsXA9VkncRH/Zusdq9v/4N1PHmhfC7/giBpHxN8T7v7N8O3XifU9QKAFhDBd3ErkZ77UNfkfEfjf4nQ4GxPF+W10qFbMVQwsHTg70IxqXu3G7dSSir3unFqLR30ctwX1mOHmtVC8nfrp+R+dPwW/4NMf29fiH4Eg8V/Ev4peBPA+oXUIkj8PX1zcXlzDkZ2zNBGYkb2R5MfpXyh/wUK/4JC/tof8E1723vvjz4Mtb3wzf3P2fTvGfhu4a502aUgkRMzIjwyEAkLKi7sHbu2nHSftJ/8F1f+Ck3x7+O978YNA/af8W+C7Aag0uheFvCutSWlhp9uGzHC0UeFuSFwGeUOXOc8EAfs7/wTd/aCb/gvB/wSQ8Z/DD9qLTrK48SKbrwt4i1CC1WNZrtII57PU0jA2xyAyROQuF8yFioVSFH1Wfcc+PvhXTwnEnFdTD4jL6s4RrUqUeWVDn/AJZWTk47XcppvTqpGFLC5XjuajQTU0tG+p/OR8E/gf8AFr9o74naV8G/gf4E1DxJ4m1q48nTdJ02HfJI3UsScBEUZZnYhVUEsQATX6dfD7/g0U/ba8Q+CU1zx58f/h54d1iWAOmhg3d35TEfclmSMKrDuUEg9Ca+k/8Ag1R/ZP0T4Wfs5/FD9r/WPBran4zufEt34b0+CBEM8dpYxRSywQs5AVpriTackA+RHkjBr5z/AGnfhH/wdD/tDfH6++N3/CAfFPwsn9pNPoHh3wr48tbSw0mAN+7hSKG8VJCFwGdwWcgls5xVcV+MvFXEfH2NyHhzNsJlmHwVlKtiXDmrVHvGEZ3XLF3TaV1a7eqQUMuoUcLGrWpym5dF0XmfC/7fP/BMX9rj/gm94ytvDP7SHgaOLT9Sdl0TxTo85uNM1IqMssc21SrgcmORUfHO3GCf1z/4M78H9nP4zg/9Dpp//pG9e+eIfgl+03+3z/wRC8XfC/8A4KS/B59C+K2jeH9Rmtp7tbbfcX9hE09jqSC3ZkiaTCxyBSM5mACq4FeB/wDBneQv7Ovxm9B410//ANJGr894/wDFHMfETwCzjC5p7N4zA4mjTqTovmpVE6i5KkGm1aXLLZ20urXsurCYKGEzSnKF+WSbV91psz5T+E3/AAa8ft7ftKanrfxR8beI/C/w203VNZu7jS9P8TPPLqMsLTOUke3hjIhDAg7XcOM8oK8F/wCChX/BCP8Abn/4J2eE5Pil8QNF0nxV4JhlVLrxX4PuZJ4bIswVPtMUkaSQgsQu/aY8kDfkgHt/+Cnn/Bd79uH49/tV+JYfgV+0J4o8A+BPDmt3Fh4V0rwhq8mntcQQylBdXMkJV5pJdu/axKIGCqOCW/TH/g3x/wCCi/jP/gqJ+zZ8Qv2W/wBss2/i3WfDFlFa32oX9sgOuaNepLHsuFUBXkQxujPgFlkjJywZj9pmnGP0iPDrhrDcX5zLD1cB+79rhYRtOlTnZR9+1+bVJvnklJ7NXtzww+U4us8PTup62l0bP55Php8MviD8ZPHml/C/4V+D7/X/ABDrd2trpWj6XbNLPcyt0VVXnpkk9AASSACa/Tj4Rf8ABpN+3l428HQ+IviX8XvAHg3ULmESJoU9zc3s8BIzsmeGPylYd9jyD3r63/4N1P8Agmz4M/Zy/aJ/aM+MPiOzivrzwB8SdR+H3hHULobntre2ImuJxno8sUtoNw5ADjOGOfzf/wCCgX/BeL9u/wDaR/aW17xT8H/2jPFvgTwTp2szReD9A8J6xJp6paRuVjluDCVaeVwA7eYWUFiqgKBX0mYeJXiT4ncb4jIfD2tSw+HwtOnOriKseduVSKlGEYtSS3a+G94yfMkknjDB4PBYZVcWm3JuyXkcJ/wUP/4Iwfttf8E2rWLxX8ZfClhrPhC4uRBB408K3D3Ngsrfdjm3oklux6DzECseFZjX3H/wbGf8Euvixf8AxM8Gf8FP28d6DH4Us5Nc0seH5Fn+3ySG3ltPMU7PL273J+9nCmvrP/gh7+27qP8AwWR/YX+In7Nv7bFjZ+J9Y8Pxx6N4jvXt0jOr6bexSeRPIqAKlwjQyjegHMcbjDZNfDf/AAQO8W/tF/s/f8FkJf2BLn43+J5fBHhbWfFtjfeFBrEw0y4uLSK5j+0fZt3lhi8SvkDOcGvhOJvEDxJ4o8PeJOFs2nSoZllsW8RKMbwxGGlCXNyKz5ZyvF81krNaRd0dVHC4Oji6Nemm4T27qXn5H1X/AMFjf+DfP9ob/goP+2LrP7VHw3+NngvQ9KuPDlja/wBm60l39pD20JVj+6iZcHjHNfz5yoY5GjIwVODX6zf8HIf7b/7ZPwQ/4KV6x8Mvg3+1R8QfCnh1PCGlSronh3xdd2VqHkhYyN5cMirlj1OOa/Jh3eRzJIxLMcknua/ZPo04DjfDeH+Fr5xi6dXCVKNL6tCMOWVKK5rqcrLmb92zu9n3POziWGeKkqcWpJu77+glFFFf0YeQFf14/wDBG0Z/4JW/AQf9Uz0z/wBFCv5Dq/rx/wCCNn/KK74Cf9kz0z/0UK/iP6bn/JJZV/1/n/6bPpeG/wCPP0/U8E/4LM/8Erv2gv22viRoHxl+BOt6LcTaP4dGl3Ph/VbtreSTE8solikIKHPm4KsUxsByeg+FG/4IN/8ABSlf+aP6S3PbxbY//Ha/fwqCckUFQTX8jcK+O/HPCGSUsqwfspUqd1Hng20m27XUo31b31OPOPDvh/OsfPGVnNTlvyyVr7dUz+f9v+CEX/BSxenwV00/Txdp/wD8epP+HE//AAUr/wCiKad/4V2n/wDx6v6Adq+lIY1Pavo/+JnvEb/n3h//AAXP/wCWHl/8Qm4Z/nqf+BL/AORP5/8A/hxN/wAFLT934J6d/wCFdp//AMer7Q/4I3/8Eof2ov2QPjxf/Hb48alpuj28nh2fTbfQdM1UXMty8skTZnKAxhF8vIAYktt6AHP6YeUnpShVHQV4PE3j5x1xVklbK8VGjGlVVpckGm1ppeUpJbdr9mejlPhxw/k+Phi6Lm5Qd1eStf5JH5t/8FtP+Ca/7U/7Y/xZ8HfEn9n+yttas9O0F9NvtIu9XitfscgnaUTr5zKrCQOFbHI8leCMY+w/2DPgT44/Zn/ZG8D/AAN+I/iGLU9a8P6QYb64t2LRozSvIIUY8ssauIwcDIQHA6V7CUUnJFI6gDIFfBZnxxnebcKYTh6vyfV8NJyhaNpXd/ilfW3M9kvO7R9FhOH8Bgs4rZnT5vaVUk7vTpsvkv0P5Hf+C2f/AClf+Ov/AGPdx/6BHXy3X1J/wWz/AOUr/wAdf+x7uP8A0COvluv9l/DX/k3mUf8AYLh//TUD4/Gf73U/xP8AM/QP/g2K/wCUu/gv/sXNc/8ASCWup/4Ot/8AlKcn/ZM9I/8ARt3XyL/wTp/bj8T/APBOz9qbSP2pPCHgSw8SX2kafe2selaldPDDILiBoWYsgJGAxI9xWn/wU0/4KD+LP+CmH7Sa/tJeM/h1p3he9Xw7a6SdN0y8kniKQNKwk3SAHJ80gj2r81xHBHEkvpF0+KVRX1GOD9k580b+05pO3Lfm2a1tbzO2OJo/2Q6F/e5r28jzr9lT9oLxR+yn+0j4J/aN8Gsx1Dwd4jttSjiV9vnxxuPNgJ/uyRl4z7Oa/qE+On7CnwV/4KGftE/s0/8ABQzR9QtLrTvA5OuREpk6vYT2wutP5wf9Td+VKAezyDqa/lv079nD9oTWfh5b/F3RvgV4xvPCd3LJFbeJ7TwzdSafLIjbHRbhYzGWVgQRuyDwa/o1/Yy+NPxJ/wCCaf8Awb06L8Y/2l4JLXxD4U8EX11oek6plJg1zdTf2RZyK3zBiJrZduMopwR8pr8f+lZh4VsZlObcP4mP9oSnUwXLCSc5RrQlFxaV2uVuUXfZ1OjsehkbtGpTqr3LKWu2n9fgfk7/AMHKv7Ya/tP/APBSDWfAHh3VfP8ADnwqtB4a09Y3yjXqt5l9Jjs3nkwn1Fstfqx/wbyfDrSPi/8A8EMNP+FGvyvHY+J5PFOk3skY+ZYri6uYXI99rmv5rfEniHWfF3iLUPFniPUJbvUdUvZbu/u5my880jl3dj3JZiT7mv6Mv+CHnijxB4I/4N3tV8aeFNUlsdU0fQ/Gt7pt7DjfBcRPdvHIuQRlWUEZ9KX0h+EqfBvgXkeQ4JpOjiaEFLvP2dXmn85tyfqGU4j6xmdSrLqn+aPxF/aT/wCCWn7c37Mvxxv/AIG+Kv2cPF+p3cWotb6PqeheHbm7tNZj3YjmtpIkZZFcFTtzuUnawVgRX7s/8EfP2bdU/wCCM3/BKLxj8Yv2sPL0fW7wXnjHxJpcs677CNLZI7axJBwZ2Ea/KM/vJwnJHPxp8DP+DwL4w+FPANtoPx9/ZC0jxfrttbiNtf0PxW2krdsBgPJbtbThWbgsUYLnOEAwB8hf8FP/APguf+1d/wAFNdLh+HPiXT9P8F+ALe6W5XwfoE8kgu5VJKPdzvhrgrnKqFSMEBtm4Ajs4l4Z8fvF2hhOF+I8BRweCp1ISr14VIy9sofyRUnJX1aTives20lYVGtleAcq9GTlJrRW2P01/wCDU/8AaZ034t/st/Fb9m658TjTvF2n+NLvxDC0O3zVtNRhiTz41fIby7iGQnIIHmRgj5ufk79sb9vX/g5J/Yt+NGo/CP4k/FrxTcwR6k9voHiLTvhvps1jrcW4+VLbypZFWLLgmPO9ScMARX5x/s0ftP8Axx/ZA+L2mfHP9nvx5deH/EelOfKurfDJNE2N8E0bfLLE4ADIwIOAeoBH6y/C/wD4PE/iLpXhSGx+Mn7EOj65rUUQEup+H/GcmnQTsB18iW1uDHnrxI30qeLPCHijhTxBxue5LkWGzjB420pUa3s1OjUS1cJVNFGTu3a972aXKmLD5hRr4SNKpVdOUeqvqvkeQftGftnf8HL3wY/Zhtv2g/2i/G3ibw/4C8SztpTy6n4U0WGdRNGQontxbefbpINyq0irkjHG5d31l/wZ2gN+zn8Z1I4PjXTsj/tzavz5/wCCnP8AwX+/aw/4KQeEJfg4/h7TPAHw9nmSW88MaJcPcTaiyMHQXV04UyqrKGCIka5ALBiARlf8Erf+C2vxS/4JWfDrxf4A+HXwT0HxT/wlurwX813rWoTxfZ2iiMYVViHzA5zkkV28SeFnG3EPgnjMuhkuEweY4itTl7LDclOPs4TTiqkrqLnFOW0mrbWbaFRx2GpZlGbqSlBJ6u71t0M3/gqD/wAEkP2r/wBkH9rHxT4e0P4IeJde8Gaxr1zeeC/EOg6NNe29zZzSs8ULvCrCOdAwjZGwSV3AFWUn9XP+DZr/AIJ6/FL9hr4EfED9qT9qTw7P4P1HxrDbCz0jXF+zz6dpFmssjXFwrYMJkaRjsfDKkIYgbq+Vv2U/+DuD49/C/wADQeC/2mv2dLD4h3Vonl2/iTTfEB0u7lQfd+0IYJkmfGBvXy84yQSST4r/AMFKf+Djn9q39vjwBffBDwT4Qsvhj4G1RDHrOm6TqL3d/qkR6wz3bJH+5PeOONN3KsWUkV5nEPD/ANIvxC4co8D5rgKOHw16ca2LVSMlUhTaaagpcybcVJrlV5L7CbKpVcowlZ4mnJt9I22ufpF/wbz/ALffw8/ai+Ln7T3w4XUYorzxL8XtT8eeH7Kc7ZLrS73y7ZioPJ8sW9vu9PPFfjz/AMFAv+CSn7X/AOxx+0vrnwwT4H+Kdf8AD9zq8zeDPEeh6HPeW+q2bOTDhoVYLMEKh4jhlYHgqVY+BfAL4/8Axf8A2X/i1o/xx+BXjm88PeJtDufOsNSsnwRkYaN1PyyRupKtGwKspIIINfrZ8JP+Dw74paF4Nh0r42fsV6P4i1uGELJq/h/xjJpkNw4GNxt5LW4KE9SRIRnoBXu4nw/8TPCLjjE51wLgoY7CYunThUoTmqc4TpRUYyUpOKa3el/iknFWTM1isHj8MqeJlyyi3Z2vufS//Bu/+xH4w/4Jkfsa/Ef9qX9sSybwXe+K44dU1HTtY/dy6Ro2nwzOklwvWORjNOxjPzKoQEBiVH57/wDBDn4+2/xj/wCDg22+NN/CbVviHrni/UIYHxmNrq1vbtYz9FGPwrz7/gpp/wAF+f2uP+Cj/hOT4QXWk6d4C+H00ySXnhfQLh5pdRKMGQXdy4UzKrAMEVY0yASrFVI+O/gt8Y/iL+z38WNA+N3wl8QyaV4k8M6nFf6RfxqG8qZDkZUghlIyrKeGViDkE118L+DvGub5NxNm/E7hTzPOKUqahF3hRjyNQi2r315U7OVoxWrbZNbMMNTqUadG7hTd79z9Kf8Ag6H/AGcfjnr/APwU7sPFvhf4TeINWsPF3g7Tbfw/c6VpUtyt9cwCRJYI/LU7pV+UlPvbWU4wQa/LXUdOv9I1CfSdVspba6tZmiubeeMo8UikhkZTyCCCCDyCK/Z/wb/weJ+PrLwBDYfEL9hrSdU8URW4WXVdM8bvZ2c0uMeZ9ne0leMd9vmt6ZFfkR8fPizc/Hn43+Lvjde+GNP0Wfxd4jvNYuNK0lXFtayXMzSukYdmYKGc4ya+18B4eJmTZHT4d4lyqOGo4OkoU6qqwn7VqTXwxbcVy216vtey5s0+p1KjrUZ3cndq2xyNFFFf0AeUFf14/wDBGtlP/BK/4CBTnHwz03/0UK/kOr96f+CLv/Bwd+wj8EP2JPBX7Mn7WHjzV/CHiLwRYyacupTeHbq9sr63E8jwGNrNJXUrEyIwdFGUJBINfyN9L7hLiPijg3AyyjCzxEqNZuUacXOSjKDXNyxTbSaSdlpdHv5BiKNDESVSVrrr6n7P0V8Rzf8ABxj/AMEbIHKN+2NCSOpTwTrjD8xZVG//AAcd/wDBGhOv7Yq/h4E14/8AtjX+eX/ENPEb/oTYr/wnrf8AyB9Z9cwf/PyP3o+4KK+HD/wchf8ABGVev7YZ/DwBr5/9sKaP+Dkb/gjGen7YL/8AhvfEH/yBT/4hn4j/APQmxf8A4T1v/kA+uYP/AJ+R+9H3LRXw4P8Ag5C/4Iyt0/bDP4+ANfH/ALYU9f8Ag47/AOCM7dP2xV/HwJrw/wDbGl/xDTxG/wChNi//AAnrf/IB9cwn/PyP3o+4KR+n418Sx/8ABxj/AMEbJWwv7ZEA928E64P52VYXxI/4OWP+CQvgrQJtT0X9onUfE13GhaLStA8F6n50xxkANcQRRD0+Zx1q6Xhh4k1qipwybFXf/UPVX4uFhPG4NLWpH70fgn/wWz/5Sv8Ax1/7Hu4/9Ajr5br0n9sb9oO6/av/AGqfiD+0jdaSbD/hNPFl7qsNgz7mtYZZSYoiw+8Uj2KT3IzXm1f7N8EZdiso4Ny7A4mPLUpUKMJLtKNOMWvk0fneJnGpiJyjs2/zCjOOaKK+nauYn6o/8E1f+DmfXf2Gv2atA/Zc8d/slaX4l0bwtbPBoupaBrx0ydkeR5WNxG8MyyyF3YmRSmc5Kk5J8H/4Ky/8Fu/j3/wVJOmeCNQ8I2vgjwBot4buy8KafqD3T3VztKrPdTlUErKpYIFRFXe3BJyPiaivyjLPBDwyyji2XEuGwCWMcnPmcpySnK7lKMJScVJtt3S0e1junmWMqYdUXL3dg6Cvv79kb/gvb8Qv2TP+Ce+o/wDBP7R/2ddG1nTdR0zWrKTxJc69LDOi6j529hEsZX5PNOBnnb2r4Bor67izgrhrjjA0sHnVD21OnONSKcpRtOKaUrxcXom9HprsYYfE1sLJypuzasFFFFfUpWRgFFFFMAooooAKKKKACiiigAooooAKKKKACiiigAooopMAAxRgdcUUUWQXYUUUU7IAoooosguwwPSiiilZAFFFFMAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/Z"},937:function(e,a,t){e.exports=t.p+"static/media/flowbuilders.bee8364a.png"}},[[1028,1,2]]]);